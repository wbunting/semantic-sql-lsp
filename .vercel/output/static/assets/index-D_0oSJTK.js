import{M as Ht,D as P,b as w,dE as y,dF as an,dG as cn,t as X,bu as rt,bU as Ns,bX as R,dH as ln,dI as Y,dJ as Vs,bS as Ce,dK as hn,dr as Bs,dL as G,_ as v,d as h,cA as te,bR as it,bW as Qi,dM as qi,bG as I,bI as dn,dN as Le,bM as bt,dO as j,dP as ei,bC as jt,dQ as ii,dR as Ut,dS as nt,f as D,cR as Ps,aO as E,l as m,cX as q,d2 as dt,d1 as N,dT as Ji,cN as Ft,cO as B,cx as T,d3 as at,dU as un,dV as Re,dy as Rt,$ as k,dW as ci,dX as z,dY as Ls,dZ as ts,d_ as es,d$ as is,e0 as Rs,bV as Oe,e1 as ge,e2 as fn,e3 as mn,aP as ee,e4 as st,e5 as V,e6 as ot,e7 as fi,aq as si,e8 as gn,e9 as bn,ea as pn,eb as Gt,ec as ss,ed as wn,h as Ot,ee as Os,ef as vn,eg as O,eh as ce,ei as zt,ej as zs,ek as ie,el as Z,em as Hs,en as yn,eo as Cn,ep as Sn,s as p,I as U,cD as W,q as ct,e as mt,eq as In,er as lt,es as En,et as Dn,eu as An,ae as ze,n as se,ev as De,al as Zt,ew as mi,ex as x,ey as Fs,ez as _n,eA as us,cB as Se,i as ni,af as $,aj as kn,ah as Tn,ag as Gs,eB as xn,K as ne,ac as Mn,ad as Nn,eC as ns,eD as Wt,g as Vn,eE as Bn,eF as He,eG as os,au as L,eH as yt,eI as gi,eJ as gt,eK as Ws,eL as fs,eM as Pn,eN as Ln,eO as Rn,eP as Ae,eQ as On,ar as zn,as as _e,at as li,A as Ie,am as _,an as ms,eR as ke,eS as Hn,eT as Fn,eU as bi,eV as gs,eW as Gn,eX as Wn,b4 as Un,eY as bs,eZ as jn,e_ as K,a$ as Kn,a as Us,e$ as Yn,f0 as Zn,cI as Te,f1 as js,f2 as Xn,cU as $n,f3 as Qn,f4 as xe,f5 as qn,f6 as hi,f7 as Jn,f8 as to,f9 as eo,fa as io,fb as so,fc as no,fd as oo,fe as ro,a_ as ao,ff as co,fg as lo,fh as ps,fi as ho,fj as Ks,fk as rs,Q as Ys,fl as pi,fm as uo,fn as fo,fo as as,fp as Me,cV as cs,cW as ls,cY as hs,fq as mo,fr as go,fs as bo,ft as po,fu as wo,U as F,fv as ws,cy as vo,dA as Zs,fw as yo,fx as vs,fy as ys,fz as Co,fA as So,fB as Io,fC as Eo,fD as Do,C as Ao,fE as _o,fF as ko,fG as To,fH as Xs,fI as xo,fJ as Mo,fK as No,fL as Vo,fM as Cs,J as Ct,fN as $s,fO as oe,fP as Qs,fQ as qs,fR as Kt,fS as di,fT as Bo,fU as Po,fV as Ss,fW as Lo,fX as Ro,fY as Oo,fZ as zo,f_ as Ho,a4 as Fo,f$ as Go,g0 as Wo,g1 as Uo,g2 as jo,g3 as Ko,g4 as Yo,g5 as Zo,g6 as Xo,g7 as $o,g8 as Qo,cJ as qo,g9 as Jo,cs as tr,ga as Js,bx as er,gb as ir,gc as sr,gd as nr,ge as or,gf as rr,gg as ar,gh as oi,gi as cr,cp as lr,gj as hr,gk as dr,R as ds,d4 as ur,aa as tn,gl as fr,gm as mr,gn as gr,ab as br,ao as pr,ap as wr,go as vr,gp as yr}from"./monaco-editor-wrapped-CqvvOqZY.js";import{aD as qa,aE as Ja,aB as tc,aH as ec,aF as ic,aw as sc,ax as nc,aC as oc,aG as rc,az as ac,aA as cc}from"./monaco-editor-wrapped-CqvvOqZY.js";import{S as Cr,P as Sr,A as Ir,c as ri,d as Er,e as ae,M as en,C as Dr,f as Ar,h as _r,i as kr,j as Tr,k as xr,l as Ne,m as Is,n as Mr,o as Nr,p as Vr,T as Es,B as Br,g as Pr,E as Lr}from"./viewCommon-CAIi2xoC.js";import{E as Rr}from"./fileCommands._save-B33a3Mqf.js";import"./chunk-D52XG6IA-Db5pw7u4.js";import"./home-VzGMATgR.js";import"./with-props-GiQjMqHo.js";import"./workbenchThemeService.service-BjKJFM4E.js";var Or=".monaco-workbench>.notifications-center{border-radius:4px;bottom:31px;display:none;overflow:hidden;position:absolute;right:8px;z-index:1000}.monaco-workbench.nostatusbar>.notifications-center{bottom:8px}.monaco-workbench>.notifications-center.visible{display:block}.monaco-workbench>.notifications-center>.notifications-center-header{align-items:center;display:flex;height:35px;padding-left:8px;padding-right:5px}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-title{font-size:11px;text-transform:uppercase}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar{flex:1}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .actions-container{justify-content:flex-end}.monaco-workbench>.notifications-center .notifications-list-container .monaco-list-row:not(:last-child)>.notification-list-item{border-bottom:1px solid var(--vscode-notifications-border)}.monaco-workbench>.notifications-center .notifications-list-container .monaco-list-row:last-child{border-radius:0 0 4px 4px}.monaco-workbench>.notifications-center .codicon.codicon-error{color:var(--vscode-notificationsErrorIcon-foreground)!important}.monaco-workbench>.notifications-center .codicon.codicon-warning{color:var(--vscode-notificationsWarningIcon-foreground)!important}.monaco-workbench>.notifications-center .codicon.codicon-info{color:var(--vscode-notificationsInfoIcon-foreground)!important}";Ht(Or,{});var zr=".monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container .action-item,.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .action-item{margin-right:4px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container .action-item:first-child,.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .action-item:first-child{margin-left:4px}";Ht(zr,{});class Hr extends P{constructor(t,e){super(),this.item=t,this.onClose=e,this._onDidClose=this._register(new w),this.onDidClose=this._onDidClose.event,this._onDidChangeVisibility=this._register(new w),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.registerListeners()}registerListeners(){this._register(this.item.onDidChangeVisibility(t=>this._onDidChangeVisibility.fire(t))),X.once(this.item.onDidClose)(()=>{this._onDidClose.fire(),this.dispose()})}get progress(){return this.item.progress}updateSeverity(t){this.item.updateSeverity(t)}updateMessage(t){this.item.updateMessage(t)}updateActions(t){this.item.updateActions(t)}close(){this.onClose(this.item),this.dispose()}}const qe=class qe extends P{constructor(){super(...arguments),this._onDidChangeNotification=this._register(new w),this.onDidChangeNotification=this._onDidChangeNotification.event,this._onDidChangeStatusMessage=this._register(new w),this.onDidChangeStatusMessage=this._onDidChangeStatusMessage.event,this._onDidChangeFilter=this._register(new w),this.onDidChangeFilter=this._onDidChangeFilter.event,this._notifications=[],this.filter={global:y.OFF,sources:new Map}}get notifications(){return this._notifications}get statusMessage(){return this._statusMessage}setFilter(t){let e=!1;typeof t.global=="number"&&(e=this.filter.global!==t.global,this.filter.global=t.global);let i=!1;t.sources&&(i=!cn(this.filter.sources,t.sources),this.filter.sources=t.sources),(e||i)&&this._onDidChangeFilter.fire({global:e?t.global:void 0,sources:i?t.sources:void 0})}addNotification(t){const e=this.createViewItem(t);if(!e)return qe.NO_OP_NOTIFICATION;const i=this.findNotification(e);return i==null||i.close(),this._notifications.splice(0,0,e),this._onDidChangeNotification.fire({item:e,index:0,kind:0}),new Hr(e,s=>this.onClose(s))}onClose(t){const e=this.findNotification(t);e&&e!==t?e.close():t.close()}findNotification(t){return this._notifications.find(e=>e.equals(t))}createViewItem(t){const e=be.create(t,this.filter);if(!e)return;const i=(o,r)=>{const a=this._notifications.indexOf(e);a>=0&&this._onDidChangeNotification.fire({item:e,index:a,kind:o,detail:r})},s=e.onDidChangeExpansion(()=>i(2)),n=e.onDidChangeContent(o=>i(1,o.kind));return X.once(e.onDidClose)(()=>{s.dispose(),n.dispose();const o=this._notifications.indexOf(e);o>=0&&(this._notifications.splice(o,1),this._onDidChangeNotification.fire({item:e,index:o,kind:3}))}),e}showStatusMessage(t,e){const i=Gr.create(t,e);return i?(this._statusMessage=i,this._onDidChangeStatusMessage.fire({kind:0,item:i}),rt(()=>{this._statusMessage===i&&(this._statusMessage=void 0,this._onDidChangeStatusMessage.fire({kind:1,item:i}))})):P.None}};qe.NO_OP_NOTIFICATION=new an;let Ds=qe;function Ve(u){return u instanceof be}class Fr extends P{constructor(){super(),this._onDidChange=this._register(new w),this.onDidChange=this._onDidChange.event,this._state=Object.create(null)}get state(){return this._state}infinite(){this._state.infinite||(this._state.infinite=!0,this._state.total=void 0,this._state.worked=void 0,this._state.done=void 0,this._onDidChange.fire())}done(){this._state.done||(this._state.done=!0,this._state.infinite=void 0,this._state.total=void 0,this._state.worked=void 0,this._onDidChange.fire())}total(t){this._state.total!==t&&(this._state.total=t,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire())}worked(t){typeof this._state.worked=="number"?this._state.worked+=t:this._state.worked=t,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire()}}const ut=class ut extends P{static create(t,e){if(!t||!t.message||Ns(t.message))return;let i;typeof t.severity=="number"?i=t.severity:i=R.Info;const s=ut.parseNotificationMessage(t.message);if(!s)return;let n;t.actions?n=t.actions:ln(t.message)&&(n={primary:t.message.actions});let o=t.priority??Y.DEFAULT;return o===Y.DEFAULT&&i!==R.Error&&(e.global===y.ERROR?o=Y.SILENT:Vs(t.source)&&e.sources.get(t.source.id)===y.ERROR&&(o=Y.SILENT)),new ut(t.id,i,t.sticky,o,s,t.source,t.progress,n)}static parseNotificationMessage(t){let e;if(t instanceof Error?e=Ce(t,!1):typeof t=="string"&&(e=t),!e)return;const i=e;e.length>ut.MAX_MESSAGE_LENGTH&&(e=`${e.substr(0,ut.MAX_MESSAGE_LENGTH)}...`),e=e.replace(/(\r\n|\n|\r)/gm," ").trim();const s=hn(e);return{raw:i,linkedText:s,original:t}}constructor(t,e,i,s,n,o,r,a){super(),this.id=t,this._severity=e,this._sticky=i,this._priority=s,this._message=n,this._source=o,this._visible=!1,this._onDidChangeExpansion=this._register(new w),this.onDidChangeExpansion=this._onDidChangeExpansion.event,this._onDidClose=this._register(new w),this.onDidClose=this._onDidClose.event,this._onDidChangeContent=this._register(new w),this.onDidChangeContent=this._onDidChangeContent.event,this._onDidChangeVisibility=this._register(new w),this.onDidChangeVisibility=this._onDidChangeVisibility.event,r&&this.setProgress(r),this.setActions(a)}setProgress(t){t.infinite?this.progress.infinite():t.total&&(this.progress.total(t.total),t.worked&&this.progress.worked(t.worked))}setActions(t={primary:[],secondary:[]}){this._actions={primary:Array.isArray(t.primary)?t.primary:[],secondary:Array.isArray(t.secondary)?t.secondary:[]},this._expanded=t.primary&&t.primary.length>0}get canCollapse(){return!this.hasActions}get expanded(){return!!this._expanded}get severity(){return this._severity}get sticky(){if(this._sticky)return!0;const t=this.hasActions;return!!(t&&this._severity===R.Error||!t&&this._expanded||this._progress&&!this._progress.state.done)}get priority(){return this._priority}get hasActions(){return!this._actions||!this._actions.primary?!1:this._actions.primary.length>0}get hasProgress(){return!!this._progress}get progress(){return this._progress||(this._progress=this._register(new Fr),this._register(this._progress.onDidChange(()=>this._onDidChangeContent.fire({kind:3})))),this._progress}get message(){return this._message}get source(){return typeof this._source=="string"?this._source:this._source?this._source.label:void 0}get sourceId(){return this._source&&typeof this._source!="string"&&"id"in this._source?this._source.id:void 0}get actions(){return this._actions}get visible(){return this._visible}updateSeverity(t){t!==this._severity&&(this._severity=t,this._onDidChangeContent.fire({kind:0}))}updateMessage(t){const e=ut.parseNotificationMessage(t);!e||e.raw===this._message.raw||(this._message=e,this._onDidChangeContent.fire({kind:1}))}updateActions(t){this.setActions(t),this._onDidChangeContent.fire({kind:2})}updateVisibility(t){this._visible!==t&&(this._visible=t,this._onDidChangeVisibility.fire(t))}expand(){this._expanded||!this.canCollapse||(this._expanded=!0,this._onDidChangeExpansion.fire())}collapse(t){!this._expanded||!this.canCollapse||(this._expanded=!1,t||this._onDidChangeExpansion.fire())}toggle(){this._expanded?this.collapse():this.expand()}close(){this._onDidClose.fire(),this.dispose()}equals(t){if(this.hasProgress||t.hasProgress)return!1;if(typeof this.id=="string"||typeof t.id=="string")return this.id===t.id;if(typeof this._source=="object"){if(this._source.label!==t.source||this._source.id!==t.sourceId)return!1}else if(this._source!==t.source)return!1;if(this._message.raw!==t.message.raw)return!1;const e=this._actions&&this._actions.primary||[],i=t.actions&&t.actions.primary||[];return Bs(e,i,(s,n)=>s.id+s.label===n.id+n.label)}};ut.MAX_MESSAGE_LENGTH=1e3;let be=ut;class Fe extends G{constructor(t,e){super(t,e.label,void 0,!0,async()=>{e.run(),this._onDidRun.fire()}),this._onDidRun=this._register(new w),this.onDidRun=this._onDidRun.event,this._keepOpen=!!e.keepOpen,this._menu=!e.isSecondary&&e.menu?e.menu.map((i,s)=>new Fe(`${t}.${s}`,i)):void 0}get menu(){return this._menu}get keepOpen(){return this._keepOpen}}class Gr{static create(t,e){if(!t||Ns(t))return;let i;if(t instanceof Error?i=Ce(t,!1):typeof t=="string"&&(i=t),!!i)return{message:i,options:e}}}function Ge(u,t,e){return{id:Qi(u.toString()).toString(),silent:e,source:t||"core"}}let wi=class extends P{constructor(t,e){super(),this.telemetryService=t,this.notificationService=e,this.registerListeners()}registerListeners(){this._register(this.notificationService.onDidAddNotification(t=>{const e=t.source&&typeof t.source!="string"?t.source.id:t.source;this.telemetryService.publicLog2("notification:show",Ge(t.message,e,t.priority===Y.SILENT))})),this._register(this.notificationService.onDidRemoveNotification(t=>{const e=t.source&&typeof t.source!="string"?t.source.id:t.source;this.telemetryService.publicLog2("notification:close",Ge(t.message,e,t.priority===Y.SILENT))}))}};wi=v([h(0,te),h(1,it)],wi);const vi="notifications.showList",pe="notifications.hideList",Wr="notifications.toggleList",ui="notifications.hideToasts",As="notifications.focusToasts",Ur="notifications.focusNextToast",jr="notifications.focusPreviousToast",Kr="notifications.focusFirstToast",Yr="notifications.focusLastToast",yi="notification.collapse",Ci="notification.expand",_s="notification.acceptPrimaryAction",Zr="notification.toggle",Si="notification.clear",We="notifications.clearAll",Ue="notifications.toggleDoNotDisturbMode",je="notifications.toggleDoNotDisturbModeBySource";function wt(u,t){if(Ve(t))return t;const e=u.lastFocusedList;if(e instanceof Ji){let i=e.getFocusedElements()[0];if(Ve(i)||e.isDOMFocused()&&(i=e.element(0)),Ve(i))return i}}function Xr(u,t,e){I.registerCommandAndKeybindingRule({id:vi,weight:200,primary:dn(2089,3116),handler:()=>{t.hide(),u.show()}}),I.registerCommandAndKeybindingRule({id:pe,weight:250,when:Le,primary:9,handler:s=>{const n=s.get(te);for(const o of e.notifications)o.visible&&n.publicLog2("notification:hide",Ge(o.message.original,o.sourceId,o.priority===Y.SILENT));u.hide()}}),bt.registerCommand(Wr,()=>{u.isVisible?u.hide():(t.hide(),u.show())}),I.registerCommandAndKeybindingRule({id:Si,weight:200,when:j,primary:20,mac:{primary:2049},handler:(s,n)=>{const o=s.get(ei),r=wt(s.get(jt),n);r&&!r.hasProgress&&(r.close(),o.playSignal(ii.clear))}}),I.registerCommandAndKeybindingRule({id:Ci,weight:200,when:j,primary:17,handler:(s,n)=>{const o=wt(s.get(jt),n);o==null||o.expand()}}),I.registerCommandAndKeybindingRule({id:_s,weight:200,when:Ut.or(j,nt),primary:3103,handler:s=>{var a;const n=s.get(D).createInstance(we),o=wt(s.get(jt))||e.notifications.at(0);if(!o)return;const r=(a=o.actions)!=null&&a.primary?o.actions.primary.at(0):void 0;r&&(n.run(r,o),o.close())}}),I.registerCommandAndKeybindingRule({id:yi,weight:200,when:j,primary:15,handler:(s,n)=>{const o=wt(s.get(jt),n);o==null||o.collapse()}}),I.registerCommandAndKeybindingRule({id:Zr,weight:200,when:j,primary:10,secondary:[3],handler:s=>{const n=wt(s.get(jt));n==null||n.toggle()}}),bt.registerCommand(ui,s=>{const n=s.get(te);for(const o of e.notifications)o.visible&&n.publicLog2("notification:hide",Ge(o.message.original,o.sourceId,o.priority===Y.SILENT));t.hide()}),I.registerKeybindingRule({id:ui,weight:150,when:nt,primary:9}),I.registerKeybindingRule({id:ui,weight:300,when:Ut.and(nt,j),primary:9}),bt.registerCommand(As,()=>t.focus()),I.registerCommandAndKeybindingRule({id:Ur,weight:200,when:Ut.and(j,nt),primary:18,handler:()=>{t.focusNext()}}),I.registerCommandAndKeybindingRule({id:jr,weight:200,when:Ut.and(j,nt),primary:16,handler:()=>{t.focusPrevious()}}),I.registerCommandAndKeybindingRule({id:Kr,weight:200,when:Ut.and(j,nt),primary:11,secondary:[14],handler:()=>{t.focusFirst()}}),I.registerCommandAndKeybindingRule({id:Yr,weight:200,when:Ut.and(j,nt),primary:12,secondary:[13],handler:()=>{t.focusLast()}}),bt.registerCommand(We,()=>u.clearAll()),bt.registerCommand(Ue,s=>{const n=s.get(it);n.setFilter(n.getFilter()===y.ERROR?y.OFF:y.ERROR)}),bt.registerCommand(je,s=>{const n=s.get(it),o=s.get(Ps),r=n.getFilters().sort((l,f)=>l.label.localeCompare(f.label)),a=new E,c=a.add(o.createQuickPick());c.items=r.map(l=>({id:l.id,label:l.label,tooltip:`${l.label} (${l.id})`,filter:l.filter})),c.canSelectMany=!0,c.placeholder=m(3146,"Select sources to enable all notifications from"),c.selectedItems=c.items.filter(l=>l.filter===y.OFF),c.show(),a.add(c.onDidAccept(async()=>{for(const l of c.items)n.setFilter({id:l.id,label:l.label,filter:c.selectedItems.includes(l)?y.OFF:y.ERROR});c.hide()})),a.add(c.onDidHide(()=>a.dispose()))});const i=q(3147,"Notifications");dt.appendMenuItem(N.CommandPalette,{command:{id:vi,title:q(3148,"Show Notifications"),category:i}}),dt.appendMenuItem(N.CommandPalette,{command:{id:pe,title:q(3149,"Hide Notifications"),category:i},when:Le}),dt.appendMenuItem(N.CommandPalette,{command:{id:We,title:q(3150,"Clear All Notifications"),category:i}}),dt.appendMenuItem(N.CommandPalette,{command:{id:_s,title:q(3151,"Accept Notification Primary Action"),category:i}}),dt.appendMenuItem(N.CommandPalette,{command:{id:Ue,title:q(3152,"Toggle Do Not Disturb Mode"),category:i}}),dt.appendMenuItem(N.CommandPalette,{command:{id:je,title:q(3153,"Toggle Do Not Disturb Mode By Source..."),category:i}}),dt.appendMenuItem(N.CommandPalette,{command:{id:As,title:q(3154,"Focus Notification Toast"),category:i},when:nt})}let we=class extends qi{constructor(t,e){super(),this.telemetryService=t,this.notificationService=e}async runAction(t,e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:t.id,from:"message"}),Ve(e)&&this.telemetryService.publicLog2("notification:actionExecuted",{id:Qi(e.message.original.toString()).toString(),actionLabel:t.label,source:e.sourceId||"core",silent:e.priority===Y.SILENT});try{await super.runAction(t,e)}catch(i){this.notificationService.error(i)}}};we=v([h(0,te),h(1,it)],we);var $r=".monaco-workbench .notifications-list-container{background:var(--vscode-notifications-background);color:var(--vscode-notifications-foreground);outline-color:var(--vscode-contrastBorder)}.monaco-workbench .notifications-list-container .notification-list-item{box-sizing:border-box;display:flex;flex-direction:column;flex-direction:column-reverse;height:100%;padding:10px 5px}.monaco-workbench .notifications-list-container .notification-offset-helper{word-wrap:break-word;line-height:22px;opacity:0;position:absolute}.monaco-workbench .notifications-list-container .notification-list-item>.notification-list-item-main-row{display:flex;flex-grow:1}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-icon{align-items:center;background-position:50%;background-repeat:no-repeat;display:flex;flex:0 0 16px;font-size:18px;height:22px;margin-left:4px;margin-right:4px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message{flex:1;line-height:22px;overflow:hidden;text-overflow:ellipsis;user-select:text;-webkit-user-select:text}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message a{color:var(--vscode-notificationLink-foreground)}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message a:focus{outline-color:var(--vscode-focusBorder);outline-style:solid;outline-width:1px}.monaco-workbench .notifications-list-container .notification-list-item.expanded .notification-list-item-message{word-wrap:break-word;white-space:normal}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container{display:none;height:22px}.monaco-workbench .notifications-list-container .monaco-list-row.focused .notification-list-item .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .monaco-list:focus-within .notification-list-item .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .notification-list-item.expanded .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .notification-list-item:hover .notification-list-item-toolbar-container{display:block}.monaco-workbench .notifications-list-container .notification-list-item>.notification-list-item-details-row{align-items:center;display:none;overflow:hidden;padding-left:5px}.monaco-workbench .notifications-list-container .notification-list-item.expanded>.notification-list-item-details-row{display:flex}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-source{flex:1;font-size:12px;overflow:hidden;text-overflow:ellipsis}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container{display:flex;overflow:hidden}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container>.monaco-button,.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container>.monaco-button-dropdown{margin:4px 5px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-button{outline-offset:2px!important}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-text-button{display:inline-block;font-size:12px;overflow:hidden;padding:4px 10px;text-overflow:ellipsis;width:fit-content}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-dropdown-button{padding:5px}.monaco-workbench .notifications-list-container .progress-bit{bottom:0}";Ht($r,{});const Qr=Ft("notifications-clear",B.close,m(7348,"Icon for the clear action in notifications.")),qr=Ft("notifications-clear-all",B.clearAll,m(7349,"Icon for the clear all action in notifications.")),Jr=Ft("notifications-hide",B.chevronDown,m(7350,"Icon for the hide action in notifications.")),ta=Ft("notifications-expand",B.chevronUp,m(7351,"Icon for the expand action in notifications.")),ea=Ft("notifications-collapse",B.chevronDown,m(7352,"Icon for the collapse action in notifications.")),ia=Ft("notifications-configure",B.gear,m(7353,"Icon for the configure action in notifications.")),sn=Ft("notifications-do-not-disturb",B.bellSlash,m(7354,"Icon for the mute all action in notifications."));var St;let le=(St=class extends G{constructor(t,e,i){super(t,e,T.asClassName(Qr)),this.commandService=i}async run(t){this.commandService.executeCommand(Si,t)}},St.ID=Si,St.LABEL=m(7355,"Clear Notification"),St);le=v([h(2,at)],le);var It;let he=(It=class extends G{constructor(t,e,i){super(t,e,T.asClassName(qr)),this.commandService=i}async run(){this.commandService.executeCommand(We)}},It.ID=We,It.LABEL=m(7356,"Clear All Notifications"),It);he=v([h(2,at)],he);var Et;let Ke=(Et=class extends G{constructor(t,e,i){super(t,e,T.asClassName(sn)),this.commandService=i}async run(){this.commandService.executeCommand(Ue)}},Et.ID=Ue,Et.LABEL=m(7357,"Toggle Do Not Disturb Mode"),Et);Ke=v([h(2,at)],Ke);var Dt;let Ye=(Dt=class extends G{constructor(t,e,i){super(t,e),this.commandService=i}async run(){this.commandService.executeCommand(je)}},Dt.ID=je,Dt.LABEL=m(7358,"Toggle Do Not Disturb Mode By Source..."),Dt);Ye=v([h(2,at)],Ye);const Je=class Je extends G{constructor(t,e){super(t,e,T.asClassName(sn))}};Je.ID="workbench.action.configureDoNotDisturbMode",Je.LABEL=m(7359,"Configure Do Not Disturb...");let Xt=Je;var At;let de=(At=class extends G{constructor(t,e,i){super(t,e,T.asClassName(Jr)),this.commandService=i}async run(){this.commandService.executeCommand(pe)}},At.ID=pe,At.LABEL=m(7360,"Hide Notifications"),At);de=v([h(2,at)],de);var _t;let ue=(_t=class extends G{constructor(t,e,i){super(t,e,T.asClassName(ta)),this.commandService=i}async run(t){this.commandService.executeCommand(Ci,t)}},_t.ID=Ci,_t.LABEL=m(7361,"Expand Notification"),_t);ue=v([h(2,at)],ue);var kt;let fe=(kt=class extends G{constructor(t,e,i){super(t,e,T.asClassName(ea)),this.commandService=i}async run(t){this.commandService.executeCommand(yi,t)}},kt.ID=yi,kt.LABEL=m(7362,"Collapse Notification"),kt);fe=v([h(2,at)],fe);const ti=class ti extends G{constructor(t,e,i){super(t,e,T.asClassName(ia)),this.notification=i}};ti.ID="workbench.action.configureNotification",ti.LABEL=m(7363,"More Actions...");let qt=ti;var Tt;let me=(Tt=class extends G{constructor(t,e,i){super(t,e),this.clipboardService=i}run(t){return this.clipboardService.writeText(t.message.raw)}},Tt.ID="workbench.action.copyNotificationMessage",Tt.LABEL=m(7364,"Copy Text"),Tt);me=v([h(2,un)],me);var Ii,tt;const et=class et{constructor(t){this.offsetHelper=this.createOffsetHelper(t)}createOffsetHelper(t){const e=document.createElement("div");return e.classList.add("notification-offset-helper"),t.appendChild(e),e}getHeight(t){if(!t.expanded)return et.ROW_HEIGHT;let e=et.ROW_HEIGHT;const i=this.computePreferredHeight(t);if(et.LINE_HEIGHT<i){const n=i-et.LINE_HEIGHT;e+=n}return(t.source||Re(t.actions&&t.actions.primary))&&(e+=et.ROW_HEIGHT),e===et.ROW_HEIGHT&&t.collapse(!0),e}computePreferredHeight(t){let e=0;t.hasProgress||e++,t.canCollapse&&e++,Re(t.actions&&t.actions.secondary)&&e++,this.offsetHelper.style.width=`${450-(40+e*30-Math.max(e-1,0)*4)}px`;const i=nn.render(t.message);this.offsetHelper.appendChild(i);const s=Math.max(this.offsetHelper.offsetHeight,this.offsetHelper.scrollHeight);return Rt(this.offsetHelper),s}getTemplateId(t){if(t instanceof be)return Ze.TEMPLATE_ID;throw new Error("unknown element type: "+t)}};et.ROW_HEIGHT=42,et.LINE_HEIGHT=22;let Ei=et;class nn{static render(t,e){const i=document.createElement("span");for(const s of t.linkedText.nodes)if(typeof s=="string")i.appendChild(document.createTextNode(s));else{let n=s.title;!n&&s.href.startsWith("command:")?n=m(10776,"Click to execute command '{0}'",s.href.substr(8)):n||(n=s.href);const o=k("a",{href:s.href,title:n,tabIndex:0},s.label);if(e){const r=b=>{wn(b)&&ot.stop(b,!0),e.callback(s.href)},a=e.toDispose.add(new ci(o,z.CLICK)).event,c=e.toDispose.add(new ci(o,z.KEY_DOWN)).event,l=X.chain(c,b=>b.filter(g=>{const C=new Ls(g);return C.equals(10)||C.equals(3)}));e.toDispose.add(ts.addTarget(o));const f=e.toDispose.add(new ci(o,es.Tap)).event;X.any(a,f,l)(r,null,e.toDispose)}i.appendChild(o)}return i}}var xt;let Ze=(xt=class{constructor(t,e,i,s){this.actionRunner=t,this.contextMenuService=e,this.instantiationService=i,this.notificationService=s}get templateId(){return Ii.TEMPLATE_ID}renderTemplate(t){const e=Object.create(null);e.toDispose=new E,e.container=document.createElement("div"),e.container.classList.add("notification-list-item"),e.mainRow=document.createElement("div"),e.mainRow.classList.add("notification-list-item-main-row"),e.icon=document.createElement("div"),e.icon.classList.add("notification-list-item-icon","codicon"),e.message=document.createElement("div"),e.message.classList.add("notification-list-item-message");const i=this,s=document.createElement("div");return s.classList.add("notification-list-item-toolbar-container"),e.toolbar=new is(s,{ariaLabel:m(10777,"Notification Actions"),actionViewItemProvider:(n,o)=>{if(n instanceof qt)return e.toDispose.add(new Rs(n,{getActions(){var c,l,f;const r=[],a={id:n.notification.sourceId,label:n.notification.source};if(Vs(a)){const b=i.notificationService.getFilter(a)===y.ERROR;r.push(Oe({id:a.id,label:b?m(10778,"Turn On All Notifications from '{0}'",a.label):m(10779,"Turn Off Info and Warning Notifications from '{0}'",a.label),run:()=>i.notificationService.setFilter({...a,filter:b?y.OFF:y.ERROR})})),(l=(c=n.notification.actions)==null?void 0:c.secondary)!=null&&l.length&&r.push(new ge)}return Array.isArray((f=n.notification.actions)==null?void 0:f.secondary)&&r.push(...n.notification.actions.secondary),r}},this.contextMenuService,{...o,actionRunner:this.actionRunner,classNames:n.class}))},actionRunner:this.actionRunner}),e.toDispose.add(e.toolbar),e.detailsRow=document.createElement("div"),e.detailsRow.classList.add("notification-list-item-details-row"),e.source=document.createElement("div"),e.source.classList.add("notification-list-item-source"),e.buttonsContainer=document.createElement("div"),e.buttonsContainer.classList.add("notification-list-item-buttons-container"),t.appendChild(e.container),e.container.appendChild(e.detailsRow),e.detailsRow.appendChild(e.source),e.detailsRow.appendChild(e.buttonsContainer),e.container.appendChild(e.mainRow),e.mainRow.appendChild(e.icon),e.mainRow.appendChild(e.message),e.mainRow.appendChild(s),e.progress=new fn(t,mn),e.toDispose.add(e.progress),e.renderer=this.instantiationService.createInstance(Di,e,this.actionRunner),e.toDispose.add(e.renderer),e}renderElement(t,e,i){i.renderer.setInput(t)}disposeTemplate(t){ee(t.toDispose)}},Ii=xt,xt.TEMPLATE_ID="notification",xt);Ze=Ii=v([h(1,st),h(2,D),h(3,it)],Ze);var Mt;let Di=(Mt=class extends P{constructor(t,e,i,s,n,o,r){super(),this.template=t,this.actionRunner=e,this.openerService=i,this.instantiationService=s,this.keybindingService=n,this.contextMenuService=o,this.hoverService=r,this.inputDisposables=this._register(new E),tt.closeNotificationAction||(tt.closeNotificationAction=s.createInstance(le,le.ID,le.LABEL),tt.expandNotificationAction=s.createInstance(ue,ue.ID,ue.LABEL),tt.collapseNotificationAction=s.createInstance(fe,fe.ID,fe.LABEL))}setInput(t){this.inputDisposables.clear(),this.render(t)}render(t){this.template.container.classList.toggle("expanded",t.expanded),this.inputDisposables.add(V(this.template.container,z.MOUSE_UP,n=>{n.button===1&&ot.stop(n,!0)})),this.inputDisposables.add(V(this.template.container,z.AUXCLICK,n=>{!t.hasProgress&&n.button===1&&(ot.stop(n,!0),t.close())})),this.renderSeverity(t);const e=this.inputDisposables.add(this.hoverService.setupManagedHover(fi("mouse"),this.template.message,"")),i=this.renderMessage(t,e);this.renderSecondaryActions(t,i);const s=this.inputDisposables.add(this.hoverService.setupManagedHover(fi("mouse"),this.template.source,""));this.renderSource(t,s),this.renderButtons(t),this.renderProgress(t),this.inputDisposables.add(t.onDidChangeContent(n=>{switch(n.kind){case 0:this.renderSeverity(t);break;case 3:this.renderProgress(t);break;case 1:this.renderMessage(t,e);break}}))}renderSeverity(t){tt.SEVERITIES.forEach(e=>{t.severity!==e&&this.template.icon.classList.remove(...T.asClassNameArray(this.toSeverityIcon(e)))}),this.template.icon.classList.add(...T.asClassNameArray(this.toSeverityIcon(t.severity)))}renderMessage(t,e){Rt(this.template.message),this.template.message.appendChild(nn.render(t.message,{callback:s=>this.openerService.open(si.parse(s),{allowCommands:!0}),toDispose:this.inputDisposables}));const i=t.canCollapse&&!t.expanded&&this.template.message.scrollWidth>this.template.message.clientWidth;return e.update(i?this.template.message.textContent+"":""),i}renderSecondaryActions(t,e){var n;const i=[];if(Re((n=t.actions)==null?void 0:n.secondary)){const o=this.instantiationService.createInstance(qt,qt.ID,qt.LABEL,t);i.push(o),this.inputDisposables.add(o)}let s=!1;t.canCollapse&&(t.expanded||t.source||e)&&(s=!0),s&&i.push(t.expanded?tt.collapseNotificationAction:tt.expandNotificationAction),t.hasProgress||i.push(tt.closeNotificationAction),this.template.toolbar.clear(),this.template.toolbar.context=t,i.forEach(o=>this.template.toolbar.push(o,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(o)}))}renderSource(t,e){t.expanded&&t.source?(this.template.source.textContent=m(10780,"Source: {0}",t.source),e.update(t.source)):(this.template.source.textContent="",e.update(""))}renderButtons(t){Rt(this.template.buttonsContainer);const e=t.actions?t.actions.primary:void 0;if(t.expanded&&Re(e)){const i=this,s=new class extends qi{async runAction(o){i.actionRunner.run(o,t),(!(o instanceof Fe)||!o.keepOpen)&&t.close()}},n=this.inputDisposables.add(new gn(this.template.buttonsContainer));for(let o=0;o<e.length;o++){const r=e[o],a={title:!0,secondary:o>0,...bn},c=r instanceof Fe?r.menu:void 0,l=this.inputDisposables.add(c?n.addButtonWithDropdown({...a,contextMenuProvider:this.contextMenuService,actions:c,actionRunner:s}):n.addButton(a));l.label=r.label,this.inputDisposables.add(l.onDidClick(f=>{f&&ot.stop(f,!0),s.run(r)}))}}}renderProgress(t){if(!t.hasProgress){this.template.progress.stop().hide();return}const e=t.progress.state;e.infinite?this.template.progress.infinite().show():typeof e.total=="number"||typeof e.worked=="number"?(typeof e.total=="number"&&!this.template.progress.hasTotal()&&this.template.progress.total(e.total),typeof e.worked=="number"&&this.template.progress.setWorked(e.worked).show()):this.template.progress.done().hide()}toSeverityIcon(t){switch(t){case R.Warning:return B.warning;case R.Error:return B.error}return B.info}getKeybindingLabel(t){const e=this.keybindingService.lookupKeybinding(t.id);return e?e.getLabel():null}},tt=Mt,Mt.SEVERITIES=[R.Info,R.Warning,R.Error],Mt);Di=tt=v([h(2,pn),h(3,D),h(4,Gt),h(5,st),h(6,ss)],Di);let Xe=class extends P{constructor(t,e,i,s){super(),this.container=t,this.options=e,this.instantiationService=i,this.contextMenuService=s,this.viewModel=[]}show(){this.isVisible||(this.list||this.createNotificationsList(),this.isVisible=!0)}createNotificationsList(){this.listContainer=document.createElement("div"),this.listContainer.classList.add("notifications-list-container");const t=this._register(this.instantiationService.createInstance(we)),e=this.instantiationService.createInstance(Ze,t),i=this.listDelegate=new Ei(this.listContainer),s=this.options,n=this.list=this._register(this.instantiationService.createInstance(Ji,"NotificationsList",this.listContainer,i,[e],{...s,setRowLineHeight:!1,horizontalScrolling:!1,overrideStyles:{listBackground:Os},accessibilityProvider:this.instantiationService.createInstance(Ai,s)})),o=this._register(this.instantiationService.createInstance(me,me.ID,me.LABEL));this._register(n.onContextMenu(a=>{a.element&&this.contextMenuService.showContextMenu({getAnchor:()=>a.anchor,getActions:()=>[o],getActionsContext:()=>a.element,actionRunner:t})})),this._register(n.onMouseDblClick(a=>a.element.toggle()));const r=this._register(vn(n.getHTMLElement()));this._register(r.onDidBlur(()=>{O(this.listContainer).document.hasFocus()&&n.setFocus([])})),j.bindTo(n.contextKeyService),this._register(n.onDidChangeSelection(a=>{a.indexes.length>0&&n.setSelection([])})),this.container.appendChild(this.listContainer)}updateNotificationsList(t,e,i=[]){const[s,n]=ce(this.list,this.listContainer),o=zt(n),r=s.getFocus()[0],a=this.viewModel[r];let c=null;if(typeof r=="number"&&(c=s.getRelativeTop(r)),this.viewModel.splice(t,e,...i),s.splice(t,e,i),s.layout(),this.viewModel.length===0)this.hide();else if(typeof r=="number"){let l=0;if(a){let f=this.viewModel.indexOf(a);f===-1&&(f=r-1),f<this.viewModel.length&&f>=0&&(l=f)}typeof c=="number"&&s.reveal(l,c),s.setFocus([l])}this.isVisible&&o&&s.domFocus()}updateNotificationHeight(t){const e=this.viewModel.indexOf(t);if(e===-1)return;const[i,s]=ce(this.list,this.listDelegate);i.updateElementHeight(e,s.getHeight(t)),i.layout()}hide(){!this.isVisible||!this.list||(this.isVisible=!1,this.list.splice(0,this.viewModel.length),this.viewModel=[])}focusFirst(){this.list&&(this.list.focusFirst(),this.list.domFocus())}hasFocus(){return this.listContainer?zt(this.listContainer):!1}layout(t,e){this.listContainer&&this.list&&(this.listContainer.style.width=`${t}px`,typeof e=="number"&&(this.list.getHTMLElement().style.maxHeight=`${e}px`),this.list.layout())}dispose(){this.hide(),super.dispose()}};Xe=v([h(2,D),h(3,st)],Xe);let Ai=class{constructor(t,e,i){this._options=t,this._keybindingService=e,this._configurationService=i}getAriaLabel(t){var s;let e;const i=(s=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))==null?void 0:s.getAriaLabel();return this._configurationService.getValue("accessibility.verbosity.notification")&&(e=i?m(7341,"Inspect the response in the accessible view with {0}",i):m(7342,"Inspect the response in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding")),t.source?e?m(7345,"{0}, source: {1}, notification, {2}",t.message.raw,t.source,e):m(7346,"{0}, source: {1}, notification",t.message.raw,t.source):e?m(7343,"{0}, notification, {1}",t.message.raw,e):m(7344,"{0}, notification",t.message.raw)}getWidgetAriaLabel(){return this._options.widgetAriaLabel??m(7347,"Notifications List")}getRole(){return"dialog"}};Ai=v([h(1,Gt),h(2,Ot)],Ai);var Yt,ft;let _i=(ft=class extends zs{constructor(t,e,i,s,n,o,r,a,c,l,f){super(i),this.container=t,this.model=e,this.instantiationService=s,this.layoutService=n,this.contextKeyService=o,this.editorGroupService=r,this.keybindingService=a,this.notificationService=c,this.accessibilitySignalService=l,this.contextMenuService=f,this._onDidChangeVisibility=this._register(new w),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.notificationsCenterVisibleContextKey=Le.bindTo(this.contextKeyService),this.notificationsCenterVisibleContextKey=Le.bindTo(o),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t))),this._register(this.layoutService.onDidLayoutMainContainer(t=>this.layout(ie.lift(t)))),this._register(this.notificationService.onDidChangeFilter(()=>this.onDidChangeFilter()))}onDidChangeFilter(){this.notificationService.getFilter()===y.ERROR&&this.hide()}get isVisible(){return!!this._isVisible}show(){if(this._isVisible){const i=Z(this.notificationsList);i.show(),i.focusFirst();return}this.notificationsCenterContainer||this.create(),this.updateTitle();const[t,e]=ce(this.notificationsList,this.notificationsCenterContainer);this._isVisible=!0,e.classList.add("visible"),t.show(),this.layout(this.workbenchDimensions),t.updateNotificationsList(0,0,this.model.notifications),t.focusFirst(),this.updateStyles(),this.model.notifications.forEach(i=>i.updateVisibility(!0)),this.notificationsCenterVisibleContextKey.set(!0),this._onDidChangeVisibility.fire()}updateTitle(){const[t,e]=ce(this.notificationsCenterTitle,this.clearAllAction);this.model.notifications.length===0?(t.textContent=m(3155,"No new notifications"),e.enabled=!1):(t.textContent=m(3156,"Notifications"),e.enabled=this.model.notifications.some(i=>!i.hasProgress))}create(){this.notificationsCenterContainer=document.createElement("div"),this.notificationsCenterContainer.classList.add("notifications-center"),this.notificationsCenterHeader=document.createElement("div"),this.notificationsCenterHeader.classList.add("notifications-center-header"),this.notificationsCenterContainer.appendChild(this.notificationsCenterHeader),this.notificationsCenterTitle=document.createElement("span"),this.notificationsCenterTitle.classList.add("notifications-center-header-title"),this.notificationsCenterHeader.appendChild(this.notificationsCenterTitle);const t=document.createElement("div");t.classList.add("notifications-center-header-toolbar"),this.notificationsCenterHeader.appendChild(t);const e=this._register(this.instantiationService.createInstance(we)),i=this,s=this._register(new is(t,{ariaLabel:m(3157,"Notification Center Actions"),actionRunner:e,actionViewItemProvider:(o,r)=>{if(o.id===Xt.ID)return this._register(this.instantiationService.createInstance(Rs,o,{getActions(){const a=[Oe({id:Ke.ID,label:i.notificationService.getFilter()===y.OFF?m(3158,"Enable Do Not Disturb Mode"):m(3159,"Disable Do Not Disturb Mode"),run:()=>i.notificationService.setFilter(i.notificationService.getFilter()===y.OFF?y.ERROR:y.OFF)})],c=i.notificationService.getFilters().sort((l,f)=>l.label.localeCompare(f.label));for(const l of c.slice(0,Yt.MAX_NOTIFICATION_SOURCES))a.length===1&&a.push(new ge),a.push(Oe({id:`${Ke.ID}.${l.id}`,label:l.label,checked:l.filter!==y.ERROR,run:()=>i.notificationService.setFilter({...l,filter:l.filter===y.ERROR?y.OFF:y.ERROR})}));return c.length>Yt.MAX_NOTIFICATION_SOURCES&&(a.push(new ge),a.push(i._register(i.instantiationService.createInstance(Ye,Ye.ID,m(3160,"Moreâ€¦"))))),a}},this.contextMenuService,{...r,actionRunner:e,classNames:o.class,keybindingProvider:a=>this.keybindingService.lookupKeybinding(a.id)}))}}));this.clearAllAction=this._register(this.instantiationService.createInstance(he,he.ID,he.LABEL)),s.push(this.clearAllAction,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(this.clearAllAction)}),this.configureDoNotDisturbAction=this._register(this.instantiationService.createInstance(Xt,Xt.ID,Xt.LABEL)),s.push(this.configureDoNotDisturbAction,{icon:!0,label:!1});const n=this._register(this.instantiationService.createInstance(de,de.ID,de.LABEL));s.push(n,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(n)}),this.notificationsList=this.instantiationService.createInstance(Xe,this.notificationsCenterContainer,{widgetAriaLabel:m(3161,"Notifications Center")}),this.container.appendChild(this.notificationsCenterContainer)}getKeybindingLabel(t){const e=this.keybindingService.lookupKeybinding(t.id);return e?e.getLabel():null}onDidChangeNotification(t){if(!this._isVisible)return;let e=!1;const[i,s]=ce(this.notificationsList,this.notificationsCenterContainer);switch(t.kind){case 0:i.updateNotificationsList(t.index,0,[t.item]),t.item.updateVisibility(!0);break;case 1:switch(t.detail){case 2:i.updateNotificationsList(t.index,1,[t.item]);break;case 1:t.item.expanded&&i.updateNotificationHeight(t.item);break}break;case 2:i.updateNotificationsList(t.index,1,[t.item]);break;case 3:e=zt(s),i.updateNotificationsList(t.index,1),t.item.updateVisibility(!1);break}this.updateTitle(),this.model.notifications.length===0&&(this.hide(),e&&this.editorGroupService.activeGroup.focus())}hide(){if(!this._isVisible||!this.notificationsCenterContainer||!this.notificationsList)return;const t=zt(this.notificationsCenterContainer);this._isVisible=!1,this.notificationsCenterContainer.classList.remove("visible"),this.notificationsList.hide(),this.model.notifications.forEach(e=>e.updateVisibility(!1)),this.notificationsCenterVisibleContextKey.set(!1),this._onDidChangeVisibility.fire(),t&&this.editorGroupService.activeGroup.focus()}updateStyles(){if(this.notificationsCenterContainer&&this.notificationsCenterHeader){const t=this.getColor(Hs);this.notificationsCenterContainer.style.boxShadow=t?`0 0 8px 2px ${t}`:"";const e=this.getColor(yn);this.notificationsCenterContainer.style.border=e?`1px solid ${e}`:"";const i=this.getColor(Cn);this.notificationsCenterHeader.style.color=i??"";const s=this.getColor(Sn);this.notificationsCenterHeader.style.background=s??""}}layout(t){if(this.workbenchDimensions=t,this._isVisible&&this.notificationsCenterContainer){const e=Yt.MAX_DIMENSIONS.width,i=Yt.MAX_DIMENSIONS.height;let s=e,n=i;this.workbenchDimensions&&(s=this.workbenchDimensions.width,s-=2*8,n=this.workbenchDimensions.height-35,this.layoutService.isVisible("workbench.parts.statusbar",p)&&(n-=22),this.layoutService.isVisible("workbench.parts.titlebar",p)&&(n-=22),n-=2*12),Z(this.notificationsList).layout(Math.min(e,s),Math.min(i,n))}}clearAll(){this.hide();for(const t of[...this.model.notifications])t.hasProgress||t.close(),this.accessibilitySignalService.playSignal(ii.clear)}},Yt=ft,ft.MAX_DIMENSIONS=new ie(450,400),ft.MAX_NOTIFICATION_SOURCES=10,ft);_i=Yt=v([h(2,U),h(3,D),h(4,W),h(5,ct),h(6,mt),h(7,Gt),h(8,it),h(9,ei),h(10,st)],_i);class sa extends P{constructor(t){super(),this.model=t;for(const e of t.notifications)this.triggerAriaAlert(e);this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t)))}onDidChangeNotification(t){t.kind===0&&(this.triggerAriaAlert(t.item),t.item.severity===R.Error&&(t.item.message.original instanceof Error?console.error(t.item.message.original):console.error(Ce(t.item.message.linkedText.toString(),!0))))}triggerAriaAlert(t){if(t.priority===Y.SILENT)return;const e=t.onDidChangeContent(i=>{i.kind===1&&this.doTriggerAriaAlert(t)});X.once(t.onDidClose)(()=>e.dispose()),this.doTriggerAriaAlert(t)}doTriggerAriaAlert(t){let e;t.severity===R.Error?e=m(3162,"Error: {0}",t.message.linkedText.toString()):t.severity===R.Warning?e=m(3163,"Warning: {0}",t.message.linkedText.toString()):e=m(3164,"Info: {0}",t.message.linkedText.toString()),In(e)}}let ki=class extends P{constructor(t,e,i){super(),this.model=t,this.statusbarService=e,this.notificationService=i,this.newNotificationsCount=0,this.isNotificationsCenterVisible=!1,this.isNotificationsToastsVisible=!1,this.updateNotificationsCenterStatusItem(),t.statusMessage&&this.doSetStatusMessage(t.statusMessage),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t))),this._register(this.model.onDidChangeStatusMessage(t=>this.onDidChangeStatusMessage(t))),this._register(this.notificationService.onDidChangeFilter(()=>this.updateNotificationsCenterStatusItem()))}onDidChangeNotification(t){this.isNotificationsCenterVisible||(t.kind===0?this.newNotificationsCount++:t.kind===3&&this.newNotificationsCount>0&&this.newNotificationsCount--),this.updateNotificationsCenterStatusItem()}updateNotificationsCenterStatusItem(){let t=0;if(!this.isNotificationsCenterVisible&&!this.isNotificationsToastsVisible)for(const i of this.model.notifications)i.hasProgress&&t++;let e={name:m(3165,"Notifications"),text:`${t>0||this.newNotificationsCount>0?"$(bell-dot)":"$(bell)"}`,ariaLabel:m(3165,"Notifications"),command:this.isNotificationsCenterVisible?pe:vi,tooltip:this.getTooltip(t),showBeak:this.isNotificationsCenterVisible};this.notificationService.getFilter()===y.ERROR&&(e={...e,text:`${t>0||this.newNotificationsCount>0?"$(bell-slash-dot)":"$(bell-slash)"}`,ariaLabel:m(3166,"Do Not Disturb"),tooltip:m(3167,"Do Not Disturb Mode is Enabled")}),this.notificationsCenterStatusItem?this.notificationsCenterStatusItem.update(e):this.notificationsCenterStatusItem=this.statusbarService.addEntry(e,"status.notifications",1,-Number.MAX_VALUE)}getTooltip(t){return this.isNotificationsCenterVisible?m(3168,"Hide Notifications"):this.model.notifications.length===0?m(3169,"No Notifications"):t===0?this.newNotificationsCount===0?m(3170,"No New Notifications"):this.newNotificationsCount===1?m(3171,"1 New Notification"):m(3172,"{0} New Notifications",this.newNotificationsCount):this.newNotificationsCount===0?m(3173,"No New Notifications ({0} in progress)",t):this.newNotificationsCount===1?m(3174,"1 New Notification ({0} in progress)",t):m(3175,"{0} New Notifications ({1} in progress)",this.newNotificationsCount,t)}update(t,e){let i=!1;this.isNotificationsCenterVisible!==t&&(this.isNotificationsCenterVisible=t,this.newNotificationsCount=0,i=!0),this.isNotificationsToastsVisible!==e&&(this.isNotificationsToastsVisible=e,i=!0),i&&this.updateNotificationsCenterStatusItem()}onDidChangeStatusMessage(t){const e=t.item;switch(t.kind){case 0:this.doSetStatusMessage(e);break;case 1:this.currentStatusMessage&&this.currentStatusMessage[0]===e&&(ee(this.currentStatusMessage[1]),this.currentStatusMessage=void 0);break}}doSetStatusMessage(t){const e=t.message,i=t.options&&typeof t.options.showAfter=="number"?t.options.showAfter:0,s=t.options&&typeof t.options.hideAfter=="number"?t.options.hideAfter:-1;this.currentStatusMessage&&ee(this.currentStatusMessage[1]);let n,o=setTimeout(()=>{n=this.statusbarService.addEntry({name:m(3176,"Status Message"),text:e,ariaLabel:e},"status.message",0,-Number.MAX_VALUE),o=null},i),r;const a={dispose:()=>{o&&clearTimeout(o),r&&clearTimeout(r),n==null||n.dispose()}};s>0&&(r=setTimeout(()=>a.dispose(),s)),this.currentStatusMessage=[t,a]}};ki=v([h(1,lt),h(2,it)],ki);var na=".monaco-workbench>.notifications-toasts{bottom:26px;display:none;overflow:hidden;position:absolute;right:3px;z-index:1000}.monaco-workbench.nostatusbar>.notifications-toasts{bottom:3px}.monaco-workbench>.notifications-toasts.visible{display:flex;flex-direction:column}.monaco-workbench>.notifications-toasts .notification-toast-container{overflow:hidden}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast{margin:8px;opacity:0;transform:translate3d(0,100%,0);transition:transform .3s ease-out,opacity .3s ease-out}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast,.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast .monaco-list-row,.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast .monaco-list:not(.element-focused):focus:before,.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast .monaco-scrollable-element,.monaco-workbench>.notifications-toasts .notifications-list-container{border-radius:4px}.monaco-workbench.reduce-motion>.notifications-toasts .notification-toast-container>.notification-toast{transition:transform 0ms ease-out,opacity 0ms ease-out}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast.notification-fade-in{opacity:1;transform:none}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast.notification-fade-in-done{opacity:1;transform:none;transition:none}.monaco-workbench>.notifications-toasts .codicon.codicon-error{color:var(--vscode-notificationsErrorIcon-foreground)!important}.monaco-workbench>.notifications-toasts .codicon.codicon-warning{color:var(--vscode-notificationsWarningIcon-foreground)!important}.monaco-workbench>.notifications-toasts .codicon.codicon-info{color:var(--vscode-notificationsInfoIcon-foreground)!important}";Ht(na,{});var pt,Q;(function(u){u[u.HIDDEN_OR_VISIBLE=0]="HIDDEN_OR_VISIBLE",u[u.HIDDEN=1]="HIDDEN",u[u.VISIBLE=2]="VISIBLE"})(Q||(Q={}));var J;let Ti=(J=class extends zs{get isVisible(){return!!this._isVisible}constructor(t,e,i,s,n,o,r,a,c){super(n),this.container=t,this.model=e,this.instantiationService=i,this.layoutService=s,this.editorGroupService=o,this.contextKeyService=r,this.lifecycleService=a,this.hostService=c,this._onDidChangeVisibility=this._register(new w),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._isVisible=!1,this.mapNotificationToToast=new Map,this.mapNotificationToDisposable=new Map,this.notificationsToastsVisibleContextKey=nt.bindTo(this.contextKeyService),this.addedToastsIntervalCounter=new En(pt.SPAM_PROTECTION.interval),this.registerListeners()}registerListeners(){this._register(this.layoutService.onDidLayoutMainContainer(t=>this.layout(ie.lift(t)))),this.lifecycleService.when(3).then(()=>{this.model.notifications.forEach(t=>this.addToast(t)),this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t)))}),this._register(this.model.onDidChangeFilter(({global:t,sources:e})=>{if(t===y.ERROR)this.hide();else if(e)for(const[i]of this.mapNotificationToToast)typeof i.sourceId=="string"&&e.get(i.sourceId)===y.ERROR&&i.severity!==R.Error&&i.priority!==Y.URGENT&&this.removeToast(i)}))}onDidChangeNotification(t){switch(t.kind){case 0:return this.addToast(t.item);case 3:return this.removeToast(t.item)}}addToast(t){if(this.isNotificationsCenterVisible||t.priority===Y.SILENT||this.addedToastsIntervalCounter.increment()>pt.SPAM_PROTECTION.limit)return;const e=new E;this.mapNotificationToDisposable.set(t,e),e.add(Dn(O(this.container),()=>this.doAddToast(t,e)))}doAddToast(t,e){let i=this.notificationsToastsContainer;i||(i=this.notificationsToastsContainer=document.createElement("div"),i.classList.add("notifications-toasts"),this.container.appendChild(i)),i.classList.add("visible");const s=document.createElement("div");s.classList.add("notification-toast-container");const n=i.firstChild;n?i.insertBefore(s,n):i.appendChild(s);const o=document.createElement("div");o.classList.add("notification-toast"),s.appendChild(o);const r=this.instantiationService.createInstance(Xe,o,{verticalScrollMode:2,widgetAriaLabel:t.source?m(3144,"{0}, source: {1}, notification",t.message.raw,t.source):m(3143,"{0}, notification",t.message.raw)});e.add(r);const a={item:t,list:r,container:s,toast:o};this.mapNotificationToToast.set(t,a),e.add(rt(()=>this.updateToastVisibility(a,!1))),r.show();const c=this.computeMaxDimensions();this.layoutLists(c.width),r.updateNotificationsList(0,0,[t]),this.layoutContainer(c.height),e.add(t.onDidChangeExpansion(()=>{r.updateNotificationsList(0,1,[t])})),e.add(t.onDidChangeContent(l=>{switch(l.kind){case 2:r.updateNotificationsList(0,1,[t]);break;case 1:t.expanded&&r.updateNotificationHeight(t);break}})),X.once(t.onDidClose)(()=>{this.removeToast(t)}),this.purgeNotification(t,s,r,e),this.updateStyles(),this.notificationsToastsVisibleContextKey.set(!0),o.classList.add("notification-fade-in"),e.add(V(o,"transitionend",()=>{o.classList.remove("notification-fade-in"),o.classList.add("notification-fade-in-done")})),t.updateVisibility(!0),this._isVisible||(this._isVisible=!0,this._onDidChangeVisibility.fire())}purgeNotification(t,e,i,s){let n=!1;s.add(V(e,z.MOUSE_OVER,()=>n=!0)),s.add(V(e,z.MOUSE_OUT,()=>n=!1));let o,r;const a=()=>{o=setTimeout(()=>{this.hostService.hasFocus?t.sticky||i.hasFocus()||n?a():this.removeToast(t):r||(r=this.hostService.onDidChangeFocus(c=>{c&&a()}),s.add(r))},pt.PURGE_TIMEOUT[t.severity])};a(),s.add(rt(()=>clearTimeout(o)))}removeToast(t){let e=!1;const i=this.mapNotificationToToast.get(t);i&&(zt(i.container)&&(e=!(this.focusNext()||this.focusPrevious())),this.mapNotificationToToast.delete(t));const s=this.mapNotificationToDisposable.get(t);s&&(ee(s),this.mapNotificationToDisposable.delete(t)),this.mapNotificationToToast.size>0?this.layout(this.workbenchDimensions):(this.doHide(),e&&this.editorGroupService.activeGroup.focus())}removeToasts(){this.mapNotificationToToast.clear(),this.mapNotificationToDisposable.forEach(t=>ee(t)),this.mapNotificationToDisposable.clear(),this.doHide()}doHide(){var t;(t=this.notificationsToastsContainer)==null||t.classList.remove("visible"),this.notificationsToastsVisibleContextKey.set(!1),this._isVisible&&(this._isVisible=!1,this._onDidChangeVisibility.fire())}hide(){const t=this.notificationsToastsContainer?zt(this.notificationsToastsContainer):!1;this.removeToasts(),t&&this.editorGroupService.activeGroup.focus()}focus(){const t=this.getToasts(Q.VISIBLE);return t.length>0?(t[0].list.focusFirst(),!0):!1}focusNext(){const t=this.getToasts(Q.VISIBLE);for(let e=0;e<t.length;e++)if(t[e].list.hasFocus()){const s=t[e+1];if(s)return s.list.focusFirst(),!0;break}return!1}focusPrevious(){const t=this.getToasts(Q.VISIBLE);for(let e=0;e<t.length;e++)if(t[e].list.hasFocus()){const s=t[e-1];if(s)return s.list.focusFirst(),!0;break}return!1}focusFirst(){const t=this.getToasts(Q.VISIBLE)[0];return t?(t.list.focusFirst(),!0):!1}focusLast(){const t=this.getToasts(Q.VISIBLE);return t.length>0?(t[t.length-1].list.focusFirst(),!0):!1}update(t){this.isNotificationsCenterVisible!==t&&(this.isNotificationsCenterVisible=t,this.isNotificationsCenterVisible&&this.removeToasts())}updateStyles(){this.mapNotificationToToast.forEach(({toast:t})=>{const e=this.getColor(Os);t.style.background=e||"";const i=this.getColor(Hs);t.style.boxShadow=i?`0 0 8px 2px ${i}`:"";const s=this.getColor(An);t.style.border=s?`1px solid ${s}`:""})}getToasts(t){const e=[];return this.mapNotificationToToast.forEach(i=>{switch(t){case Q.HIDDEN_OR_VISIBLE:e.push(i);break;case Q.HIDDEN:this.isToastInDOM(i)||e.push(i);break;case Q.VISIBLE:this.isToastInDOM(i)&&e.push(i);break}}),e.reverse()}layout(t){this.workbenchDimensions=t;const e=this.computeMaxDimensions();e.height&&this.layoutContainer(e.height),this.layoutLists(e.width)}computeMaxDimensions(){const t=pt.MAX_WIDTH;let e=t,i;return this.workbenchDimensions&&(e=this.workbenchDimensions.width,e-=2*8,i=this.workbenchDimensions.height,this.layoutService.isVisible("workbench.parts.statusbar",p)&&(i-=22),this.layoutService.isVisible("workbench.parts.titlebar",p)&&(i-=22),i-=2*12),i=typeof i=="number"?Math.round(i*.618):0,new ie(Math.min(t,e),i)}layoutLists(t){this.mapNotificationToToast.forEach(({list:e})=>e.layout(t))}layoutContainer(t){let e=0;for(const i of this.getToasts(Q.HIDDEN_OR_VISIBLE)){i.container.style.opacity="0",this.updateToastVisibility(i,!0),t-=i.container.offsetHeight;let s=!1;e===pt.MAX_NOTIFICATIONS?s=!1:t>=0&&(s=!0),this.updateToastVisibility(i,s),i.container.style.opacity="",s&&e++}}updateToastVisibility(t,e){if(this.isToastInDOM(t)===e)return;const i=Z(this.notificationsToastsContainer);e?i.appendChild(t.container):t.container.remove(),t.item.updateVisibility(e)}isToastInDOM(t){return!!t.container.parentElement}},pt=J,J.MAX_WIDTH=450,J.MAX_NOTIFICATIONS=3,J.PURGE_TIMEOUT={[R.Info]:15e3,[R.Warning]:18e3,[R.Error]:2e4},J.SPAM_PROTECTION={interval:800,limit:J.MAX_NOTIFICATIONS},J);Ti=pt=v([h(2,D),h(3,W),h(4,U),h(5,mt),h(6,ct),h(7,ze),h(8,se)],Ti);var S;(function(u){u.SIDEBAR_HIDDEN="nosidebar",u.MAIN_EDITOR_AREA_HIDDEN="nomaineditorarea",u.PANEL_HIDDEN="nopanel",u.AUXILIARYBAR_HIDDEN="noauxiliarybar",u.STATUSBAR_HIDDEN="nostatusbar",u.FULLSCREEN="fullscreen",u.MAXIMIZED="maximized",u.WINDOW_BORDER="border"})(S||(S={}));const oa=["workbench.activityBar.location","window.commandCenter","workbench.editor.editorActionsLocation","workbench.layoutControl.enabled","window.menuBarVisibility","window.titleBarStyle","window.customTitleBarVisibility"];class ra extends P{get activeContainer(){return this.getContainerFromDocument(Fs())}get containers(){const t=[];for(const{window:e}of _n())t.push(this.getContainerFromDocument(e.document));return t}getContainerFromDocument(t){return t===this.mainContainer.ownerDocument?this.mainContainer:t.body.getElementsByClassName("monaco-workbench")[0]}whenContainerStylesLoaded(t){return this.containerStylesLoaded.get(t.vscodeWindowId)}get mainContainerDimension(){return this._mainContainerDimension}get activeContainerDimension(){return this.getContainerDimension(this.activeContainer)}getContainerDimension(t){return t===this.mainContainer?this.mainContainerDimension:mi(t)}get mainContainerOffset(){return this.computeContainerOffset(p)}get activeContainerOffset(){return this.computeContainerOffset(O(this.activeContainer))}computeContainerOffset(t){let e=0,i=0;this.isVisible("workbench.parts.banner")&&(e=this.getPart("workbench.parts.banner").maximumHeight,i=e);const s=this.isVisible("workbench.parts.titlebar",t);return s&&(e+=this.getPart("workbench.parts.titlebar").maximumHeight,i=e),s&&this.configurationService.getValue("window.commandCenter")!==!1&&(i=6),{top:e,quickPickTop:i}}constructor(t){super(),this.parent=t,this._onDidChangeZenMode=this._register(new w),this.onDidChangeZenMode=this._onDidChangeZenMode.event,this._onDidChangeMainEditorCenteredLayout=this._register(new w),this.onDidChangeMainEditorCenteredLayout=this._onDidChangeMainEditorCenteredLayout.event,this._onDidChangePanelAlignment=this._register(new w),this.onDidChangePanelAlignment=this._onDidChangePanelAlignment.event,this._onDidChangeWindowMaximized=this._register(new w),this.onDidChangeWindowMaximized=this._onDidChangeWindowMaximized.event,this._onDidChangePanelPosition=this._register(new w),this.onDidChangePanelPosition=this._onDidChangePanelPosition.event,this._onDidChangePartVisibility=this._register(new w),this.onDidChangePartVisibility=this._onDidChangePartVisibility.event,this._onDidChangeNotificationsVisibility=this._register(new w),this.onDidChangeNotificationsVisibility=this._onDidChangeNotificationsVisibility.event,this._onDidLayoutMainContainer=this._register(new w),this.onDidLayoutMainContainer=this._onDidLayoutMainContainer.event,this._onDidLayoutActiveContainer=this._register(new w),this.onDidLayoutActiveContainer=this._onDidLayoutActiveContainer.event,this._onDidLayoutContainer=this._register(new w),this.onDidLayoutContainer=this._onDidLayoutContainer.event,this._onDidAddContainer=this._register(new w),this.onDidAddContainer=this._onDidAddContainer.event,this._onDidChangeActiveContainer=this._register(new w),this.onDidChangeActiveContainer=this._onDidChangeActiveContainer.event,this.mainContainer=document.createElement("div"),this.containerStylesLoaded=new Map,this.parts=new Map,this.initialized=!1,this.disposed=!1,this._openedDefaultEditors=!1,this.whenReadyPromise=new us,this.whenReady=this.whenReadyPromise.p,this.whenRestoredPromise=new us,this.whenRestored=this.whenRestoredPromise.p,this.restored=!1}initLayout(t){this.environmentService=t.get(Se),this.configurationService=t.get(Ot),this.hostService=t.get(se),this.contextService=t.get(ni),this.storageService=t.get($),this.workingCopyBackupService=t.get(kn),this.themeService=t.get(U),this.extensionService=t.get(Tn),this.logService=t.get(Gs),this.telemetryService=t.get(te),this.auxiliaryWindowService=t.get(xn),this.editorService=t.get(ne),this.mainPartEditorService=this.editorService.createScoped("main",this._store),this.editorGroupService=t.get(mt),this.paneCompositeService=t.get(Mn),this.viewDescriptorService=t.get(Nn),this.titleService=t.get(ns),this.notificationService=t.get(it),this.statusBarService=t.get(lt),t.get(Wt),this.registerLayoutListeners(),this.initLayoutState(t.get(ze),t.get(Vn))}registerLayoutListeners(){const t=()=>{this.isVisible("workbench.parts.editor",p)||this.toggleMaximizedPanel()};this.editorGroupService.whenRestored.then(()=>{this._register(this.mainPartEditorService.onDidVisibleEditorsChange(t)),this._register(this.editorGroupService.mainPart.onDidActivateGroup(t)),this._register(this.mainPartEditorService.onDidActiveEditorChange(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(d.MAIN_EDITOR_CENTERED))))}),this._register(this.configurationService.onDidChangeConfiguration(i=>{if([...oa,H.SIDEBAR_POSITION,H.STATUSBAR_VISIBLE].some(s=>i.affectsConfiguration(s))){const s=i.affectsConfiguration("workbench.editor.editorActionsLocation")&&this.configurationService.getValue("workbench.editor.editorActionsLocation")==="titleBar";let n=!1;if(i.affectsConfiguration("workbench.activityBar.location")){const o=this.configurationService.getValue("workbench.activityBar.location");n=o==="top"||o==="bottom"}(n||s)&&this.configurationService.getValue("window.customTitleBarVisibility")==="never"&&this.configurationService.updateValue("window.customTitleBarVisibility","auto"),this.doUpdateLayoutConfiguration()}})),this._register(Bn(i=>this.onFullscreenChanged(i))),this._register(this.editorGroupService.mainPart.onDidAddGroup(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(d.MAIN_EDITOR_CENTERED)))),this._register(this.editorGroupService.mainPart.onDidRemoveGroup(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(d.MAIN_EDITOR_CENTERED)))),this._register(this.editorGroupService.mainPart.onDidChangeGroupMaximized(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(d.MAIN_EDITOR_CENTERED)))),this._register(V(this.mainContainer,z.SCROLL,()=>this.mainContainer.scrollTop=0)),(He||os||L)&&!yt(this.configurationService)&&this._register(this.titleService.onMenubarVisibilityChange(i=>this.onMenubarToggled(i))),this._register(this.themeService.onDidColorThemeChange(()=>this.updateWindowsBorder())),this._register(this.hostService.onDidChangeFocus(i=>this.onWindowFocusChanged(i))),this._register(this.hostService.onDidChangeActiveWindow(()=>this.onActiveWindowChanged())),L&&typeof navigator.windowControlsOverlay=="object"&&this._register(V(navigator.windowControlsOverlay,"geometrychange",()=>this.onDidChangeWCO())),this._register(this.auxiliaryWindowService.onDidOpenAuxiliaryWindow(({window:i,disposables:s})=>{const n=i.window.vscodeWindowId;this.containerStylesLoaded.set(n,i.whenStylesHaveLoaded),i.whenStylesHaveLoaded.then(()=>this.containerStylesLoaded.delete(n)),s.add(rt(()=>this.containerStylesLoaded.delete(n)));const o=s.add(new E);this._onDidAddContainer.fire({container:i.container,disposables:o}),s.add(i.onDidLayout(r=>this.handleContainerDidLayout(i.container,r)))}))}onMenubarToggled(t){if(t!==this.state.runtime.menuBar.toggled){this.state.runtime.menuBar.toggled=t;const e=gi(this.configurationService);L&&e==="toggle"?this.workbenchGrid.setViewVisible(this.titleBarPartView,gt(this.configurationService,p,this.state.runtime.menuBar.toggled)):this.state.runtime.mainWindowFullscreen&&(e==="toggle"||e==="classic")&&this.workbenchGrid.setViewVisible(this.titleBarPartView,gt(this.configurationService,p,this.state.runtime.menuBar.toggled)),this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)}}handleContainerDidLayout(t,e){t===this.mainContainer&&this._onDidLayoutMainContainer.fire(e),Ws(t)&&this._onDidLayoutActiveContainer.fire(e),this._onDidLayoutContainer.fire({container:t,dimension:e})}onFullscreenChanged(t){t===p.vscodeWindowId&&(this.state.runtime.mainWindowFullscreen=fs(p),this.state.runtime.mainWindowFullscreen?this.mainContainer.classList.add(S.FULLSCREEN):(this.mainContainer.classList.remove(S.FULLSCREEN),this.stateModel.getRuntimeValue(d.ZEN_MODE_EXIT_INFO).transitionedToFullScreen&&this.isZenModeActive()&&this.toggleZenMode()),this.workbenchGrid.edgeSnapping=this.state.runtime.mainWindowFullscreen,this.workbenchGrid.setViewVisible(this.titleBarPartView,gt(this.configurationService,p,this.state.runtime.menuBar.toggled)),this.updateWindowsBorder(!0))}onActiveWindowChanged(){const t=this.getActiveContainerId();this.state.runtime.activeContainerId!==t&&(this.state.runtime.activeContainerId=t,this.updateWindowsBorder(),this._onDidChangeActiveContainer.fire())}onWindowFocusChanged(t){this.state.runtime.hasFocus!==t&&(this.state.runtime.hasFocus=t,this.updateWindowsBorder())}getActiveContainerId(){const t=this.activeContainer;return O(t).vscodeWindowId}doUpdateLayoutConfiguration(t){this.updateCustomTitleBarVisibility(),this.updateMenubarVisibility(!!t),this.editorGroupService.whenRestored.then(()=>{this.centerMainEditorLayout(this.stateModel.getRuntimeValue(d.MAIN_EDITOR_CENTERED),t)})}setSideBarPosition(t){const e=this.getPart("workbench.parts.activitybar"),i=this.getPart("workbench.parts.sidebar"),s=this.getPart("workbench.parts.auxiliarybar"),n=t===0?"left":"right",o=t===1?"left":"right",r=this.getPanelAlignment(),a=this.getPanelPosition();this.stateModel.setRuntimeValue(d.SIDEBAR_POSITON,t);const c=Z(e.getContainer()),l=Z(i.getContainer()),f=Z(s.getContainer());c.classList.remove(o),l.classList.remove(o),c.classList.add(n),l.classList.add(n),f.classList.remove(n),f.classList.add(o),e.updateStyles(),i.updateStyles(),s.updateStyles(),this.adjustPartPositions(t,r,a)}updateWindowsBorder(t=!1){if(L||He||Pn(this.configurationService)||yt(this.configurationService))return;const e=this.themeService.getColorTheme(),i=e.getColor(Ln),s=e.getColor(Rn),n=this.hasMainWindowBorder();for(const o of this.containers){const r=o===this.mainContainer,a=this.activeContainer===o,c=Ae(O(o));let l=!1;if(!this.state.runtime.mainWindowFullscreen&&!this.state.runtime.maximized.has(c)&&(i||s)){l=!0;const f=a&&this.state.runtime.hasFocus?i:s??i;o.style.setProperty("--window-border-color",(f==null?void 0:f.toString())??"transparent")}r&&(this.state.runtime.mainWindowBorder=l),o.classList.toggle(S.WINDOW_BORDER,l)}!t&&n!==this.hasMainWindowBorder()&&this.layout()}initLayoutState(t,e){var o,r,a,c;this.stateModel=new xi(this.storageService,this.configurationService,this.contextService,this.parent),this.stateModel.load(),this.stateModel.getRuntimeValue(d.PANEL_HIDDEN)&&this.stateModel.getRuntimeValue(d.EDITOR_HIDDEN)&&this.stateModel.setRuntimeValue(d.EDITOR_HIDDEN,!1),this._register(this.stateModel.onDidChangeState(l=>{l.key===d.ACTIVITYBAR_HIDDEN&&this.setActivityBarHidden(l.value),l.key===d.STATUSBAR_HIDDEN&&this.setStatusBarHidden(l.value),l.key===d.SIDEBAR_POSITON&&this.setSideBarPosition(l.value),l.key===d.PANEL_POSITION&&this.setPanelPosition(l.value),l.key===d.PANEL_ALIGNMENT&&this.setPanelAlignment(l.value),this.doUpdateLayoutConfiguration()}));const i=this.getInitialEditorsState();i&&this.logService.trace("Initial editor state",i);const s={layout:{editors:i==null?void 0:i.layout},editor:{restoreEditors:this.shouldRestoreEditors(this.contextService,i),editorsToOpen:this.resolveEditorsToOpen(e,i)},views:{defaults:this.getDefaultLayoutViews(this.environmentService,this.storageService),containerToRestore:{}}},n={activeContainerId:this.getActiveContainerId(),mainWindowFullscreen:fs(p),hasFocus:this.hostService.hasFocus,maximized:new Set,mainWindowBorder:!1,menuBar:{toggled:!1},zenMode:{transitionDisposables:new On}};if(this.state={initialization:s,runtime:n},this.isVisible("workbench.parts.sidebar")){let l;!this.environmentService.isBuilt||t.startupKind===3||this.environmentService.isExtensionDevelopment&&!this.environmentService.extensionTestsLocationURI?l=this.storageService.get(Cr.activeViewletSettingsKey,1,(o=this.viewDescriptorService.getDefaultViewContainer(0))==null?void 0:o.id):l=(r=this.viewDescriptorService.getDefaultViewContainer(0))==null?void 0:r.id,l?this.state.initialization.views.containerToRestore.sideBar=l:this.stateModel.setRuntimeValue(d.SIDEBAR_HIDDEN,!0)}if(this.isVisible("workbench.parts.panel")){const l=this.storageService.get(Sr.activePanelSettingsKey,1,(a=this.viewDescriptorService.getDefaultViewContainer(1))==null?void 0:a.id);l?this.state.initialization.views.containerToRestore.panel=l:this.stateModel.setRuntimeValue(d.PANEL_HIDDEN,!0)}if(this.isVisible("workbench.parts.auxiliarybar")){let l=this.storageService.get(Ir.activePanelSettingsKey,1,(c=this.viewDescriptorService.getDefaultViewContainer(2))==null?void 0:c.id);l?(l==="workbench.panel.chatSidebar"&&(l="workbench.panel.chat"),this.state.initialization.views.containerToRestore.auxiliaryBar=l):this.stateModel.setRuntimeValue(d.AUXILIARYBAR_HIDDEN,!0)}this.updateWindowsBorder(!0)}getDefaultLayoutViews(t,e){var n;const i=(n=t.options)==null?void 0:n.defaultLayout;if(!i||!i.force&&!e.isNew(1))return;const{views:s}=i;if(s!=null&&s.length)return s.map(o=>o.id)}shouldRestoreEditors(t,e){return zn(t.getWorkspace())?!1:!!(this.configurationService.getValue("window.restoreWindows")==="preserve")||e===void 0}willRestoreEditors(){return this.state.initialization.editor.restoreEditors}async resolveEditorsToOpen(t,e){var i;if(e){const s=_e(await li(e.filesToMerge,t,this.logService));if(s.length===4&&Ie(s[0])&&Ie(s[1])&&Ie(s[2])&&Ie(s[3]))return[{editor:{input1:{resource:s[0].resource},input2:{resource:s[1].resource},base:{resource:s[2].resource},result:{resource:s[3].resource},options:{pinned:!0}}}];const n=_e(await li(e.filesToDiff,t,this.logService));if(n.length===2)return[{editor:{original:{resource:n[0].resource},modified:{resource:n[1].resource},options:{pinned:!0}}}];const o=[],r=await li(e.filesToOpenOrCreate,t,this.logService);for(let a=0;a<r.length;a++){const c=r[a];c&&o.push({editor:c,viewColumn:(i=e.filesToOpenOrCreate)==null?void 0:i[a].viewColumn})}return o}else if(this.contextService.getWorkbenchState()===1&&this.configurationService.getValue("workbench.startupEditor")==="newUntitledFile")return this.editorGroupService.hasRestorableState?[]:await this.workingCopyBackupService.hasBackups()?[]:[{editor:{resource:void 0}}];return[]}get openedDefaultEditors(){return this._openedDefaultEditors}getInitialEditorsState(){var n,o,r,a,c;const t=(n=this.environmentService.options)==null?void 0:n.defaultLayout;if(((o=t==null?void 0:t.editors)!=null&&o.length||(r=t==null?void 0:t.layout)!=null&&r.editors)&&(t.force||this.storageService.isNew(1)))return this._openedDefaultEditors=!0,{layout:(a=t.layout)==null?void 0:a.editors,filesToOpenOrCreate:(c=t==null?void 0:t.editors)==null?void 0:c.map(l=>({viewColumn:l.viewColumn,fileUri:si.revive(l.uri),openOnlyIfExists:l.openOnlyIfExists,options:l.options}))};const{filesToOpenOrCreate:e,filesToDiff:i,filesToMerge:s}=this.environmentService;if(e||i||s)return{filesToOpenOrCreate:e,filesToDiff:i,filesToMerge:s}}isRestored(){return this.restored}restoreParts(){const t=[],e=[];t.push((async()=>{var a;_("code/willRestoreEditors"),await this.editorGroupService.whenReady,_("code/restoreEditors/editorGroupsReady"),(a=this.state.initialization.layout)!=null&&a.editors&&this.editorGroupService.mainPart.applyLayout(this.state.initialization.layout.editors);const o=await this.state.initialization.editor.editorsToOpen;_("code/restoreEditors/editorsToOpenResolved");let r;if(o.length){const c=this.editorGroupService.mainPart.getGroups(2),l=new Map;for(const f of o){const b=c[(f.viewColumn??1)-1];let g=l.get(b.id);g||(g=new Set,l.set(b.id,g)),g.add(f.editor)}r=Promise.all(Array.from(l).map(async([f,b])=>{try{await this.editorService.openEditors(Array.from(b),f,{validateTrust:!0})}catch(g){this.logService.error(g)}}))}e.push(Promise.all([r==null?void 0:r.finally(()=>_("code/restoreEditors/editorsOpened")),this.editorGroupService.whenRestored.finally(()=>_("code/restoreEditors/editorGroupsRestored"))]).finally(()=>{_("code/didRestoreEditors")}))})());const i=(async()=>{var o;if((o=this.state.initialization.views.defaults)!=null&&o.length){_("code/willOpenDefaultViews");const r=[],a=f=>{var g;const b=this.viewDescriptorService.getViewLocationById(f.id);if(b!==null){const C=this.viewDescriptorService.getViewContainerByViewId(f.id);if(C){f.order>=(((g=r==null?void 0:r[b])==null?void 0:g.order)??0)&&(r[b]={id:C.id,order:f.order});const A=this.viewDescriptorService.getViewContainerModel(C);return A.setCollapsed(f.id,!1),A.setVisible(f.id,!0),!0}}return!1},c=[...this.state.initialization.views.defaults].reverse().map((f,b)=>({id:f,order:b}));let l=c.length;for(;l;)l--,a(c[l])&&c.splice(l,1);if(c.length){await this.extensionService.whenInstalledExtensionsRegistered();let f=c.length;for(;f;)f--,a(c[f])&&c.splice(f,1)}r[0]&&(this.state.initialization.views.containerToRestore.sideBar=r[0].id),r[1]&&(this.state.initialization.views.containerToRestore.panel=r[1].id),r[2]&&(this.state.initialization.views.containerToRestore.auxiliaryBar=r[2].id),_("code/didOpenDefaultViews")}})();t.push(i),t.push((async()=>{var r;if(await i,!this.state.initialization.views.containerToRestore.sideBar)return;_("code/willRestoreViewlet"),await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.sideBar,0)||await this.paneCompositeService.openPaneComposite((r=this.viewDescriptorService.getDefaultViewContainer(0))==null?void 0:r.id,0),_("code/didRestoreViewlet")})()),t.push((async()=>{var r;if(await i,!this.state.initialization.views.containerToRestore.panel)return;_("code/willRestorePanel"),await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.panel,1)||await this.paneCompositeService.openPaneComposite((r=this.viewDescriptorService.getDefaultViewContainer(1))==null?void 0:r.id,1),_("code/didRestorePanel")})()),t.push((async()=>{var r;if(await i,!this.state.initialization.views.containerToRestore.auxiliaryBar)return;_("code/willRestoreAuxiliaryBar"),await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.auxiliaryBar,2)||await this.paneCompositeService.openPaneComposite((r=this.viewDescriptorService.getDefaultViewContainer(2))==null?void 0:r.id,2),_("code/didRestoreAuxiliaryBar")})());const s=this.isZenModeActive(),n=ks(this.configurationService).restore;s&&(this.setZenModeActive(!n),this.toggleZenMode(!1,!0)),this.stateModel.getRuntimeValue(d.MAIN_EDITOR_CENTERED)&&this.centerMainEditorLayout(!0,!0),ms.settled(t).finally(()=>{this.whenReadyPromise.complete(),ms.settled(e).finally(()=>{this.restored=!0,this.whenRestoredPromise.complete()})})}registerPart(t){const e=t.getId();return this.parts.set(e,t),rt(()=>this.parts.delete(e))}getPart(t){const e=this.parts.get(t);if(!e)throw new Error(`Unknown part ${t}`);return e}registerNotifications(t){this._register(t.onDidChangeNotificationsVisibility(e=>this._onDidChangeNotificationsVisibility.fire(e)))}hasFocus(t){const e=this.getContainer(ke(),t);if(!e)return!1;const i=Hn();return i?Fn(i,e):!1}focusPart(t,e=p){var s,n,o;const i=this.getContainer(e,t)??this.mainContainer;switch(t){case"workbench.parts.editor":this.editorGroupService.getPart(i).activeGroup.focus();break;case"workbench.parts.panel":{(s=this.paneCompositeService.getActivePaneComposite(1))==null||s.focus();break}case"workbench.parts.sidebar":{(n=this.paneCompositeService.getActivePaneComposite(0))==null||n.focus();break}case"workbench.parts.auxiliarybar":{(o=this.paneCompositeService.getActivePaneComposite(2))==null||o.focus();break}case"workbench.parts.activitybar":this.getPart("workbench.parts.sidebar").focusActivityBar();break;case"workbench.parts.statusbar":this.statusBarService.getPart(i).focus();break;default:i==null||i.focus()}}getContainer(t,e){if(typeof e>"u")return this.getContainerFromDocument(t.document);if(t===p)return this.getPart(e).getContainer();let i;if(e==="workbench.parts.editor"?i=this.editorGroupService.getPart(this.getContainerFromDocument(t.document)):e==="workbench.parts.statusbar"?i=this.statusBarService.getPart(this.getContainerFromDocument(t.document)):e==="workbench.parts.titlebar"&&(i=this.titleService.getPart(this.getContainerFromDocument(t.document))),i instanceof ri)return i.getContainer()}isVisible(t,e=p){if(e!==p&&t==="workbench.parts.editor")return!0;if(this.initialized)switch(t){case"workbench.parts.titlebar":return this.workbenchGrid.isViewVisible(this.titleBarPartView);case"workbench.parts.sidebar":return!this.stateModel.getRuntimeValue(d.SIDEBAR_HIDDEN);case"workbench.parts.panel":return!this.stateModel.getRuntimeValue(d.PANEL_HIDDEN);case"workbench.parts.auxiliarybar":return!this.stateModel.getRuntimeValue(d.AUXILIARYBAR_HIDDEN);case"workbench.parts.statusbar":return!this.stateModel.getRuntimeValue(d.STATUSBAR_HIDDEN);case"workbench.parts.activitybar":return!this.stateModel.getRuntimeValue(d.ACTIVITYBAR_HIDDEN);case"workbench.parts.editor":return!this.stateModel.getRuntimeValue(d.EDITOR_HIDDEN);case"workbench.parts.banner":return this.workbenchGrid.isViewVisible(this.bannerPartView);default:return!1}switch(t){case"workbench.parts.titlebar":return gt(this.configurationService,p,this.state.runtime.menuBar.toggled);case"workbench.parts.sidebar":return!this.stateModel.getRuntimeValue(d.SIDEBAR_HIDDEN);case"workbench.parts.panel":return!this.stateModel.getRuntimeValue(d.PANEL_HIDDEN);case"workbench.parts.auxiliarybar":return!this.stateModel.getRuntimeValue(d.AUXILIARYBAR_HIDDEN);case"workbench.parts.statusbar":return!this.stateModel.getRuntimeValue(d.STATUSBAR_HIDDEN);case"workbench.parts.activitybar":return!this.stateModel.getRuntimeValue(d.ACTIVITYBAR_HIDDEN);case"workbench.parts.editor":return!this.stateModel.getRuntimeValue(d.EDITOR_HIDDEN);default:return!1}}shouldShowBannerFirst(){return L&&!bi()}focus(){this.focusPart("workbench.parts.editor",O(this.activeContainer))}focusPanelOrEditor(){const t=this.paneCompositeService.getActivePaneComposite(1);(this.hasFocus("workbench.parts.panel")||!this.isVisible("workbench.parts.editor"))&&t?t.focus():this.focus()}getMaximumEditorDimensions(t){const e=O(t),i=this.getContainerDimension(t);if(t===this.mainContainer){const s=x(this.getPanelPosition()),n=(this.isVisible("workbench.parts.activitybar")?this.activityBarPartView.minimumWidth:0)+(this.isVisible("workbench.parts.sidebar")?this.sideBarPartView.minimumWidth:0)+(this.isVisible("workbench.parts.panel")&&!s?this.panelPartView.minimumWidth:0)+(this.isVisible("workbench.parts.auxiliarybar")?this.auxiliaryBarPartView.minimumWidth:0),o=(this.isVisible("workbench.parts.titlebar",e)?this.titleBarPartView.minimumHeight:0)+(this.isVisible("workbench.parts.statusbar",e)?this.statusBarPartView.minimumHeight:0)+(this.isVisible("workbench.parts.panel")&&s?this.panelPartView.minimumHeight:0),r=i.width-n,a=i.height-o;return{width:r,height:a}}else{const s=(this.isVisible("workbench.parts.titlebar",e)?this.titleBarPartView.minimumHeight:0)+(this.isVisible("workbench.parts.statusbar",e)?this.statusBarPartView.minimumHeight:0);return{width:i.width,height:i.height-s}}}isZenModeActive(){return this.stateModel.getRuntimeValue(d.ZEN_MODE_ACTIVE)}setZenModeActive(t){this.stateModel.setRuntimeValue(d.ZEN_MODE_ACTIVE,t)}toggleZenMode(t,e=!1){this.setZenModeActive(!this.isZenModeActive()),this.state.runtime.zenMode.transitionDisposables.clearAndDisposeAll();const i=r=>{for(const a of this.mainPartEditorService.visibleTextEditorControls){if(!r&&Kn(a)&&a.hasModel()){const c=a.getModel();r=this.configurationService.getValue("editor.lineNumbers",{resource:c.uri,overrideIdentifier:c.getLanguageId()})}r||(r=this.configurationService.getValue("editor.lineNumbers")),a.updateOptions({lineNumbers:r})}};let s=!1;const n=ks(this.configurationService),o=this.stateModel.getRuntimeValue(d.ZEN_MODE_EXIT_INFO);this.isZenModeActive()?(s=!this.state.runtime.mainWindowFullscreen&&n.fullScreen&&!gs,e||(o.transitionedToFullScreen=s,o.transitionedToCenteredEditorLayout=!this.isMainEditorLayoutCentered()&&n.centerLayout,o.handleNotificationsDoNotDisturbMode=this.notificationService.getFilter()===y.OFF,o.wasVisible.sideBar=this.isVisible("workbench.parts.sidebar"),o.wasVisible.panel=this.isVisible("workbench.parts.panel"),o.wasVisible.auxiliaryBar=this.isVisible("workbench.parts.auxiliarybar"),this.stateModel.setRuntimeValue(d.ZEN_MODE_EXIT_INFO,o)),this.setPanelHidden(!0,!0),this.setAuxiliaryBarHidden(!0,!0),this.setSideBarHidden(!0,!0),n.hideActivityBar&&this.setActivityBarHidden(!0,!0),n.hideStatusBar&&this.setStatusBarHidden(!0,!0),n.hideLineNumbers&&(i("off"),this.state.runtime.zenMode.transitionDisposables.set("zenMode.hideLineNumbers",this.mainPartEditorService.onDidVisibleEditorsChange(()=>i("off")))),n.showTabs!==this.editorGroupService.partOptions.showTabs&&this.state.runtime.zenMode.transitionDisposables.set("zenMode.showTabs",this.editorGroupService.mainPart.enforcePartOptions({showTabs:n.showTabs})),n.silentNotifications&&o.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(y.ERROR),n.centerLayout&&this.centerMainEditorLayout(!0,!0),this.state.runtime.zenMode.transitionDisposables.set("configurationChange",this.configurationService.onDidChangeConfiguration(r=>{if(r.affectsConfiguration("zenMode.hideActivityBar")){const a=this.configurationService.getValue("zenMode.hideActivityBar");this.setActivityBarHidden(a,!0)}if(r.affectsConfiguration("zenMode.hideStatusBar")){const a=this.configurationService.getValue("zenMode.hideStatusBar");this.setStatusBarHidden(a,!0)}if(r.affectsConfiguration("zenMode.centerLayout")){const a=this.configurationService.getValue("zenMode.centerLayout");this.centerMainEditorLayout(a,!0)}if(r.affectsConfiguration("zenMode.showTabs")){const a=this.configurationService.getValue("zenMode.showTabs")??"multiple";this.state.runtime.zenMode.transitionDisposables.set("zenMode.showTabs",this.editorGroupService.mainPart.enforcePartOptions({showTabs:a}))}if(r.affectsConfiguration("zenMode.silentNotifications")){const a=!!this.configurationService.getValue("zenMode.silentNotifications");o.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(a?y.ERROR:y.OFF)}if(r.affectsConfiguration("zenMode.hideLineNumbers")){const a=this.configurationService.getValue("zenMode.hideLineNumbers")?"off":void 0;i(a),this.state.runtime.zenMode.transitionDisposables.set("zenMode.hideLineNumbers",this.mainPartEditorService.onDidVisibleEditorsChange(()=>i(a)))}}))):(o.wasVisible.panel&&this.setPanelHidden(!1,!0),o.wasVisible.auxiliaryBar&&this.setAuxiliaryBarHidden(!1,!0),o.wasVisible.sideBar&&this.setSideBarHidden(!1,!0),this.stateModel.getRuntimeValue(d.ACTIVITYBAR_HIDDEN,!0)||this.setActivityBarHidden(!1,!0),this.stateModel.getRuntimeValue(d.STATUSBAR_HIDDEN,!0)||this.setStatusBarHidden(!1,!0),o.transitionedToCenteredEditorLayout&&this.centerMainEditorLayout(!1,!0),o.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(y.OFF),i(),this.focus(),s=o.transitionedToFullScreen&&this.state.runtime.mainWindowFullscreen),t||this.layout(),s&&this.hostService.toggleFullScreen(p),this._onDidChangeZenMode.fire(this.isZenModeActive())}setStatusBarHidden(t,e){this.stateModel.setRuntimeValue(d.STATUSBAR_HIDDEN,t),t?this.mainContainer.classList.add(S.STATUSBAR_HIDDEN):this.mainContainer.classList.remove(S.STATUSBAR_HIDDEN),this.workbenchGrid.setViewVisible(this.statusBarPartView,!t)}createWorkbenchLayout(){const t=this.getPart("workbench.parts.titlebar"),e=this.getPart("workbench.parts.banner"),i=this.getPart("workbench.parts.editor"),s=this.getPart("workbench.parts.activitybar"),n=this.getPart("workbench.parts.panel"),o=this.getPart("workbench.parts.auxiliarybar"),r=this.getPart("workbench.parts.sidebar"),a=this.getPart("workbench.parts.statusbar");this.titleBarPartView=t,this.bannerPartView=e,this.sideBarPartView=r,this.activityBarPartView=s,this.editorPartView=i,this.panelPartView=n,this.auxiliaryBarPartView=o,this.statusBarPartView=a;const c={"workbench.parts.activitybar":this.activityBarPartView,"workbench.parts.banner":this.bannerPartView,"workbench.parts.titlebar":this.titleBarPartView,"workbench.parts.editor":this.editorPartView,"workbench.parts.panel":this.panelPartView,"workbench.parts.sidebar":this.sideBarPartView,"workbench.parts.statusbar":this.statusBarPartView,"workbench.parts.auxiliarybar":this.auxiliaryBarPartView},l=({type:b})=>c[b],f=Er.deserialize(this.createGridDescriptor(),{fromJSON:l},{proportionalLayout:!1});this.mainContainer.prepend(f.element),this.mainContainer.setAttribute("role","application"),this.workbenchGrid=f,this.workbenchGrid.edgeSnapping=this.state.runtime.mainWindowFullscreen;for(const b of[t,i,s,n,r,a,o,e])this._register(b.onDidVisibilityChange(g=>{b===r?this.setSideBarHidden(!g,!0):b===n?this.setPanelHidden(!g,!0):b===o?this.setAuxiliaryBarHidden(!g,!0):b===i&&this.setEditorHidden(!g,!0),this._onDidChangePartVisibility.fire(),this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)}));this._register(this.storageService.onWillSaveState(b=>{const g=this.stateModel.getRuntimeValue(d.SIDEBAR_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.sideBarPartView):this.workbenchGrid.getViewSize(this.sideBarPartView).width;this.stateModel.setInitializationValue(d.SIDEBAR_SIZE,g);const C=this.stateModel.getRuntimeValue(d.PANEL_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView):x(this.stateModel.getRuntimeValue(d.PANEL_POSITION))?this.workbenchGrid.getViewSize(this.panelPartView).height:this.workbenchGrid.getViewSize(this.panelPartView).width;this.stateModel.setInitializationValue(d.PANEL_SIZE,C);const A=this.stateModel.getRuntimeValue(d.AUXILIARYBAR_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.auxiliaryBarPartView):this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width;this.stateModel.setInitializationValue(d.AUXILIARYBAR_SIZE,A),this.stateModel.save(!0,!0)}))}layout(){this.disposed||(this._mainContainerDimension=mi(this.state.runtime.mainWindowFullscreen?p.document.body:this.parent),this.logService.trace(`Layout#layout, height: ${this._mainContainerDimension.height}, width: ${this._mainContainerDimension.width}`),Gn(this.mainContainer,0,0,0,0,"relative"),Wn(this.mainContainer,this._mainContainerDimension.width,this._mainContainerDimension.height),this.workbenchGrid.layout(this._mainContainerDimension.width,this._mainContainerDimension.height),this.initialized=!0,this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension))}isMainEditorLayoutCentered(){return this.stateModel.getRuntimeValue(d.MAIN_EDITOR_CENTERED)}centerMainEditorLayout(t,e){this.stateModel.setRuntimeValue(d.MAIN_EDITOR_CENTERED,t);const i=this.mainPartEditorService.activeEditor;let s=!1;i instanceof Un?s=this.configurationService.getValue("diffEditor.renderSideBySide"):i!=null&&i.hasCapability(256)&&(s=!0),this.configurationService.getValue("workbench.editor.centeredLayoutAutoResize")&&(this.editorGroupService.mainPart.groups.length>1&&!this.editorGroupService.mainPart.hasMaximizedGroup()||s)&&(t=!1),this.editorGroupService.mainPart.isLayoutCentered()!==t&&(this.editorGroupService.mainPart.centerLayout(t),e||this.layout()),this._onDidChangeMainEditorCenteredLayout.fire(this.stateModel.getRuntimeValue(d.MAIN_EDITOR_CENTERED))}resizePart(t,e,i){const s=Math.sign(e)*bs(ke(),Math.abs(e)),n=Math.sign(i)*bs(ke(),Math.abs(i));let o;switch(t){case"workbench.parts.sidebar":o=this.workbenchGrid.getViewSize(this.sideBarPartView),this.workbenchGrid.resizeView(this.sideBarPartView,{width:o.width+s,height:o.height});break;case"workbench.parts.panel":o=this.workbenchGrid.getViewSize(this.panelPartView),this.workbenchGrid.resizeView(this.panelPartView,{width:o.width+(x(this.getPanelPosition())?0:s),height:o.height+(x(this.getPanelPosition())?n:0)});break;case"workbench.parts.auxiliarybar":o=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView),this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{width:o.width+s,height:o.height});break;case"workbench.parts.editor":if(o=this.workbenchGrid.getViewSize(this.editorPartView),this.editorGroupService.mainPart.count===1)this.workbenchGrid.resizeView(this.editorPartView,{width:o.width+s,height:o.height+n});else{const r=this.editorGroupService.mainPart.activeGroup,{width:a,height:c}=this.editorGroupService.mainPart.getSize(r);this.editorGroupService.mainPart.setSize(r,{width:a+s,height:c+n});const{width:l,height:f}=this.editorGroupService.mainPart.getSize(r);(n&&c===f||s&&a===l)&&this.workbenchGrid.resizeView(this.editorPartView,{width:o.width+(s&&a===l?s:0),height:o.height+(n&&c===f?n:0)})}break;default:return}}setActivityBarHidden(t,e){this.stateModel.setRuntimeValue(d.ACTIVITYBAR_HIDDEN,t),this.workbenchGrid.setViewVisible(this.activityBarPartView,!t)}setBannerHidden(t){this.workbenchGrid.setViewVisible(this.bannerPartView,!t)}setEditorHidden(t,e){this.stateModel.setRuntimeValue(d.EDITOR_HIDDEN,t),t?this.mainContainer.classList.add(S.MAIN_EDITOR_AREA_HIDDEN):this.mainContainer.classList.remove(S.MAIN_EDITOR_AREA_HIDDEN),this.workbenchGrid.setViewVisible(this.editorPartView,!t),t&&!this.isVisible("workbench.parts.panel")&&this.setPanelHidden(!1,!0)}getLayoutClasses(){return _e([this.isVisible("workbench.parts.sidebar")?void 0:S.SIDEBAR_HIDDEN,this.isVisible("workbench.parts.editor",p)?void 0:S.MAIN_EDITOR_AREA_HIDDEN,this.isVisible("workbench.parts.panel")?void 0:S.PANEL_HIDDEN,this.isVisible("workbench.parts.auxiliarybar")?void 0:S.AUXILIARYBAR_HIDDEN,this.isVisible("workbench.parts.statusbar")?void 0:S.STATUSBAR_HIDDEN,this.state.runtime.mainWindowFullscreen?S.FULLSCREEN:void 0])}setSideBarHidden(t,e){var i;if(this.stateModel.setRuntimeValue(d.SIDEBAR_HIDDEN,t),t?this.mainContainer.classList.add(S.SIDEBAR_HIDDEN):this.mainContainer.classList.remove(S.SIDEBAR_HIDDEN),t&&this.paneCompositeService.getActivePaneComposite(0))this.paneCompositeService.hideActivePaneComposite(0),this.focusPanelOrEditor();else if(!t&&!this.paneCompositeService.getActivePaneComposite(0)){const s=this.paneCompositeService.getLastActivePaneCompositeId(0);s&&(this.paneCompositeService.openPaneComposite(s,0,!0)||this.paneCompositeService.openPaneComposite((i=this.viewDescriptorService.getDefaultViewContainer(0))==null?void 0:i.id,0,!0))}this.workbenchGrid.setViewVisible(this.sideBarPartView,!t)}hasViews(t){const e=this.viewDescriptorService.getViewContainerById(t);if(!e)return!1;const i=this.viewDescriptorService.getViewContainerModel(e);return i?i.activeViewDescriptors.length>=1:!1}adjustPartPositions(t,e,i){const s=!x(i),n=s||!(e==="center"||t===0&&e==="right"||t===1&&e==="left"),o=s||!(e==="center"||t===1&&e==="right"||t===0&&e==="left"),r=this.isVisible("workbench.parts.panel")?this.workbenchGrid.getViewSize(this.panelPartView).width:ae.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView)??this.panelPartView.minimumWidth),a=this.isVisible("workbench.parts.panel")?this.workbenchGrid.getViewSize(this.panelPartView).height:ae.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView)??this.panelPartView.minimumHeight),c=this.isVisible("workbench.parts.sidebar")?this.workbenchGrid.getViewSize(this.sideBarPartView).width:ae.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.sideBarPartView)??this.sideBarPartView.minimumWidth),l=this.isVisible("workbench.parts.auxiliarybar")?this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width:ae.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.auxiliaryBarPartView)??this.auxiliaryBarPartView.minimumWidth);t===0?(this.workbenchGrid.moveViewTo(this.activityBarPartView,[2,0]),this.workbenchGrid.moveView(this.sideBarPartView,c,n?this.editorPartView:this.activityBarPartView,n?2:3),o?this.workbenchGrid.moveView(this.auxiliaryBarPartView,l,this.editorPartView,3):this.workbenchGrid.moveViewTo(this.auxiliaryBarPartView,[2,-1])):(this.workbenchGrid.moveViewTo(this.activityBarPartView,[2,-1]),this.workbenchGrid.moveView(this.sideBarPartView,c,n?this.editorPartView:this.activityBarPartView,n?3:2),o?this.workbenchGrid.moveView(this.auxiliaryBarPartView,l,this.editorPartView,2):this.workbenchGrid.moveViewTo(this.auxiliaryBarPartView,[2,0])),s&&(this.workbenchGrid.moveView(this.panelPartView,r,this.editorPartView,i===0?2:3),this.workbenchGrid.resizeView(this.panelPartView,{height:a,width:r})),this.isVisible("workbench.parts.sidebar")&&this.workbenchGrid.resizeView(this.sideBarPartView,{height:this.workbenchGrid.getViewSize(this.sideBarPartView).height,width:c}),this.isVisible("workbench.parts.auxiliarybar")&&this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{height:this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).height,width:l})}setPanelAlignment(t,e){x(this.getPanelPosition())||this.setPanelPosition(2),t!=="center"&&this.isPanelMaximized()&&this.toggleMaximizedPanel(),this.stateModel.setRuntimeValue(d.PANEL_ALIGNMENT,t),this.adjustPartPositions(this.getSideBarPosition(),t,this.getPanelPosition()),this._onDidChangePanelAlignment.fire(t)}setPanelHidden(t,e){var r;if(!this.workbenchGrid)return;const i=!this.isVisible("workbench.parts.panel");this.stateModel.setRuntimeValue(d.PANEL_HIDDEN,t);const s=this.isPanelMaximized(),n=this.panelOpensMaximized();t?this.mainContainer.classList.add(S.PANEL_HIDDEN):this.mainContainer.classList.remove(S.PANEL_HIDDEN);let o=!1;if(t&&this.paneCompositeService.getActivePaneComposite(1))this.paneCompositeService.hideActivePaneComposite(1),o=!gs;else if(!t&&!this.paneCompositeService.getActivePaneComposite(1)){let a=this.paneCompositeService.getLastActivePaneCompositeId(1);if((!a||!this.hasViews(a))&&(a=(r=this.viewDescriptorService.getViewContainersByLocation(1).find(c=>this.hasViews(c.id)))==null?void 0:r.id),a){const c=!e;this.paneCompositeService.openPaneComposite(a,1,c)}}t&&s&&this.toggleMaximizedPanel(),i!==t&&(this.workbenchGrid.setViewVisible(this.panelPartView,!t),t?this.stateModel.setRuntimeValue(d.PANEL_WAS_LAST_MAXIMIZED,s):!e&&s!==n&&this.toggleMaximizedPanel(),o&&this.editorGroupService.mainPart.activeGroup.focus())}toggleMaximizedPanel(){const t=this.workbenchGrid.getViewSize(this.panelPartView),e=this.getPanelPosition(),i=this.isPanelMaximized();i?(this.setEditorHidden(!1),this.workbenchGrid.resizeView(this.panelPartView,{width:x(e)?t.width:this.stateModel.getRuntimeValue(d.PANEL_LAST_NON_MAXIMIZED_WIDTH),height:x(e)?this.stateModel.getRuntimeValue(d.PANEL_LAST_NON_MAXIMIZED_HEIGHT):t.height})):(this.isVisible("workbench.parts.panel")&&(x(e)?this.stateModel.setRuntimeValue(d.PANEL_LAST_NON_MAXIMIZED_HEIGHT,t.height):this.stateModel.setRuntimeValue(d.PANEL_LAST_NON_MAXIMIZED_WIDTH,t.width)),this.setEditorHidden(!0)),this.stateModel.setRuntimeValue(d.PANEL_WAS_LAST_MAXIMIZED,!i)}panelOpensMaximized(){if(this.getPanelAlignment()!=="center"&&x(this.getPanelPosition()))return!1;const t=jn(this.configurationService.getValue(ve.PANEL_OPENS_MAXIMIZED)),e=this.stateModel.getRuntimeValue(d.PANEL_WAS_LAST_MAXIMIZED);return t===0||t===2&&e}setAuxiliaryBarHidden(t,e){var i;if(this.stateModel.setRuntimeValue(d.AUXILIARYBAR_HIDDEN,t),t?this.mainContainer.classList.add(S.AUXILIARYBAR_HIDDEN):this.mainContainer.classList.remove(S.AUXILIARYBAR_HIDDEN),t&&this.paneCompositeService.getActivePaneComposite(2))this.paneCompositeService.hideActivePaneComposite(2),this.focusPanelOrEditor();else if(!t&&!this.paneCompositeService.getActivePaneComposite(2)){let s=this.paneCompositeService.getLastActivePaneCompositeId(2);if((!s||!this.hasViews(s))&&(s=(i=this.viewDescriptorService.getViewContainersByLocation(2).find(n=>this.hasViews(n.id)))==null?void 0:i.id),s){const n=!e;this.paneCompositeService.openPaneComposite(s,2,n)}}this.workbenchGrid.setViewVisible(this.auxiliaryBarPartView,!t)}setPartHidden(t,e,i=p){switch(e){case"workbench.parts.activitybar":return this.setActivityBarHidden(t);case"workbench.parts.sidebar":return this.setSideBarHidden(t);case"workbench.parts.editor":return this.setEditorHidden(t);case"workbench.parts.banner":return this.setBannerHidden(t);case"workbench.parts.auxiliarybar":return this.setAuxiliaryBarHidden(t);case"workbench.parts.panel":return this.setPanelHidden(t)}}hasMainWindowBorder(){return this.state.runtime.mainWindowBorder}getMainWindowBorderRadius(){return this.state.runtime.mainWindowBorder&&K?"5px":void 0}isPanelMaximized(){return(this.getPanelAlignment()==="center"||!x(this.getPanelPosition()))&&!this.isVisible("workbench.parts.editor",p)}getSideBarPosition(){return this.stateModel.getRuntimeValue(d.SIDEBAR_POSITON)}getPanelAlignment(){return this.stateModel.getRuntimeValue(d.PANEL_ALIGNMENT)}updateMenubarVisibility(t){const e=gt(this.configurationService,p,this.state.runtime.menuBar.toggled);!t&&this.workbenchGrid&&e!==this.isVisible("workbench.parts.titlebar",p)&&this.workbenchGrid.setViewVisible(this.titleBarPartView,e)}updateCustomTitleBarVisibility(){const t=gt(this.configurationService,p,this.state.runtime.menuBar.toggled),e=this.isVisible("workbench.parts.titlebar");t!==e&&this.workbenchGrid.setViewVisible(this.titleBarPartView,t)}toggleMenuBar(){let t=gi(this.configurationService);typeof t!="string"&&(t="classic");let e;t==="visible"||t==="classic"?e=yt(this.configurationService)?"toggle":"compact":e="classic",this.configurationService.updateValue("window.menuBarVisibility",e)}getPanelPosition(){return this.stateModel.getRuntimeValue(d.PANEL_POSITION)}setPanelPosition(t){this.isVisible("workbench.parts.panel")||this.setPanelHidden(!1);const e=this.getPart("workbench.parts.panel"),i=Zt(this.getPanelPosition()),s=Zt(t),n=Z(e.getContainer());n.classList.remove(i),n.classList.add(s),e.updateStyles();const o=this.workbenchGrid.getViewSize(this.panelPartView),r=this.workbenchGrid.getViewSize(this.sideBarPartView),a=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView);let c=!this.isVisible("workbench.parts.editor",p);s!==i&&!c&&(x(t)?this.stateModel.setRuntimeValue(d.PANEL_LAST_NON_MAXIMIZED_WIDTH,o.width):x(De(i))&&this.stateModel.setRuntimeValue(d.PANEL_LAST_NON_MAXIMIZED_HEIGHT,o.height)),x(t)&&this.getPanelAlignment()!=="center"&&c&&(this.toggleMaximizedPanel(),c=!1),this.stateModel.setRuntimeValue(d.PANEL_POSITION,t);const l=this.isVisible("workbench.parts.sidebar"),f=this.isVisible("workbench.parts.auxiliarybar");t===2?this.workbenchGrid.moveView(this.panelPartView,c?o.height:this.stateModel.getRuntimeValue(d.PANEL_LAST_NON_MAXIMIZED_HEIGHT),this.editorPartView,1):t===3?this.workbenchGrid.moveView(this.panelPartView,c?o.height:this.stateModel.getRuntimeValue(d.PANEL_LAST_NON_MAXIMIZED_HEIGHT),this.editorPartView,0):t===1?this.workbenchGrid.moveView(this.panelPartView,c?o.width:this.stateModel.getRuntimeValue(d.PANEL_LAST_NON_MAXIMIZED_WIDTH),this.editorPartView,3):this.workbenchGrid.moveView(this.panelPartView,c?o.width:this.stateModel.getRuntimeValue(d.PANEL_LAST_NON_MAXIMIZED_WIDTH),this.editorPartView,2),this.workbenchGrid.resizeView(this.sideBarPartView,r),l||this.setSideBarHidden(!0),this.workbenchGrid.resizeView(this.auxiliaryBarPartView,a),f||this.setAuxiliaryBarHidden(!0),x(t)&&this.adjustPartPositions(this.getSideBarPosition(),this.getPanelAlignment(),t),this._onDidChangePanelPosition.fire(s)}isWindowMaximized(t){return this.state.runtime.maximized.has(Ae(t))}updateWindowMaximizedState(t,e){this.mainContainer.classList.toggle(S.MAXIMIZED,e);const i=Ae(t);e!==this.state.runtime.maximized.has(i)&&(e?this.state.runtime.maximized.add(i):this.state.runtime.maximized.delete(i),this.updateWindowsBorder(),this._onDidChangeWindowMaximized.fire({windowId:i,maximized:e}))}getVisibleNeighborPart(t,e){if(!this.workbenchGrid||!this.isVisible(t,p))return;const i=this.workbenchGrid.getNeighborViews(this.getPart(t),e,!1);if(i)for(const s of i){const n=["workbench.parts.activitybar","workbench.parts.editor","workbench.parts.panel","workbench.parts.auxiliarybar","workbench.parts.sidebar","workbench.parts.statusbar","workbench.parts.titlebar"].find(o=>this.getPart(o)===s&&this.isVisible(o,p));if(n!==void 0)return n}}onDidChangeWCO(){const t=this.workbenchGrid.getNeighborViews(this.titleBarPartView,0,!1).length>0,e=this.shouldShowBannerFirst();t!==e&&this.workbenchGrid.moveView(this.bannerPartView,ae.Distribute,this.titleBarPartView,e?0:1),this.workbenchGrid.setViewVisible(this.titleBarPartView,gt(this.configurationService,p,this.state.runtime.menuBar.toggled))}arrangeEditorNodes(t,e,i){if(!t.sideBar&&!t.auxiliaryBar)return t.editor.size=e,t.editor;const s=[t.editor];return t.editor.size=i,t.sideBar&&(this.stateModel.getRuntimeValue(d.SIDEBAR_POSITON)===0?s.splice(0,0,t.sideBar):s.push(t.sideBar),t.editor.size-=this.stateModel.getRuntimeValue(d.SIDEBAR_HIDDEN)?0:t.sideBar.size),t.auxiliaryBar&&(this.stateModel.getRuntimeValue(d.SIDEBAR_POSITON)===1?s.splice(0,0,t.auxiliaryBar):s.push(t.auxiliaryBar),t.editor.size-=this.stateModel.getRuntimeValue(d.AUXILIARYBAR_HIDDEN)?0:t.auxiliaryBar.size),{type:"branch",data:s,size:e}}arrangeMiddleSectionNodes(t,e,i){const s=this.stateModel.getRuntimeValue(d.ACTIVITYBAR_HIDDEN)?0:t.activityBar.size,n=this.stateModel.getRuntimeValue(d.SIDEBAR_HIDDEN)?0:t.sideBar.size,o=this.stateModel.getRuntimeValue(d.AUXILIARYBAR_HIDDEN)?0:t.auxiliaryBar.size,r=this.stateModel.getInitializationValue(d.PANEL_SIZE)?0:t.panel.size,a=this.stateModel.getRuntimeValue(d.PANEL_POSITION),c=this.stateModel.getRuntimeValue(d.SIDEBAR_POSITON),l=[];if(!x(a))l.push(t.editor),t.editor.size=e-s-n-r-o,a===1?l.push(t.panel):l.splice(0,0,t.panel),c===0?(l.push(t.auxiliaryBar),l.splice(0,0,t.sideBar),l.splice(0,0,t.activityBar)):(l.splice(0,0,t.auxiliaryBar),l.push(t.sideBar),l.push(t.activityBar));else{const f=this.stateModel.getRuntimeValue(d.PANEL_ALIGNMENT),b=!(f==="center"||c===0&&f==="right"||c===1&&f==="left"),g=!(f==="center"||c===1&&f==="right"||c===0&&f==="left"),C=e-s-(b?0:n)-(g?0:o),A=this.arrangeEditorNodes({editor:t.editor,sideBar:b?t.sideBar:void 0,auxiliaryBar:g?t.auxiliaryBar:void 0},i-r,C);l.push({type:"branch",data:a===2?[A,t.panel]:[t.panel,A],size:C}),b||(c===0?l.splice(0,0,t.sideBar):l.push(t.sideBar)),g||(c===1?l.splice(0,0,t.auxiliaryBar):l.push(t.auxiliaryBar)),c===0?l.splice(0,0,t.activityBar):l.push(t.activityBar)}return l}createGridDescriptor(){const{width:t,height:e}=this.stateModel.getInitializationValue(d.GRID_SIZE),i=this.stateModel.getInitializationValue(d.SIDEBAR_SIZE),s=this.stateModel.getInitializationValue(d.AUXILIARYBAR_SIZE),n=this.stateModel.getInitializationValue(d.PANEL_SIZE),o=this.titleBarPartView.minimumHeight,r=this.bannerPartView.minimumHeight,a=this.statusBarPartView.minimumHeight,c=this.activityBarPartView.minimumWidth,l=e-o-a,f=[{type:"leaf",data:{type:"workbench.parts.titlebar"},size:o,visible:this.isVisible("workbench.parts.titlebar",p)},{type:"leaf",data:{type:"workbench.parts.banner"},size:r,visible:!1}],b={type:"leaf",data:{type:"workbench.parts.activitybar"},size:c,visible:!this.stateModel.getRuntimeValue(d.ACTIVITYBAR_HIDDEN)},g={type:"leaf",data:{type:"workbench.parts.sidebar"},size:i,visible:!this.stateModel.getRuntimeValue(d.SIDEBAR_HIDDEN)},C={type:"leaf",data:{type:"workbench.parts.auxiliarybar"},size:s,visible:this.isVisible("workbench.parts.auxiliarybar")},A={type:"leaf",data:{type:"workbench.parts.editor"},size:0,visible:!this.stateModel.getRuntimeValue(d.EDITOR_HIDDEN)},ht={type:"leaf",data:{type:"workbench.parts.panel"},size:n,visible:!this.stateModel.getRuntimeValue(d.PANEL_HIDDEN)},re=this.arrangeMiddleSectionNodes({activityBar:b,auxiliaryBar:C,editor:A,panel:ht,sideBar:g},t,l),ai={root:{type:"branch",size:t,data:[...this.shouldShowBannerFirst()?f.reverse():f,{type:"branch",data:re,size:l},{type:"leaf",data:{type:"workbench.parts.statusbar"},size:a,visible:!this.stateModel.getRuntimeValue(d.STATUSBAR_HIDDEN)}]},orientation:0,width:t,height:e},rn={activityBarVisible:!this.stateModel.getRuntimeValue(d.ACTIVITYBAR_HIDDEN),sideBarVisible:!this.stateModel.getRuntimeValue(d.SIDEBAR_HIDDEN),auxiliaryBarVisible:!this.stateModel.getRuntimeValue(d.AUXILIARYBAR_HIDDEN),panelVisible:!this.stateModel.getRuntimeValue(d.PANEL_HIDDEN),statusbarVisible:!this.stateModel.getRuntimeValue(d.STATUSBAR_HIDDEN),sideBarPosition:Zt(this.stateModel.getRuntimeValue(d.SIDEBAR_POSITON)),panelPosition:Zt(this.stateModel.getRuntimeValue(d.PANEL_POSITION))};return this.telemetryService.publicLog2("startupLayout",rn),ai}dispose(){super.dispose(),this.disposed=!0}}function ks(u){return u.getValue(ve.ZEN_MODE_CONFIG)}class on{constructor(t,e,i,s){this.name=t,this.scope=e,this.target=i,this.defaultValue=s}}class M extends on{constructor(t,e,i,s,n){super(t,e,i,s),this.zenModeIgnore=n,this.runtime=!0}}class Ee extends on{constructor(){super(...arguments),this.runtime=!1}}const d={MAIN_EDITOR_CENTERED:new M("editor.centered",1,1,!1),ZEN_MODE_ACTIVE:new M("zenMode.active",1,1,!1),ZEN_MODE_EXIT_INFO:new M("zenMode.exitInfo",1,1,{transitionedToCenteredEditorLayout:!1,transitionedToFullScreen:!1,handleNotificationsDoNotDisturbMode:!1,wasVisible:{auxiliaryBar:!1,panel:!1,sideBar:!1}}),GRID_SIZE:new Ee("grid.size",0,1,{width:800,height:600}),SIDEBAR_SIZE:new Ee("sideBar.size",0,1,200),AUXILIARYBAR_SIZE:new Ee("auxiliaryBar.size",0,1,200),PANEL_SIZE:new Ee("panel.size",0,1,300),PANEL_LAST_NON_MAXIMIZED_HEIGHT:new M("panel.lastNonMaximizedHeight",0,1,300),PANEL_LAST_NON_MAXIMIZED_WIDTH:new M("panel.lastNonMaximizedWidth",0,1,300),PANEL_WAS_LAST_MAXIMIZED:new M("panel.wasLastMaximized",1,1,!1),SIDEBAR_POSITON:new M("sideBar.position",1,1,0),PANEL_POSITION:new M("panel.position",1,1,2),PANEL_ALIGNMENT:new M("panel.alignment",0,0,"center"),ACTIVITYBAR_HIDDEN:new M("activityBar.hidden",1,1,!1,!0),SIDEBAR_HIDDEN:new M("sideBar.hidden",1,1,!1),EDITOR_HIDDEN:new M("editor.hidden",1,1,!1),PANEL_HIDDEN:new M("panel.hidden",1,1,!0),AUXILIARYBAR_HIDDEN:new M("auxiliaryBar.hidden",1,1,!0),STATUSBAR_HIDDEN:new M("statusBar.hidden",1,1,!1,!0)};var ve;(function(u){u.PANEL_POSITION="workbench.panel.defaultLocation",u.PANEL_OPENS_MAXIMIZED="workbench.panel.opensMaximized",u.ZEN_MODE_CONFIG="zenMode",u.EDITOR_CENTERED_LAYOUT_AUTO_RESIZE="workbench.editor.centeredLayoutAutoResize"})(ve||(ve={}));var H;(function(u){u.STATUSBAR_VISIBLE="workbench.statusBar.visible",u.SIDEBAR_POSITION="workbench.sideBar.location"})(H||(H={}));const $t=class $t extends P{constructor(t,e,i,s){super(),this.storageService=t,this.configurationService=e,this.contextService=i,this.container=s,this._onDidChangeState=this._register(new w),this.onDidChangeState=this._onDidChangeState.event,this.stateCache=new Map,this._register(this.configurationService.onDidChangeConfiguration(n=>this.updateStateFromLegacySettings(n)))}updateStateFromLegacySettings(t){t.affectsConfiguration("workbench.activityBar.location")&&this.setRuntimeValueAndFire(d.ACTIVITYBAR_HIDDEN,this.isActivityBarHidden()),t.affectsConfiguration(H.STATUSBAR_VISIBLE)&&this.setRuntimeValueAndFire(d.STATUSBAR_HIDDEN,!this.configurationService.getValue(H.STATUSBAR_VISIBLE)),t.affectsConfiguration(H.SIDEBAR_POSITION)&&this.setRuntimeValueAndFire(d.SIDEBAR_POSITON,De(this.configurationService.getValue(H.SIDEBAR_POSITION)??"left"))}updateLegacySettingsFromState(t,e){const i=this.getRuntimeValue(d.ZEN_MODE_ACTIVE);t.zenModeIgnore&&i||(t===d.ACTIVITYBAR_HIDDEN?this.configurationService.updateValue("workbench.activityBar.location",e?"hidden":void 0):t===d.STATUSBAR_HIDDEN?this.configurationService.updateValue(H.STATUSBAR_VISIBLE,!e):t===d.SIDEBAR_POSITON&&this.configurationService.updateValue(H.SIDEBAR_POSITION,Zt(e)))}load(){let t;for(t in d){const i=d[t],s=this.loadKeyFromStorage(i);s!==void 0&&this.stateCache.set(i.name,s)}this.stateCache.set(d.ACTIVITYBAR_HIDDEN.name,this.isActivityBarHidden()),this.stateCache.set(d.STATUSBAR_HIDDEN.name,!this.configurationService.getValue(H.STATUSBAR_VISIBLE)),this.stateCache.set(d.SIDEBAR_POSITON.name,De(this.configurationService.getValue(H.SIDEBAR_POSITION)??"left"));const e=mi(this.container);d.PANEL_POSITION.defaultValue=De(this.configurationService.getValue(ve.PANEL_POSITION)??"bottom"),d.GRID_SIZE.defaultValue={height:e.height,width:e.width},d.SIDEBAR_SIZE.defaultValue=Math.min(300,e.width/4),d.AUXILIARYBAR_SIZE.defaultValue=Math.min(300,e.width/4),d.PANEL_SIZE.defaultValue=this.stateCache.get(d.PANEL_POSITION.name)??x(d.PANEL_POSITION.defaultValue)?e.height/3:e.width/4,d.SIDEBAR_HIDDEN.defaultValue=this.contextService.getWorkbenchState()===1;for(t in d){const i=d[t];this.stateCache.get(i.name)===void 0&&this.stateCache.set(i.name,i.defaultValue)}this._register(this.storageService.onDidChangeValue(0,void 0,this._register(new E))(i=>{let s;for(s in d){const n=d[s];if(n instanceof M&&n.scope===0&&n.target===0&&`${$t.STORAGE_PREFIX}${n.name}`===i.key){const o=this.loadKeyFromStorage(n)??n.defaultValue;this.stateCache.get(n.name)!==o&&(this.stateCache.set(n.name,o),this._onDidChangeState.fire({key:n,value:o}))}}}))}save(t,e){let i;const s=this.getRuntimeValue(d.ZEN_MODE_ACTIVE);for(i in d){const n=d[i];if(t&&n.scope===1||e&&n.scope===0){if(s&&n instanceof M&&n.zenModeIgnore)continue;this.saveKeyToStorage(n)}}}getInitializationValue(t){return this.stateCache.get(t.name)}setInitializationValue(t,e){this.stateCache.set(t.name,e)}getRuntimeValue(t,e){if(e)switch(t){case d.ACTIVITYBAR_HIDDEN:this.stateCache.set(t.name,this.isActivityBarHidden());break;case d.STATUSBAR_HIDDEN:this.stateCache.set(t.name,!this.configurationService.getValue(H.STATUSBAR_VISIBLE));break;case d.SIDEBAR_POSITON:this.stateCache.set(t.name,this.configurationService.getValue(H.SIDEBAR_POSITION)??"left");break}return this.stateCache.get(t.name)}setRuntimeValue(t,e){this.stateCache.set(t.name,e);const i=this.getRuntimeValue(d.ZEN_MODE_ACTIVE);t.scope===0&&(!i||!t.zenModeIgnore)&&(this.saveKeyToStorage(t),this.updateLegacySettingsFromState(t,e))}isActivityBarHidden(){const t=this.configurationService.getValue("workbench.activityBar.visible");return t!==void 0?!t:this.configurationService.getValue("workbench.activityBar.location")!=="default"}setRuntimeValueAndFire(t,e){this.stateCache.get(t.name)!==e&&(this.setRuntimeValue(t,e),this._onDidChangeState.fire({key:t,value:e}))}saveKeyToStorage(t){const e=this.stateCache.get(t.name);this.storageService.store(`${$t.STORAGE_PREFIX}${t.name}`,typeof e=="object"?JSON.stringify(e):e,t.scope,t.target)}loadKeyFromStorage(t){let e=this.storageService.get(`${$t.STORAGE_PREFIX}${t.name}`,t.scope);if(e!==void 0)switch(typeof t.defaultValue){case"boolean":e=e==="true";break;case"number":e=parseInt(e);break;case"object":e=JSON.parse(e);break}return e}};$t.STORAGE_PREFIX="workbench.";let xi=$t;const aa=5e3;let Mi=class extends P{constructor(t,e,i){super(),this._accessibilitySignalService=i,this._scheduler=new Us(()=>{this._signalLoop=this._accessibilitySignalService.playSignalLoop(ii.progress,e??aa)},t),this._scheduler.schedule()}dispose(){var t;super.dispose(),(t=this._signalLoop)==null||t.dispose(),this._scheduler.dispose()}};Mi=v([h(2,ei)],Mi);class ca{constructor(){this.priority=90,this.name="notifications",this.when=j,this.type="view"}getProvider(t){const e=t.get(Yn),i=t.get(jt),s=t.get(at),n=t.get(ei);function o(){const r=wt(i);if(!r)return;s.executeCommand("notifications.showList");let a;const c=i.lastFocusedList;if(c instanceof Ji&&(a=c.indexOf(r)),a===void 0)return;function l(){if(s.executeCommand("notifications.showList"),c&&a!==void 0){c.domFocus();try{c.setFocus([a])}catch{}}}function f(){const g=wt(i),C=g==null?void 0:g.message.original.toString();if(g)return g.source?m(8878,"{0} Source: {1}",C,g.source):m(8879,"{0}",C)}const b=f();if(b)return r.onDidClose(()=>e.next()),new Zn("notification",{type:"view"},()=>b,()=>l(),"accessibility.verbosity.notification",void 0,la(r,n),()=>{if(c)return l(),c.focusNext(),f()},()=>{if(c)return l(),c.focusPrevious(),f()})}return o()}}function la(u,t){let e;if(u.actions&&(e=[],u.actions.primary&&e.push(...u.actions.primary),u.actions.secondary&&e.push(...u.actions.secondary)),e)for(const s of e){s.class=T.asClassName(B.bell);const n=s.run;s.run=()=>{n(),u.close()}}const i=e==null?void 0:e.find(s=>s.label.includes("Manage Extension"));return i&&(i.class=T.asClassName(B.gear)),e&&e.push({id:"clearNotification",label:m(8880,"Clear Notification"),tooltip:m(8880,"Clear Notification"),run:()=>{u.close(),t.playSignal(ii.clear)},enabled:!0,class:T.asClassName(B.clearAll)}),e}class ha extends ra{constructor(t,e,i,s){super(t),this.options=e,this.serviceCollection=i,this._onWillShutdown=this._register(new w),this.onWillShutdown=this._onWillShutdown.event,this._onDidShutdown=this._register(new w),this.onDidShutdown=this._onDidShutdown.event,this.previousUnexpectedError={message:void 0,time:0},_("code/willStartWorkbench"),this.registerErrorHandler(s)}registerErrorHandler(t){p.addEventListener("unhandledrejection",e=>{Te(e.reason),e.preventDefault()}),js(e=>this.handleUnexpectedError(e,t))}handleUnexpectedError(t,e){const i=Ce(t,!0);if(!i)return;const s=Date.now();i===this.previousUnexpectedError.message&&s-this.previousUnexpectedError.time<=1e3||(this.previousUnexpectedError.time=s,this.previousUnexpectedError.message=i,e.error(i))}startup(){try{this._register(Xn(175));const t=this.initServices(this.serviceCollection);return t.invokeFunction(e=>{const i=e.get(ze),s=e.get($),n=e.get(Ot),o=e.get(se),r=e.get($n),a=e.get(it);this.initLayout(e),this.registerListeners(i,s,n,o,r),this.renderWorkbench(t,a,s,n),this.createWorkbenchLayout(),this.layout(),this.restore(i)}),t}catch(t){throw Te(t),t}}initServices(t){t.set(W,this);const e=lo();for(const[s,n]of e)t.set(s,n);const i=new Qn(t,!0);return i.invokeFunction(s=>{const n=s.get(ze),o=s.get(Ot);typeof o.acquireInstantiationService=="function"&&o.acquireInstantiationService(i),n.phase=2}),i}registerListeners(t,e,i,s,n){this._register(i.onDidChangeConfiguration(o=>this.updateFontAliasing(o,i))),xe?this._register(e.onWillSaveState(o=>{o.reason===qn.SHUTDOWN&&this.storeFontInfo(e)})):this._register(t.onWillShutdown(()=>this.storeFontInfo(e))),this._register(t.onWillShutdown(o=>this._onWillShutdown.fire(o))),this._register(t.onDidShutdown(()=>{this._onDidShutdown.fire(),this.dispose()})),this._register(s.onDidChangeFocus(o=>{o||e.flush()})),this._register(n.onWillShowDialog(()=>this.mainContainer.classList.add("modal-dialog-visible"))),this._register(n.onDidShowDialog(()=>this.mainContainer.classList.remove("modal-dialog-visible")))}updateFontAliasing(t,e){if(!K||t&&!t.affectsConfiguration("workbench.fontAliasing"))return;const i=e.getValue("workbench.fontAliasing");if(this.fontAliasing===i)return;this.fontAliasing=i;const s=["antialiased","none","auto"];this.mainContainer.classList.remove(...s.map(n=>`monaco-font-aliasing-${n}`)),s.some(n=>n===i)&&this.mainContainer.classList.add(`monaco-font-aliasing-${i}`)}restoreFontInfo(t,e){const i=t.get("editorFontInfo",-1);if(i)try{const s=JSON.parse(i);Array.isArray(s)&&hi.restoreFontInfo(p,s)}catch{}hi.readFontInfo(p,Jn.createFromRawSettings(e.getValue("editor"),to.getInstance(p).value))}storeFontInfo(t){const e=hi.serializeFontInfo(p);e&&t.store("editorFontInfo",JSON.stringify(e),-1,1)}renderWorkbench(t,e,i,s){var r;eo(this.mainContainer),io((a,c)=>t.createInstance(Mi,a,c));const n=He?"windows":os?"linux":"mac",o=_e(["monaco-workbench",n,L?"web":void 0,so?"chromium":no?"firefox":oo?"safari":void 0,...this.getLayoutClasses(),...(r=this.options)!=null&&r.extraClasses?this.options.extraClasses:[]]);this.mainContainer.classList.add(...o),p.document.body.classList.add(n),L&&p.document.body.classList.add("web"),this.updateFontAliasing(void 0,s),this.restoreFontInfo(i,s);for(const{id:a,role:c,classes:l,options:f}of[{id:"workbench.parts.titlebar",role:"none",classes:["titlebar"]},{id:"workbench.parts.banner",role:"banner",classes:["banner"]},{id:"workbench.parts.activitybar",role:"none",classes:["activitybar",this.getSideBarPosition()===0?"left":"right"]},{id:"workbench.parts.sidebar",role:"none",classes:["sidebar",this.getSideBarPosition()===0?"left":"right"]},{id:"workbench.parts.editor",role:"main",classes:["editor"],options:{restorePreviousState:this.willRestoreEditors()}},{id:"workbench.parts.panel",role:"none",classes:["panel","basepanel",Zt(this.getPanelPosition())]},{id:"workbench.parts.auxiliarybar",role:"none",classes:["auxiliarybar","basepanel",this.getSideBarPosition()===0?"right":"left"]},{id:"workbench.parts.statusbar",role:"status",classes:["statusbar"]}]){const b=this.createPart(a,c,l);_(`code/willCreatePart/${a}`),this.getPart(a).create(b,f),_(`code/didCreatePart/${a}`)}this.createNotificationsHandlers(t,e),this.parent.appendChild(this.mainContainer)}createPart(t,e,i){const s=document.createElement(e==="status"?"footer":"div");return s.classList.add("part",...i),s.id=t,s.setAttribute("role",e),e==="status"&&s.setAttribute("aria-live","off"),s}createNotificationsHandlers(t,e){const i=this._register(t.createInstance(_i,this.mainContainer,e.model)),s=this._register(t.createInstance(Ti,this.mainContainer,e.model));this._register(t.createInstance(sa,e.model));const n=t.createInstance(ki,e.model);this._register(t.createInstance(wi)),this._register(i.onDidChangeVisibility(()=>{n.update(i.isVisible,s.isVisible),s.update(i.isVisible)})),this._register(s.onDidChangeVisibility(()=>{n.update(i.isVisible,s.isVisible)})),Xr(i,s,e.model),ro.register(new ca),this.registerNotifications({onDidChangeNotificationsVisibility:X.map(X.any(s.onDidChangeVisibility,i.onDidChangeVisibility),()=>s.isVisible||i.isVisible)})}restore(t){try{this.restoreParts()}catch(e){Te(e)}this.whenReady.finally(()=>Promise.race([this.whenRestored,ao(2e3)]).finally(()=>{function e(){_("code/didStartWorkbench"),performance.measure("perf: workbench create & restore","code/didLoadWorkbenchMain","code/didStartWorkbench")}this.isRestored()?e():this.whenRestored.finally(()=>e()),t.phase=3,this._register(new Us(()=>{this._register(co(p,()=>t.phase=4,2500))},2500)).schedule()}))}}var da='.monaco-workbench .part.titlebar{display:flex;flex-direction:row}.monaco-workbench.mac .part.titlebar{flex-direction:row-reverse}.monaco-workbench .part.titlebar>.titlebar-container{align-items:center;box-sizing:border-box;display:flex;flex-grow:1;flex-shrink:1;height:100%;justify-content:space-between;overflow:hidden;user-select:none;-webkit-user-select:none;width:100%}.monaco-workbench .part.titlebar>.titlebar-container.counter-zoom{zoom:calc(1/var(--zoom-factor))}.monaco-workbench.mac .part.titlebar>.titlebar-container{line-height:22px}.monaco-workbench.linux .part.titlebar>.titlebar-container,.monaco-workbench.web .part.titlebar>.titlebar-container,.monaco-workbench.windows .part.titlebar>.titlebar-container{justify-content:left;line-height:22px}.monaco-workbench.web.safari .part.titlebar,.monaco-workbench.web.safari .part.titlebar>.titlebar-container{overflow:visible}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-drag-region{-webkit-app-region:drag;display:block;height:100%;left:0;position:absolute;top:0;width:100%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center,.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left,.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right{align-items:center;display:flex;height:100%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left{flex-grow:2;justify-content:flex-start;order:0;width:20%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center{justify-content:center;margin:0 10px;max-width:fit-content;min-width:0;order:1;width:60%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right{flex-grow:2;justify-content:flex-end;min-width:min-content;order:2;width:20%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title{flex:0 1 auto;font-size:12px;margin-left:auto;margin-right:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench.linux .part.titlebar>.titlebar-container>.titlebar-center>.window-title,.monaco-workbench.web .part.titlebar>.titlebar-container>.titlebar-center>.window-title,.monaco-workbench.windows .part.titlebar>.titlebar-container>.titlebar-center>.window-title{cursor:default}.monaco-workbench.linux .part.titlebar>.titlebar-container>.titlebar-center>.window-title{font-size:inherit}.monaco-workbench .part.titlebar>.titlebar-container .monaco-toolbar .actions-container{gap:4px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center{-webkit-app-region:no-drag;z-index:2500}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center.hide{visibility:hidden}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item.monaco-dropdown-with-primary .action-label,.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item>.action-label{color:var(--vscode-titleBar-activeForeground)}.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item.monaco-dropdown-with-primary .action-label,.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item>.action-label{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item>.action-label{color:inherit}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center{align-items:stretch;background-color:var(--vscode-commandCenter-background);border:1px solid var(--vscode-commandCenter-border);border-bottom-left-radius:6px;border-bottom-right-radius:6px;border-top-left-radius:6px;border-top-right-radius:6px;color:var(--vscode-commandCenter-foreground);display:flex;height:22px;margin:0 6px;max-width:600px;overflow:hidden;width:38vw}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick{display:flex;justify-content:start;margin:auto;max-width:600px;overflow:hidden}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick .search-icon{color:var(--vscode-commandCenter-foreground);font-size:14px;margin:auto 3px;opacity:.8}.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick .search-icon{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick .search-label{overflow:hidden;text-overflow:ellipsis}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center.multiple{justify-content:flex-start;padding:0 12px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center.multiple.active .action-label{background-color:inherit}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center:only-child{margin-left:0}.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center{border-color:var(--vscode-commandCenter-inactiveBorder)!important;color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .codicon-copilot{font-size:14px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center:HOVER{background-color:var(--vscode-commandCenter-activeBackground);border-color:var(--vscode-commandCenter-activeBorder);color:var(--vscode-commandCenter-activeForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.menubar{flex-wrap:nowrap;min-width:36px;order:2;z-index:2500}.monaco-workbench.web .part.titlebar>.titlebar-container>.titlebar-left>.menubar{margin-left:4px}.monaco-workbench .part.titlebar>.titlebar-container.counter-zoom .menubar .menubar-menu-button>.menubar-menu-items-holder.monaco-menu-container,.monaco-workbench .part.titlebar>.titlebar-container.counter-zoom .monaco-toolbar .dropdown-action-container{zoom:var(--zoom-factor)}.monaco-workbench.linux .part.titlebar>.titlebar-container>.resizer,.monaco-workbench.windows .part.titlebar>.titlebar-container>.resizer{-webkit-app-region:no-drag;height:4px;position:absolute;top:0;width:100%}.monaco-workbench.linux.fullscreen .part.titlebar>.titlebar-container>.resizer,.monaco-workbench.windows.fullscreen .part.titlebar>.titlebar-container>.resizer{display:none}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon{flex-shrink:0;height:100%;order:1;position:relative;width:35px;z-index:2500}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon:not(.codicon){background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMDI0IDEwMjRIMFYwaDEwMjR2MTAyNHoiIHN0eWxlPSJmaWxsOiNmNmY2ZjY7ZmlsbC1vcGFjaXR5OjAiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNMTAyNCA4NS4zMzN2ODUzLjMzM0gwVjg1LjMzM2gxMDI0eiIgc3R5bGU9ImZpbGw6I2ZmZiIvPjxwYXRoIGQ9Ik0wIDg1LjMzM2gyOTguNjY3djg1My4zMzNIMFY4NS4zMzN6bTEwMjQgMHY4NTMuMzMzSDM4NFY4NS4zMzNoNjQwem0tNTU0LjY2NyAxNjBoMzQxLjMzM3YtNjRINDY5LjMzM3Y2NHptMzQxLjMzNCA1MzMuMzM0SDQ2OS4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0xMjgtMTQ5LjMzNEg1OTcuMzMzdjY0aDM0MS4zMzNsLjAwMS02NHptMC0xNDkuMzMzSDU5Ny4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0wLTE0OS4zMzNINTk3LjMzM3Y2NGgzNDEuMzMzbC4wMDEtNjR6IiBzdHlsZT0iZmlsbDojMTY3YWJmIi8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:16px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon.codicon{line-height:30px}.monaco-workbench.fullscreen .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon{display:none}.monaco-workbench .part.titlebar>.titlebar-container .window-appicon>.home-bar-icon-badge{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMDI0IDEwMjRIMFYwaDEwMjR2MTAyNHoiIHN0eWxlPSJmaWxsOiNmNmY2ZjY7ZmlsbC1vcGFjaXR5OjAiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNMTAyNCA4NS4zMzN2ODUzLjMzM0gwVjg1LjMzM2gxMDI0eiIgc3R5bGU9ImZpbGw6I2ZmZiIvPjxwYXRoIGQ9Ik0wIDg1LjMzM2gyOTguNjY3djg1My4zMzNIMFY4NS4zMzN6bTEwMjQgMHY4NTMuMzMzSDM4NFY4NS4zMzNoNjQwem0tNTU0LjY2NyAxNjBoMzQxLjMzM3YtNjRINDY5LjMzM3Y2NHptMzQxLjMzNCA1MzMuMzM0SDQ2OS4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0xMjgtMTQ5LjMzNEg1OTcuMzMzdjY0aDM0MS4zMzNsLjAwMS02NHptMC0xNDkuMzMzSDU5Ny4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0wLTE0OS4zMzNINTk3LjMzM3Y2NGgzNDEuMzMzbC4wMDEtNjR6IiBzdHlsZT0iZmlsbDojMTY3YWJmIi8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:8px;border-left:1px solid transparent;border-top:1px solid transparent;bottom:6px;height:8px;pointer-events:none;position:absolute;right:9px;width:8px;z-index:1}.monaco-workbench .part.titlebar .window-controls-container{-webkit-app-region:no-drag;display:flex;flex-grow:0;flex-shrink:0;height:100%;text-align:center;width:0;z-index:3000}.monaco-workbench.fullscreen .part.titlebar .window-controls-container{background-color:transparent;display:none}.monaco-workbench.web .part.titlebar .titlebar-right .window-controls-container{height:env(titlebar-area-height,35px);width:calc(100vw - env(titlebar-area-width, 100vw) - env(titlebar-area-x, 0px))}.monaco-workbench.web .part.titlebar .titlebar-left .window-controls-container{height:env(titlebar-area-height,35px);width:env(titlebar-area-x,0)}.monaco-workbench.web.mac .part.titlebar .titlebar-left .window-controls-container{order:0}.monaco-workbench.web.mac .part.titlebar .titlebar-right .window-controls-container{order:1}.monaco-workbench:not(.web):not(.mac) .part.titlebar .window-controls-container{width:calc(138px/var(--zoom-factor, 1))}.monaco-workbench:not(.web):not(.mac) .part.titlebar .titlebar-container.counter-zoom .window-controls-container{width:138px}.monaco-workbench.linux:not(.web) .part.titlebar .titlebar-container.counter-zoom .window-controls-container.wco-enabled,.monaco-workbench.linux:not(.web) .part.titlebar .window-controls-container.wco-enabled{width:calc(100vw - env(titlebar-area-width, 100vw) - env(titlebar-area-x, 0px))}.monaco-workbench:not(.web):not(.mac) .part.titlebar .titlebar-container:not(.counter-zoom) .window-controls-container *{zoom:calc(1/var(--zoom-factor, 1))}.monaco-workbench:not(.web).mac .part.titlebar .window-controls-container{width:70px}.monaco-workbench .part.titlebar .window-controls-container>.window-icon{align-items:center;color:var(--vscode-titleBar-activeForeground);display:flex;font-size:16px;height:100%;justify-content:center;width:46px}.monaco-workbench .part.titlebar.inactive .window-controls-container>.window-icon{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar .window-controls-container>.window-icon:before{height:16px;line-height:16px}.monaco-workbench .part.titlebar .window-controls-container>.window-icon:hover{background-color:hsla(0,0%,100%,.1)}.monaco-workbench .part.titlebar.light .window-controls-container>.window-icon:hover{background-color:rgba(0,0,0,.1)}.monaco-workbench .part.titlebar .window-controls-container>.window-icon.window-close:hover{background-color:rgba(232,17,35,.9)}.monaco-workbench .part.titlebar .window-controls-container .window-icon.window-close:hover{color:#fff}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container{-webkit-app-region:no-drag;display:none;flex-grow:0;flex-shrink:0;height:100%;margin-left:auto;padding-right:2px;position:relative;text-align:center;z-index:2500}.monaco-workbench.mac:not(.web) .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container{right:8px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container:not(.has-no-actions){display:flex;justify-content:center}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .codicon{color:inherit}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item{display:flex}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .badge{align-items:center;display:flex;margin-left:8px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge{margin-left:0}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .badge .badge-content{border-radius:11px;box-sizing:border-box;display:inline-block;font-size:9px;font-weight:400;height:16px;line-height:11px;min-width:11px;padding:3px 5px;position:relative;text-align:center}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge.compact{bottom:0;height:100%;left:0;margin:auto;overflow:hidden;position:absolute;top:0;width:100%;z-index:2}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge.compact .badge-content:before{mask-size:12px;-webkit-mask-size:12px;top:2px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge.compact .badge-content{border-radius:16px;font-size:9px;font-weight:600;height:12px;line-height:12px;min-width:12px;padding:0 2px;position:absolute;right:0;text-align:center;top:10px}';Ht(da,{});var Ni;let Vi=class{constructor(t,e,i,s){this._disposables=new E,this._onDidChangeVisibility=new w,this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.element=document.createElement("div"),this.element.classList.add("command-center");const n=i.createInstance(uo,this.element,N.CommandCenter,{contextMenu:N.TitleBarContext,hiddenItemStrategy:-1,toolbarOptions:{primaryGroup:()=>!0},telemetrySource:"commandCenter",actionViewItemProvider:(o,r)=>o instanceof fo&&o.item.submenu===N.CommandCenterCenter?i.createInstance(Bi,o,t,{...r,hoverDelegate:e}):rs(i,o,{...r,hoverDelegate:e})});this._disposables.add(X.filter(s.onShow,()=>Ws(this.element),this._disposables)(this._setVisibility.bind(this,!1))),this._disposables.add(s.onHide(this._setVisibility.bind(this,!0))),this._disposables.add(n)}_setVisibility(t){this.element.classList.toggle("hide",!t),this._onDidChangeVisibility.fire()}dispose(){this._disposables.dispose()}};Vi=v([h(2,D),h(3,Ps)],Vi);var Nt;let Bi=(Nt=class extends ps{constructor(t,e,i,s,n,o,r){super(void 0,t.actions.find(a=>a.id==="workbench.action.quickOpenWithModes")??t.actions[0],i),this._submenu=t,this._windowTitle=e,this._hoverService=s,this._keybindingService=n,this._instaService=o,this._editorGroupService=r,this._hoverDelegate=i.hoverDelegate??fi("mouse")}render(t){super.render(t),t.classList.add("command-center-center"),t.classList.toggle("multiple",this._submenu.actions.length>1);const e=this._store.add(this._hoverService.setupManagedHover(this._hoverDelegate,t,this.getTooltip()));this._store.add(this._windowTitle.onDidChange(()=>{e.update(this.getTooltip())}));const i=[];for(const s of this._submenu.actions)s instanceof ho?i.push(s.actions):i.push([s]);for(let s=0;s<i.length;s++){const n=i[s],o=this._instaService.createInstance(Ks,t,{hiddenItemStrategy:-1,telemetrySource:"commandCenterCenter",actionViewItemProvider:(r,a)=>{if(a={...a,hoverDelegate:this._hoverDelegate},r.id!==Ni._quickOpenCommandId)return rs(this._instaService,r,a);const c=this;return this._instaService.createInstance(class extends ps{constructor(){super(void 0,r,a)}render(f){super.render(f),f.classList.toggle("command-center-quick-pick"),f.role="button";const b=this.action,g=document.createElement("span");g.ariaHidden="true",g.className=b.class??"",g.classList.add("search-icon");const C=this._getLabel(),A=document.createElement("span");A.classList.add("search-label"),A.innerText=C,Ys(f,g,A);const ht=this._store.add(c._hoverService.setupManagedHover(c._hoverDelegate,f,this.getTooltip()));this._store.add(c._windowTitle.onDidChange(()=>{ht.update(this.getTooltip()),A.innerText=this._getLabel()})),this._store.add(c._editorGroupService.onDidChangeEditorPartOptions(({newPartOptions:re,oldPartOptions:ai})=>{re.showTabs!==ai.showTabs&&(ht.update(this.getTooltip()),A.innerText=this._getLabel())}))}getTooltip(){return c.getTooltip()}_getLabel(){const{prefix:f,suffix:b}=c._windowTitle.getTitleDecorations();let g=c._windowTitle.workspaceName;return c._windowTitle.isCustomTitleFormat()?g=c._windowTitle.getWindowTitle():c._editorGroupService.partOptions.showTabs==="none"&&(g=c._windowTitle.fileName??g),g||(g=m(7042,"Search")),f&&(g=m(7043,"{0} {1}",f,g)),b&&(g=m(7044,"{0} {1}",g,b)),g.replaceAll(/\r\n|\r|\n/g,"âŽ")}})}});if(o.setActions(n),this._store.add(o),s<i.length-1){const r=pi(B.circleSmallFilled);r.style.padding="0 12px",r.style.height="100%",r.style.opacity="0.5",t.appendChild(r)}}}getTooltip(){var i;const t=(i=this._keybindingService.lookupKeybinding(this.action.id))==null?void 0:i.getLabel();return t?m(7045,"Search {0} ({1}) â€” {2}",this._windowTitle.workspaceName,t,this._windowTitle.value):m(7046,"Search {0} â€” {1}",this._windowTitle.workspaceName,this._windowTitle.value)}},Ni=Nt,Nt._quickOpenCommandId="workbench.action.quickOpenWithModes",Nt);Bi=Ni=v([h(3,ss),h(4,Gt),h(5,D),h(6,mt)],Bi);dt.appendMenuItem(N.CommandCenter,{submenu:N.CommandCenterCenter,title:m(7047,"Command Center"),icon:B.shield,order:101});var Pi;let Li=class extends en{constructor(t,e,i){super("workbench.titleService",i,e),this.instantiationService=t,this.mainPart=this._register(this.createMainTitlebarPart()),this.onMenubarVisibilityChange=this.mainPart.onMenubarVisibilityChange,this.properties=void 0,this.variables=new Map,this._register(this.registerPart(this.mainPart)),this.registerActions(),this.registerAPICommands()}createMainTitlebarPart(){return this.instantiationService.createInstance(Ri)}registerActions(){const t=this;this._register(cs(class extends ls{constructor(){super({id:"workbench.action.focusTitleBar",title:q(3082,"Focus Title Bar"),category:hs.View,f1:!0})}run(){t.getPartByDocument(Fs()).focus()}}))}registerAPICommands(){this._register(bt.registerCommand({id:"registerWindowTitleVariable",handler:(t,e,i)=>{this.registerVariables([{name:e,contextKey:i}])},metadata:{description:"Registers a new title variable",args:[{name:"name",schema:{type:"string"},description:"The name of the variable to register"},{name:"contextKey",schema:{type:"string"},description:"The context key to use for the value of the variable"}]}}))}createAuxiliaryTitlebarPart(t,e){const i=document.createElement("div");i.classList.add("part","titlebar"),i.setAttribute("role","none"),i.style.position="relative",t.insertBefore(i,t.firstChild);const s=new E,n=this.doCreateAuxiliaryTitlebarPart(i,e);return s.add(this.registerPart(n)),s.add(X.runAndSubscribe(n.onDidChange,()=>i.style.height=`${n.height}px`)),n.create(i),this.properties&&n.updateProperties(this.properties),this.variables.size&&n.registerVariables(Array.from(this.variables.values())),X.once(n.onWillDispose)(()=>s.dispose()),n}doCreateAuxiliaryTitlebarPart(t,e){return this.instantiationService.createInstance(Oi,t,e,this.mainPart)}updateProperties(t){this.properties=t;for(const e of this.parts)e.updateProperties(t)}registerVariables(t){const e=[];for(const i of t)this.variables.has(i.name)||(this.variables.set(i.name,i),e.push(i));for(const i of this.parts)i.registerVariables(e)}};Li=v([h(0,D),h(1,$),h(2,U)],Li);let $e=class extends ri{get minimumHeight(){var i;const t=L&&bi();let e=this.isCommandCenterVisible||t?mo:30;return t&&(e=Math.max(e,((i=go(O(this.element)))==null?void 0:i.height)??0)),e/(this.preventZoom?Me(O(this.element)):1)}get maximumHeight(){return this.minimumHeight}constructor(t,e,i,s,n,o,r,a,c,l,f,b,g,C,A,ht){super(t,{hasTitle:!1},a,c,l),this.contextMenuService=s,this.configurationService=n,this.environmentService=o,this.instantiationService=r,this.storageService=c,this.contextKeyService=f,this.hostService=b,this.editorGroupService=g,this.menuService=A,this.keybindingService=ht,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this._onMenubarVisibilityChange=this._register(new w),this.onMenubarVisibilityChange=this._onMenubarVisibilityChange.event,this._onWillDispose=this._register(new w),this.onWillDispose=this._onWillDispose.event,this.actionToolBarDisposable=this._register(new E),this.editorActionsChangeDisposable=this._register(new E),this.editorToolbarMenuDisposables=this._register(new E),this.layoutToolbarMenuDisposables=this._register(new E),this.activityToolbarDisposables=this._register(new E),this.titleDisposables=this._register(new E),this.titleBarStyle=bo(this.configurationService),this.isInactive=!1,this.isAuxiliary=i!=="main",this.editorService=C.createScoped(i,this._store),this.editorGroupsContainer=i==="main"?g.mainPart:i,this.windowTitle=this._register(r.createInstance(po,e,i)),this.hoverDelegate=this._register(wo()),this.registerListeners(Ae(e))}registerListeners(t){this._register(this.hostService.onDidChangeFocus(e=>e?this.onFocus():this.onBlur())),this._register(this.hostService.onDidChangeActiveWindow(e=>e===t?this.onFocus():this.onBlur())),this._register(this.configurationService.onDidChangeConfiguration(e=>this.onConfigurationChanged(e))),this._register(this.editorGroupService.onDidChangeEditorPartOptions(e=>this.onEditorPartConfigurationChange(e)))}onBlur(){this.isInactive=!0,this.updateStyles()}onFocus(){this.isInactive=!1,this.updateStyles()}onEditorPartConfigurationChange({oldPartOptions:t,newPartOptions:e}){(t.editorActionsLocation!==e.editorActionsLocation||t.showTabs!==e.showTabs)&&this.actionToolBar&&(this.createActionToolBar(),this.createActionToolBarMenus({editorActions:!0}),this._onDidChange.fire(void 0))}onConfigurationChanged(t){if(!this.isAuxiliary&&!yt(this.configurationService,this.titleBarStyle)&&(!K||L)&&t.affectsConfiguration("window.menuBarVisibility")&&(this.currentMenubarVisibility==="compact"?this.uninstallMenubar():this.installMenubar()),this.actionToolBar){const e=t.affectsConfiguration("workbench.layoutControl.enabled"),i=t.affectsConfiguration("workbench.activityBar.location");(e||i)&&(this.createActionToolBarMenus({layoutActions:e,activityActions:i}),this._onDidChange.fire(void 0))}t.affectsConfiguration("window.commandCenter")&&(this.createTitle(),this._onDidChange.fire(void 0))}installMenubar(){this.menubar||(this.customMenubar=this._register(this.instantiationService.createInstance(Dr)),this.menubar=F(this.leftContent,k("div.menubar")),this.menubar.setAttribute("role","menubar"),this._register(this.customMenubar.onVisibilityChange(t=>this.onMenubarVisibilityChanged(t))),this.customMenubar.create(this.menubar))}uninstallMenubar(){var t,e;(t=this.customMenubar)==null||t.dispose(),this.customMenubar=void 0,(e=this.menubar)==null||e.remove(),this.menubar=void 0,this.onMenubarVisibilityChanged(!1)}onMenubarVisibilityChanged(t){(L||He||os)&&(this.lastLayoutDimensions&&this.layout(this.lastLayoutDimensions.width,this.lastLayoutDimensions.height),this._onMenubarVisibilityChange.fire(t))}updateProperties(t){this.windowTitle.updateProperties(t)}registerVariables(t){this.windowTitle.registerVariables(t)}createContentArea(t){var e,i;if(this.element=t,this.rootContainer=F(t,k(".titlebar-container")),this.leftContent=F(this.rootContainer,k(".titlebar-left")),this.centerContent=F(this.rootContainer,k(".titlebar-center")),this.rightContent=F(this.rootContainer,k(".titlebar-right")),!K&&!L&&!yt(this.configurationService,this.titleBarStyle)&&(this.appIcon=ws(this.leftContent,k("a.window-appicon")),!this.isAuxiliary&&L)){const s=(e=this.environmentService.options)==null?void 0:e.homeIndicator;if(s){const n=vo().getIcon(s.icon)?{id:s.icon}:B.code;this.appIcon.setAttribute("href",s.href),this.appIcon.classList.add(...T.asClassNameArray(n)),this.appIconBadge=document.createElement("div"),this.appIconBadge.classList.add("home-bar-icon-badge"),this.appIcon.appendChild(this.appIconBadge)}}if(this.dragRegion=ws(this.rootContainer,k("div.titlebar-drag-region")),!this.isAuxiliary&&!yt(this.configurationService,this.titleBarStyle)&&(!K||L)&&this.currentMenubarVisibility!=="compact"&&this.installMenubar(),this.title=F(this.centerContent,k("div.window-title")),this.createTitle(),this.actionToolBarElement=F(this.rightContent,k("div.action-toolbar-container")),this.createActionToolBar(),this.createActionToolBarMenus(),!yt(this.configurationService,this.titleBarStyle)){let s=K?"left":"right";if(K&&xe){const n=new Intl.Locale(xo);((i=n==null?void 0:n.textInfo)==null?void 0:i.direction)==="rtl"&&(s="right")}K&&xe&&s==="left"||(this.windowControlsContainer=F(s==="left"?this.leftContent:this.rightContent,k("div.window-controls-container")),L&&F(s==="left"?this.rightContent:this.leftContent,k("div.window-controls-container")),bi()&&this.windowControlsContainer.classList.add("wco-enabled"))}return this._register(V(this.rootContainer,z.CONTEXT_MENU,s=>{ot.stop(s);let n;K&&Zs(s.target)&&yo(s.target,this.title)?n=N.TitleBarTitleContext:n=N.TitleBarContext,this.onContextMenu(s,n)})),K&&this._register(V(this.title,z.MOUSE_DOWN,s=>{s.metaKey&&(ot.stop(s,!0),this.onContextMenu(s,N.TitleBarTitleContext))},!0)),this.updateStyles(),this.element}createTitle(){if(this.titleDisposables.clear(),!this.isCommandCenterVisible)this.title.innerText=this.windowTitle.value,this.titleDisposables.add(this.windowTitle.onDidChange(()=>{this.title.innerText=this.windowTitle.value}));else{const t=this.instantiationService.createInstance(Vi,this.windowTitle,this.hoverDelegate);Ys(this.title,t.element),this.titleDisposables.add(t)}}actionViewItemProvider(t,e){var s;if(!this.isAuxiliary){if(t.id===vs)return this.instantiationService.createInstance(Ar,{position:()=>2},e);if(t.id===ys)return this.instantiationService.createInstance(_r,{position:()=>2},e)}const i=(s=this.editorGroupsContainer.activeGroup)==null?void 0:s.activeEditorPane;if(i&&i instanceof Co){const n=i.getActionViewItem(t,e);if(n)return n}return rs(this.instantiationService,t,{...e,menuAsChild:!1})}getKeybinding(t){var i,s;const e=((s=(i=this.editorGroupsContainer.activeGroup)==null?void 0:i.activeEditorPane)==null?void 0:s.scopedContextKeyService)??this.contextKeyService;return this.keybindingService.lookupKeybinding(t.id,e)}createActionToolBar(){this.actionToolBarDisposable.clear(),this.actionToolBar=this.actionToolBarDisposable.add(this.instantiationService.createInstance(Ks,this.actionToolBarElement,{contextMenu:N.TitleBarContext,orientation:0,ariaLabel:m(3083,"Title actions"),getKeyBinding:t=>this.getKeybinding(t),overflowBehavior:{maxItems:9,exempted:[ys,vs,...So]},anchorAlignmentProvider:()=>1,telemetrySource:"titlePart",highlightToggledItems:this.editorActionsEnabled,actionViewItemProvider:(t,e)=>this.actionViewItemProvider(t,e),hoverDelegate:this.hoverDelegate})),this.editorActionsEnabled&&this.actionToolBarDisposable.add(this.editorGroupsContainer.onDidChangeActiveGroup(()=>this.createActionToolBarMenus({editorActions:!0})))}createActionToolBarMenus(t=!0){t===!0&&(t={editorActions:!0,layoutActions:!0,activityActions:!0});const e=()=>{const i={primary:[],secondary:[]};if(this.editorActionsEnabled){this.editorActionsChangeDisposable.clear();const s=this.editorGroupsContainer.activeGroup;if(s){const n=s.createEditorActions(this.editorActionsChangeDisposable);i.primary.push(...n.actions.primary),i.secondary.push(...n.actions.secondary),this.editorActionsChangeDisposable.add(n.onDidChange(()=>e()))}}this.layoutToolbarMenu&&Mo(this.layoutToolbarMenu,{},i,()=>!this.editorActionsEnabled),this.activityActionsEnabled&&(xr(this.storageService)&&i.primary.push(No),i.primary.push(Vo)),this.actionToolBar.setActions(Cs(i.primary),Cs(i.secondary))};if(t.editorActions)if(this.editorToolbarMenuDisposables.clear(),this.editorActionsEnabled&&this.editorService.activeEditor!==void 0){const i={groupId:this.editorGroupsContainer.activeGroup.id};this.actionToolBar.actionRunner=new kr(i),this.actionToolBar.context=i,this.editorToolbarMenuDisposables.add(this.actionToolBar.actionRunner)}else this.actionToolBar.actionRunner=new qi,this.actionToolBar.context=void 0,this.editorToolbarMenuDisposables.add(this.actionToolBar.actionRunner);t.layoutActions&&(this.layoutToolbarMenuDisposables.clear(),this.layoutControlEnabled?(this.layoutToolbarMenu=this.menuService.createMenu(N.LayoutControlMenu,this.contextKeyService),this.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu),this.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu.onDidChange(()=>e()))):this.layoutToolbarMenu=void 0),t.activityActions&&(this.activityToolbarDisposables.clear(),this.activityActionsEnabled&&this.activityToolbarDisposables.add(this.storageService.onDidChangeValue(0,Tr.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,this._store)(()=>e()))),e()}updateStyles(){if(super.updateStyles(),this.element){this.isInactive?this.element.classList.add("inactive"):this.element.classList.remove("inactive");const t=this.getColor(this.isInactive?Io:Eo,(s,n)=>s.isOpaque()?s:s.makeOpaque(Do(n)))||"";this.element.style.backgroundColor=t,this.appIconBadge&&(this.appIconBadge.style.backgroundColor=t),t&&Ao.fromHex(t).isLighter()?this.element.classList.add("light"):this.element.classList.remove("light");const e=this.getColor(this.isInactive?_o:ko);this.element.style.color=e||"";const i=this.getColor(To);this.element.style.borderBottom=i?`1px solid ${i}`:""}}onContextMenu(t,e){const i=new Xs(O(this.element),t);this.contextMenuService.showContextMenu({getAnchor:()=>i,menuId:e,contextKeyService:this.contextKeyService,domForShadowRoot:K&&xe?i.target:void 0})}get currentMenubarVisibility(){return this.isAuxiliary?"hidden":gi(this.configurationService)}get layoutControlEnabled(){return!this.isAuxiliary&&this.configurationService.getValue("workbench.layoutControl.enabled")!==!1}get isCommandCenterVisible(){return this.configurationService.getValue("window.commandCenter")!==!1}get editorActionsEnabled(){return this.editorGroupService.partOptions.editorActionsLocation==="titleBar"||this.editorGroupService.partOptions.editorActionsLocation==="default"&&this.editorGroupService.partOptions.showTabs==="none"}get activityActionsEnabled(){const t=this.configurationService.getValue("workbench.activityBar.location");return!this.isAuxiliary&&(t==="top"||t==="bottom")}get hasZoomableElements(){const t=!(this.currentMenubarVisibility==="hidden"||this.currentMenubarVisibility==="compact"||!L&&K),e=this.isCommandCenterVisible,i=this.layoutControlEnabled||this.editorActionsEnabled||this.activityActionsEnabled;return t||e||i}get preventZoom(){return Me(O(this.element))<1||!this.hasZoomableElements}layout(t,e){this.updateLayout(new ie(t,e)),super.layoutContents(t,e)}updateLayout(t){this.lastLayoutDimensions=t;{const e=Me(O(this.element));if(this.element.style.setProperty("--zoom-factor",e.toString()),this.rootContainer.classList.toggle("counter-zoom",this.preventZoom),this.customMenubar){const i=new ie(0,t.height);this.customMenubar.layout(i)}}}focus(){this.customMenubar?this.customMenubar.toggleFocus():this.element.querySelector('[tabindex]:not([tabindex="-1"])').focus()}toJSON(){return{type:"workbench.parts.titlebar"}}dispose(){this._onWillDispose.fire(),super.dispose()}};$e=v([h(3,st),h(4,Ot),h(5,Se),h(6,D),h(7,U),h(8,$),h(9,W),h(10,ct),h(11,se),h(12,mt),h(13,ne),h(14,as),h(15,Gt)],$e);let Ri=class extends $e{constructor(t,e,i,s,n,o,r,a,c,l,f,b,g){super("workbench.parts.titlebar",p,"main",t,e,i,s,n,o,r,a,c,l,f,b,g)}};Ri=v([h(0,st),h(1,Ot),h(2,Se),h(3,D),h(4,U),h(5,$),h(6,W),h(7,ct),h(8,se),h(9,mt),h(10,ne),h(11,as),h(12,Gt)],Ri);var Vt;let Oi=(Vt=class extends $e{get height(){return this.minimumHeight}constructor(t,e,i,s,n,o,r,a,c,l,f,b,g,C,A,ht){const re=Pi.COUNTER++;super(`workbench.parts.auxiliaryTitle.${re}`,O(t),e,s,n,o,r,a,c,l,f,b,g,C,A,ht),this.container=t,this.mainTitlebar=i}get preventZoom(){return Me(O(this.element))<1||!this.mainTitlebar.hasZoomableElements}},Pi=Vt,Vt.COUNTER=1,Vt);Oi=Pi=v([h(3,st),h(4,Ot),h(5,Se),h(6,D),h(7,U),h(8,$),h(9,W),h(10,ct),h(11,se),h(12,mt),h(13,ne),h(14,as),h(15,Gt)],Oi);function ua(){return{[ns.toString()]:new Ct(Li,[],!1)}}$s(async u=>{u.get(ns)});var fa='.monaco-workbench .part.statusbar{box-sizing:border-box;cursor:default;display:flex;font-size:12px;height:22px;overflow:hidden;width:100%}.monaco-workbench:not(.reduce-motion) .part.statusbar{transition:background-color .15s ease-out}.monaco-workbench .part.statusbar.status-border-top:after{background-color:var(--status-border-top-color);content:"";height:1px;left:0;pointer-events:none;position:absolute;top:0;width:100%;z-index:5}.monaco-workbench .part.statusbar>.left-items,.monaco-workbench .part.statusbar>.right-items{display:flex}.monaco-workbench .part.statusbar>.right-items{flex-direction:row-reverse;flex-wrap:wrap}.monaco-workbench .part.statusbar>.left-items{flex-grow:1}.monaco-workbench .part.statusbar>.items-container>.statusbar-item{display:inline-block;font-variant-numeric:tabular-nums;height:100%;line-height:22px;max-width:40vw;vertical-align:top}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak{position:relative}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak>.status-bar-item-beak-container{height:5px;left:calc(50% - 5px);position:absolute;top:-5px;width:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak>.status-bar-item-beak-container:before{border-bottom-style:solid;border-bottom-width:5px;border-left:5px solid transparent;border-right:5px solid transparent;content:"";position:fixed}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>.statusbar-item-label{margin-left:3px;margin-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left>.statusbar-item-label{margin-left:0;margin-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right>.statusbar-item-label{margin-left:3px;margin-right:0}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left.compact-right>.statusbar-item-label{margin-left:0;margin-right:0}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.left.first-visible-item{padding-left:7px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.right.last-visible-item{margin-right:7px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color.left.first-visible-item,.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color.right.last-visible-item{padding-left:0;padding-right:0}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color>.statusbar-item-label{margin-left:0;margin-right:0;padding-left:10px;padding-right:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left.has-background-color>.statusbar-item-label{padding-left:3px;padding-right:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right.has-background-color>.statusbar-item-label{padding-left:10px;padding-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>.statusbar-item-label{align-items:center;cursor:pointer;display:flex;height:100%;outline-width:0;overflow:hidden;padding:0 5px;text-overflow:ellipsis;white-space:pre}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left>.statusbar-item-label,.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right>.statusbar-item-label{padding:0 3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>a:hover:not(.disabled){color:var(--vscode-statusBarItem-hoverForeground);text-decoration:none}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>a.disabled{cursor:default}.monaco-workbench .part.statusbar>.items-container>.statusbar-item span.codicon{color:inherit;font-size:14px;text-align:center}.monaco-workbench .part.statusbar>.items-container>.statusbar-item a:active:not(.disabled){outline:1px solid var(--vscode-contrastActiveBorder)!important;outline-offset:-1px}.monaco-workbench:not(.hc-light):not(.hc-black) .part.statusbar>.items-container>.statusbar-item a:active:not(.disabled){background-color:var(--vscode-statusBarItem-activeBackground)!important}.monaco-workbench .part.statusbar>.items-container>.statusbar-item a:hover:not(.disabled){outline:1px dashed var(--vscode-contrastActiveBorder);outline-offset:-1px}.monaco-workbench:not(.hc-light):not(.hc-black) .part.statusbar>.items-container>.statusbar-item a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-hoverBackground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.warning-kind{background-color:var(--vscode-statusBarItem-warningBackground);color:var(--vscode-statusBarItem-warningForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.warning-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-warningHoverBackground)!important;color:var(--vscode-statusBarItem-warningHoverForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.error-kind{background-color:var(--vscode-statusBarItem-errorBackground);color:var(--vscode-statusBarItem-errorForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.error-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-errorHoverBackground)!important;color:var(--vscode-statusBarItem-errorHoverForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.prominent-kind{background-color:var(--vscode-statusBarItem-prominentBackground);color:var(--vscode-statusBarItem-prominentForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.prominent-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-prominentHoverBackground)!important;color:var(--vscode-statusBarItem-prominentHoverForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.remote-kind{background-color:var(--vscode-statusBarItem-remoteBackground);color:var(--vscode-statusBarItem-remoteForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.remote-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-remoteHoverBackground)!important;color:var(--vscode-statusBarItem-remoteHoverForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.offline-kind{background-color:var(--vscode-statusBarItem-offlineBackground);color:var(--vscode-statusBarItem-offlineForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.offline-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-offlineHoverBackground)!important;color:var(--vscode-statusBarItem-offlineHoverForeground)}';Ht(fa,{});class ma extends G{constructor(t,e,i){super(t,e,void 0,!0),this.model=i,this.checked=!i.isHidden(t)}async run(){this.model.isHidden(this.id)?this.model.show(this.id):this.model.hide(this.id)}}class ga extends G{constructor(t,e,i){super(t,m(6888,"Hide '{0}'",e),void 0,!0),this.model=i}async run(){this.model.hide(this.id)}}I.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusPrevious",weight:200,primary:15,secondary:[16],when:oe,handler:u=>{u.get(lt).focusPreviousEntry()}});I.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusNext",weight:200,primary:17,secondary:[18],when:oe,handler:u=>{u.get(lt).focusNextEntry()}});I.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusFirst",weight:200,primary:14,when:oe,handler:u=>{const t=u.get(lt);t.focus(!1),t.focusNextEntry()}});I.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusLast",weight:200,primary:13,when:oe,handler:u=>{const t=u.get(lt);t.focus(!1),t.focusPreviousEntry()}});I.registerCommandAndKeybindingRule({id:"workbench.statusBar.clearFocus",weight:200,primary:9,when:oe,handler:u=>{const t=u.get(lt),e=u.get(ne);t.isEntryFocused()?t.focus(!1):e.activeEditorPane&&e.activeEditorPane.focus()}});class ba extends ls{constructor(){super({id:"workbench.action.focusStatusBar",title:q(6889,"Focus Status Bar"),category:hs.View,f1:!0})}async run(t){t.get(W).focusPart("workbench.parts.statusbar",ke())}}cs(ba);const vt=class vt extends P{get entries(){return this._entries.slice(0)}get lastFocusedEntry(){return this._lastFocusedEntry&&!this.isHidden(this._lastFocusedEntry.id)?this._lastFocusedEntry:void 0}constructor(t){super(),this.storageService=t,this._onDidChangeEntryVisibility=this._register(new w),this.onDidChangeEntryVisibility=this._onDidChangeEntryVisibility.event,this._entries=[],this.hidden=new Set,this.restoreState(),this.registerListeners()}restoreState(){const t=this.storageService.get(vt.HIDDEN_ENTRIES_KEY,0);if(t)try{this.hidden=new Set(JSON.parse(t))}catch{}}registerListeners(){this._register(this.storageService.onDidChangeValue(0,vt.HIDDEN_ENTRIES_KEY,this._register(new E))(()=>this.onDidStorageValueChange()))}onDidStorageValueChange(){const t=new Set(this.hidden);this.hidden.clear(),this.restoreState();const e=new Set;for(const i of t)this.hidden.has(i)||e.add(i);for(const i of this.hidden)t.has(i)||e.add(i);if(e.size>0)for(const i of this._entries)e.has(i.id)&&(this.updateVisibility(i.id,!0),e.delete(i.id))}add(t){this._entries.push(t),this.updateVisibility(t,!1),this.sort(),this.markFirstLastVisibleEntry()}remove(t){const e=this._entries.indexOf(t);e>=0&&(this._entries.splice(e,1),this._entries.some(i=>Ne(i.priority.primary)&&i.priority.primary.id===t.id)&&this.sort(),this.markFirstLastVisibleEntry())}isHidden(t){return this.hidden.has(t)}hide(t){this.hidden.has(t)||(this.hidden.add(t),this.updateVisibility(t,!0),this.saveState())}show(t){this.hidden.has(t)&&(this.hidden.delete(t),this.updateVisibility(t,!0),this.saveState())}findEntry(t){return this._entries.find(e=>e.container===t)}getEntries(t){return this._entries.filter(e=>e.alignment===t)}focusNextEntry(){this.focusEntry(1,0)}focusPreviousEntry(){this.focusEntry(-1,this.entries.length-1)}isEntryFocused(){return!!this.getFocusedEntry()}getFocusedEntry(){return this._entries.find(t=>zt(t.container))}focusEntry(t,e){const i=o=>{let r=o,a=r>=0&&r<this._entries.length?this._entries[r]:void 0;for(;a&&this.isHidden(a.id);)r+=t,a=r>=0&&r<this._entries.length?this._entries[r]:void 0;return a},s=this.getFocusedEntry();if(s){const o=i(this._entries.indexOf(s)+t);if(o){this._lastFocusedEntry=o,o.labelContainer.focus();return}}const n=i(e);n&&(this._lastFocusedEntry=n,n.labelContainer.focus())}updateVisibility(t,e){if(typeof t=="string"){const i=t;for(const s of this._entries)s.id===i&&this.updateVisibility(s,e)}else{const i=t,s=this.isHidden(i.id);s?Qs(i.container):qs(i.container),e&&this._onDidChangeEntryVisibility.fire({id:i.id,visible:!s}),this.markFirstLastVisibleEntry()}}saveState(){this.hidden.size>0?this.storageService.store(vt.HIDDEN_ENTRIES_KEY,JSON.stringify(Array.from(this.hidden.values())),0,0):this.storageService.remove(vt.HIDDEN_ENTRIES_KEY,0)}sort(){const t=new Map,e=new Map;for(let n=0;n<this._entries.length;n++){const o=this._entries[n];if(typeof o.priority.primary=="number")t.set(o,n);else{const r=o.priority.primary.id;let a=e.get(r);if(!a){for(const c of e.values())if(c.has(r)){a=c;break}a||(a=new Map,e.set(r,a))}a.set(o.id,o)}}const i=Array.from(t.keys());i.sort((n,o)=>n.alignment===o.alignment?n.priority.primary!==o.priority.primary?Number(o.priority.primary)-Number(n.priority.primary):n.priority.secondary!==o.priority.secondary?o.priority.secondary-n.priority.secondary:t.get(n)-t.get(o):n.alignment===0?-1:o.alignment===0?1:0);let s;if(e.size>0){s=[];for(const n of i){const o=e.get(n.id),r=o?Array.from(o.values()):void 0;r&&s.push(...r.filter(a=>Ne(a.priority.primary)&&a.priority.primary.alignment===0)),s.push(n),r&&s.push(...r.filter(a=>Ne(a.priority.primary)&&a.priority.primary.alignment===1)),e.delete(n.id)}for(const[,n]of e)s.push(...n.values())}else s=i;this._entries=s}markFirstLastVisibleEntry(){this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(0)),this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(1))}doMarkFirstLastVisibleStatusbarItem(t){let e,i;for(const s of t)s.container.classList.remove("first-visible-item","last-visible-item"),!this.isHidden(s.id)&&(e||(e=s),i=s);e==null||e.container.classList.add("first-visible-item"),i==null||i.container.classList.add("last-visible-item")}};vt.HIDDEN_ENTRIES_KEY="workbench.statusbar.hidden";let zi=vt,Hi=class extends P{get name(){return Z(this.entry).name}get hasCommand(){var t;return typeof((t=this.entry)==null?void 0:t.command)<"u"}constructor(t,e,i,s,n,o,r,a){super(),this.container=t,this.hoverDelegate=i,this.commandService=s,this.hoverService=n,this.notificationService=o,this.telemetryService=r,this.themeService=a,this.entry=void 0,this.foregroundListener=this._register(new Kt),this.backgroundListener=this._register(new Kt),this.commandMouseListener=this._register(new Kt),this.commandTouchListener=this._register(new Kt),this.commandKeyboardListener=this._register(new Kt),this.hover=void 0,this.labelContainer=document.createElement("a"),this.labelContainer.tabIndex=-1,this.labelContainer.setAttribute("role","button"),this.labelContainer.className="statusbar-item-label",this._register(ts.addTarget(this.labelContainer)),this.label=this._register(new pa(this.labelContainer)),this.container.appendChild(this.labelContainer),this.beakContainer=document.createElement("div"),this.beakContainer.className="status-bar-item-beak-container",this.container.appendChild(this.beakContainer),this.update(e)}update(t){if(this.label.showProgress=t.showProgress??!1,(!this.entry||t.text!==this.entry.text)&&(this.label.text=t.text,t.text?qs(this.labelContainer):Qs(this.labelContainer)),(!this.entry||t.ariaLabel!==this.entry.ariaLabel)&&(this.container.setAttribute("aria-label",t.ariaLabel),this.labelContainer.setAttribute("aria-label",t.ariaLabel)),(!this.entry||t.role!==this.entry.role)&&this.labelContainer.setAttribute("role",t.role||"button"),!this.entry||!this.isEqualTooltip(this.entry,t)){const i=di(t.tooltip)?{markdown:t.tooltip,markdownNotSupportedFallback:void 0}:t.tooltip;this.hover?this.hover.update(i):this.hover=this._register(this.hoverService.setupManagedHover(this.hoverDelegate,this.container,i))}if(!this.entry||t.command!==this.entry.command){this.commandMouseListener.clear(),this.commandTouchListener.clear(),this.commandKeyboardListener.clear();const i=t.command;i&&(i!==Is||this.hover)?(this.commandMouseListener.value=V(this.labelContainer,z.CLICK,()=>this.executeCommand(i)),this.commandTouchListener.value=V(this.labelContainer,es.Tap,()=>this.executeCommand(i)),this.commandKeyboardListener.value=V(this.labelContainer,z.KEY_DOWN,s=>{var o;const n=new Ls(s);n.equals(10)||n.equals(3)?(ot.stop(s),this.executeCommand(i)):(n.equals(9)||n.equals(15)||n.equals(17))&&(ot.stop(s),(o=this.hover)==null||o.hide())}),this.labelContainer.classList.remove("disabled")):this.labelContainer.classList.add("disabled")}(!this.entry||t.showBeak!==this.entry.showBeak)&&(t.showBeak?this.container.classList.add("has-beak"):this.container.classList.remove("has-beak"));const e=!!t.backgroundColor||t.kind&&t.kind!=="standard";if(!this.entry||t.kind!==this.entry.kind){for(const i of Mr)this.container.classList.remove(`${i}-kind`);t.kind&&t.kind!=="standard"&&this.container.classList.add(`${t.kind}-kind`),this.container.classList.toggle("has-background-color",e)}(!this.entry||t.color!==this.entry.color)&&this.applyColor(this.labelContainer,t.color),(!this.entry||t.backgroundColor!==this.entry.backgroundColor)&&(this.container.classList.toggle("has-background-color",e),this.applyColor(this.container,t.backgroundColor,!0)),this.entry=t}isEqualTooltip({tooltip:t},{tooltip:e}){return t===void 0?e===void 0:di(t)?di(e)&&Bo(t,e):t===e}async executeCommand(t){var e;if(t===Is)(e=this.hover)==null||e.show(!0);else{const i=typeof t=="string"?t:t.id,s=typeof t=="string"?[]:t.arguments??[];this.telemetryService.publicLog2("workbenchActionExecuted",{id:i,from:"status bar"});try{await this.commandService.executeCommand(i,...s)}catch(n){this.notificationService.error(Ce(n))}}}applyColor(t,e,i){var n;let s;if(i?this.backgroundListener.clear():this.foregroundListener.clear(),e)if(Po(e)){s=(n=this.themeService.getColorTheme().getColor(e.id))==null?void 0:n.toString();const o=this.themeService.onDidColorThemeChange(r=>{var c;const a=(c=r.getColor(e.id))==null?void 0:c.toString();i?t.style.backgroundColor=a??"":t.style.color=a??""});i?this.backgroundListener.value=o:this.foregroundListener.value=o}else s=e;i?t.style.backgroundColor=s??"":t.style.color=s??""}};Hi=v([h(3,at),h(4,ss),h(5,it),h(6,te),h(7,U)],Hi);class pa extends Nr{constructor(t){super(t),this.container=t,this.progressCodicon=pi(Ss),this.currentText="",this.currentShowProgress=!1}set showProgress(t){this.currentShowProgress!==t&&(this.currentShowProgress=t,this.progressCodicon=pi(t==="syncing"?Ss:Lo),this.text=this.currentText)}set text(t){if(this.currentShowProgress){this.container.firstChild!==this.progressCodicon&&this.container.appendChild(this.progressCodicon);for(const i of Array.from(this.container.childNodes))i!==this.progressCodicon&&i.remove();let e=t??"";e&&(e=` ${e}`),F(this.container,...Ro(e))}else super.text=t}}var Be,Fi,Bt;let ye=(Bt=class extends ri{constructor(t,e,i,s,n,o,r,a){super(t,{hasTitle:!1},i,n,o),this.instantiationService=e,this.contextService=s,this.storageService=n,this.contextMenuService=r,this.contextKeyService=a,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=Be.HEIGHT,this.maximumHeight=Be.HEIGHT,this.pendingEntries=[],this.viewModel=this._register(new zi(this.storageService)),this.onDidChangeEntryVisibility=this.viewModel.onDidChangeEntryVisibility,this._onWillDispose=this._register(new w),this.onWillDispose=this._onWillDispose.event,this.hoverDelegate=this._register(this.instantiationService.createInstance(Oo,"element",!0,(c,l)=>({persistence:{hideOnKeyDown:!0,sticky:l}}))),this.compactEntriesDisposable=this._register(new Kt),this.styleOverrides=new Set,this.registerListeners()}registerListeners(){this._register(this.onDidChangeEntryVisibility(()=>this.updateCompactEntries())),this._register(this.contextService.onDidChangeWorkbenchState(()=>this.updateStyles()))}addEntry(t,e,i,s=0){let n;return Vr(s)?n=s:n={primary:s,secondary:Qi(e)},this.element?this.doAddEntry(t,e,i,n):this.doAddPendingEntry(t,e,i,n)}doAddPendingEntry(t,e,i,s){const n={entry:t,id:e,alignment:i,priority:s};return this.pendingEntries.push(n),{update:r=>{n.accessor?n.accessor.update(r):n.entry=r},dispose:()=>{n.accessor?n.accessor.dispose():this.pendingEntries=this.pendingEntries.filter(r=>r!==n)}}}doAddEntry(t,e,i,s){const n=this.doCreateStatusItem(e,i),o=this.instantiationService.createInstance(Hi,n,t,this.hoverDelegate),r=new class{constructor(){this.id=e,this.alignment=i,this.priority=s,this.container=n,this.labelContainer=o.labelContainer}get name(){return o.name}get hasCommand(){return o.hasCommand}},{needsFullRefresh:a}=this.doAddOrRemoveModelEntry(r,!0);return a?this.appendStatusbarEntries():this.appendStatusbarEntry(r),{update:c=>{o.update(c)},dispose:()=>{const{needsFullRefresh:c}=this.doAddOrRemoveModelEntry(r,!1);c?this.appendStatusbarEntries():n.remove(),ee(o)}}}doCreateStatusItem(t,e,...i){const s=document.createElement("div");return s.id=t,s.classList.add("statusbar-item"),i&&s.classList.add(...i),e===1?s.classList.add("right"):s.classList.add("left"),s}doAddOrRemoveModelEntry(t,e){const i=this.viewModel.entries;e?this.viewModel.add(t):this.viewModel.remove(t);const s=this.viewModel.entries;return e?i.splice(s.indexOf(t),0,t):i.splice(i.indexOf(t),1),{needsFullRefresh:!Bs(i,s)}}isEntryVisible(t){return!this.viewModel.isHidden(t)}updateEntryVisibility(t,e){e?this.viewModel.show(t):this.viewModel.hide(t)}focusNextEntry(){this.viewModel.focusNextEntry()}focusPreviousEntry(){this.viewModel.focusPreviousEntry()}isEntryFocused(){return this.viewModel.isEntryFocused()}focus(t=!0){var i;(i=this.getContainer())==null||i.focus();const e=this.viewModel.lastFocusedEntry;t&&e&&setTimeout(()=>e.labelContainer.focus(),0)}createContentArea(t){this.element=t;const e=this._register(this.contextKeyService.createScoped(this.element));return oe.bindTo(e).set(!0),this.leftItemsContainer=document.createElement("div"),this.leftItemsContainer.classList.add("left-items","items-container"),this.element.appendChild(this.leftItemsContainer),this.element.tabIndex=0,this.rightItemsContainer=document.createElement("div"),this.rightItemsContainer.classList.add("right-items","items-container"),this.element.appendChild(this.rightItemsContainer),this._register(V(t,z.CONTEXT_MENU,i=>this.showContextMenu(i))),this._register(ts.addTarget(t)),this._register(V(t,es.Contextmenu,i=>this.showContextMenu(i))),this.createInitialStatusbarEntries(),this.element}createInitialStatusbarEntries(){for(this.appendStatusbarEntries();this.pendingEntries.length;){const t=this.pendingEntries.shift();t&&(t.accessor=this.addEntry(t.entry,t.id,t.alignment,t.priority.primary))}}appendStatusbarEntries(){const t=Z(this.leftItemsContainer),e=Z(this.rightItemsContainer);Rt(t),Rt(e);for(const i of[...this.viewModel.getEntries(0),...this.viewModel.getEntries(1).reverse()])(i.alignment===0?t:e).appendChild(i.container);this.updateCompactEntries()}appendStatusbarEntry(t){const e=this.viewModel.getEntries(t.alignment);t.alignment===1&&e.reverse();const i=Z(t.alignment===0?this.leftItemsContainer:this.rightItemsContainer),s=e.indexOf(t);s+1===e.length?i.appendChild(t.container):i.insertBefore(t.container,e[s+1].container),this.updateCompactEntries()}updateCompactEntries(){const t=this.viewModel.entries,e=new Map;for(const o of t)this.viewModel.isHidden(o.id)||e.set(o.id,o),o.container.classList.remove("compact-left","compact-right");const i=new Map;for(const o of e.values())if(Ne(o.priority.primary)&&o.priority.primary.compact){const r=o.priority.primary.id,a=e.get(r);if(!a)continue;let c=i.get(r);if(!c){for(const l of i.values())if(l.has(r)){c=l;break}c||(c=new Map,i.set(r,c))}c.set(o.id,o),c.set(a.id,a),o.priority.primary.alignment===0?(a.container.classList.add("compact-left"),o.container.classList.add("compact-right")):(a.container.classList.add("compact-right"),o.container.classList.add("compact-left"))}const s=this.getColor(zo),n=this.getColor(Ho);if(this.compactEntriesDisposable.value=new E,s&&n&&!Fo(this.theme.type))for(const[,o]of i)for(const r of o.values())r.hasCommand&&(this.compactEntriesDisposable.value.add(V(r.labelContainer,z.MOUSE_OVER,()=>{o.forEach(a=>a.labelContainer.style.backgroundColor=s),r.labelContainer.style.backgroundColor=n})),this.compactEntriesDisposable.value.add(V(r.labelContainer,z.MOUSE_OUT,()=>{o.forEach(a=>a.labelContainer.style.backgroundColor="")})))}showContextMenu(t){ot.stop(t,!0);const e=new Xs(O(this.element),t);let i;this.contextMenuService.showContextMenu({getAnchor:()=>e,getActions:()=>(i=this.getContextMenuActions(e),i),onHide:()=>{i&&Go(i)}})}getContextMenuActions(t){const e=[];e.push(Oe({id:Es.ID,label:m(3020,"Hide Status Bar"),run:()=>this.instantiationService.invokeFunction(n=>new Es().run(n))})),e.push(new ge);const i=new Set;for(const n of this.viewModel.entries)i.has(n.id)||(e.push(new ma(n.id,n.name,this.viewModel)),i.add(n.id));let s;for(let n=t.target;n;n=n.parentElement){const o=this.viewModel.findEntry(n);if(o){s=o;break}}return s&&(e.push(new ge),e.push(new ga(s.id,s.name,this.viewModel))),e}updateStyles(){super.updateStyles();const t=Z(this.getContainer()),e=[...this.styleOverrides].sort((a,c)=>a.priority-c.priority)[0],i=this.getColor((e==null?void 0:e.background)??(this.contextService.getWorkbenchState()!==1?Wo:Uo))||"";t.style.backgroundColor=i;const s=this.getColor((e==null?void 0:e.foreground)??(this.contextService.getWorkbenchState()!==1?jo:Ko))||"";t.style.color=s;const n=this.getColor(Yo),o=this.getColor((e==null?void 0:e.border)??(this.contextService.getWorkbenchState()!==1?Zo:Xo))||this.getColor($o);o?(t.classList.add("status-border-top"),t.style.setProperty("--status-border-top-color",o)):(t.classList.remove("status-border-top"),t.style.removeProperty("--status-border-top-color"));const r=this.getColor(Qo);this.styleElement||(this.styleElement=qo(t)),this.styleElement.textContent=`

				/* Status bar focus outline */
				.monaco-workbench .part.statusbar:focus {
					outline-color: ${r};
				}

				/* Status bar item focus outline */
				.monaco-workbench .part.statusbar > .items-container > .statusbar-item a:focus-visible {
					outline: 1px solid ${this.getColor(Jo)??n};
					outline-offset: ${o?"-2px":"-1px"};
				}

				/* Notification Beak */
				.monaco-workbench .part.statusbar > .items-container > .statusbar-item.has-beak > .status-bar-item-beak-container:before {
					border-bottom-color: ${i};
				}
			`}layout(t,e,i,s){super.layout(t,e,i,s),super.layoutContents(t,e)}overrideStyle(t){return this.styleOverrides.add(t),this.updateStyles(),rt(()=>{this.styleOverrides.delete(t),this.updateStyles()})}toJSON(){return{type:"workbench.parts.statusbar"}}dispose(){this._onWillDispose.fire(),super.dispose()}},Be=Bt,Bt.HEIGHT=22,Bt);ye=Be=v([h(1,D),h(2,U),h(3,ni),h(4,$),h(5,W),h(6,st),h(7,ct)],ye);let Gi=class extends ye{constructor(t,e,i,s,n,o,r){super("workbench.parts.statusbar",t,e,i,s,n,o,r)}};Gi=v([h(0,D),h(1,U),h(2,ni),h(3,$),h(4,W),h(5,st),h(6,ct)],Gi);var Pt;let Wi=(Pt=class extends ye{constructor(t,e,i,s,n,o,r,a){const c=Fi.COUNTER++;super(`workbench.parts.auxiliaryStatus.${c}`,e,i,s,n,o,r,a),this.container=t,this.height=ye.HEIGHT}},Fi=Pt,Pt.COUNTER=1,Pt);Wi=Fi=v([h(1,D),h(2,U),h(3,ni),h(4,$),h(5,W),h(6,st),h(7,ct)],Wi);let Ui=class extends en{constructor(t,e,i){super("workbench.statusBarService",i,e),this.instantiationService=t,this.mainPart=this._register(this.instantiationService.createInstance(Gi)),this._onDidCreateAuxiliaryStatusbarPart=this._register(new w),this.onDidCreateAuxiliaryStatusbarPart=this._onDidCreateAuxiliaryStatusbarPart.event,this.onDidChangeEntryVisibility=this.mainPart.onDidChangeEntryVisibility,this._register(this.registerPart(this.mainPart))}createAuxiliaryStatusbarPart(t){const e=document.createElement("footer");e.classList.add("part","statusbar"),e.setAttribute("role","status"),e.style.position="relative",e.setAttribute("aria-live","off"),e.setAttribute("tabindex","0"),t.appendChild(e);const i=this.instantiationService.createInstance(Wi,e),s=this.registerPart(i);return i.create(e),X.once(i.onWillDispose)(()=>s.dispose()),this._onDidCreateAuxiliaryStatusbarPart.fire(i),i}createScoped(t,e){return e.add(this.instantiationService.createInstance(ji,t))}addEntry(t,e,i,s=0){return t.showInAllWindows?this.doAddEntryToAllWindows(t,e,i,s):this.mainPart.addEntry(t,e,i,s)}doAddEntryToAllWindows(t,e,i,s=0){const n=new E,o=new Set;function r(a){const c=new E;c.add(a.onWillDispose(()=>c.dispose()));const l=c.add(a.addEntry(t,e,i,s));o.add(l),c.add(rt(()=>o.delete(l))),n.add(c),c.add(rt(()=>n.delete(c)))}for(const a of this.parts)r(a);return n.add(this.onDidCreateAuxiliaryStatusbarPart(a=>r(a))),{update:a=>{for(const c of o)c.update(a)},dispose:()=>n.dispose()}}isEntryVisible(t){return this.mainPart.isEntryVisible(t)}updateEntryVisibility(t,e){for(const i of this.parts)i.updateEntryVisibility(t,e)}focus(t){this.activePart.focus(t)}focusNextEntry(){this.activePart.focusNextEntry()}focusPreviousEntry(){this.activePart.focusPreviousEntry()}isEntryFocused(){return this.activePart.isEntryFocused()}overrideStyle(t){const e=new E;for(const i of this.parts)e.add(i.overrideStyle(t));return e}};Ui=v([h(0,D),h(1,$),h(2,U)],Ui);let ji=class extends P{constructor(t,e){super(),this.statusbarEntryContainer=t,this.statusbarService=e,this.onDidChangeEntryVisibility=this.statusbarEntryContainer.onDidChangeEntryVisibility}createAuxiliaryStatusbarPart(t){return this.statusbarService.createAuxiliaryStatusbarPart(t)}createScoped(t,e){return this.statusbarService.createScoped(t,e)}getPart(){return this.statusbarEntryContainer}addEntry(t,e,i,s=0){return this.statusbarEntryContainer.addEntry(t,e,i,s)}isEntryVisible(t){return this.statusbarEntryContainer.isEntryVisible(t)}updateEntryVisibility(t,e){this.statusbarEntryContainer.updateEntryVisibility(t,e)}focus(t){this.statusbarEntryContainer.focus(t)}focusNextEntry(){this.statusbarEntryContainer.focusNextEntry()}focusPreviousEntry(){this.statusbarEntryContainer.focusPreviousEntry()}isEntryFocused(){return this.statusbarEntryContainer.isEntryFocused()}overrideStyle(t){return this.statusbarEntryContainer.overrideStyle(t)}};ji=v([h(1,lt)],ji);function wa(u){const t=u;return typeof t.id=="string"&&t.id.length>0&&typeof t.name=="string"&&typeof t.text=="string"&&(t.alignment==="left"||t.alignment==="right")&&(t.command===void 0||typeof t.command=="string")&&(t.tooltip===void 0||typeof t.tooltip=="string")&&(t.priority===void 0||typeof t.priority=="number")&&(t.accessibilityInformation===void 0||rr(t.accessibilityInformation))}const Ts={type:"object",required:["id","text","alignment","name"],properties:{id:{type:"string",markdownDescription:m(3021,"The identifier of the status bar entry. Must be unique within the extension. The same value must be used when calling the `vscode.window.createStatusBarItem(id, ...)`-API")},name:{type:"string",description:m(3022,"The name of the entry, like 'Python Language Indicator', 'Git Status' etc. Try to keep the length of the name short, yet descriptive enough that users can understand what the status bar item is about.")},text:{type:"string",description:m(3023,"The text to show for the entry. You can embed icons in the text by leveraging the `$(<name>)`-syntax, like 'Hello $(globe)!'")},tooltip:{type:"string",description:m(3024,"The tooltip text for the entry.")},command:{type:"string",description:m(3025,"The command to execute when the status bar entry is clicked.")},alignment:{type:"string",enum:["left","right"],description:m(3026,"The alignment of the status bar entry.")},priority:{type:"number",description:m(3027,"The priority of the status bar entry. Higher value means the item should be shown more to the left.")},accessibilityInformation:{type:"object",description:m(3028,"Defines the role and aria label to be used when the status bar entry is focused."),properties:{role:{type:"string",description:m(3029,"The role of the status bar entry which defines how a screen reader interacts with it. More about aria roles can be found here https://w3c.github.io/aria/#widget_roles")},label:{type:"string",description:m(3030,"The aria label of the status bar entry. Defaults to the entry's text.")}}}}},va={description:m(3031,"Contributes items to the status bar."),oneOf:[Ts,{type:"array",items:Ts}]},xs=tr.registerExtensionPoint({extensionPoint:"statusBarItems",jsonSchema:va});let Ki=class{constructor(t){const e=new E;xs.setHandler(i=>{e.clear();for(const s of i){if(!ir(s.description,"contribStatusBarItems")){s.collector.error(`The ${xs.name} is proposed API`);continue}const{value:n,collector:o}=s;for(const r of sr.wrap(n)){if(!wa(r)){o.error(m(3032,"Invalid status bar item contribution."));continue}const a=nr(s.description.identifier,r.id);t.setOrUpdateEntry(a,a,or.toKey(s.description.identifier),r.name??s.description.displayName??s.description.name,r.text,r.tooltip,r.command?{id:r.command,title:r.name}:void 0,void 0,void 0,r.alignment==="left",r.priority,r.accessibilityInformation)===0&&e.add(rt(()=>t.unsetEntry(a)))}}})}};Ki=v([h(0,Js)],Ki);var Jt;let Qe=(Jt=class{constructor(t){this.instantiationService=t,this.instantiationService.createInstance(Ki)}},Jt.ID="workbench.contrib.statusBarItemsExtensionPoint",Jt);Qe=v([h(0,D)],Qe);er(Qe.ID,Qe,1);function ya(){return{[lt.toString()]:new Ct(Ui,[],!1),[Js.toString()]:new Ct(ar,[],!1)}}var Ca='.monaco-workbench .part.banner{background-color:var(--vscode-banner-background);box-sizing:border-box;color:var(--vscode-banner-foreground);cursor:default;display:flex;font-size:12px;height:100%;overflow:visible;width:100%}.monaco-workbench .part.banner .icon-container{align-items:center;display:flex;flex-shrink:0;padding:0 6px 0 10px}.monaco-workbench .part.banner .icon-container .codicon{color:var(--vscode-banner-iconForeground)}.monaco-workbench .part.banner .icon-container.custom-icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMDI0IDEwMjRIMFYwaDEwMjR2MTAyNHoiIHN0eWxlPSJmaWxsOiNmNmY2ZjY7ZmlsbC1vcGFjaXR5OjAiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNMTAyNCA4NS4zMzN2ODUzLjMzM0gwVjg1LjMzM2gxMDI0eiIgc3R5bGU9ImZpbGw6I2ZmZiIvPjxwYXRoIGQ9Ik0wIDg1LjMzM2gyOTguNjY3djg1My4zMzNIMFY4NS4zMzN6bTEwMjQgMHY4NTMuMzMzSDM4NFY4NS4zMzNoNjQwem0tNTU0LjY2NyAxNjBoMzQxLjMzM3YtNjRINDY5LjMzM3Y2NHptMzQxLjMzNCA1MzMuMzM0SDQ2OS4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0xMjgtMTQ5LjMzNEg1OTcuMzMzdjY0aDM0MS4zMzNsLjAwMS02NHptMC0xNDkuMzMzSDU5Ny4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0wLTE0OS4zMzNINTk3LjMzM3Y2NGgzNDEuMzMzbC4wMDEtNjR6IiBzdHlsZT0iZmlsbDojMTY3YWJmIi8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:16px;margin:0 6px 0 10px;padding:0;width:16px}.monaco-workbench .part.banner .message-container{line-height:26px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .part.banner .message-container a{color:var(--vscode-banner-foreground)}.monaco-workbench .part.banner .message-container p{margin-block-end:0;margin-block-start:0}.monaco-workbench .part.banner .message-actions-container{flex-grow:1;flex-shrink:0;line-height:26px}.monaco-workbench .part.banner .message-actions-container a{color:var(--vscode-banner-foreground);cursor:pointer;margin-left:12px;padding:3px;text-decoration:underline}.monaco-workbench .part.banner .message-container a{cursor:pointer;text-decoration:underline}.monaco-workbench .part.banner .action-container{padding:0 10px 0 6px}.monaco-workbench .part.banner .action-container .codicon{color:var(--vscode-banner-foreground)}';Ht(Ca,{});let Yi=class extends ri{get minimumHeight(){return this.visible?this.height:0}get maximumHeight(){return this.visible?this.height:0}get onDidChange(){return this._onDidChangeSize.event}constructor(t,e,i,s,n){super("workbench.parts.banner",{hasTitle:!1},t,i,e),this.contextKeyService=s,this.instantiationService=n,this.height=26,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this._onDidChangeSize=this._register(new w),this.visible=!1,this.focusedActionIndex=-1,this.markdownRenderer=this.instantiationService.createInstance(cr,{})}createContentArea(t){this.element=t,this.element.tabIndex=0,this._register(V(this.element,z.FOCUS,()=>{this.focusedActionIndex!==-1&&this.focusActionLink()}));const e=this._register(this.contextKeyService.createScoped(this.element));return oi.bindTo(e).set(!0),this.element}close(t){this.setVisibility(!1),Rt(this.element),typeof t.onClose=="function"&&t.onClose(),this.item=void 0}focusActionLink(){var e,i,s,n,o;const t=((i=(e=this.item)==null?void 0:e.actions)==null?void 0:i.length)??0;if(this.focusedActionIndex<t){const r=(s=this.messageActionsContainer)==null?void 0:s.children[this.focusedActionIndex];Zs(r)&&((n=this.actionBar)==null||n.setFocusable(!1),r.focus())}else(o=this.actionBar)==null||o.focus(0)}getAriaLabel(t){if(t.ariaLabel)return t.ariaLabel;if(typeof t.message=="string")return t.message}getBannerMessage(t){if(typeof t=="string"){const e=k("span");return e.innerText=t,e}return this.markdownRenderer.render(t).element}setVisibility(t){t!==this.visible&&(this.visible=t,this.focusedActionIndex=-1,this.layoutService.setPartHidden(!t,"workbench.parts.banner"),this._onDidChangeSize.fire(void 0))}focus(){this.focusedActionIndex=-1,this.element.focus()}focusNextAction(){var e,i;const t=((i=(e=this.item)==null?void 0:e.actions)==null?void 0:i.length)??0;this.focusedActionIndex=this.focusedActionIndex<t?this.focusedActionIndex+1:0,this.focusActionLink()}focusPreviousAction(){var e,i;const t=((i=(e=this.item)==null?void 0:e.actions)==null?void 0:i.length)??0;this.focusedActionIndex=this.focusedActionIndex>0?this.focusedActionIndex-1:t,this.focusActionLink()}hide(t){var e;((e=this.item)==null?void 0:e.id)===t&&this.setVisibility(!1)}show(t){var a;if(t.id===((a=this.item)==null?void 0:a.id)){this.setVisibility(!0);return}Rt(this.element);const e=this.getAriaLabel(t);e&&this.element.setAttribute("aria-label",e);const i=F(this.element,k("div.icon-container"));i.setAttribute("aria-hidden","true"),T.isThemeIcon(t.icon)?i.appendChild(k(`div${T.asCSSSelector(t.icon)}`)):(i.classList.add("custom-icon"),si.isUri(t.icon)&&(i.style.backgroundImage=lr(t.icon)));const s=F(this.element,k("div.message-container"));if(s.setAttribute("aria-hidden","true"),s.appendChild(this.getBannerMessage(t.message)),this.messageActionsContainer=F(this.element,k("div.message-actions-container")),t.actions)for(const c of t.actions)this._register(this.instantiationService.createInstance(hr,this.messageActionsContainer,{...c,tabIndex:-1},{}));const n=F(this.element,k("div.action-container"));this.actionBar=this._register(new is(n));const o=t.closeLabel??"Close Banner",r=this._register(new G("banner.close",o,T.asClassName(dr),!0,()=>this.close(t)));this.actionBar.push(r,{icon:!0,label:!1}),this.actionBar.setFocusable(!1),this.setVisibility(!0),this.item=t}toJSON(){return{type:"workbench.parts.banner"}}};Yi=v([h(0,U),h(1,W),h(2,$),h(3,ct),h(4,D)],Yi);I.registerCommandAndKeybindingRule({id:"workbench.banner.focusBanner",weight:200,primary:9,when:oi,handler:u=>{u.get(Wt).focus()}});I.registerCommandAndKeybindingRule({id:"workbench.banner.focusNextAction",weight:200,primary:17,secondary:[18],when:oi,handler:u=>{u.get(Wt).focusNextAction()}});I.registerCommandAndKeybindingRule({id:"workbench.banner.focusPreviousAction",weight:200,primary:15,secondary:[16],when:oi,handler:u=>{u.get(Wt).focusPreviousAction()}});const Qt=class Qt extends ls{constructor(){super({id:Qt.ID,title:Qt.LABEL,category:hs.View,f1:!0})}async run(t){t.get(W).focusPart("workbench.parts.banner")}};Qt.ID="workbench.action.focusBanner",Qt.LABEL=q(3019,"Focus Banner");let Zi=Qt;cs(Zi);var Pe,Lt;let Xi=(Lt=class{constructor(t,e,i){var o;const s=(o=i.options)==null?void 0:o.welcomeBanner;if(!s||e.getBoolean(Pe.WELCOME_BANNER_DISMISSED_KEY,0,!1))return;let n;typeof s.icon=="string"?n=T.fromId(s.icon):s.icon&&(n=si.revive(s.icon)),t.show({id:"welcome.banner",message:s.message,icon:n,actions:s.actions,onClose:()=>{e.store(Pe.WELCOME_BANNER_DISMISSED_KEY,!0,0,1)}})}},Pe=Lt,Lt.WELCOME_BANNER_DISMISSED_KEY="workbench.banner.welcome.dismissed",Lt);Xi=Pe=v([h(0,Wt),h(1,$),h(2,Se)],Xi);ds.as(ur.Workbench).registerWorkbenchContribution(Xi,3);function Sa(){return{[Wt.toString()]:new Ct(Yi,[],!1)}}$s(async u=>{u.get(Wt)});ds.as(tn.ViewContainersRegistry);ds.as(tn.ViewsRegistry);let $i=class extends ha{constructor(t,e,i){super(vr(),t,new yr,e),this.instantiationService=i,this.mainContainer.classList.add("monaco-workbench-part")}registerErrorHandler(t){js(e=>this.handleUnexpectedError(e,t))}createNotificationsHandlers(){}initServices(){return this.instantiationService}restore(){try{this.restoreParts()}catch(t){Te(t)}}};$i=v([h(1,Gs),h(2,D)],$i);const Ms=fr(p);mr(Ms!=null&&!Ms.guess,p);gr(async u=>{u.get(W).startup()});br(async u=>{u.get(D).createInstance(Br)});function Xa(u,t){return{...Pr(t),...pr({isKeybindingConfigurationVisible:()=>!0,shouldUseGlobalPicker:()=>!0}),...wr({shouldUseGlobalKeybindings:()=>!0}),[W.toString()]:new Ct($i,[u],!1),[mt.toString()]:new Ct(Lr,[],!1),[ne.toString()]:new Ct(Rr,[void 0],!1),...ua(),...ya(),...Sa()}}export{qa as AbstractResourceEditorInput,Ja as AbstractTextResourceEditorInput,tc as ConfirmResult,ec as DomScrollableElement,ic as EditorInput,sc as EditorInputCapabilities,nc as Parts,oc as RegisteredEditorPriority,rc as SplitView,ac as ViewContainerLocation,cc as ViewPaneContainer,Xa as default};
