import{M as we,cV as C,cW as A,cX as w,cY as _,cD as Y,ac as Gt,_ as x,d as u,cA as Be,af as ie,f as O,I as te,e4 as Ve,ah as Vt,i as ei,R as $,gq as TE,gr as VE,fn as vd,gs as bf,e1 as We,gt as ME,gu as LE,ek as he,eX as mv,gv as fv,b as I,fv as wf,el as ae,bu as ne,ey as bv,fR as Se,fu as PE,gw as RE,gx as BE,gy as OE,gp as $r,gz as vf,aO as P,$ as H,fQ as qi,bU as jr,l as d,fM as cn,fP as Co,U as ve,fj as Xh,e7 as Jh,fk as Qh,e2 as wv,e3 as vv,aP as Re,gA as le,C as at,fh as NE,a as Yr,t as N,gB as yv,gC as Cv,g7 as Yt,e5 as L,dX as B,dy as Zt,cx as oe,ec as Xe,h as F,eb as xe,d3 as lt,dL as de,e6 as re,gD as Dr,gE as yf,gF as FE,gG as Sv,cO as T,ad as Te,gH as Ev,d$ as Vo,eg as fe,dZ as dn,d_ as St,fH as ai,bV as et,gI as ni,fw as Yi,gJ as it,q as K,bg as bt,bY as ln,gK as Pn,gL as Wt,D as R,eQ as za,aq as z,cp as Hi,gM as GE,gN as WE,f4 as Es,dR as y,d1 as b,gO as kv,ef as ms,gP as Cf,fJ as hn,fi as So,bR as He,fo as yt,cN as X,gQ as $o,d2 as k,gR as Ut,gS as Ua,gT as Go,gU as Us,gV as HE,ex as zE,al as _v,gW as Vi,gX as xv,gY as UE,gZ as Wo,s as ge,g_ as Nt,cZ as bn,bI as Ee,bG as ee,eF as Xt,eG as fc,au as vt,g$ as Ka,h0 as KE,h1 as Sf,cR as Fe,h2 as fo,cU as xt,e_ as be,dM as bc,h3 as Iv,dY as xi,h4 as Tb,h5 as Vb,h6 as Vn,h7 as qE,h8 as Pu,h9 as $E,ha as jE,et as lp,eL as Dv,hb as YE,hc as ZE,hd as Ca,he as XE,hf as JE,hg as QE,n as st,hh as Av,hi as eu,bM as qe,hj as Tv,hk as tu,bf as mi,hl as wc,P as Zr,aN as Bt,hm as cd,hn as hp,ho as Ru,hp as ft,hq as ek,hr as tk,eR as Ar,eS as un,dA as pn,eI as Sa,hs as ik,eH as ok,bX as me,ht as nk,hu as Vv,hv as Lo,hw as Tr,hx as sk,hy as Mb,eV as qa,hz as rk,eE as Mv,hA as ak,fx as yd,fy as Cd,hB as iu,hC as ck,ff as dk,ae as wn,hD as Lv,hE as ou,hF as Pv,ag as Je,hG as Rv,hH as vc,hI as yc,hJ as lk,hK as hk,hL as Bv,hM as Ov,hN as uk,hO as pk,hP as gk,hQ as nu,hR as mk,g9 as su,hS as Nv,hT as Sd,hU as fk,hV as bk,hW as wk,hX as nr,hY as Fv,hZ as vk,h_ as Gv,h$ as Wv,i0 as Hv,i1 as zv,b7 as Rn,i2 as yk,i3 as Ck,i4 as Bu,i5 as Ed,i6 as Uv,i7 as Kv,i8 as qv,i9 as $v,ia as Sk,ib as Ek,ic as Ef,id as bo,ie as Ye,ig as Kt,aG as $a,ih as kk,dr as fs,Q as Ii,fX as Di,ii as _k,fz as kf,aH as jv,eh as Ho,ij as xk,ik as Yv,e8 as _f,e9 as Vr,il as Jt,im as Ik,io as Dk,ip as Ea,iq as Ak,bS as ja,ir as Zv,g as Oe,is as Tk,G as kd,H as _d,it as Vk,aS as wt,iu as Cc,iv as Mk,iw as Eo,b$ as Yc,ix as rt,iy as Lk,iz as Pk,iA as Rk,iB as Xv,cJ as Jv,iC as Bk,iD as Lb,ei as Qv,iE as Ok,cv as ks,iF as Nk,iG as Fk,bn as pe,ba as ot,cn as xf,d6 as ko,cI as gn,K as U,bj as _s,iH as ey,em as Gk,iI as Wk,iJ as up,iK as _o,iL as bs,iM as Hk,bo as mt,iN as Sc,iO as If,iP as Xr,B as Mr,iQ as ty,iR as iy,iS as zk,iT as Uk,iU as j,iV as oy,aV as Ie,aW as Ce,f8 as Kk,iW as pp,br as ny,iX as Ec,iY as Qi,a_ as Lr,e as Z,iZ as ye,bC as ue,i_ as gp,i$ as sy,ej as kc,j0 as wo,j1 as ry,j2 as Df,j3 as ay,j4 as ru,j5 as vn,j6 as Jr,j7 as au,j8 as xs,j9 as yn,fA as qk,ja as Et,fc as mp,jb as sr,jc as cy,jd as dy,je as ly,jf as hy,jg as uy,aR as ri,jh as py,ct as _c,k as Mo,ji as Af,jj as Pr,jk as ws,jl as Cn,jm as xc,jn as tt,jo as Ya,jp as fp,jq as Za,jr as gy,js as Sn,jt as En,aK as my,bO as Tf,ju as $k,jv as Rr,jw as vs,cS as Ic,bi as Qr,jx as cu,jy as ti,jz as zo,jA as Dc,jB as Vf,jC as fy,jD as eo,b9 as pt,jE as Mf,jF as Lf,jG as by,jH as wy,jI as vy,jJ as yy,jK as jk,jL as Yk,jM as xd,jN as ut,aQ as Cy,jO as Sy,jP as Ey,jQ as ky,jR as Xa,jS as Ou,jT as Zk,jU as Xk,a4 as _y,jV as bp,as as hi,jW as Jk,jX as Qk,jY as e_,jZ as t_,j_ as i_,j$ as o_,k0 as n_,k1 as s_,k2 as r_,k3 as a_,k4 as c_,k5 as du,k6 as Id,k7 as zi,k8 as xy,k9 as Iy,bh as Ac,ka as Pf,kb as d_,kc as l_,kd as h_,ke as u_,kf as p_,kg as g_,fd as Rf,fD as Dy,b_ as Bf,kh as Ay,ki as m_,kj as f_,kk as b_,kl as w_,aI as Fo,km as v_,kn as y_,ko as C_,j as Tc,kp as Ty,eA as Br,kq as Vy,kr as Pb,ks as S_,kt as Vc,ku as My,kv as Mc,kw as E_,kx as k_,ky as __,kz as x_,kA as I_,kB as Ly,kC as D_,kD as mn,kE as wp,bD as Of,kF as A_,kG as T_,cj as yi,kH as Py,kI as V_,bW as lu,an as Nf,w as Mn,kJ as M_,kK as L_,kL as P_,b4 as Is,kM as R_,kN as B_,kO as O_,kP as N_,kQ as F_,ar as G_,kR as W_,kS as H_,kT as vp,kU as yp,kV as Rb,kW as z_,aU as jo,kX as U_,kY as K_,kZ as q_,k_ as ea,k$ as $_,eJ as Bb,ft as j_,er as kn,eB as Ff,eC as Y_,l0 as Z_,d9 as ta,l1 as hu,l2 as X_,l3 as Ja,l4 as Gf,l5 as J_,aa as Ot,l6 as Ry,l7 as Q_,l8 as ca,J as ce,aA as Lc,l9 as Ob,bm as Nb,la as dd,aJ as By,b6 as Nu,b3 as Fb,lb as ld,lc as Gb,aC as Ne,ld as si,b5 as ex,le as tx,bd as ix,lf as ox,lg as nx,lh as sx,li as rx,lj as ax,lk as cx,ll as dx,lm as Cp,aZ as ka,y as gt,ln as lx,lo as hx,A as Sp,lp as ux,lq as Wb,lr as Hb,ls as Wf,cs as Hf,dq as px,cr as zf,lt as Oy,lu as Ny,lv as Fy,lw as Pt,lx as hd,cH as gx,ly as mx,cg as Ks,lz as fx,bt as _a,lA as bx,lB as wx,lC as Gy,lD as zb,lE as xa,lF as Ub,lG as vx,lH as yx,lI as Cx,lJ as Uf,c$ as Kf,lK as Sx,lL as Fu,lM as Ex,lN as kx,gk as _x,lO as xx,lP as Kb,lQ as ua,lR as Ix,lS as Dx,lT as qb,lU as qf,lV as Ax,lW as Qt,d5 as Tx,lX as Vx,lY as Wy,lZ as Mx,da as Ia,l_ as Lx,l$ as Px,m0 as Rx,m1 as Bx,m2 as Ox,m3 as Ds,m4 as Nx,m5 as Hy,m6 as zy,m7 as Ti,m8 as Uy,m9 as Fx,ma as Gx,mb as Wx,ak as Ky,mc as Hx,dI as Os,dE as $b,dJ as zx,md as jb,me as qy,mf as Ux,mg as Kx,dK as Dd,mh as Yb,ai as $y,mi as qx,d4 as Pc,mj as Zb,mk as $x,ml as jx,ew as jy,mm as Xb,ez as Jb,mn as Yy,gm as Yx,ea as It,cB as Zx,dW as Qb,mo as Gu,mp as Xx,mq as ew,mr as tw,eP as Jx,am as vi,ms as Qx,mt as eI,mu as iw,mv as tI,mw as Zy,mx as ow,my as iI,mz as oI,mA as nI,mB as sI,eW as rI,mC as Wu,mD as aI,mE as cI,mF as dI,mG as uu,be as As,mH as Xy,mI as lI,p as Ts,mJ as nw,mK as hI,dn as Ae,mL as Ep,mM as pu,mN as uI,mO as xo,bv as Jy,mP as di,mQ as Ad,mR as pI,mS as Qy,a$ as gI,b0 as mI,mT as fI,aT as bI,mU as wI,mV as vI,mW as yI,mX as sw,mY as Td,mZ as gu,m_ as mu,m$ as CI,n0 as fu,n1 as SI,n2 as EI,n3 as eC,bx as Mt,n4 as tC,n5 as iC,n6 as oC,n7 as nC,n8 as sC,n9 as rC,na as aC,bT as cC,nb as dC,nc as lC,nd as hC,ne as uC,nf as Rc,ng as pC,nh as gC,ni as Hu,u as ia,W as $f,nj as to,nk as Vd,nl as Qa,nm as mC,nn as zu,no as jf,np as kI,nq as _I,nr as Mi,ns as Li,nt as Lt,nu as Yf,bE as Bc,nv as Oc,nw as Nc,nx as fC,ny as xI,nz as II,nA as DI,nB as AI,nC as bC,nD as bu,nE as Uu,nF as Ku,nG as wC,nH as TI,nI as VI,nJ as MI,nK as LI,c_ as vC,nL as PI,fY as RI,nM as yC,nN as BI,nO as kp,nP as rw,nQ as Ui,nR as aw,nS as OI,nT as NI,nU as FI,nV as CC,fS as cw,gi as GI,nW as _p,nX as WI,nY as HI,nZ as dw,n_ as zI,n$ as nt,o0 as Ke,o1 as vo,o2 as Bn,o3 as UI,o4 as Dt,o5 as Nn,o6 as KI,o7 as Zf,o8 as Md,o9 as At,oa as qI,ob as $I,oc as qu,od as ys,oe as SC,dU as xp,of as rr,og as jI,oh as YI,oi as ZI,oj as XI,ok as JI,ol as qs,om as Xf,on as $u,oo as lw,op as no,oq as Zc,or as oo,os as Ip,ot as hw,ou as Da,ov as EC,ow as kC,ox as QI,oy as eD,oz as tD,oA as uw,aY as pw,gb as gw,ge as _C,oB as Aa,oC as mw,oD as xC,oE as IC,F as Fc,oF as iD,oG as DC,T as AC,oH as Jf,b2 as Dp,oI as oD,bw as nD,cP as sD,oJ as rD,bq as _i,oK as fw,oL as aD,oM as bw,oN as cD,oO as ju,oP as dD,oQ as lD,oR as hD,oS as uD,oT as pD,oU as gD,oV as mD,oW as TC,oX as fD,oY as VC,oZ as so,o_ as bD,o$ as ww,p0 as Dn,p1 as wD,p2 as Ap,bb as MC,p3 as wu,o as Gc,bl as LC,p4 as pa,p5 as vD,p6 as vw,p7 as yD,p8 as CD,p9 as yw,pa as SD,pb as ED,pc as PC,pd as RC,pe as BC,pf as OC,pg as NC,ph as Wc,pi as Qf,pj as Hc,pk as FC,pl as GC,pm as WC,pn as HC,po as zC,pp as kD,pq as _D,pr as xD,ps as ID,pt as DD,pu as AD,pv as TD,pw as VD,px as MD,py as LD,pz as PD,pA as RD,pB as Or,pC as eb,pD as BD,aj as OD,pE as UC,pF as ec,pG as Yu,pH as da,gc as ND,pI as Cw,pJ as FD,pK as GD,gj as Sw,pL as Ew,pM as KC,pN as WD,pO as HD,pP as zD,dt as Ta,pQ as kw,pR as UD,pS as Ge,dj as Zi,pT as vu,fm as KD,pU as qD,di as Va,pV as $D,pW as qC,pX as jD,pY as ci,pZ as yu,p_ as tb,p$ as YD,q0 as Xc,q1 as co,q2 as ZD,q3 as _w,q4 as XD,q5 as Ps,q6 as xw,q7 as JD,q8 as Tp,q9 as Zu,qa as Uo,qb as Iw,qc as Jc,df as QD,qd as eA,qe as tA,qf as Dw,qg as $C,qh as jC,qi as Qc,qj as iA,qk as oA,ql as nA,qm as sA,qn as rA,qo as aA,qp as cA,qq as YC,qr as ZC,qs as XC,qt as Ld,qu as Aw,qv as dA,qw as Xu,qx as lA,qy as Pd,qz as hA,qA as Me,qB as oa,qC as Cu,qD as ib,qE as uA,qF as pA,qG as JC,qH as gA,qI as mA,qJ as Cs,qK as fA,qL as bA,qM as ed,qN as Ma,qO as wA,qP as QC,qQ as vA,qR as Vp,qS as Mp,qT as Lp,qU as yA,qV as CA,qW as SA,qX as EA,qY as Rd,qZ as eS,q_ as Tw,q$ as kA,bz as _A,r0 as ob,bA as xA,r1 as Vw,r2 as IA,r3 as DA,r4 as AA,by as tS,r5 as iS,r6 as TA,r7 as VA,r8 as MA,r9 as LA,ra as PA,fC as RA,rb as BA,dC as oS,rc as OA,rd as NA,re as FA,bk as GA,rf as WA,rg as HA,fN as zA}from"./monaco-editor-wrapped-CqvvOqZY.js";import{f as nS,U as Xi,B as sS,F as Nr,C as UA,T as KA}from"./fileCommands._save-B33a3Mqf.js";import{I as qA}from"./workbenchThemeService.service-BjKJFM4E.js";var $A=".monaco-workbench.nosidebar>.part.sidebar{display:none!important;visibility:hidden!important}.monaco-workbench .part.sidebar .title-actions .actions-container{justify-content:flex-end}.monaco-workbench .part.sidebar .title-actions .action-item{margin-right:4px}.monaco-workbench .part.sidebar>.title{background-color:var(--vscode-sideBarTitle-background)}.monaco-workbench .part.sidebar>.title>.title-label h2{text-transform:uppercase}.monaco-workbench .viewlet .collapsible.header .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .viewlet .collapsible.header .actions{width:0}.monaco-workbench .viewlet .collapsible.header.focused .actions,.monaco-workbench .viewlet .split-view-view:hover>.header .actions{flex:1;width:auto}.monaco-workbench .viewlet .collapsible.header .actions .action-label{background-position:50%;background-repeat:no-repeat;background-size:16px;height:22px;margin-right:0;width:28px}.monaco-workbench .viewlet .collapsible.header .actions .action-label .label,.monaco-workbench .viewlet .collapsible.header.collapsed .actions{display:none}.monaco-workbench .viewlet .collapsible.header .action-label{background-repeat:no-repeat;height:16px;margin-right:.2em;width:16px}.monaco-workbench .part.sidebar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus,.monaco-workbench .part.sidebar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus{outline:0!important}.monaco-workbench .part.sidebar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label,.monaco-workbench .part.sidebar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label{border-radius:0;outline-offset:2px}.monaco-workbench .part.sidebar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label:before,.monaco-workbench .part.sidebar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label:before{left:5px;position:absolute}.monaco-workbench .part.sidebar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked.clicked:focus .active-item-indicator:before,.monaco-workbench .part.sidebar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator:before,.monaco-workbench .part.sidebar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked.clicked:focus .active-item-indicator:before,.monaco-workbench .part.sidebar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator:before{border-top-color:var(--vscode-activityBarTop-activeBorder)!important}.monaco-workbench .part.sidebar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .action-label,.monaco-workbench .part.sidebar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label,.monaco-workbench .part.sidebar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .action-label,.monaco-workbench .part.sidebar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label{color:var(--vscode-activityBarTop-foreground)!important}.monaco-workbench .sidebar.pane-composite-part>.title>.composite-bar-container{flex:1}.monaco-workbench .sidebar.part.pane-composite-part>.composite.title.has-composite-bar>.title-actions{flex:inherit}.monaco-workbench .sidebar.pane-composite-part>.title.has-composite-bar>.title-actions .monaco-action-bar .action-item{max-width:150px}";we($A,{});class jA extends A{constructor(){super({id:"workbench.action.focusSideBar",title:w(9489,"Focus into Primary Side Bar"),category:_.View,f1:!0,keybinding:{weight:200,when:null,primary:2069}})}async run(e){const t=e.get(Y),i=e.get(Gt);t.isVisible("workbench.parts.sidebar")||t.setPartHidden(!1,"workbench.parts.sidebar");const o=i.getActivePaneComposite(0);o==null||o.focus()}}C(jA);var YA='.monaco-workbench .pane-composite-part>.title.has-composite-bar>.title-actions .monaco-action-bar .actions-container{justify-content:flex-end}.monaco-workbench .pane-composite-part>.title.has-composite-bar>.global-actions .monaco-action-bar .action-item,.monaco-workbench .pane-composite-part>.title.has-composite-bar>.title-actions .monaco-action-bar .action-item{margin-right:4px}.monaco-workbench .pane-composite-part>.title.has-composite-bar>.title-actions .monaco-action-bar .action-item .action-label{outline-offset:-2px}.monaco-workbench .pane-composite-part>.title.has-composite-bar>.title-label{display:none}.monaco-workbench .pane-composite-part>.header-or-footer{background-color:var(--vscode-activityBarTop-background);padding-left:4px;padding-right:4px}.monaco-workbench .pane-composite-part>.header{border-bottom:1px solid var(--vscode-sideBarActivityBarTop-border)}.monaco-workbench .pane-composite-part>.footer{border-top:1px solid var(--vscode-sideBarActivityBarTop-border)}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container,.monaco-workbench .pane-composite-part>.title>.composite-bar-container{display:flex}.monaco-workbench .pane-composite-part>.header-or-footer .composite-bar-container{flex:1}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-label.codicon-more,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-label.codicon-more{align-items:center;color:inherit!important;display:flex;justify-content:center;margin-left:0;margin-right:0}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar{height:35px;line-height:27px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item{display:flex;font-size:11px;padding:2px 10px;text-transform:uppercase}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon{height:35px;padding:0 3px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .action-label:not(.codicon),.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .action-label:not(.codicon){height:16px;width:16px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:before{background-color:var(--insert-border-color);content:"";display:none;height:24px;opacity:0;position:absolute;transition-delay:.1s;transition-duration:0ms;transition-property:opacity;width:2px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container.dragged-over>.composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container.dragged-over>.composite-bar>.monaco-action-bar .action-item:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container.dragged-over>.composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .pane-composite-part>.title>.composite-bar-container.dragged-over>.composite-bar>.monaco-action-bar .action-item:before{display:block}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:before{left:1px;margin-left:-2px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:after{margin-right:-2px;right:1px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:first-of-type:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:first-of-type:before{left:2px;margin-left:-2px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:last-of-type:after,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:last-of-type:after{margin-right:-2px;right:2px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.left:after,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.left:before,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.right:after,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.right:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.left:after,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.left:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.right:after,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.right:before{transition-delay:0s}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container.dragged-over-head>.composite-bar>.monaco-action-bar .action-item:first-of-type:before,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container.dragged-over-tail>.composite-bar>.monaco-action-bar .action-item:last-of-type:after,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.left:before,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.right+.action-item:before,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:last-of-type.right:after,.monaco-workbench .pane-composite-part>.title>.composite-bar-container.dragged-over-head>.composite-bar>.monaco-action-bar .action-item:first-of-type:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container.dragged-over-tail>.composite-bar>.monaco-action-bar .action-item:last-of-type:after,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.left:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.right+.action-item:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:last-of-type.right:after{opacity:1}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label{border-radius:0;margin-right:0;padding:2px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .action-label.codicon,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:not(.icon) .action-label,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .action-label.codicon,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:not(.icon) .action-label{background:none!important}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked .action-label,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked .action-label{margin-right:0}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .badge,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .badge{align-items:center;display:flex;margin-left:8px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge{margin-left:0}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .badge .badge-content,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .badge .badge-content{border-radius:11px;box-sizing:border-box;display:inline-block;font-size:11px;font-weight:400;height:18px;line-height:11px;min-width:18px;padding:3px 5px;position:relative;text-align:center}.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .icon-badge .badge-content{padding:3px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge.compact,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge.compact{bottom:0;height:100%;left:0;margin:auto;overflow:hidden;position:absolute;top:0;width:100%;z-index:2}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge.compact .badge-content,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge.compact .badge-content{border-radius:16px;font-size:9px;font-weight:600;height:13px;line-height:13px;min-width:13px;padding:0 2px;position:absolute;right:0;text-align:center;top:17px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge.compact.compact-content .badge-content,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge.compact.compact-content .badge-content{font-size:8px;padding:0 3px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge.compact.progress-badge .badge-content:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .badge.compact.progress-badge .badge-content:before{left:1px;mask-size:11px;-webkit-mask-size:11px;top:3px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .active-item-indicator,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .active-item-indicator{bottom:0;height:100%;left:10px;overflow:hidden;pointer-events:none;position:absolute;top:-4px;width:calc(100% - 20px);z-index:1}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .active-item-indicator,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon .active-item-indicator{left:2px;top:1px;width:calc(100% - 4px)}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon.checked,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.icon.checked{background-color:var(--vscode-activityBarTop-activeBackground)}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked .active-item-indicator:before,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .active-item-indicator:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked .active-item-indicator:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .active-item-indicator:before{border-top-style:solid;border-top-width:1px;bottom:2px;content:"";height:0;position:absolute;width:100%;z-index:1}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.clicked:not(.checked):focus .active-item-indicator:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.clicked:not(.checked):focus .active-item-indicator:before{border-top-color:transparent!important}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .active-item-indicator:before,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .active-item-indicator:before{border-top-color:var(--vscode-focusBorder)!important;border-top-width:2px}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked .action-label,.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked .action-label,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label{outline:var(--vscode-contrastActiveBorder,unset) solid 1px!important}.monaco-workbench .pane-composite-part>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:not(.checked):hover .action-label,.monaco-workbench .pane-composite-part>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:not(.checked):hover .action-label{outline:var(--vscode-contrastActiveBorder,unset) dashed 1px!important}.monaco-workbench .pane-composite-part .empty-pane-message-area{display:none;height:100%;width:100%}.monaco-workbench .pane-composite-part .empty-pane-message-area.visible{align-content:center;align-items:center;display:flex;justify-content:center}.monaco-workbench .pane-composite-part .empty-pane-message-area .empty-pane-message{margin:12px;text-align:center}';we(YA,{});let Pp=class extends TE{constructor(e,t,i,o,n,s,r,a){super(e,t,n,i),this.storageService=i,this.instantiationService=o,this.contextMenuService=s,this.extensionService=r,this.contextService=a}create(e){super.create(e),this.viewPaneContainer=this._register(this.createViewPaneContainer(e)),this._register(this.viewPaneContainer.onTitleAreaUpdate(()=>this.updateTitleArea())),this.viewPaneContainer.create(e)}setVisible(e){var t;super.setVisible(e),(t=this.viewPaneContainer)==null||t.setVisible(e)}layout(e){var t;(t=this.viewPaneContainer)==null||t.layout(e)}setBoundarySashes(e){var t;(t=this.viewPaneContainer)==null||t.setBoundarySashes(e)}getOptimalWidth(){var e;return((e=this.viewPaneContainer)==null?void 0:e.getOptimalWidth())??0}openView(e,t){var i;return(i=this.viewPaneContainer)==null?void 0:i.openView(e,t)}getViewPaneContainer(){return this.viewPaneContainer}getActionsContext(){var e;return(e=this.getViewPaneContainer())==null?void 0:e.getActionsContext()}getContextMenuActions(){var e,t;return((t=(e=this.viewPaneContainer)==null?void 0:e.menuActions)==null?void 0:t.getContextMenuActions())??[]}getMenuIds(){var t;const e=[];return(t=this.viewPaneContainer)!=null&&t.menuActions&&(e.push(this.viewPaneContainer.menuActions.menuId),this.viewPaneContainer.isViewMergedWithContainer()&&e.push(this.viewPaneContainer.panes[0].menuActions.menuId)),e}getActions(){var t;const e=[];if((t=this.viewPaneContainer)!=null&&t.menuActions&&(e.push(...this.viewPaneContainer.menuActions.getPrimaryActions()),this.viewPaneContainer.isViewMergedWithContainer())){const i=this.viewPaneContainer.panes[0];i.shouldShowFilterInHeader()&&e.push(VE),e.push(...i.menuActions.getPrimaryActions())}return e}getSecondaryActions(){var o;if(!((o=this.viewPaneContainer)!=null&&o.menuActions))return[];const e=this.viewPaneContainer.isViewMergedWithContainer()?this.viewPaneContainer.panes[0].menuActions.getSecondaryActions():[];let t=this.viewPaneContainer.menuActions.getSecondaryActions();const i=t.findIndex(n=>n instanceof vd&&n.item.submenu===bf);if(i!==-1){const n=t[i];n.actions.some(({enabled:s})=>s)?t.length===1&&e.length===0?t=n.actions.slice():i!==0&&(t=[n,...t.slice(0,i),...t.slice(i+1)]):t.splice(i,1)}return t.length&&e.length?[...t,new We,...e]:t.length?t:e}getActionViewItem(e,t){var i;return(i=this.viewPaneContainer)==null?void 0:i.getActionViewItem(e,t)}getTitle(){var e;return((e=this.viewPaneContainer)==null?void 0:e.getTitle())??""}focus(){var e;super.focus(),(e=this.viewPaneContainer)==null||e.focus()}};Pp=x([u(1,Be),u(2,ie),u(3,O),u(4,te),u(5,Ve),u(6,Vt),u(7,ei)],Pp);class nb extends LE{static create(e,t,i,o,n,s,r){return new nb(e,t,i,o,n,s,r)}constructor(e,t,i,o,n,s,r){super(e,t,i,o,n,s),this.iconUrl=r}}const $i={Viewlets:"workbench.contributions.viewlets",Panels:"workbench.contributions.panels",Auxiliary:"workbench.contributions.auxiliary"};class sb extends ME{registerPaneComposite(e){super.registerComposite(e)}deregisterPaneComposite(e){super.deregisterComposite(e)}getPaneComposite(e){return this.getComposite(e)}getPaneComposites(){return this.getComposites()}}$.add($i.Viewlets,new sb);$.add($i.Panels,new sb);$.add($i.Auxiliary,new sb);var ZA=".monaco-workbench .part>.content>.composite{height:100%}.monaco-workbench .part>.composite.header-or-footer,.monaco-workbench .part>.composite.title{display:flex}.monaco-workbench .part>.composite.title>.title-actions{flex:1;padding-left:5px}";we(ZA,{});var XA=".monaco-workbench .part{box-sizing:border-box;overflow:hidden}.monaco-workbench .part>.drop-block-overlay.visible{visibility:visible}.monaco-workbench .part>.drop-block-overlay{height:100%;opacity:0;position:absolute;top:0;visibility:hidden;width:100%;z-index:12}.monaco-workbench .part>.header-or-footer,.monaco-workbench .part>.title{box-sizing:border-box;display:none;display:flex;height:35px;overflow:hidden}.monaco-workbench .part>.title{padding-left:8px;padding-right:8px}.monaco-workbench .part>.title>.title-label{line-height:35px;overflow:hidden;padding-left:12px;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .part>.title>.title-label h2{cursor:default;font-size:11px;font-weight:400;margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .part>.title>.title-label a{cursor:default;font-size:13px;text-decoration:none}.monaco-workbench .part>.title>.title-actions{flex:1;height:35px;padding-left:5px}.monaco-workbench .part>.title>.title-actions .action-label{background-position:50%;background-repeat:no-repeat;background-size:16px;display:block}.monaco-workbench .part>.title>.title-actions .action-label .label{display:none}.monaco-workbench .part>.content{font-size:13px}.monaco-workbench .part.editor>.content .editor-group-container>.monaco-progress-container,.monaco-workbench .part>.content>.monaco-progress-container{left:0;position:absolute;top:33px;z-index:5}";we(XA,{});class rb extends fv{get dimension(){return this._dimension}get contentPosition(){return this._contentPosition}constructor(e,t,i,o,n){super(e,i,o),this.options=t,this.layoutService=n,this._onDidVisibilityChange=this._register(new I),this.onDidVisibilityChange=this._onDidVisibilityChange.event,this._onDidChange=this._register(new I),this._register(n.registerPart(this))}onThemeChange(e){this.parent&&super.onThemeChange(e)}create(e,t){this.parent=e,this.titleArea=this.createTitleArea(e,t),this.contentArea=this.createContentArea(e,t),this.partLayout=new Rp(this.options,this.contentArea),this.updateStyles()}getContainer(){return this.parent}createTitleArea(e,t){}getTitleArea(){return this.titleArea}createContentArea(e,t){}getContentArea(){return this.contentArea}setHeaderArea(e){var t;if(this.headerArea)throw new Error("Header already exists");!this.parent||!this.titleArea||(wf(this.parent,e),e.classList.add("header-or-footer"),e.classList.add("header"),this.headerArea=e,(t=this.partLayout)==null||t.setHeaderVisibility(!0),this.relayout())}setFooterArea(e){var t;if(this.footerArea)throw new Error("Footer already exists");!this.parent||!this.titleArea||(this.parent.appendChild(e),e.classList.add("header-or-footer"),e.classList.add("footer"),this.footerArea=e,(t=this.partLayout)==null||t.setFooterVisibility(!0),this.relayout())}removeHeaderArea(){var e;this.headerArea&&(this.headerArea.remove(),this.headerArea=void 0,(e=this.partLayout)==null||e.setHeaderVisibility(!1),this.relayout())}removeFooterArea(){var e;this.footerArea&&(this.footerArea.remove(),this.footerArea=void 0,(e=this.partLayout)==null||e.setFooterVisibility(!1),this.relayout())}relayout(){this.dimension&&this.contentPosition&&this.layout(this.dimension.width,this.dimension.height,this.contentPosition.top,this.contentPosition.left)}layoutContents(e,t){return ae(this.partLayout).layout(e,t)}get onDidChange(){return this._onDidChange.event}layout(e,t,i,o){this._dimension=new he(e,t),this._contentPosition={top:i,left:o}}setVisible(e){this._onDidVisibilityChange.fire(e)}}const No=class No{constructor(e,t){this.options=e,this.contentArea=t,this.headerVisible=!1,this.footerVisible=!1}layout(e,t){let i;this.options.hasTitle?i=new he(e,Math.min(t,No.TITLE_HEIGHT)):i=he.None;let o;this.headerVisible?o=new he(e,Math.min(t,No.HEADER_HEIGHT)):o=he.None;let n;this.footerVisible?n=new he(e,Math.min(t,No.Footer_HEIGHT)):n=he.None;let s=e;this.options&&typeof this.options.borderWidth=="function"&&(s-=this.options.borderWidth());const r=new he(s,t-i.height-o.height-n.height);return this.contentArea&&mv(this.contentArea,r.width,r.height),{headerSize:o,titleSize:i,contentSize:r,footerSize:n}}setFooterVisibility(e){this.footerVisible=e}setHeaderVisibility(e){this.headerVisible=e}};No.HEADER_HEIGHT=35,No.TITLE_HEIGHT=35,No.Footer_HEIGHT=35;let Rp=No;class JA extends fv{constructor(){super(...arguments),this._parts=new Set}get parts(){return Array.from(this._parts)}registerPart(e){return this._parts.add(e),ne(()=>this.unregisterPart(e))}unregisterPart(e){this._parts.delete(e)}getPart(e){return this.getPartByDocument(e.ownerDocument)}getPartByDocument(e){var t;if(this._parts.size>1){for(const i of this._parts)if(((t=i.element)==null?void 0:t.ownerDocument)===e)return i}return this.mainPart}get activePart(){return this.getPartByDocument(bv())}}class QA extends rb{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f,v,S){super(v,S,a,t,o),this.notificationService=e,this.storageService=t,this.contextMenuService=i,this.keybindingService=n,this.hoverService=s,this.instantiationService=r,this.registry=l,this.activeCompositeSettingsKey=h,this.defaultCompositeId=p,this.nameForTelemetry=g,this.compositeCSSClass=m,this.titleForegroundColor=f,this.onDidCompositeOpen=this._register(new I),this.onDidCompositeClose=this._register(new I),this.mapCompositeToCompositeContainer=new Map,this.mapActionsBindingToComposite=new Map,this.instantiatedCompositeItems=new Map,this.actionsListener=this._register(new Se),this.lastActiveCompositeId=t.get(h,1,this.defaultCompositeId),this.toolbarHoverDelegate=this._register(PE())}openComposite(e,t){var i;if(((i=this.activeComposite)==null?void 0:i.getId())===e)return t&&this.activeComposite.focus(),this.activeComposite;if(this.element)return this.doOpenComposite(e,t)}doOpenComposite(e,t=!1){var n;const i=RE.nextId();this.currentCompositeOpenToken=i,this.activeComposite&&this.hideActiveComposite(),this.updateTitle(e);const o=this.createComposite(e,!0);if(!(this.currentCompositeOpenToken!==i||this.activeComposite&&this.activeComposite.getId()!==o.getId()))return((n=this.activeComposite)==null?void 0:n.getId())===o.getId()?(t&&o.focus(),this.onDidCompositeOpen.fire({composite:o,focus:t}),o):(this.showComposite(o),t&&o.focus(),o&&this.onDidCompositeOpen.fire({composite:o,focus:t}),o)}createComposite(e,t){const i=this.instantiatedCompositeItems.get(e);if(i)return i.composite;const o=this.registry.getComposite(e);if(o){const n=this,s=new BE(ae(this.progressBar),new class extends OE{constructor(){super(o.id,!!t),this._register(n.onDidCompositeOpen.event(h=>this.onScopeOpened(h.composite.getId()))),this._register(n.onDidCompositeClose.event(h=>this.onScopeClosed(h.getId())))}}),r=this._register(this.instantiationService.createChild(new $r([vf,s]))),a=o.instantiate(r),l=new P;return this.instantiatedCompositeItems.set(e,{composite:a,disposable:l,progress:s}),l.add(a.onTitleAreaUpdate(()=>this.onTitleAreaUpdate(a.getId()),this)),l.add(r),a}throw new Error(`Unable to find composite with id ${e}`)}showComposite(e){this.activeComposite=e;const t=this.activeComposite.getId();t!==this.defaultCompositeId?this.storageService.store(this.activeCompositeSettingsKey,t,1,1):this.storageService.remove(this.activeCompositeSettingsKey,1),this.lastActiveCompositeId=this.activeComposite.getId();let i=this.mapCompositeToCompositeContainer.get(e.getId());if(i||(i=H(".composite"),i.classList.add(...this.compositeCSSClass.split(" ")),i.id=e.getId(),e.create(i),e.updateStyles(),this.mapCompositeToCompositeContainer.set(e.getId(),i)),!this.activeComposite||e.getId()!==this.activeComposite.getId())return;const o=this.getContentArea();o==null||o.appendChild(i),qi(i);const n=ae(this.toolBar);n.actionRunner=e.getActionRunner();const s=this.registry.getComposite(e.getId());s&&s.name!==e.getTitle()&&this.updateTitle(e.getId(),e.getTitle());let r=this.mapActionsBindingToComposite.get(e.getId());r||(r=this.collectCompositeActions(e),this.mapActionsBindingToComposite.set(e.getId(),r)),r(),this.actionsListener.value=n.actionRunner.onDidRun(a=>{a.error&&!jr(a.error)&&this.notificationService.error(a.error)}),e.setVisible(!0),!(!this.activeComposite||e.getId()!==this.activeComposite.getId())&&(this.contentAreaSize&&e.layout(this.contentAreaSize),this.boundarySashes&&e.setBoundarySashes(this.boundarySashes))}onTitleAreaUpdate(e){var i;const t=this.instantiatedCompositeItems.get(e);if(t&&this.updateTitle(e,t.composite.getTitle()),((i=this.activeComposite)==null?void 0:i.getId())===e){const o=this.collectCompositeActions(this.activeComposite);this.mapActionsBindingToComposite.set(this.activeComposite.getId(),o),o()}else this.mapActionsBindingToComposite.delete(e)}updateTitle(e,t){const i=this.registry.getComposite(e);if(!i||!this.titleLabel)return;t||(t=i.name);const o=this.keybindingService.lookupKeybinding(e);this.titleLabel.updateTitle(e,t,(o==null?void 0:o.getLabel())??void 0),ae(this.toolBar).setAriaLabel(d(11389,"{0} actions",t))}collectCompositeActions(e){const t=e==null?void 0:e.getMenuIds(),i=(e==null?void 0:e.getActions().slice(0))||[],o=(e==null?void 0:e.getSecondaryActions().slice(0))||[],n=ae(this.toolBar);return n.context=this.actionsContextProvider(),()=>n.setActions(cn(i),cn(o),t)}getActiveComposite(){return this.activeComposite}getLastActiveCompositeId(){return this.lastActiveCompositeId}hideActiveComposite(){var i;if(!this.activeComposite)return;const e=this.activeComposite;this.activeComposite=void 0;const t=this.mapCompositeToCompositeContainer.get(e.getId());return e.setVisible(!1),t&&(t.remove(),Co(t)),(i=this.progressBar)==null||i.stop().hide(),this.toolBar&&this.collectCompositeActions()(),this.onDidCompositeClose.fire(e),e}createTitleArea(e){const t=ve(e,H(".composite"));t.classList.add("title"),this.titleLabel=this.createTitleLabel(t);const i=ve(t,H(".title-actions"));return this.toolBar=this._register(this.instantiationService.createInstance(Xh,i,{actionViewItemProvider:(o,n)=>this.actionViewItemProvider(o,n),orientation:0,getKeyBinding:o=>this.keybindingService.lookupKeybinding(o.id),anchorAlignmentProvider:()=>this.getTitleAreaDropDownAnchorAlignment(),toggleMenuTitle:d(11390,"Views and More Actions..."),telemetrySource:this.nameForTelemetry,hoverDelegate:this.toolbarHoverDelegate})),this.collectCompositeActions()(),t}createTitleLabel(e){const t=ve(e,H(".title-label")),i=ve(t,H("h2"));this.titleLabelElement=i;const o=this._register(this.hoverService.setupManagedHover(Jh("mouse"),i,"")),n=this;return{updateTitle:(s,r,a)=>{(!this.activeComposite||this.activeComposite.getId()===s)&&(i.innerText=r,o.update(a?d(11391,"{0} ({1})",r,a):r))},updateStyles:()=>{i.style.color=n.titleForegroundColor&&n.getColor(n.titleForegroundColor)||""}}}createHeaderArea(){return H(".composite")}createFooterArea(){return H(".composite")}updateStyles(){super.updateStyles(),ae(this.titleLabel).updateStyles()}actionViewItemProvider(e,t){return this.activeComposite?this.activeComposite.getActionViewItem(e,t):Qh(this.instantiationService,e,t)}actionsContextProvider(){return this.activeComposite?this.activeComposite.getActionsContext():null}createContentArea(e){const t=ve(e,H(".content"));return this.progressBar=this._register(new wv(t,vv)),this.progressBar.hide(),t}getProgressIndicator(e){const t=this.instantiatedCompositeItems.get(e);return t?t.progress:void 0}getTitleAreaDropDownAnchorAlignment(){return 1}layout(e,t,i,o){var n;super.layout(e,t,i,o),this.contentAreaSize=he.lift(super.layoutContents(e,t).contentSize),(n=this.activeComposite)==null||n.layout(this.contentAreaSize)}setBoundarySashes(e){var t;this.boundarySashes=e,(t=this.activeComposite)==null||t.setBoundarySashes(e)}removeComposite(e){var i;if(((i=this.activeComposite)==null?void 0:i.getId())===e)return!1;this.mapCompositeToCompositeContainer.delete(e),this.mapActionsBindingToComposite.delete(e);const t=this.instantiatedCompositeItems.get(e);return t&&(t.composite.dispose(),Re(t.disposable),this.instantiatedCompositeItems.delete(e)),!0}dispose(){this.mapCompositeToCompositeContainer.clear(),this.mapActionsBindingToComposite.clear(),this.instantiatedCompositeItems.forEach(e=>{e.composite.dispose(),Re(e.disposable)}),this.instantiatedCompositeItems.clear(),super.dispose()}}class ab{constructor(e,t){this.descriptorFn=e,this.stylesFn=t}getDescription(){return this.descriptorFn(null)}getColors(e){var t;return(t=this.stylesFn)==null?void 0:t.call(this,e)}}class yo extends ab{constructor(e,t){super(t,void 0),this.number=e,this.number=e}getDescription(){return this.descriptorFn(this.number)}}class eT extends ab{constructor(e,t,i){super(t,i),this.icon=e}}class rS extends ab{constructor(e){super(e,void 0)}}le("activityWarningBadge.foreground",{dark:at.black.lighten(.2),light:at.white,hcDark:null,hcLight:at.black.lighten(.2)},d(5319,"Foreground color of the warning activity badge"));le("activityWarningBadge.background",{dark:"#CCA700",light:"#BF8803",hcDark:null,hcLight:"#CCA700"},d(5320,"Background color of the warning activity badge"));le("activityErrorBadge.foreground",{dark:at.black.lighten(.2),light:at.white,hcDark:null,hcLight:at.black.lighten(.2)},d(5321,"Foreground color of the error activity badge"));le("activityErrorBadge.background",{dark:"#F14C4C",light:"#E51400",hcDark:null,hcLight:"#F14C4C"},d(5322,"Background color of the error activity badge"));var ud,ga;class Fr extends de{constructor(e){var t;super(e.id,e.name,(t=e.classNames)==null?void 0:t.join(" "),!0),this.item=e,this._onDidChangeCompositeBarActionItem=this._register(new I),this.onDidChangeCompositeBarActionItem=this._onDidChangeCompositeBarActionItem.event,this._onDidChangeActivity=this._register(new I),this.onDidChangeActivity=this._onDidChangeActivity.event}get compositeBarActionItem(){return this.item}set compositeBarActionItem(e){this._label=e.name,this.item=e,this._onDidChangeCompositeBarActionItem.fire(this)}get activity(){return this._activity}set activity(e){this._activity=e,this._onDidChangeActivity.fire(e)}activate(){this.checked||this._setChecked(!0)}deactivate(){this.checked&&this._setChecked(!1)}}var Hn;let tc=(Hn=class extends NE{constructor(e,t,i,o,n,s,r){super(null,e,t),this.badgesEnabled=i,this.themeService=o,this.hoverService=n,this.configurationService=s,this.keybindingService=r,this.badgeDisposable=this._register(new Se),this.hoverDisposables=this._register(new P),this.showHoverScheduler=new Yr(()=>this.showHover(),0),this.options=t,this._register(this.themeService.onDidColorThemeChange(this.onThemeChange,this)),this._register(e.onDidChangeCompositeBarActionItem(()=>this.update())),this._register(N.filter(r.onDidUpdateKeybindings,()=>this.keybindingLabel!==this.computeKeybindingLabel())(()=>this.updateTitle())),this._register(e.onDidChangeActivity(()=>this.updateActivity())),this._register(ne(()=>this.showHoverScheduler.cancel()))}get compositeBarActionItem(){return this._action.compositeBarActionItem}updateStyles(){var i;const e=this.themeService.getColorTheme(),t=this.options.colors(e);if(this.label){if(this.options.icon){const o=this._action.checked?t.activeForegroundColor:t.inactiveForegroundColor;this.compositeBarActionItem.iconUrl?(this.label.style.backgroundColor=o?o.toString():"",this.label.style.color=""):(this.label.style.color=o?o.toString():"",this.label.style.backgroundColor="")}else{const o=this._action.checked?t.activeForegroundColor:t.inactiveForegroundColor,n=this._action.checked?t.activeBorderBottomColor:null;this.label.style.color=o?o.toString():"",this.label.style.borderBottomColor=n?n.toString():""}this.container.style.setProperty("--insert-border-color",t.dragAndDropBorder?t.dragAndDropBorder.toString():"")}if(this.badgeContent){const o=(i=this.getActivity())==null?void 0:i.badge.getColors(e),n=(o==null?void 0:o.badgeForeground)??t.badgeForeground??e.getColor(yv),s=(o==null?void 0:o.badgeBackground)??t.badgeBackground??e.getColor(Cv),r=(o==null?void 0:o.badgeBorder)??e.getColor(Yt);this.badgeContent.style.color=n?n.toString():"",this.badgeContent.style.backgroundColor=s?s.toString():"",this.badgeContent.style.borderStyle=r&&!this.options.compact?"solid":"",this.badgeContent.style.borderWidth=r?"1px":"",this.badgeContent.style.borderColor=r?r.toString():""}}render(e){super.render(e),this.container=e,this.options.icon&&this.container.classList.add("icon"),this.options.hasPopup?(this.container.setAttribute("role","button"),this.container.setAttribute("aria-haspopup","true")):this.container.setAttribute("role","tab"),this._register(L(this.container,B.MOUSE_DOWN,()=>{this.container.classList.add("clicked")})),this._register(L(this.container,B.MOUSE_UP,()=>{this.mouseUpTimeout&&clearTimeout(this.mouseUpTimeout),this.mouseUpTimeout=setTimeout(()=>{this.container.classList.remove("clicked")},800)})),this.label=ve(e,H("a")),this.badge=ve(e,H(".badge")),this.badgeContent=ve(this.badge,H(".badge-content")),ve(e,H(".active-item-indicator")),Co(this.badge),this.update(),this.updateStyles(),this.updateHover()}onThemeChange(e){this.updateStyles()}update(){this.updateLabel(),this.updateActivity(),this.updateTitle(),this.updateStyles()}getActivity(){if(this._action instanceof Fr)return this._action.activity}updateActivity(){if(!this.badge||!this.badgeContent||!(this._action instanceof Fr))return;const e=this.getActivity();this.badgeDisposable.value=new P,Zt(this.badgeContent),Co(this.badge);const t=this.badgesEnabled(this.compositeBarActionItem.id);if(e&&t){const{badge:i}=e,o=[];if(this.options.compact&&o.push("compact"),i instanceof rS)qi(this.badge),o.push("progress-badge");else if(i instanceof yo){if(i.number){let n=i.number.toString();if(i.number>999){const s=i.number/1e3,r=Math.floor(s);s>r?n=`${r}K+`:n=`${s}K`}this.options.compact&&n.length>=3&&o.push("compact-content"),this.badgeContent.textContent=n,qi(this.badge)}}else if(i instanceof eT){o.push("icon-badge");const n=["icon-overlay",...oe.asClassNameArray(i.icon)];this.badgeContent.classList.add(...n),this.badgeDisposable.value.add(ne(()=>{var s;return(s=this.badgeContent)==null?void 0:s.classList.remove(...n)})),qi(this.badge)}o.length&&(this.badge.classList.add(...o),this.badgeDisposable.value.add(ne(()=>this.badge.classList.remove(...o))))}this.updateTitle(),this.updateStyles()}updateLabel(){this.label.className="action-label",this.compositeBarActionItem.classNames&&this.label.classList.add(...this.compositeBarActionItem.classNames),this.options.icon||(this.label.textContent=this.action.label)}updateTitle(){const e=this.computeTitle();[this.label,this.badge,this.container].forEach(t=>{t&&(t.setAttribute("aria-label",e),t.setAttribute("title",""),t.removeAttribute("title"))})}computeTitle(){var i;this.keybindingLabel=this.computeKeybindingLabel();let e=this.keybindingLabel?d(10749,"{0} ({1})",this.compositeBarActionItem.name,this.keybindingLabel):this.compositeBarActionItem.name;const t=(i=this.action.activity)==null?void 0:i.badge;return t!=null&&t.getDescription()&&(e=d(10750,"{0} - {1}",e,t.getDescription())),e}computeKeybindingLabel(){const e=this.compositeBarActionItem.keybindingId?this.keybindingService.lookupKeybinding(this.compositeBarActionItem.keybindingId):null;return e==null?void 0:e.getLabel()}updateHover(){this.hoverDisposables.clear(),this.updateTitle(),this.hoverDisposables.add(L(this.container,B.MOUSE_OVER,()=>{this.showHoverScheduler.isScheduled()||(Date.now()-ud.hoverLeaveTime<200?this.showHover(!0):this.showHoverScheduler.schedule(this.configurationService.getValue("workbench.hover.delay")))},!0)),this.hoverDisposables.add(L(this.container,B.MOUSE_LEAVE,e=>{e.target===this.container&&(ud.hoverLeaveTime=Date.now(),this.hoverService.hideHover(),this.showHoverScheduler.cancel())},!0)),this.hoverDisposables.add(ne(()=>{this.hoverService.hideHover(),this.showHoverScheduler.cancel()}))}showHover(e=!1){if(this.lastHover&&!this.lastHover.isDisposed)return;const t=this.options.hoverOptions.position();this.lastHover=this.hoverService.showHover({target:this.container,content:this.computeTitle(),position:{hoverPosition:t},persistence:{hideOnKeyDown:!0},appearance:{showPointer:!0,compact:!0,skipFadeInAnimation:e}})}dispose(){super.dispose(),this.mouseUpTimeout&&clearTimeout(this.mouseUpTimeout),this.badge.remove()}},ud=Hn,Hn.hoverLeaveTime=0,Hn);tc=ud=x([u(3,te),u(4,Xe),u(5,F),u(6,xe)],tc);class Mw extends Fr{constructor(e){super({id:"additionalComposites.action",name:d(10751,"Additional Views"),classNames:oe.asClassNameArray(T.more)}),this.showMenu=e}async run(){this.showMenu()}}let Bp=class extends tc{constructor(e,t,i,o,n,s,r,a,l,h,p,g){super(e,{icon:!0,colors:s,hasPopup:!0,hoverOptions:r},()=>!0,l,h,p,g),this.getOverflowingComposites=t,this.getActiveCompositeId=i,this.getBadge=o,this.getCompositeOpenAction=n,this.contextMenuService=a}showMenu(){this.contextMenuService.showContextMenu({getAnchor:()=>this.container,getActions:()=>this.getActions(),getCheckedActionsRepresentation:()=>"radio"})}getActions(){return this.getOverflowingComposites().map(e=>{const t=this.getCompositeOpenAction(e.id);t.checked=this.getActiveCompositeId()===t.id;const i=this.getBadge(e.id);let o;return i instanceof yo&&(o=i.number),o?t.label=d(10752,"{0} ({1})",e.name,o):t.label=e.name||"",t})}};Bp=x([u(7,Ve),u(8,te),u(9,Xe),u(10,F),u(11,xe)],Bp);let Op=class extends de{constructor(e){super("activitybar.manage.extension",d(10753,"Manage Extension")),this.commandService=e}run(e){return this.commandService.executeCommand("_extensions.manage",e)}};Op=x([u(0,lt)],Op);var dr;let Np=(dr=class extends tc{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f){super(t,e,a.areBadgesEnabled.bind(a),g,m,f,h),this.compositeActivityAction=t,this.toggleCompositePinnedAction=i,this.toggleCompositeBadgeAction=o,this.compositeContextMenuActionsProvider=n,this.contextMenuActionsProvider=s,this.dndHandler=r,this.compositeBar=a,this.contextMenuService=l,ga.manageExtensionAction||(ga.manageExtensionAction=p.createInstance(Op))}render(e){super.render(e),this.updateChecked(),this.updateEnabled(),this._register(L(this.container,B.CONTEXT_MENU,i=>{re.stop(i,!0),this.showContextMenu(e)}));let t;this._register(Dr.INSTANCE.registerDraggable(this.container,()=>({type:"composite",id:this.compositeBarActionItem.id}),{onDragOver:i=>{const o=i.dragAndDropData.getData().id!==this.compositeBarActionItem.id&&this.dndHandler.onDragOver(i.dragAndDropData,this.compositeBarActionItem.id,i.eventData);yf(i.eventData.dataTransfer,"move",o),t=this.updateFromDragging(e,o,i.eventData)},onDragLeave:i=>{t=this.updateFromDragging(e,!1,i.eventData)},onDragEnd:i=>{t=this.updateFromDragging(e,!1,i.eventData)},onDrop:i=>{re.stop(i.eventData,!0),this.dndHandler.drop(i.dragAndDropData,this.compositeBarActionItem.id,i.eventData,t),t=this.updateFromDragging(e,!1,i.eventData)},onDragStart:i=>{i.dragAndDropData.getData().id===this.compositeBarActionItem.id&&(i.eventData.dataTransfer&&(i.eventData.dataTransfer.effectAllowed="move"),this.blur())}})),[this.badge,this.label].forEach(i=>this._register(new FE(i,()=>{this.action.checked||this.action.run()}))),this.updateStyles()}updateFromDragging(e,t,i){const o=e.getBoundingClientRect(),n=i.clientX,s=i.clientY,r=o.bottom-o.top,a=o.right-o.left,l=s<=o.top+r*.4,h=s>o.bottom-r*.4,p=s<=o.top+r*.5,g=n<=o.left+a*.4,m=n>o.right-a*.4,f=n<=o.left+a*.5,v=e.classList,S={vertical:v.contains("top")?"top":v.contains("bottom")?"bottom":void 0,horizontal:v.contains("left")?"left":v.contains("right")?"right":void 0},E=l||p&&!S.vertical||!h&&S.vertical==="top",D=h||!p&&!S.vertical||!l&&S.vertical==="bottom",V=g||f&&!S.horizontal||!m&&S.horizontal==="left",M=m||!f&&!S.horizontal||!g&&S.horizontal==="right";if(e.classList.toggle("top",t&&E),e.classList.toggle("bottom",t&&D),e.classList.toggle("left",t&&V),e.classList.toggle("right",t&&M),!!t)return{verticallyBefore:E,horizontallyBefore:V}}showContextMenu(e){const t=[this.toggleCompositePinnedAction,this.toggleCompositeBadgeAction],i=this.compositeContextMenuActionsProvider(this.compositeBarActionItem.id);i.length&&t.push(...i),this.compositeActivityAction.compositeBarActionItem.extensionId&&(t.push(new We),t.push(ga.manageExtensionAction)),this.compositeBar.isPinned(this.compositeBarActionItem.id)?(this.toggleCompositePinnedAction.label=d(10754,"Hide '{0}'",this.compositeBarActionItem.name),this.toggleCompositePinnedAction.checked=!1,this.toggleCompositePinnedAction.enabled=this.compositeBar.getPinnedCompositeIds().length>1):(this.toggleCompositePinnedAction.label=d(10755,"Keep '{0}'",this.compositeBarActionItem.name),this.toggleCompositePinnedAction.enabled=!0),this.compositeBar.areBadgesEnabled(this.compositeBarActionItem.id)?this.toggleCompositeBadgeAction.label=d(10756,"Hide Badge"):this.toggleCompositeBadgeAction.label=d(10757,"Show Badge");const s=this.contextMenuActionsProvider();s.length&&(t.push(new We),t.push(...s));const r=Sv(e),a={x:Math.floor(r.left+r.width/2),y:r.top+r.height};this.contextMenuService.showContextMenu({getAnchor:()=>a,getActions:()=>t,getActionsContext:()=>this.compositeBarActionItem.id})}updateChecked(){this.action.checked?(this.container.classList.add("checked"),this.container.setAttribute("aria-label",this.getTooltip()??this.container.title),this.container.setAttribute("aria-expanded","true"),this.container.setAttribute("aria-selected","true")):(this.container.classList.remove("checked"),this.container.setAttribute("aria-label",this.getTooltip()??this.container.title),this.container.setAttribute("aria-expanded","false"),this.container.setAttribute("aria-selected","false")),this.updateStyles()}updateEnabled(){this.element&&(this.action.enabled?this.element.classList.remove("disabled"):this.element.classList.add("disabled"))}dispose(){super.dispose(),this.label.remove()}},ga=dr,dr);Np=ga=x([u(8,Ve),u(9,xe),u(10,O),u(11,te),u(12,Xe),u(13,F)],Np);class aS extends de{constructor(e,t){super("show.toggleCompositePinned",e?e.name:d(10758,"Toggle View Pinned")),this.activity=e,this.compositeBar=t,this.checked=!!this.activity&&this.compositeBar.isPinned(this.activity.id)}async run(e){const t=this.activity?this.activity.id:e;this.compositeBar.isPinned(t)?this.compositeBar.unpin(t):this.compositeBar.pin(t)}}class cS extends de{constructor(e,t){super("show.toggleCompositeBadge",e?e.name:d(10759,"Toggle View Badge")),this.compositeBarActionItem=e,this.compositeBar=t,this.checked=!1}async run(e){const t=this.compositeBarActionItem?this.compositeBarActionItem.id:e;this.compositeBar.toggleBadgeEnablement(t)}}class tT{constructor(e,t,i,o,n,s){this.viewDescriptorService=e,this.targetContainerLocation=t,this.orientation=i,this.openComposite=o,this.moveComposite=n,this.getItems=s}drop(e,t,i,o){const n=e.getData();if(n.type==="composite"){const s=this.viewDescriptorService.getViewContainerById(n.id);this.viewDescriptorService.getViewContainerLocation(s)===this.targetContainerLocation?t&&this.moveComposite(n.id,t,o):this.viewDescriptorService.moveViewContainerToLocation(s,this.targetContainerLocation,this.getTargetIndex(t,o),"dnd")}if(n.type==="view"){const s=this.viewDescriptorService.getViewDescriptorById(n.id);if(s&&s.canMoveView){this.viewDescriptorService.moveViewToLocation(s,this.targetContainerLocation,"dnd");const r=this.viewDescriptorService.getViewContainerByViewId(s.id);t&&this.moveComposite(r.id,t,o),this.openComposite(r.id,!0).then(a=>{a==null||a.openView(s.id,!0)})}}}onDragEnter(e,t,i){return this.canDrop(e,t)}onDragOver(e,t,i){return this.canDrop(e,t)}getTargetIndex(e,t){if(!e)return;const i=this.getItems(),o=this.orientation===0?t==null?void 0:t.horizontallyBefore:t==null?void 0:t.verticallyBefore;return i.filter(n=>n.visible).findIndex(n=>n.id===e)+(o?0:1)}canDrop(e,t){const i=e.getData();if(i.type==="composite"){const o=this.viewDescriptorService.getViewContainerById(i.id);return this.viewDescriptorService.getViewContainerLocation(o)===this.targetContainerLocation?i.id!==t:!0}else{const o=this.viewDescriptorService.getViewDescriptorById(i.id);return!(!o||!o.canMoveView)}}}class iT{constructor(e,t,i,o,n){this.compositeBarContainer=e,this.actionBarContainer=t,this.compositeBarModel=i,this.dndHandler=o,this.orientation=n,this.insertDropBefore=void 0}onDragOver(e){const t=this.compositeBarModel.visibleItems;if(!t.length||e.eventData.target&&Yi(e.eventData.target,this.actionBarContainer)){this.insertDropBefore=this.updateFromDragging(this.compositeBarContainer,!1,!1,!0);return}const i=this.insertAtFront(this.actionBarContainer,e.eventData),o=i?t[0]:t[t.length-1],n=this.dndHandler.onDragOver(e.dragAndDropData,o.id,e.eventData);yf(e.eventData.dataTransfer,"move",n),this.insertDropBefore=this.updateFromDragging(this.compositeBarContainer,n,i,!0)}onDragLeave(e){this.insertDropBefore=this.updateFromDragging(this.compositeBarContainer,!1,!1,!1)}onDragEnd(e){this.insertDropBefore=this.updateFromDragging(this.compositeBarContainer,!1,!1,!1)}onDrop(e){const t=this.compositeBarModel.visibleItems;let i;t.length&&(i=this.insertAtFront(this.actionBarContainer,e.eventData)?t[0].id:t[t.length-1].id),this.dndHandler.drop(e.dragAndDropData,i,e.eventData,this.insertDropBefore),this.insertDropBefore=this.updateFromDragging(this.compositeBarContainer,!1,!1,!1)}insertAtFront(e,t){const i=e.getBoundingClientRect(),o=t.clientX,n=t.clientY;switch(this.orientation){case 0:return o<i.left;case 1:return n<i.top}}updateFromDragging(e,t,i,o){if(e.classList.toggle("dragged-over",o),e.classList.toggle("dragged-over-head",t&&i),e.classList.toggle("dragged-over-tail",t&&!i),!!t)return{verticallyBefore:i,horizontallyBefore:i}}}let Fp=class extends Ev{constructor(e,t,i,o,n){super(),this.options=t,this.instantiationService=i,this.contextMenuService=o,this.viewDescriptorService=n,this._onDidChange=this._register(new I),this.onDidChange=this._onDidChange.event,this.model=new oT(e,t),this.visibleComposites=[],this.compositeSizeInBar=new Map,this.computeSizes(this.model.visibleItems)}getCompositeBarItems(){return[...this.model.items]}setCompositeBarItems(e){this.model.setItems(e),this.updateCompositeSwitcher(!0)}getPinnedComposites(){return this.model.pinnedItems}getPinnedCompositeIds(){return this.getPinnedComposites().map(e=>e.id)}getVisibleComposites(){return this.model.visibleItems}create(e){const t=e.appendChild(H(".composite-bar"));this.compositeSwitcherBar=this._register(new Vo(t,{actionViewItemProvider:(o,n)=>{if(o instanceof Mw)return this.compositeOverflowActionViewItem;const s=this.model.findItem(o.id);return s&&this.instantiationService.createInstance(Np,{...n,draggable:!0,colors:this.options.colors,icon:this.options.icon,hoverOptions:this.options.activityHoverOptions,compact:this.options.compact},o,s.pinnedAction,s.toggleBadgeAction,r=>this.options.getContextMenuActionsForComposite(r),()=>this.getContextMenuActions(),this.options.dndHandler,this)},orientation:this.options.orientation,ariaLabel:d(11392,"Active View Switcher"),ariaRole:"tablist",preventLoopNavigation:this.options.preventLoopNavigation,triggerKeys:{keyDown:!0}})),this._register(L(e,B.CONTEXT_MENU,o=>this.showContextMenu(fe(e),o))),this._register(dn.addTarget(e)),this._register(L(e,St.Contextmenu,o=>this.showContextMenu(fe(e),o)));const i=new iT(e,t,this.model,this.options.dndHandler,this.options.orientation);return this._register(Dr.INSTANCE.registerTarget(e,i)),t}focus(e){var t;(t=this.compositeSwitcherBar)==null||t.focus(e)}recomputeSizes(){this.computeSizes(this.model.visibleItems),this.updateCompositeSwitcher()}layout(e){this.dimension=e,!(e.height===0||e.width===0)&&(this.compositeSizeInBar.size===0&&this.computeSizes(this.model.visibleItems),this.updateCompositeSwitcher())}addComposite({id:e,name:t,order:i,requestedIndex:o}){this.model.add(e,t,i,o)&&(this.computeSizes([this.model.findItem(e)]),this.updateCompositeSwitcher())}removeComposite(e){this.isPinned(e)&&this.unpin(e),this.model.remove(e)&&this.updateCompositeSwitcher()}hideComposite(e){this.model.hide(e)&&(this.resetActiveComposite(e),this.updateCompositeSwitcher())}activateComposite(e){const t=this.model.activeItem;this.model.activate(e)&&(this.visibleComposites.indexOf(e)===-1||this.model.activeItem&&!this.model.activeItem.pinned||t&&!t.pinned)&&this.updateCompositeSwitcher()}deactivateComposite(e){const t=this.model.activeItem;this.model.deactivate()&&t&&!t.pinned&&this.updateCompositeSwitcher()}async pin(e,t){this.model.setPinned(e,!0)&&(this.updateCompositeSwitcher(),t&&(await this.options.openComposite(e),this.activateComposite(e)))}unpin(e){this.model.setPinned(e,!1)&&(this.updateCompositeSwitcher(),this.resetActiveComposite(e))}areBadgesEnabled(e){return this.viewDescriptorService.getViewContainerBadgeEnablementState(e)}toggleBadgeEnablement(e){this.viewDescriptorService.setViewContainerBadgeEnablementState(e,!this.areBadgesEnabled(e)),this.updateCompositeSwitcher();const t=this.model.findItem(e);t&&(t.activityAction.activity=t.activityAction.activity)}resetActiveComposite(e){const t=this.options.getDefaultCompositeId();if(!(!this.model.activeItem||this.model.activeItem.id!==e))if(this.deactivateComposite(e),t&&t!==e&&this.isPinned(t))this.options.openComposite(t,!0);else{const i=this.visibleComposites.find(o=>o!==e);i&&this.options.openComposite(i)}}isPinned(e){const t=this.model.findItem(e);return t==null?void 0:t.pinned}move(e,t,i){if(i!==void 0){const o=this.model.items.findIndex(s=>s.id===e);let n=this.model.items.findIndex(s=>s.id===t);o>=0&&n>=0&&(!i&&o>n&&n++,i&&o<n&&n--,n<this.model.items.length&&n>=0&&n!==o&&this.model.move(this.model.items[o].id,this.model.items[n].id)&&setTimeout(()=>this.updateCompositeSwitcher(),0))}else this.model.move(e,t)&&setTimeout(()=>this.updateCompositeSwitcher(),0)}getAction(e){const t=this.model.findItem(e);return t==null?void 0:t.activityAction}computeSizes(e){const t=this.options.compositeSize;if(t)e.forEach(i=>this.compositeSizeInBar.set(i.id,t));else{const i=this.compositeSwitcherBar;if(i&&this.dimension&&this.dimension.height!==0&&this.dimension.width!==0){const o=i.viewItems.length;i.push(e.map(n=>n.activityAction)),e.forEach((n,s)=>this.compositeSizeInBar.set(n.id,this.options.orientation===1?i.getHeight(o+s):i.getWidth(o+s))),e.forEach(()=>i.pull(i.viewItems.length-1))}}}updateCompositeSwitcher(e){var l,h;const t=this.compositeSwitcherBar;if(!t||!this.dimension)return;let i=this.model.visibleItems.filter(p=>p.pinned||this.model.activeItem&&this.model.activeItem.id===p.id).map(p=>p.id),o=i.length;const n=i.length;let s=0;const r=this.options.orientation===1?this.dimension.height:this.dimension.width;for(let p=0;p<i.length;p++){const g=this.compositeSizeInBar.get(i[p]);if(s+g>r){o=p;break}s+=g}for(n>o&&(i=i.slice(0,o)),this.model.activeItem&&i.every(p=>!!this.model.activeItem&&p!==this.model.activeItem.id)&&(s+=this.compositeSizeInBar.get(this.model.activeItem.id),i.push(this.model.activeItem.id));s>r&&i.length;){const p=i.length>1?i.splice(i.length-2,1)[0]:i.pop();s-=this.compositeSizeInBar.get(p)}for(n>i.length&&(s+=this.options.overflowActionSize);s>r&&i.length;){const p=i.length>1&&i[i.length-1]===((l=this.model.activeItem)==null?void 0:l.id)?i.splice(i.length-2,1)[0]:i.pop();s-=this.compositeSizeInBar.get(p)}n===i.length&&this.compositeOverflowAction&&(t.pull(t.length()-1),this.compositeOverflowAction.dispose(),this.compositeOverflowAction=void 0,(h=this.compositeOverflowActionViewItem)==null||h.dispose(),this.compositeOverflowActionViewItem=void 0);const a=[];this.visibleComposites.forEach((p,g)=>{i.includes(p)||a.push(g)}),a.reverse().forEach(p=>{t.pull(p),this.visibleComposites.splice(p,1)}),i.forEach((p,g)=>{const m=this.visibleComposites.indexOf(p);g!==m&&(m!==-1&&(t.pull(m),this.visibleComposites.splice(m,1)),t.push(this.model.findItem(p).activityAction,{label:!0,icon:this.options.icon,index:g}),this.visibleComposites.splice(g,0,p))}),n>i.length&&!this.compositeOverflowAction&&(this.compositeOverflowAction=this._register(this.instantiationService.createInstance(Mw,()=>{var p;(p=this.compositeOverflowActionViewItem)==null||p.showMenu()})),this.compositeOverflowActionViewItem=this._register(this.instantiationService.createInstance(Bp,this.compositeOverflowAction,()=>this.getOverflowingComposites(),()=>this.model.activeItem?this.model.activeItem.id:void 0,p=>{var m;const g=this.model.findItem(p);return(m=g==null?void 0:g.activity[0])==null?void 0:m.badge},this.options.getOnCompositeClickAction,this.options.colors,this.options.activityHoverOptions)),t.push(this.compositeOverflowAction,{label:!1,icon:!0})),e||this._onDidChange.fire()}getOverflowingComposites(){let e=this.model.visibleItems.filter(t=>t.pinned).map(t=>t.id);return this.model.activeItem&&!this.model.activeItem.pinned&&e.push(this.model.activeItem.id),e=e.filter(t=>!this.visibleComposites.includes(t)),this.model.visibleItems.filter(t=>e.includes(t.id)).map(t=>{var i;return{id:t.id,name:((i=this.getAction(t.id))==null?void 0:i.label)||t.name}})}showContextMenu(e,t){re.stop(t,!0);const i=new ai(e,t);this.contextMenuService.showContextMenu({getAnchor:()=>i,getActions:()=>this.getContextMenuActions(t)})}getContextMenuActions(e){const t=this.model.visibleItems.map(({id:i,name:o,activityAction:n})=>{const s=this.isPinned(i);return et({id:i,label:this.getAction(i).label||o||i,checked:s,enabled:n.enabled&&(!s||this.getPinnedCompositeIds().length>1),run:()=>{this.isPinned(i)?this.unpin(i):this.pin(i,!0)}})});return this.options.fillExtraContextMenuActions(t,e),t}};Fp=x([u(2,O),u(3,Ve),u(4,Te)],Fp);class oT{get items(){return this._items}constructor(e,t){this._items=[],this.options=t,this.setItems(e)}setItems(e){this._items=[],this._items=e.map(t=>this.createCompositeBarItem(t.id,t.name,t.order,t.pinned,t.visible))}get visibleItems(){return this.items.filter(e=>e.visible)}get pinnedItems(){return this.items.filter(e=>e.visible&&e.pinned)}createCompositeBarItem(e,t,i,o,n){const s=this.options;return{id:e,name:t,pinned:o,order:i,visible:n,activity:[],get activityAction(){return s.getActivityAction(e)},get pinnedAction(){return s.getCompositePinnedAction(e)},get toggleBadgeAction(){return s.getCompositeBadgeAction(e)}}}add(e,t,i,o){const n=this.findItem(e);if(n){let s=!1;return n.name=t,ni(i)||(s=n.order!==i,n.order=i),n.visible||(n.visible=!0,s=!0),s}else{const s=this.createCompositeBarItem(e,t,i,!0,!0);if(ni(o))if(ni(i))this.items.push(s);else{let r=0;for(;r<this.items.length&&typeof this.items[r].order=="number"&&this.items[r].order<i;)r++;this.items.splice(r,0,s)}else{let r=0,a=o;for(;a>0&&r<this.items.length;)this.items[r++].visible&&a--;this.items.splice(r,0,s)}return!0}}remove(e){for(let t=0;t<this.items.length;t++)if(this.items[t].id===e)return this.items.splice(t,1),!0;return!1}hide(e){for(const t of this.items)if(t.id===e)return t.visible?(t.visible=!1,!0):!1;return!1}move(e,t){const i=this.findIndex(e),o=this.findIndex(t);if(i===-1||o===-1)return!1;const n=this.items.splice(i,1)[0];return this.items.splice(o,0,n),n.pinned=!0,!0}setPinned(e,t){for(const i of this.items)if(i.id===e)return i.pinned!==t?(i.pinned=t,!0):!1;return!1}activate(e){if(!this.activeItem||this.activeItem.id!==e){this.activeItem&&this.deactivate();for(const t of this.items)if(t.id===e)return this.activeItem=t,this.activeItem.activityAction.activate(),!0}return!1}deactivate(){return this.activeItem?(this.activeItem.activityAction.deactivate(),this.activeItem=void 0,!0):!1}findItem(e){return this.items.filter(t=>t.id===e)[0]}findIndex(e){for(let t=0;t<this.items.length;t++)if(this.items[t].id===e)return t;return-1}}var Gp;let Bd=class extends R{constructor(e,t,i,o,n,s,r,a,l,h,p){super(),this.options=e,this.part=t,this.paneCompositePart=i,this.instantiationService=o,this.storageService=n,this.extensionService=s,this.viewDescriptorService=r,this.viewService=a,this.contextKeyService=l,this.environmentService=h,this.layoutService=p,this.viewContainerDisposables=this._register(new za),this.compositeActions=new Map,this.hasExtensionsRegistered=!1,this._cachedViewContainers=void 0,this.location=i.partId==="workbench.parts.panel"?1:i.partId==="workbench.parts.auxiliarybar"?2:0,this.dndHandler=new tT(this.viewDescriptorService,this.location,this.options.orientation,async(m,f)=>await this.paneCompositePart.openPaneComposite(m,f)??null,(m,f,v)=>this.compositeBar.move(m,f,this.options.orientation===1?v==null?void 0:v.verticallyBefore:v==null?void 0:v.horizontallyBefore),()=>this.compositeBar.getCompositeBarItems());const g=this.cachedViewContainers.map(m=>({id:m.id,name:m.name,visible:!this.shouldBeHidden(m.id,m),order:m.order,pinned:m.pinned}));this.compositeBar=this.createCompositeBar(g),this.onDidRegisterViewContainers(this.getViewContainers()),this.registerListeners()}createCompositeBar(e){return this._register(this.instantiationService.createInstance(Fp,e,{icon:this.options.icon,compact:this.options.compact,orientation:this.options.orientation,activityHoverOptions:this.options.activityHoverOptions,preventLoopNavigation:this.options.preventLoopNavigation,openComposite:async(t,i)=>await this.paneCompositePart.openPaneComposite(t,!i)??null,getActivityAction:t=>this.getCompositeActions(t).activityAction,getCompositePinnedAction:t=>this.getCompositeActions(t).pinnedAction,getCompositeBadgeAction:t=>this.getCompositeActions(t).badgeAction,getOnCompositeClickAction:t=>this.getCompositeActions(t).activityAction,fillExtraContextMenuActions:(t,i)=>this.options.fillExtraContextMenuActions(t,i),getContextMenuActionsForComposite:t=>this.getContextMenuActionsForComposite(t),getDefaultCompositeId:()=>{var t;return(t=this.viewDescriptorService.getDefaultViewContainer(this.location))==null?void 0:t.id},dndHandler:this.dndHandler,compositeSize:this.options.compositeSize,overflowActionSize:this.options.overflowActionSize,colors:t=>this.options.colors(t)}))}getContextMenuActionsForComposite(e){const t=[],i=this.viewDescriptorService.getViewContainerById(e),o=this.viewDescriptorService.getDefaultViewContainerLocation(i);if(o!==this.viewDescriptorService.getViewContainerLocation(i))t.push(et({id:"resetLocationAction",label:d(9490,"Reset Location"),run:()=>this.viewDescriptorService.moveViewContainerToLocation(i,o,void 0,"resetLocationAction")}));else{const n=this.viewDescriptorService.getViewContainerModel(i);if(n.allViewDescriptors.length===1){const s=n.allViewDescriptors[0],r=this.viewDescriptorService.getDefaultContainerById(s.id);r!==i&&t.push(et({id:"resetLocationAction",label:d(9490,"Reset Location"),run:()=>this.viewDescriptorService.moveViewsToContainer([s],r,void 0,"resetLocationAction")}))}}return t}registerListeners(){this._register(this.viewDescriptorService.onDidChangeViewContainers(({added:e,removed:t})=>this.onDidChangeViewContainers(e,t))),this._register(this.viewDescriptorService.onDidChangeContainerLocation(({viewContainer:e,from:t,to:i})=>this.onDidChangeViewContainerLocation(e,t,i))),this._register(this.paneCompositePart.onDidPaneCompositeOpen(e=>this.onDidChangeViewContainerVisibility(e.getId(),!0))),this._register(this.paneCompositePart.onDidPaneCompositeClose(e=>this.onDidChangeViewContainerVisibility(e.getId(),!1))),this.extensionService.whenInstalledExtensionsRegistered().then(()=>{this._store.isDisposed||(this.onDidRegisterExtensions(),this._register(this.compositeBar.onDidChange(()=>{this.updateCompositeBarItemsFromStorage(!0),this.saveCachedViewContainers()})),this._register(this.storageService.onDidChangeValue(0,this.options.pinnedViewContainersKey,this._store)(()=>this.updateCompositeBarItemsFromStorage(!1))))})}onDidChangeViewContainers(e,t){t.filter(({location:i})=>i===this.location).forEach(({container:i})=>this.onDidDeregisterViewContainer(i)),this.onDidRegisterViewContainers(e.filter(({location:i})=>i===this.location).map(({container:i})=>i))}onDidChangeViewContainerLocation(e,t,i){t===this.location&&this.onDidDeregisterViewContainer(e),i===this.location&&this.onDidRegisterViewContainers([e])}onDidChangeViewContainerVisibility(e,t){t?this.onDidViewContainerVisible(e):this.compositeBar.deactivateComposite(e)}onDidRegisterExtensions(){this.hasExtensionsRegistered=!0;for(const{id:e}of this.cachedViewContainers){const t=this.getViewContainer(e);t?this.showOrHideViewContainer(t):this.viewDescriptorService.isViewContainerRemovedPermanently(e)?this.removeComposite(e):this.hideComposite(e)}this.saveCachedViewContainers()}onDidViewContainerVisible(e){const t=this.getViewContainer(e);t&&(this.addComposite(t),this.compositeBar.activateComposite(t.id),this.shouldBeHidden(t)&&this.viewDescriptorService.getViewContainerModel(t).activeViewDescriptors.length===0&&this.hideComposite(t.id))}create(e){return this.compositeBar.create(e)}getCompositeActions(e){let t=this.compositeActions.get(e);if(!t){const i=this.getViewContainer(e);if(i){const o=this.viewDescriptorService.getViewContainerModel(i);t={activityAction:this._register(this.instantiationService.createInstance(Od,this.toCompositeBarActionItemFrom(o),this.part,this.paneCompositePart)),pinnedAction:this._register(new aS(this.toCompositeBarActionItemFrom(o),this.compositeBar)),badgeAction:this._register(new cS(this.toCompositeBarActionItemFrom(o),this.compositeBar))}}else{const o=this.cachedViewContainers.filter(n=>n.id===e)[0];t={activityAction:this._register(this.instantiationService.createInstance(nT,this.toCompositeBarActionItem(e,(o==null?void 0:o.name)??e,o==null?void 0:o.icon,void 0),this.part,this.paneCompositePart)),pinnedAction:this._register(new Lw(e,this.compositeBar)),badgeAction:this._register(new sT(e,this.compositeBar))}}this.compositeActions.set(e,t)}return t}onDidRegisterViewContainers(e){for(const t of e){this.addComposite(t),this.cachedViewContainers.filter(({id:r})=>r===t.id)[0]||this.compositeBar.pin(t.id);const o=this.paneCompositePart.getActivePaneComposite();(o==null?void 0:o.getId())===t.id&&this.compositeBar.activateComposite(t.id);const n=this.viewDescriptorService.getViewContainerModel(t);this.updateCompositeBarActionItem(t,n),this.showOrHideViewContainer(t);const s=new P;s.add(n.onDidChangeContainerInfo(()=>this.updateCompositeBarActionItem(t,n))),s.add(n.onDidChangeActiveViewDescriptors(()=>this.showOrHideViewContainer(t))),this.viewContainerDisposables.set(t.id,s)}}onDidDeregisterViewContainer(e){this.viewContainerDisposables.deleteAndDispose(e.id),this.removeComposite(e.id)}updateCompositeBarActionItem(e,t){const i=this.toCompositeBarActionItemFrom(t),{activityAction:o,pinnedAction:n}=this.getCompositeActions(e.id);o.updateCompositeBarActionItem(i),n instanceof Lw&&n.setActivity(i),this.options.recomputeSizes&&this.compositeBar.recomputeSizes(),this.saveCachedViewContainers()}toCompositeBarActionItemFrom(e){return this.toCompositeBarActionItem(e.viewContainer.id,e.title,e.icon,e.keybindingId)}toCompositeBarActionItem(e,t,i,o){let n,s;if(this.options.icon)if(z.isUri(i)){s=i;const r=Hi(i),a=new GE;a.update(r);const l=`activity-${e.replace(/\./g,"-")}-${a.digest()}`,h=`.monaco-workbench .${this.options.partContainerClass} .monaco-action-bar .action-label.${l}`;n=[l,"uri-icon"],WE(h,`
				mask: ${r} no-repeat 50% 50%;
				mask-size: ${this.options.iconSize}px;
				-webkit-mask: ${r} no-repeat 50% 50%;
				-webkit-mask-size: ${this.options.iconSize}px;
				mask-origin: padding;
				-webkit-mask-origin: padding;
			`)}else oe.isThemeIcon(i)&&(n=oe.asClassNameArray(i));return{id:e,name:t,classNames:n,iconUrl:s,keybindingId:o}}showOrHideViewContainer(e){if(this.shouldBeHidden(e))this.hideComposite(e.id);else{this.addComposite(e);const t=this.paneCompositePart.getActivePaneComposite();(t==null?void 0:t.getId())===e.id&&this.compositeBar.activateComposite(e.id)}}shouldBeHidden(e,t){var n;const i=ln(e)?this.getViewContainer(e):e,o=ln(e)?e:e.id;if(i)if(i.hideIfEmpty){if(this.viewService.isViewContainerActive(o))return!1}else return!1;if(!this.hasExtensionsRegistered&&!(this.part==="workbench.parts.sidebar"&&this.environmentService.remoteAuthority&&Es)){if(t=t||this.cachedViewContainers.find(({id:s})=>s===o),!i&&(t!=null&&t.isBuiltin)&&(t!=null&&t.visible))return!1;if((n=t==null?void 0:t.views)!=null&&n.length)return t.views.every(({when:s})=>!!s&&!this.contextKeyService.contextMatchesRules(y.deserialize(s)))}return!0}addComposite(e){this.compositeBar.addComposite({id:e.id,name:typeof e.title=="string"?e.title:e.title.value,order:e.order,requestedIndex:e.requestedIndex})}hideComposite(e){this.compositeBar.hideComposite(e);const t=this.compositeActions.get(e);t&&(t.activityAction.dispose(),t.pinnedAction.dispose(),this.compositeActions.delete(e))}removeComposite(e){this.compositeBar.removeComposite(e);const t=this.compositeActions.get(e);t&&(t.activityAction.dispose(),t.pinnedAction.dispose(),this.compositeActions.delete(e))}getPinnedPaneCompositeIds(){const e=this.compositeBar.getPinnedComposites().map(t=>t.id);return this.getViewContainers().filter(t=>this.compositeBar.isPinned(t.id)).sort((t,i)=>e.indexOf(t.id)-e.indexOf(i.id)).map(t=>t.id)}getVisiblePaneCompositeIds(){return this.compositeBar.getVisibleComposites().filter(e=>{var t;return((t=this.paneCompositePart.getActivePaneComposite())==null?void 0:t.getId())===e.id||this.compositeBar.isPinned(e.id)}).map(e=>e.id)}getPaneCompositeIds(){return this.compositeBar.getVisibleComposites().map(e=>e.id)}getContextMenuActions(){return this.compositeBar.getContextMenuActions()}focus(e){this.compositeBar.focus(e)}layout(e,t){this.compositeBar.layout(new he(e,t))}getViewContainer(e){const t=this.viewDescriptorService.getViewContainerById(e);return t&&this.viewDescriptorService.getViewContainerLocation(t)===this.location?t:void 0}getViewContainers(){return this.viewDescriptorService.getViewContainersByLocation(this.location)}updateCompositeBarItemsFromStorage(e){if(this.pinnedViewContainersValue===this.getStoredPinnedViewContainersValue())return;this._placeholderViewContainersValue=void 0,this._pinnedViewContainersValue=void 0,this._cachedViewContainers=void 0;const t=[],i=this.compositeBar.getCompositeBarItems();for(const o of this.cachedViewContainers)t.push({id:o.id,name:o.name,order:o.order,pinned:o.pinned,visible:o.visible&&!!this.getViewContainer(o.id)});for(const o of this.getViewContainers())if(!t.some(({id:n})=>n===o.id)){const n=i.findIndex(({id:s})=>s===o.id);if(n!==-1){const s=i[n];t.splice(n,0,{id:o.id,name:typeof o.title=="string"?o.title:o.title.value,order:s.order,pinned:s.pinned,visible:s.visible})}else t.push({id:o.id,name:typeof o.title=="string"?o.title:o.title.value,order:o.order,pinned:!0,visible:!this.shouldBeHidden(o)})}if(e)for(const o of i)t.find(({id:s})=>s===o.id)||t.push(o);this.compositeBar.setCompositeBarItems(t)}saveCachedViewContainers(){const e=[],t=this.compositeBar.getCompositeBarItems();for(const i of t){const o=this.getViewContainer(i.id);if(o){const n=this.viewDescriptorService.getViewContainerModel(o),s=[];for(const{when:r}of n.allViewDescriptors)s.push({when:r?r.serialize():void 0});e.push({id:i.id,name:n.title,icon:z.isUri(n.icon)&&this.environmentService.remoteAuthority?void 0:n.icon,views:s,pinned:i.pinned,order:i.order,visible:i.visible,isBuiltin:!o.extensionId})}else e.push({id:i.id,name:i.name,pinned:i.pinned,order:i.order,visible:!1,isBuiltin:!1})}this.storeCachedViewContainersState(e)}get cachedViewContainers(){if(this._cachedViewContainers===void 0){this._cachedViewContainers=this.getPinnedViewContainers();for(const e of this.getPlaceholderViewContainers()){const t=this._cachedViewContainers.find(i=>i.id===e.id);t&&(t.visible=e.visible??t.visible,t.name=e.name,t.icon=e.themeIcon?e.themeIcon:e.iconUrl?z.revive(e.iconUrl):void 0,z.isUri(t.icon)&&this.environmentService.remoteAuthority&&(t.icon=void 0),t.views=e.views,t.isBuiltin=e.isBuiltin)}for(const e of this.getViewContainersWorkspaceState()){const t=this._cachedViewContainers.find(i=>i.id===e.id);t&&(t.visible=e.visible??t.visible)}}return this._cachedViewContainers}storeCachedViewContainersState(e){const t=this.getPinnedViewContainers();this.setPinnedViewContainers(e.map(({id:i,pinned:o,order:n})=>{var s;return{id:i,pinned:o,visible:!!((s=t.find(({id:r})=>r===i))!=null&&s.visible),order:n}})),this.setPlaceholderViewContainers(e.map(({id:i,icon:o,name:n,views:s,isBuiltin:r})=>({id:i,iconUrl:z.isUri(o)?o:void 0,themeIcon:oe.isThemeIcon(o)?o:void 0,name:n,isBuiltin:r,views:s}))),this.setViewContainersWorkspaceState(e.map(({id:i,visible:o})=>({id:i,visible:o})))}getPinnedViewContainers(){return JSON.parse(this.pinnedViewContainersValue)}setPinnedViewContainers(e){this.pinnedViewContainersValue=JSON.stringify(e)}get pinnedViewContainersValue(){return this._pinnedViewContainersValue||(this._pinnedViewContainersValue=this.getStoredPinnedViewContainersValue()),this._pinnedViewContainersValue}set pinnedViewContainersValue(e){this.pinnedViewContainersValue!==e&&(this._pinnedViewContainersValue=e,this.setStoredPinnedViewContainersValue(e))}getStoredPinnedViewContainersValue(){return this.storageService.get(this.options.pinnedViewContainersKey,0,"[]")}setStoredPinnedViewContainersValue(e){this.storageService.store(this.options.pinnedViewContainersKey,e,0,0)}getPlaceholderViewContainers(){return JSON.parse(this.placeholderViewContainersValue)}setPlaceholderViewContainers(e){this.placeholderViewContainersValue=JSON.stringify(e)}get placeholderViewContainersValue(){return this._placeholderViewContainersValue||(this._placeholderViewContainersValue=this.getStoredPlaceholderViewContainersValue()),this._placeholderViewContainersValue}set placeholderViewContainersValue(e){this.placeholderViewContainersValue!==e&&(this._placeholderViewContainersValue=e,this.setStoredPlaceholderViewContainersValue(e))}getStoredPlaceholderViewContainersValue(){return this.storageService.get(this.options.placeholderViewContainersKey,0,"[]")}setStoredPlaceholderViewContainersValue(e){this.storageService.store(this.options.placeholderViewContainersKey,e,0,1)}getViewContainersWorkspaceState(){return JSON.parse(this.viewContainersWorkspaceStateValue)}setViewContainersWorkspaceState(e){this.viewContainersWorkspaceStateValue=JSON.stringify(e)}get viewContainersWorkspaceStateValue(){return this._viewContainersWorkspaceStateValue||(this._viewContainersWorkspaceStateValue=this.getStoredViewContainersWorkspaceStateValue()),this._viewContainersWorkspaceStateValue}set viewContainersWorkspaceStateValue(e){this.viewContainersWorkspaceStateValue!==e&&(this._viewContainersWorkspaceStateValue=e,this.setStoredViewContainersWorkspaceStateValue(e))}getStoredViewContainersWorkspaceStateValue(){return this.storageService.get(this.options.viewContainersWorkspaceStateKey,1,"[]")}setStoredViewContainersWorkspaceStateValue(e){this.storageService.store(this.options.viewContainersWorkspaceStateKey,e,1,1)}};Bd=x([u(3,O),u(4,ie),u(5,Vt),u(6,Te),u(7,it),u(8,K),u(9,bt),u(10,Y)],Bd);var zn;let Od=(zn=class extends Fr{constructor(e,t,i,o,n,s,r){super(e),this.part=t,this.paneCompositePart=i,this.layoutService=o,this.telemetryService=n,this.configurationService=s,this.activityService=r,this.lastRun=0,this.updateActivity(),this._register(this.activityService.onDidChangeActivity(a=>{!ln(a)&&a.id===this.compositeBarActionItem.id&&this.updateActivity()}))}updateCompositeBarActionItem(e){this.compositeBarActionItem=e}updateActivity(){const e=this.activityService.getViewContainerActivities(this.compositeBarActionItem.id);this.activity=e[0]}async run(e){if(Pn(e)&&e.button===2)return;const t=Date.now();if(t>this.lastRun&&t-this.lastRun<Gp.preventDoubleClickDelay)return;this.lastRun=t;const i=e&&"preserveFocus"in e?!e.preserveFocus:!0;if(this.part==="workbench.parts.activitybar"){const o=this.layoutService.isVisible("workbench.parts.sidebar"),n=this.paneCompositePart.getActivePaneComposite(),s=this.configurationService.getValue("workbench.activityBar.iconClickBehavior");if(o&&(n==null?void 0:n.getId())===this.compositeBarActionItem.id){switch(s){case"focus":this.logAction("refocus"),this.paneCompositePart.openPaneComposite(this.compositeBarActionItem.id,i);break;case"toggle":default:this.logAction("hide"),this.layoutService.setPartHidden(!0,"workbench.parts.sidebar");break}return}this.logAction("show")}return await this.paneCompositePart.openPaneComposite(this.compositeBarActionItem.id,i),this.activate()}logAction(e){this.telemetryService.publicLog2("activityBarAction",{viewletId:this.compositeBarActionItem.id,action:e})}},Gp=zn,zn.preventDoubleClickDelay=300,zn);Od=Gp=x([u(3,Y),u(4,Be),u(5,F),u(6,Wt)],Od);class nT extends Od{}class Lw extends aS{constructor(e,t){super({id:e,name:e,classNames:void 0},t)}setActivity(e){this.label=e.name}}class sT extends cS{constructor(e,t){super({id:e,name:e,classNames:void 0},t)}setCompositeBarActionItem(e){this.label=e.name}}var Wp,_e;(function(c){c[c.TOP=0]="TOP",c[c.TITLE=1]="TITLE",c[c.BOTTOM=2]="BOTTOM"})(_e||(_e={}));var Un;let ic=(Un=class extends QA{get snap(){var e;return this.layoutService.isVisible(this.partId)||!!((e=this.paneCompositeBar.value)!=null&&e.getVisiblePaneCompositeIds().length)}get onDidPaneCompositeOpen(){return N.map(this.onDidCompositeOpen.event,e=>e.composite)}constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f,v,S,E,D,V,M){var G;let J=0,q=$i.Viewlets,W=b.SidebarTitle;e==="workbench.parts.panel"?(J=1,q=$i.Panels,W=b.PanelTitle):e==="workbench.parts.auxiliarybar"&&(J=2,q=$i.Auxiliary,W=b.AuxiliaryBarTitle),super(l,h,p,g,m,f,v,S,$.as(q),i,((G=E.getDefaultViewContainer(J))==null?void 0:G.id)||"",s,r,a,e,t),this.partId=e,this.activePaneContextKey=o,this.paneFocusContextKey=n,this.viewDescriptorService=E,this.contextKeyService=D,this.extensionService=V,this.menuService=M,this.onDidPaneCompositeClose=this.onDidCompositeClose.event,this.headerFooterCompositeBarDispoables=this._register(new P),this.paneCompositeBar=this._register(new Se),this.compositeBarPosition=void 0,this.blockOpening=!1,this.location=J,this.globalActions=this._register(this.instantiationService.createInstance(kv,W,void 0,void 0)),this.registerListeners()}registerListeners(){this._register(this.onDidPaneCompositeOpen(e=>this.onDidOpen(e))),this._register(this.onDidPaneCompositeClose(this.onDidClose,this)),this._register(this.globalActions.onDidChange(()=>this.updateGlobalToolbarActions())),this._register(this.registry.onDidDeregister(e=>{var i,o;const t=this.viewDescriptorService.getViewContainersByLocation(this.location).filter(n=>this.viewDescriptorService.getViewContainerModel(n).activeViewDescriptors.length>0);if(t.length){if(((i=this.getActiveComposite())==null?void 0:i.getId())===e.id){const n=(o=this.viewDescriptorService.getDefaultViewContainer(this.location))==null?void 0:o.id,s=t.filter(r=>r.id===n)[0]||t[0];this.doOpenPaneComposite(s.id)}}else this.layoutService.setPartHidden(!0,this.partId);this.removeComposite(e.id)})),this._register(this.extensionService.onDidRegisterExtensions(()=>{this.layoutCompositeBar()}))}onDidOpen(e){this.activePaneContextKey.set(e.getId())}onDidClose(e){const t=e.getId();this.activePaneContextKey.get()===t&&this.activePaneContextKey.reset()}showComposite(e){super.showComposite(e),this.layoutCompositeBar(),this.layoutEmptyMessage()}hideActiveComposite(){const e=super.hideActiveComposite();return this.layoutCompositeBar(),this.layoutEmptyMessage(),e}create(e){this.element=e,this.element.classList.add("pane-composite-part"),super.create(e);const t=this.getContentArea();t&&this.createEmptyPaneMessage(t),this.updateCompositeBar();const i=this._register(ms(e));this._register(i.onDidFocus(()=>this.paneFocusContextKey.set(!0))),this._register(i.onDidBlur(()=>this.paneFocusContextKey.set(!1)))}createEmptyPaneMessage(e){this.emptyPaneMessageElement=document.createElement("div"),this.emptyPaneMessageElement.classList.add("empty-pane-message-area");const t=document.createElement("div");t.classList.add("empty-pane-message"),t.innerText=d(9486,"Drag a view here to display."),this.emptyPaneMessageElement.appendChild(t),e.appendChild(this.emptyPaneMessageElement),this._register(Dr.INSTANCE.registerTarget(this.element,{onDragOver:i=>{if(re.stop(i.eventData,!0),this.paneCompositeBar.value){const o=this.paneCompositeBar.value.dndHandler.onDragEnter(i.dragAndDropData,void 0,i.eventData);yf(i.eventData.dataTransfer,"move",o)}},onDragEnter:i=>{var o;if(re.stop(i.eventData,!0),this.paneCompositeBar.value){const n=this.paneCompositeBar.value.dndHandler.onDragEnter(i.dragAndDropData,void 0,i.eventData);this.emptyPaneMessageElement.style.backgroundColor=n&&((o=this.theme.getColor(Cf))==null?void 0:o.toString())||""}},onDragLeave:i=>{re.stop(i.eventData,!0),this.emptyPaneMessageElement.style.backgroundColor=""},onDragEnd:i=>{re.stop(i.eventData,!0),this.emptyPaneMessageElement.style.backgroundColor=""},onDrop:i=>{if(re.stop(i.eventData,!0),this.emptyPaneMessageElement.style.backgroundColor="",this.paneCompositeBar.value)this.paneCompositeBar.value.dndHandler.drop(i.dragAndDropData,void 0,i.eventData);else{const o=i.dragAndDropData.getData();if(o.type==="composite"){const n=this.viewDescriptorService.getViewContainerById(o.id);this.viewDescriptorService.moveViewContainerToLocation(n,this.location,void 0,"dnd"),this.openPaneComposite(n.id,!0)}else if(o.type==="view"){const n=this.viewDescriptorService.getViewDescriptorById(o.id);if(n&&n.canMoveView){this.viewDescriptorService.moveViewToLocation(n,this.location,"dnd");const s=this.viewDescriptorService.getViewContainerByViewId(n.id);this.openPaneComposite(s.id,!0).then(r=>{r==null||r.openView(n.id,!0)})}}}}}))}createTitleArea(e){const t=super.createTitleArea(e);this._register(L(t,B.CONTEXT_MENU,o=>{this.onTitleAreaContextMenu(new ai(fe(t),o))})),this._register(dn.addTarget(t)),this._register(L(t,St.Contextmenu,o=>{this.onTitleAreaContextMenu(new ai(fe(t),o))}));const i=t.appendChild(H(".global-actions"));return this.globalToolBar=this._register(this.instantiationService.createInstance(Xh,i,{actionViewItemProvider:(o,n)=>this.actionViewItemProvider(o,n),orientation:0,getKeyBinding:o=>this.keybindingService.lookupKeybinding(o.id),anchorAlignmentProvider:()=>this.getTitleAreaDropDownAnchorAlignment(),toggleMenuTitle:d(9487,"More Actions..."),hoverDelegate:this.toolbarHoverDelegate,hiddenItemStrategy:-1})),this.updateGlobalToolbarActions(),t}createTitleLabel(e){this.titleContainer=e;const t=super.createTitleLabel(e);this.titleLabelElement.draggable=!0;const i=()=>({type:"composite",id:this.getActivePaneComposite().getId()});return this._register(Dr.INSTANCE.registerDraggable(this.titleLabelElement,i,{})),t}updateCompositeBar(e=!1){const t=this.compositeBarPosition!==void 0,i=this.shouldShowCompositeBar(),o=this.compositeBarPosition,n=i?this.getCompositeBarPosition():void 0;if(!e&&o===n)return;if(t){const r=o===_e.TITLE?this.titleContainer:this.headerFooterCompositeBarContainer;if(!this.paneCompositeBarContainer||!this.paneCompositeBar.value||!r)throw new Error("Composite bar containers should exist when removing the previous composite bar");this.paneCompositeBarContainer.remove(),this.paneCompositeBarContainer=void 0,this.paneCompositeBar.value=void 0,r.classList.remove("has-composite-bar"),o===_e.TOP?this.removeFooterHeaderArea(!0):o===_e.BOTTOM&&this.removeFooterHeaderArea(!1)}let s;switch(n){case _e.TOP:s=this.createHeaderArea();break;case _e.TITLE:s=this.titleContainer;break;case _e.BOTTOM:s=this.createFooterArea();break}if(i){if(this.paneCompositeBarContainer||this.paneCompositeBar.value||!s)throw new Error("Invalid composite bar state when creating the new composite bar");s.classList.add("has-composite-bar"),this.paneCompositeBarContainer=wf(s,H(".composite-bar-container")),this.paneCompositeBar.value=this.createCompositeBar(),this.paneCompositeBar.value.create(this.paneCompositeBarContainer),n===_e.TOP?this.setHeaderArea(s):n===_e.BOTTOM&&this.setFooterArea(s)}this.compositeBarPosition=n,e&&this.layoutCompositeBar()}createHeaderArea(){const e=super.createHeaderArea();return this.createHeaderFooterCompositeBarArea(e)}createFooterArea(){const e=super.createFooterArea();return this.createHeaderFooterCompositeBarArea(e)}createHeaderFooterCompositeBarArea(e){if(this.headerFooterCompositeBarContainer)throw new Error("Header or Footer composite bar already exists");return this.headerFooterCompositeBarContainer=e,this.headerFooterCompositeBarDispoables.add(L(e,B.CONTEXT_MENU,t=>{this.onCompositeBarAreaContextMenu(new ai(fe(e),t))})),this.headerFooterCompositeBarDispoables.add(dn.addTarget(e)),this.headerFooterCompositeBarDispoables.add(L(e,St.Contextmenu,t=>{this.onCompositeBarAreaContextMenu(new ai(fe(e),t))})),e}removeFooterHeaderArea(e){this.headerFooterCompositeBarContainer=void 0,this.headerFooterCompositeBarDispoables.clear(),e?this.removeHeaderArea():this.removeFooterArea()}createCompositeBar(){return this.instantiationService.createInstance(Bd,this.getCompositeBarOptions(),this.partId,this)}onTitleAreaUpdate(e){super.onTitleAreaUpdate(e),this.layoutCompositeBar()}async openPaneComposite(e,t){if(typeof e=="string"&&this.getPaneComposite(e))return this.doOpenPaneComposite(e,t);if(await this.extensionService.whenInstalledExtensionsRegistered(),typeof e=="string"&&this.getPaneComposite(e))return this.doOpenPaneComposite(e,t)}doOpenPaneComposite(e,t){if(!this.blockOpening){if(!this.layoutService.isVisible(this.partId))try{this.blockOpening=!0,this.layoutService.setPartHidden(!1,this.partId)}finally{this.blockOpening=!1}return this.openComposite(e,t)}}getPaneComposite(e){return this.registry.getPaneComposite(e)}getPaneComposites(){return this.registry.getPaneComposites().sort((e,t)=>typeof e.order!="number"?1:typeof t.order!="number"?-1:e.order-t.order)}getPinnedPaneCompositeIds(){var e;return((e=this.paneCompositeBar.value)==null?void 0:e.getPinnedPaneCompositeIds())??[]}getVisiblePaneCompositeIds(){var e;return((e=this.paneCompositeBar.value)==null?void 0:e.getVisiblePaneCompositeIds())??[]}getPaneCompositeIds(){var e;return((e=this.paneCompositeBar.value)==null?void 0:e.getPaneCompositeIds())??[]}getActivePaneComposite(){return this.getActiveComposite()}getLastActivePaneCompositeId(){return this.getLastActiveCompositeId()}hideActivePaneComposite(){this.layoutService.isVisible(this.partId)&&this.layoutService.setPartHidden(!0,this.partId),this.hideActiveComposite()}focusCompositeBar(){var e;(e=this.paneCompositeBar.value)==null||e.focus()}layout(e,t,i,o){this.layoutService.isVisible(this.partId)&&(this.contentDimension=new he(e,t),super.layout(this.contentDimension.width,this.contentDimension.height,i,o),this.layoutCompositeBar(),this.layoutEmptyMessage())}layoutCompositeBar(){if(this.contentDimension&&this.dimension&&this.paneCompositeBar.value){const e=this.compositeBarPosition===_e.TITLE?16:8,t=this.partId==="workbench.parts.panel"?0:1;let i=this.contentDimension.width-e-t;i=Math.max(Wp.MIN_COMPOSITE_BAR_WIDTH,i-this.getToolbarWidth()),this.paneCompositeBar.value.layout(i,this.dimension.height)}}layoutEmptyMessage(){var t,i;const e=!this.getActiveComposite();(t=this.emptyPaneMessageElement)==null||t.classList.toggle("visible",e),e&&((i=this.titleLabel)==null||i.updateTitle("",""))}updateGlobalToolbarActions(){var i;const e=this.globalActions.getPrimaryActions(),t=this.globalActions.getSecondaryActions();(i=this.globalToolBar)==null||i.setActions(cn(e),cn(t))}getToolbarWidth(){if(!this.toolBar||this.compositeBarPosition!==_e.TITLE||!this.getActivePaneComposite())return 0;const t=this.toolBar.getItemsWidth()+this.toolBar.getItemsLength()*4,i=this.globalToolBar?this.globalToolBar.getItemsWidth()+this.globalToolBar.getItemsLength()*4:0;return t+i+5}onTitleAreaContextMenu(e){if(this.shouldShowCompositeBar()&&this.getCompositeBarPosition()===_e.TITLE)return this.onCompositeBarContextMenu(e);{const t=this.getActivePaneComposite(),i=t?t.getContextMenuActions():[];i.length&&this.contextMenuService.showContextMenu({getAnchor:()=>e,getActions:()=>i,getActionViewItem:(o,n)=>this.actionViewItemProvider(o,n),actionRunner:t.getActionRunner(),skipTelemetry:!0})}}onCompositeBarAreaContextMenu(e){return this.onCompositeBarContextMenu(e)}onCompositeBarContextMenu(e){if(this.paneCompositeBar.value){const t=[...this.paneCompositeBar.value.getContextMenuActions()];t.length&&this.contextMenuService.showContextMenu({getAnchor:()=>e,getActions:()=>t,skipTelemetry:!0})}}getViewsSubmenuAction(){var t;const e=(t=this.getActivePaneComposite())==null?void 0:t.getViewPaneContainer();if(e){const i=new P,o=[],n=i.add(this.contextKeyService.createScoped(this.element));n.createKey("viewContainer",e.viewContainer.id);const s=this.menuService.getMenuActions(bf,n,{shouldForwardArgs:!0,renderShortTitle:!0});return hn(s,{primary:o,secondary:[]},()=>!0),i.dispose(),o.length>1&&o.some(r=>r.enabled)?new So("views",d(9488,"Views"),o):void 0}}},Wp=Un,Un.MIN_COMPOSITE_BAR_WIDTH=50,Un);ic=Wp=x([u(8,He),u(9,ie),u(10,Ve),u(11,Y),u(12,xe),u(13,Xe),u(14,O),u(15,te),u(16,Te),u(17,K),u(18,Vt),u(19,yt)],ic);var rT='.monaco-workbench .part.activitybar{height:100%;width:48px}.monaco-workbench .activitybar.bordered:before{border-color:inherit;box-sizing:border-box;content:"";float:left;height:100%;position:absolute;width:0}.monaco-workbench .activitybar.left.bordered:before{border-right-style:solid;border-right-width:1px;right:0}.monaco-workbench .activitybar.right.bordered:before{border-left-style:solid;border-left-width:1px;left:0}.monaco-workbench .activitybar>.content{display:flex;flex-direction:column;height:100%;justify-content:space-between}.monaco-workbench .activitybar>.content .monaco-action-bar{background-color:inherit;text-align:left}.monaco-workbench .activitybar .action-item:focus{outline:0!important}.monaco-workbench .activitybar>.content>.composite-bar{margin-bottom:auto}.monaco-workbench .activitybar .menubar,.monaco-workbench .activitybar .menubar.compact .toolbar-toggle-more{height:35px;width:100%}';we(rT,{});var aT='.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item{display:block;position:relative}.monaco-workbench .activitybar>.content .composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .activitybar>.content .composite-bar>.monaco-action-bar .action-item:before{background-color:transparent;content:"";display:none;height:2px;position:absolute;transition-delay:.1s;transition-duration:0ms;transition-property:background-color;width:48px}.monaco-workbench .activitybar>.content.dragged-over .composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .activitybar>.content.dragged-over .composite-bar>.monaco-action-bar .action-item:before{display:block}.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.bottom:after,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.bottom:before,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.top:after,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.top:before{transition-delay:0s}.monaco-workbench .activitybar>.content.dragged-over-head>.composite-bar>.monaco-action-bar .action-item:first-of-type:before,.monaco-workbench .activitybar>.content.dragged-over-tail>.composite-bar>.monaco-action-bar .action-item:last-of-type:after,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.bottom+.action-item:before,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.top:before,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item:last-of-type.bottom:after{background-color:var(--insert-border-color)}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-label{box-sizing:border-box;display:flex;height:48px;margin-right:0;overflow:hidden;position:relative;width:48px;z-index:1}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-label:not(.codicon){font-size:15px;line-height:40px;padding:0 0 0 48px}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-label.codicon{align-items:center;font-size:24px;justify-content:center}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.active .action-label.codicon,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .action-label.codicon,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:hover .action-label.codicon{color:var(--vscode-activityBar-foreground)!important}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.active .action-label.uri-icon,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .action-label.uri-icon,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:hover .action-label.uri-icon{background-color:var(--vscode-activityBar-foreground)!important}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked .active-item-indicator:before,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .active-item-indicator:before{border-left:2px solid;content:"";height:100%;position:absolute;top:0;width:0;z-index:1}.monaco-workbench.hc-black .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked .active-item-indicator:before,.monaco-workbench.hc-black .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .active-item-indicator:before{border-color:var(--vscode-activityBar-activeBorder)}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked .active-item-indicator:before{height:100%;top:0}.monaco-workbench.hc-black .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator.action-item,.monaco-workbench.hc-light .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator{display:none}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.clicked:focus .active-item-indicator:before,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.clicked:focus:before{border-left:none!important}.monaco-workbench .activitybar.left>.content :not(.monaco-menu)>.monaco-action-bar .action-item .active-item-indicator:before{left:0}.monaco-workbench .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .action-item .active-item-indicator:before{right:0}.monaco-workbench.hc-black .activitybar.left>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus:before,.monaco-workbench.hc-black .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus:before,.monaco-workbench.hc-light .activitybar.left>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus:before,.monaco-workbench.hc-light .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus:before{outline:none}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .active-item-indicator,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .profile-badge{bottom:0;height:100%;left:0;margin:auto;overflow:hidden;position:absolute;top:0;width:100%}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .active-item-indicator,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge{z-index:2}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .profile-badge{z-index:1}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .active-item-indicator{pointer-events:none}.monaco-workbench.border .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .active-item-indicator{left:-2px}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge .badge-content{border-radius:20px;font-size:9px;font-weight:600;height:16px;line-height:16px;min-width:8px;padding:0 4px;position:absolute;right:8px;text-align:center;top:24px}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .profile-badge .profile-text-overlay{background-color:var(--vscode-profileBadge-background);border:2px solid var(--vscode-activityBar-background);border-radius:7px;color:var(--vscode-profileBadge-foreground);font-size:9px;font-weight:600;line-height:10px;padding:2px 3px;position:absolute;right:6px;top:24px}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:active .profile-text-overlay,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .profile-text-overlay,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:hover .profile-text-overlay{color:var(--vscode-activityBar-foreground)}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge .codicon.badge-content{font-size:12px;font-weight:unset;justify-content:center;padding:0}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge .codicon.badge-content:before{text-align:center;vertical-align:baseline}.monaco-workbench .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .badge,.monaco-workbench .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .profile-badge{left:auto;right:0}';we(aT,{});const cT=X("auxiliarybar-right-layout-icon",T.layoutSidebarRight,d(9530,"Icon to toggle the auxiliary bar off in its right position.")),dT=X("auxiliarybar-right-off-layout-icon",T.layoutSidebarRightOff,d(9531,"Icon to toggle the auxiliary bar on in its right position.")),lT=X("auxiliarybar-left-layout-icon",T.layoutSidebarLeft,d(9532,"Icon to toggle the auxiliary bar in its left position.")),hT=X("auxiliarybar-left-off-layout-icon",T.layoutSidebarLeftOff,d(9533,"Icon to toggle the auxiliary bar on in its left position.")),Ys=class Ys extends A{constructor(){super({id:Ys.ID,title:Ys.LABEL,toggled:{condition:$o,title:d(9535,"Secondary Side Bar"),mnemonicTitle:d(9536,"Secondary Si&&de Bar")},category:_.View,f1:!0,keybinding:{weight:200,primary:2592},menu:[{id:b.LayoutControlMenuSubmenu,group:"0_workbench_layout",order:1},{id:b.MenubarAppearanceMenu,group:"2_workbench_layout",order:2}]})}async run(e){const t=e.get(Y);t.setPartHidden(t.isVisible("workbench.parts.auxiliarybar"),"workbench.parts.auxiliarybar")}};Ys.ID="workbench.action.toggleAuxiliaryBar",Ys.LABEL=w(9534,"Toggle Secondary Side Bar Visibility");let ji=Ys;C(ji);var po;C((po=class extends A{constructor(){super({id:po.ID,title:po.LABEL,category:_.View,f1:!0})}async run(e){const t=e.get(Gt),i=e.get(Y);i.isVisible("workbench.parts.auxiliarybar")||i.setPartHidden(!1,"workbench.parts.auxiliarybar");const o=t.getActivePaneComposite(2);o==null||o.focus()}},po.ID="workbench.action.focusAuxiliaryBar",po.LABEL=w(9537,"Focus into Secondary Side Bar"),po));k.appendMenuItems([{id:b.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:ji.ID,title:d(9538,"Toggle Secondary Side Bar"),toggled:{condition:$o,icon:lT},icon:hT},when:y.and(y.or(y.equals("config.workbench.layoutControl.type","toggles"),y.equals("config.workbench.layoutControl.type","both")),y.equals("config.workbench.sideBar.location","right")),order:0}},{id:b.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:ji.ID,title:d(9538,"Toggle Secondary Side Bar"),toggled:{condition:$o,icon:cT},icon:dT},when:y.and(y.or(y.equals("config.workbench.layoutControl.type","toggles"),y.equals("config.workbench.layoutControl.type","both")),y.equals("config.workbench.sideBar.location","left")),order:2}},{id:b.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:ji.ID,title:w(9539,"Hide Secondary Side Bar")},when:y.and($o,y.equals("viewLocation",Ut(2))),order:2}}]);var uT=".monaco-workbench.nopanel .part.panel{display:none!important;visibility:hidden!important}.monaco-workbench .part.panel.bottom .composite.title{border-top-style:solid;border-top-width:1px}.monaco-workbench.nomaineditorarea .part.panel.bottom .composite.title{border-top-width:0}.monaco-workbench .part.panel.top{border-bottom-style:solid;border-bottom-width:1px}.monaco-workbench.nomaineditorarea .part.panel.top{border-bottom-width:0}.monaco-workbench .part.panel.right{border-left-style:solid;border-left-width:1px}.monaco-workbench.nomaineditorarea .part.panel.right{border-left-width:0}.monaco-workbench .part.panel.left{border-right-style:solid;border-right-width:1px}.monaco-workbench.nomaineditorarea .part.panel.left{border-right-width:0}.monaco-workbench .part.panel>.content .monaco-editor,.monaco-workbench .part.panel>.content .monaco-editor .margin,.monaco-workbench .part.panel>.content .monaco-editor .monaco-editor-background{background-color:var(--vscode-panel-background)}.monaco-workbench .part.panel>.content .suggest-input-container .monaco-editor,.monaco-workbench .part.panel>.content .suggest-input-container .monaco-editor .margin,.monaco-workbench .part.panel>.content .suggest-input-container .monaco-editor .monaco-editor-background{background-color:inherit}.monaco-workbench .part.panel>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked.clicked:focus .active-item-indicator:before,.monaco-workbench .part.panel>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator:before{border-top-color:var(--vscode-panelTitle-activeBorder)!important}.monaco-workbench .part.panel>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .action-label,.monaco-workbench .part.panel>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label{color:var(--vscode-panelTitle-activeForeground)!important}.monaco-workbench .part.panel .monaco-inputbox{border-color:var(--vscode-panelInput-border,transparent)!important}.monaco-workbench .part.panel>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus{outline:none}.monaco-workbench .part.basepanel.right .global-actions .codicon-panel-maximize:before,.monaco-workbench .part.basepanel.right .global-actions .codicon-panel-restore:before,.monaco-workbench .part.basepanel.right .title-actions .codicon-split-horizontal:before{display:inline-block;transform:rotate(-90deg)}.monaco-workbench .part.basepanel.left .global-actions .codicon-panel-maximize:before,.monaco-workbench .part.basepanel.left .global-actions .codicon-panel-restore:before,.monaco-workbench .part.basepanel.left .title-actions .codicon-split-horizontal:before{display:inline-block;transform:rotate(90deg)}.monaco-workbench .part.basepanel.top .global-actions .codicon-panel-maximize:before,.monaco-workbench .part.basepanel.top .global-actions .codicon-panel-restore:before,.monaco-workbench .part.basepanel.top .title-actions .codicon-split-horizontal:before{display:inline-block;transform:rotate(180deg)}";we(uT,{});const pT=X("panel-maximize",T.chevronUp,d(9491,"Icon to maximize a panel.")),gT=X("panel-restore",T.chevronDown,d(9492,"Icon to restore a panel.")),dS=X("panel-close",T.close,d(9493,"Icon to close a panel.")),mT=X("panel-layout-icon",T.layoutPanel,d(9494,"Icon to toggle the panel off when it is on.")),fT=X("panel-layout-icon-off",T.layoutPanelOff,d(9495,"Icon to toggle the panel on when it is off.")),Zs=class Zs extends A{constructor(){super({id:Zs.ID,title:Zs.LABEL,toggled:{condition:Ua,title:d(9497,"Panel"),mnemonicTitle:d(9498,"&&Panel")},f1:!0,category:_.View,keybinding:{primary:2088,weight:200},menu:[{id:b.MenubarAppearanceMenu,group:"2_workbench_layout",order:5},{id:b.LayoutControlMenuSubmenu,group:"0_workbench_layout",order:4}]})}async run(e){const t=e.get(Y);t.setPartHidden(t.isVisible("workbench.parts.panel"),"workbench.parts.panel")}};Zs.ID="workbench.action.togglePanel",Zs.LABEL=w(9496,"Toggle Panel Visibility");let fn=Zs;C(fn);var Kn;C((Kn=class extends A{constructor(){super({id:"workbench.action.focusPanel",title:w(9499,"Focus into Panel"),category:_.View,f1:!0})}async run(e){const t=e.get(Y),i=e.get(Gt);t.isVisible("workbench.parts.panel")||t.setPartHidden(!1,"workbench.parts.panel");const o=i.getActivePaneComposite(1);o==null||o.focus()}},Kn.ID="workbench.action.focusPanel",Kn.LABEL=d(9499,"Focus into Panel"),Kn));const td={LEFT:"workbench.action.positionPanelLeft",RIGHT:"workbench.action.positionPanelRight",BOTTOM:"workbench.action.positionPanelBottom",TOP:"workbench.action.positionPanelTop"},id={LEFT:"workbench.action.alignPanelLeft",RIGHT:"workbench.action.alignPanelRight",CENTER:"workbench.action.alignPanelCenter",JUSTIFY:"workbench.action.alignPanelJustify"};function lS(c,e,t,i,o){return{id:c,title:e,shortLabel:t,value:i,when:o}}function od(c,e,t,i){return lS(c,e,t,i,Us.notEqualsTo(_v(i)))}function nd(c,e,t,i){return lS(c,e,t,i,Go.notEqualsTo(i))}const bT=[od(td.TOP,w(9500,"Move Panel To Top"),d(9501,"Top"),3),od(td.LEFT,w(9502,"Move Panel Left"),d(9503,"Left"),0),od(td.RIGHT,w(9504,"Move Panel Right"),d(9505,"Right"),1),od(td.BOTTOM,w(9506,"Move Panel To Bottom"),d(9507,"Bottom"),2)],wT=[nd(id.LEFT,w(9508,"Set Panel Alignment to Left"),d(9509,"Left"),"left"),nd(id.RIGHT,w(9510,"Set Panel Alignment to Right"),d(9511,"Right"),"right"),nd(id.CENTER,w(9512,"Set Panel Alignment to Center"),d(9513,"Center"),"center"),nd(id.JUSTIFY,w(9514,"Set Panel Alignment to Justify"),d(9515,"Justify"),"justify")];k.appendMenuItem(b.MenubarAppearanceMenu,{submenu:b.PanelPositionMenu,title:d(9516,"Panel Position"),group:"3_workbench_layout_move",order:4});bT.forEach((c,e)=>{const{id:t,title:i,shortLabel:o,value:n,when:s}=c;C(class extends A{constructor(){super({id:t,title:i,category:_.View,f1:!0})}run(r){r.get(Y).setPanelPosition(n===void 0?2:n)}}),k.appendMenuItem(b.PanelPositionMenu,{command:{id:t,title:o,toggled:s.negate()},order:5+e})});k.appendMenuItem(b.MenubarAppearanceMenu,{submenu:b.PanelAlignmentMenu,title:d(9517,"Align Panel"),group:"3_workbench_layout_move",order:5});wT.forEach(c=>{const{id:e,title:t,shortLabel:i,value:o,when:n}=c;C(class extends A{constructor(){super({id:e,title:t,category:_.View,toggled:n.negate(),f1:!0})}run(s){s.get(Y).setPanelAlignment(o===void 0?"center":o)}}),k.appendMenuItem(b.PanelAlignmentMenu,{command:{id:e,title:i,toggled:n.negate()},order:5})});class hS extends A{constructor(e,t){super({id:e,title:t,category:_.View,f1:!0})}async run(e,t){const i=e.get(Gt),o=i.getVisiblePaneCompositeIds(1),n=i.getActivePaneComposite(1);if(!n)return;let s;for(let r=0;r<o.length;r++)if(o[r]===n.getId()){s=o[(r+o.length+t)%o.length];break}typeof s=="string"&&await i.openPaneComposite(s,1,!0)}}C(class extends hS{constructor(){super("workbench.action.previousPanelView",w(9518,"Previous Panel View"))}run(c){return super.run(c,-1)}});C(class extends hS{constructor(){super("workbench.action.nextPanelView",w(9519,"Next Panel View"))}run(c){return super.run(c,1)}});C(class extends A{constructor(){super({id:"workbench.action.toggleMaximizedPanel",title:w(9520,"Toggle Maximized Panel"),tooltip:d(9521,"Maximize Panel Size"),category:_.View,f1:!0,icon:pT,precondition:y.or(Go.isEqualTo("center"),y.and(Us.notEqualsTo("bottom"),Us.notEqualsTo("top"))),toggled:{condition:HE,icon:gT,tooltip:d(9522,"Restore Panel Size")},menu:[{id:b.PanelTitle,group:"navigation",order:1,when:y.or(Go.isEqualTo("center"),y.and(Us.notEqualsTo("bottom"),Us.notEqualsTo("top")))}]})}run(c){const e=c.get(Y),t=c.get(He);if(e.getPanelAlignment()!=="center"&&zE(e.getPanelPosition())){t.warn(d(9523,"Maximizing the panel is only supported when it is center aligned."));return}e.isVisible("workbench.parts.panel")?e.toggleMaximizedPanel():(e.setPartHidden(!1,"workbench.parts.panel"),e.isPanelMaximized()||e.toggleMaximizedPanel())}});C(class extends A{constructor(){super({id:"workbench.action.closePanel",title:w(9524,"Hide Panel"),category:_.View,icon:dS,menu:[{id:b.CommandPalette,when:Ua},{id:b.PanelTitle,group:"navigation",order:2}]})}run(c){c.get(Y).setPartHidden(!0,"workbench.parts.panel")}});C(class extends A{constructor(){super({id:"workbench.action.closeAuxiliaryBar",title:w(9525,"Hide Secondary Side Bar"),category:_.View,icon:dS,menu:[{id:b.CommandPalette,when:$o},{id:b.AuxiliaryBarTitle,group:"navigation",order:2,when:y.notEquals("config.workbench.activityBar.location","top")}]})}run(c){c.get(Y).setPartHidden(!0,"workbench.parts.auxiliarybar")}});k.appendMenuItems([{id:b.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:fn.ID,title:d(9526,"Toggle Panel"),icon:fT,toggled:{condition:Ua,icon:mT}},when:y.or(y.equals("config.workbench.layoutControl.type","toggles"),y.equals("config.workbench.layoutControl.type","both")),order:1}},{id:b.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:fn.ID,title:w(9527,"Hide Panel")},when:y.and(Ua,y.equals("viewLocation",Ut(1))),order:2}}]);class Su extends A{constructor(e,t,i){super(i),this.source=e,this.destination=t}run(e,...t){const i=e.get(Te),o=e.get(Y),n=e.get(it),s=i.getViewContainersByLocation(this.source),r=i.getViewContainersByLocation(this.destination);if(s.length){const a=n.getVisibleViewContainer(this.source);s.forEach(l=>i.moveViewContainerToLocation(l,this.destination,void 0,this.desc.id)),o.setPartHidden(!1,this.destination===1?"workbench.parts.panel":"workbench.parts.auxiliarybar"),a&&r.length===0&&n.openViewContainer(a.id,!0)}}}const dh=class dh extends Su{constructor(){super(1,2,{id:dh.ID,title:w(9528,"Move Panel Views To Secondary Side Bar"),category:_.View,f1:!1})}};dh.ID="workbench.action.movePanelToSidePanel";let Hp=dh;const lh=class lh extends Su{constructor(){super(1,2,{id:lh.ID,title:w(9528,"Move Panel Views To Secondary Side Bar"),category:_.View,f1:!0})}};lh.ID="workbench.action.movePanelToSecondarySideBar";let zp=lh;C(Hp);C(zp);const hh=class hh extends Su{constructor(){super(2,1,{id:hh.ID,title:w(9529,"Move Secondary Side Bar Views To Panel"),category:_.View,f1:!1})}};hh.ID="workbench.action.moveSidePanelToPanel";let Up=hh;const uh=class uh extends Su{constructor(){super(2,1,{id:uh.ID,title:w(9529,"Move Secondary Side Bar Views To Panel"),category:_.View,f1:!0})}};uh.ID="workbench.action.moveSecondarySideBarToPanel";let Kp=uh;C(Up);C(Kp);const vT=X("menuBar",T.layoutMenubar,d(6767,"Represents the menu bar")),yT=X("activity-bar-left",T.layoutActivitybarLeft,d(6768,"Represents the activity bar in the left position")),CT=X("activity-bar-right",T.layoutActivitybarRight,d(6769,"Represents the activity bar in the right position")),Nd=X("panel-left",T.layoutSidebarLeft,d(6770,"Represents a side bar in the left position")),ST=X("panel-left-off",T.layoutSidebarLeftOff,d(6771,"Represents a side bar in the left position toggled off")),Fd=X("panel-right",T.layoutSidebarRight,d(6772,"Represents side bar in the right position")),ET=X("panel-right-off",T.layoutSidebarRightOff,d(6773,"Represents side bar in the right position toggled off")),kT=X("panel-bottom",T.layoutPanel,d(6774,"Represents the bottom panel")),_T=X("statusBar",T.layoutStatusbar,d(6775,"Represents the status bar")),xT=X("panel-align-left",T.layoutPanelLeft,d(6776,"Represents the bottom panel alignment set to the left")),IT=X("panel-align-right",T.layoutPanelRight,d(6777,"Represents the bottom panel alignment set to the right")),DT=X("panel-align-center",T.layoutPanelCenter,d(6778,"Represents the bottom panel alignment set to the center")),AT=X("panel-align-justify",T.layoutPanelJustify,d(6779,"Represents the bottom panel alignment set to justified")),TT=X("fullscreen",T.screenFull,d(6780,"Represents full screen")),VT=X("centerLayoutIcon",T.layoutCentered,d(6781,"Represents centered layout mode")),MT=X("zenMode",T.target,d(6782,"Represents zen mode"));C(class extends A{constructor(){super({id:"workbench.action.closeSidebar",title:w(6783,"Close Primary Side Bar"),category:_.View,f1:!0})}run(c){c.get(Y).setPartHidden(!0,"workbench.parts.sidebar")}});const uS="workbench.action.toggleActivityBarVisibility";C(class extends A{constructor(){super({id:"workbench.action.toggleCenteredLayout",title:{...w(6784,"Toggle Centered Layout"),mnemonicTitle:d(6785,"&&Centered Layout")},precondition:Vi.toNegated(),category:_.View,f1:!0,toggled:xv,menu:[{id:b.MenubarAppearanceMenu,group:"1_toggle_view",order:3}]})}run(c){const e=c.get(Y);e.centerMainEditorLayout(!e.isMainEditorLayoutCentered())}});const pS="workbench.sideBar.location";class gS extends A{constructor(e,t,i){super({id:e,title:t,f1:!1}),this.position=i}async run(e){const t=e.get(Y),i=e.get(F);if(t.getSideBarPosition()!==this.position)return i.updateValue(pS,_v(this.position))}}const ph=class ph extends gS{constructor(){super(ph.ID,w(6786,"Move Primary Side Bar Right"),1)}};ph.ID="workbench.action.moveSideBarRight";let Gd=ph;const gh=class gh extends gS{constructor(){super(gh.ID,w(6787,"Move Primary Side Bar Left"),0)}};gh.ID="workbench.action.moveSideBarLeft";let Wd=gh;C(Gd);C(Wd);const Oa=class Oa extends A{static getLabel(e){return e.getSideBarPosition()===0?d(6786,"Move Primary Side Bar Right"):d(6787,"Move Primary Side Bar Left")}constructor(){super({id:Oa.ID,title:w(6788,"Toggle Primary Side Bar Position"),category:_.View,f1:!0})}run(e){const t=e.get(Y),i=e.get(F),n=t.getSideBarPosition()===0?"right":"left";return i.updateValue(pS,n)}};Oa.ID="workbench.action.toggleSidebarPosition",Oa.LABEL=d(6788,"Toggle Primary Side Bar Position");let kt=Oa;C(kt);const mS=X("configure-layout-icon",T.layout,d(6789,"Icon represents workbench layout configuration."));k.appendMenuItem(b.LayoutControlMenu,{submenu:b.LayoutControlMenuSubmenu,title:d(6790,"Configure Layout"),icon:mS,group:"1_workbench_layout",when:y.equals("config.workbench.layoutControl.type","menu")});k.appendMenuItems([{id:b.ViewContainerTitleContext,item:{group:"3_workbench_layout_move",command:{id:kt.ID,title:d(6791,"Move Primary Side Bar Right")},when:y.and(y.notEquals("config.workbench.sideBar.location","right"),y.equals("viewContainerLocation",Ut(0))),order:1}},{id:b.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:kt.ID,title:d(6792,"Move Primary Side Bar Right")},when:y.and(y.notEquals("config.workbench.sideBar.location","right"),y.equals("viewLocation",Ut(0))),order:1}},{id:b.ViewContainerTitleContext,item:{group:"3_workbench_layout_move",command:{id:kt.ID,title:d(6793,"Move Primary Side Bar Left")},when:y.and(y.equals("config.workbench.sideBar.location","right"),y.equals("viewContainerLocation",Ut(0))),order:1}},{id:b.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:kt.ID,title:d(6793,"Move Primary Side Bar Left")},when:y.and(y.equals("config.workbench.sideBar.location","right"),y.equals("viewLocation",Ut(0))),order:1}},{id:b.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:kt.ID,title:d(6794,"Move Secondary Side Bar Left")},when:y.and(y.notEquals("config.workbench.sideBar.location","right"),y.equals("viewLocation",Ut(2))),order:1}},{id:b.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:kt.ID,title:d(6795,"Move Secondary Side Bar Right")},when:y.and(y.equals("config.workbench.sideBar.location","right"),y.equals("viewLocation",Ut(2))),order:1}}]);k.appendMenuItem(b.MenubarAppearanceMenu,{group:"3_workbench_layout_move",command:{id:kt.ID,title:d(6796,"&&Move Primary Side Bar Right")},when:y.notEquals("config.workbench.sideBar.location","right"),order:2});k.appendMenuItem(b.MenubarAppearanceMenu,{group:"3_workbench_layout_move",command:{id:kt.ID,title:d(6797,"&&Move Primary Side Bar Left")},when:y.equals("config.workbench.sideBar.location","right"),order:2});C(class extends A{constructor(){super({id:"workbench.action.toggleEditorVisibility",title:{...w(6798,"Toggle Editor Area Visibility"),mnemonicTitle:d(6799,"Show &&Editor Area")},category:_.View,f1:!0,toggled:UE,precondition:y.and(Vi.toNegated(),y.or(Go.isEqualTo("center"),Us.notEqualsTo("bottom")))})}run(c){c.get(Y).toggleMaximizedPanel()}});k.appendMenuItem(b.MenubarViewMenu,{group:"2_appearance",title:d(6800,"&&Appearance"),submenu:b.MenubarAppearanceMenu,order:1});const mh=class mh extends A{constructor(){super({id:mh.ID,title:w(6801,"Toggle Primary Side Bar Visibility"),toggled:{condition:Wo,title:d(6802,"Primary Side Bar"),mnemonicTitle:d(6803,"&&Primary Side Bar")},category:_.View,f1:!0,keybinding:{weight:200,primary:2080},menu:[{id:b.LayoutControlMenuSubmenu,group:"0_workbench_layout",order:0},{id:b.MenubarAppearanceMenu,group:"2_workbench_layout",order:1}]})}run(e){const t=e.get(Y);t.setPartHidden(t.isVisible("workbench.parts.sidebar"),"workbench.parts.sidebar")}};mh.ID="workbench.action.toggleSidebarVisibility";let Ko=mh;C(Ko);k.appendMenuItems([{id:b.ViewContainerTitleContext,item:{group:"3_workbench_layout_move",command:{id:Ko.ID,title:d(6804,"Hide Primary Side Bar")},when:y.and(Wo,y.equals("viewContainerLocation",Ut(0))),order:2}},{id:b.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:Ko.ID,title:d(6804,"Hide Primary Side Bar")},when:y.and(Wo,y.equals("viewLocation",Ut(0))),order:2}},{id:b.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:Ko.ID,title:d(6805,"Toggle Primary Side Bar"),icon:ST,toggled:{condition:Wo,icon:Nd}},when:y.and(y.or(y.equals("config.workbench.layoutControl.type","toggles"),y.equals("config.workbench.layoutControl.type","both")),y.equals("config.workbench.sideBar.location","left")),order:0}},{id:b.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:Ko.ID,title:d(6805,"Toggle Primary Side Bar"),icon:ET,toggled:{condition:Wo,icon:Fd}},when:y.and(y.or(y.equals("config.workbench.layoutControl.type","toggles"),y.equals("config.workbench.layoutControl.type","both")),y.equals("config.workbench.sideBar.location","right")),order:2}}]);const Xs=class Xs extends A{constructor(){super({id:Xs.ID,title:{...w(6806,"Toggle Status Bar Visibility"),mnemonicTitle:d(6807,"S&&tatus Bar")},category:_.View,f1:!0,toggled:y.equals("config.workbench.statusBar.visible",!0),menu:[{id:b.MenubarAppearanceMenu,group:"2_workbench_layout",order:3}]})}run(e){const t=e.get(Y),i=e.get(F),n=!t.isVisible("workbench.parts.statusbar",ge);return i.updateValue(Xs.statusbarVisibleKey,n)}};Xs.ID="workbench.action.toggleStatusbarVisibility",Xs.statusbarVisibleKey="workbench.statusBar.visible";let Hd=Xs;C(Hd);class na extends A{constructor(e,t,i,o,n,s){super({id:o,title:i,category:_.View,precondition:n,metadata:s?{description:s}:void 0,f1:!0}),this.settingName=e,this.value=t}run(e){return e.get(F).updateValue(this.settingName,this.value)}}const fh=class fh extends na{constructor(){const e=y.and(y.equals("config.workbench.editor.showTabs","none").negate(),Nt.negate()),t=w(6808,"Hide Editor Tabs");super("workbench.editor.showTabs","none",t,fh.ID,e,w(6809,"Hide Tab Bar"))}};fh.ID="workbench.action.hideEditorTabs";let zd=fh;const bh=class bh extends na{constructor(){const e=y.and(y.equals("config.zenMode.showTabs","none").negate(),Nt),t=w(6810,"Hide Editor Tabs in Zen Mode");super("zenMode.showTabs","none",t,bh.ID,e,w(6811,"Hide Tab Bar in Zen Mode"))}};bh.ID="workbench.action.zenHideEditorTabs";let Ud=bh;const wh=class wh extends na{constructor(){const e=y.and(y.equals("config.workbench.editor.showTabs","multiple").negate(),Nt.negate()),t=w(6812,"Show Multiple Editor Tabs");super("workbench.editor.showTabs","multiple",t,wh.ID,e,w(6813,"Show Tab Bar with multiple tabs"))}};wh.ID="workbench.action.showMultipleEditorTabs";let Kd=wh;const vh=class vh extends na{constructor(){const e=y.and(y.equals("config.zenMode.showTabs","multiple").negate(),Nt),t=w(6814,"Show Multiple Editor Tabs in Zen Mode");super("zenMode.showTabs","multiple",t,vh.ID,e,w(6815,"Show Tab Bar in Zen Mode"))}};vh.ID="workbench.action.zenShowMultipleEditorTabs";let qd=vh;const yh=class yh extends na{constructor(){const e=y.and(y.equals("config.workbench.editor.showTabs","single").negate(),Nt.negate()),t=w(6816,"Show Single Editor Tab");super("workbench.editor.showTabs","single",t,yh.ID,e,w(6817,"Show Tab Bar with one Tab"))}};yh.ID="workbench.action.showEditorTab";let $d=yh;const Ch=class Ch extends na{constructor(){const e=y.and(y.equals("config.zenMode.showTabs","single").negate(),Nt),t=w(6818,"Show Single Editor Tab in Zen Mode");super("zenMode.showTabs","single",t,Ch.ID,e,w(6819,"Show Tab Bar in Zen Mode with one Tab"))}};Ch.ID="workbench.action.zenShowEditorTab";let jd=Ch;C(zd);C(Ud);C(Kd);C(qd);C($d);C(jd);k.appendMenuItem(b.MenubarAppearanceMenu,{submenu:b.EditorTabsBarShowTabsSubmenu,title:d(6820,"Tab Bar"),group:"3_workbench_layout_move",order:10,when:Nt.negate()});k.appendMenuItem(b.MenubarAppearanceMenu,{submenu:b.EditorTabsBarShowTabsZenModeSubmenu,title:d(6820,"Tab Bar"),group:"3_workbench_layout_move",order:10,when:Nt});const Sh=class Sh extends A{constructor(){super({id:Sh.ID,title:w(6821,"Move Editor Actions to Title Bar"),category:_.View,precondition:y.equals("config.workbench.editor.editorActionsLocation","titleBar").negate(),metadata:{description:w(6822,"Move Editor Actions from the tab bar to the title bar")},f1:!0})}run(e){return e.get(F).updateValue("workbench.editor.editorActionsLocation","titleBar")}};Sh.ID="workbench.action.editorActionsTitleBar";let Yd=Sh;C(Yd);const Eh=class Eh extends A{constructor(){super({id:Eh.ID,title:w(6823,"Move Editor Actions to Tab Bar"),category:_.View,precondition:y.and(y.equals("config.workbench.editor.editorActionsLocation","default").negate(),y.equals("config.workbench.editor.showTabs","none").negate()),metadata:{description:w(6824,"Move Editor Actions from the title bar to the tab bar")},f1:!0})}run(e){return e.get(F).updateValue("workbench.editor.editorActionsLocation","default")}};Eh.ID="workbench.action.editorActionsDefault";let Zd=Eh;C(Zd);const kh=class kh extends A{constructor(){super({id:kh.ID,title:w(6825,"Hide Editor Actions"),category:_.View,precondition:y.equals("config.workbench.editor.editorActionsLocation","hidden").negate(),metadata:{description:w(6826,"Hide Editor Actions in the tab and title bar")},f1:!0})}run(e){return e.get(F).updateValue("workbench.editor.editorActionsLocation","hidden")}};kh.ID="workbench.action.hideEditorActions";let Xd=kh;C(Xd);const _h=class _h extends A{constructor(){super({id:_h.ID,title:w(6827,"Show Editor Actions"),category:_.View,precondition:y.equals("config.workbench.editor.editorActionsLocation","hidden"),metadata:{description:w(6828,"Make Editor Actions visible.")},f1:!0})}run(e){return e.get(F).updateValue("workbench.editor.editorActionsLocation","default")}};_h.ID="workbench.action.showEditorActions";let qp=_h;C(qp);k.appendMenuItem(b.MenubarAppearanceMenu,{submenu:b.EditorActionsPositionSubmenu,title:d(6829,"Editor Actions Position"),group:"3_workbench_layout_move",order:11});const xh=class xh extends A{constructor(){super({id:xh.ID,title:w(6830,"Configure Tabs"),category:_.View})}run(e){e.get(bn).openSettings({jsonEditor:!1,query:"workbench.editor tab"})}};xh.ID="workbench.action.configureEditorTabs";let Jd=xh;C(Jd);const Ih=class Ih extends A{constructor(){super({id:Ih.ID,title:w(6831,"Configure Editors"),category:_.View})}run(e){e.get(bn).openSettings({jsonEditor:!1,query:"workbench.editor"})}};Ih.ID="workbench.action.configureEditor";let Qd=Ih;C(Qd);C(class extends A{constructor(){super({id:"workbench.action.toggleSeparatePinnedEditorTabs",title:w(6832,"Separate Pinned Editor Tabs"),category:_.View,precondition:y.equals("config.workbench.editor.showTabs","multiple"),metadata:{description:w(6833,"Toggle whether pinned editor tabs are shown on a separate row above unpinned tabs.")},f1:!0})}run(c){const e=c.get(F),i=!e.getValue("workbench.editor.pinnedTabsOnSeparateRow");return e.updateValue("workbench.editor.pinnedTabsOnSeparateRow",i)}});C(class extends A{constructor(){super({id:"workbench.action.toggleZenMode",title:{...w(6834,"Toggle Zen Mode"),mnemonicTitle:d(6835,"Zen Mode")},precondition:Vi.toNegated(),category:_.View,f1:!0,keybinding:{weight:200,primary:Ee(2089,56)},toggled:Nt,menu:[{id:b.MenubarAppearanceMenu,group:"1_toggle_view",order:2}]})}run(c){return c.get(Y).toggleZenMode()}});ee.registerCommandAndKeybindingRule({id:"workbench.action.exitZenMode",weight:-900,handler(c){const e=c.get(Y),t=c.get(K);Nt.getValue(t)&&e.toggleZenMode()},when:Nt,primary:Ee(9,9)});if(Xt||fc||vt){C(class extends A{constructor(){super({id:"workbench.action.toggleMenuBar",title:{...w(6836,"Toggle Menu Bar"),mnemonicTitle:d(6837,"Menu &&Bar")},category:_.View,f1:!0,toggled:y.and(Ka.toNegated(),y.notEquals("config.window.menuBarVisibility","hidden"),y.notEquals("config.window.menuBarVisibility","toggle"),y.notEquals("config.window.menuBarVisibility","compact")),menu:[{id:b.MenubarAppearanceMenu,group:"2_workbench_layout",order:0}]})}run(e){return e.get(Y).toggleMenuBar()}});for(const c of[b.TitleBarContext,b.TitleBarTitleContext])k.appendMenuItem(c,{command:{id:"workbench.action.toggleMenuBar",title:d(6838,"Menu Bar"),toggled:y.and(Ka.toNegated(),y.notEquals("config.window.menuBarVisibility","hidden"),y.notEquals("config.window.menuBarVisibility","toggle"),y.notEquals("config.window.menuBarVisibility","compact"))},when:y.and(Vi.toNegated(),y.notEquals(KE.key,"native"),Sf.negate()),group:"2_config",order:0})}C(class extends A{constructor(){super({id:"workbench.action.resetViewLocations",title:w(6839,"Reset View Locations"),category:_.View,f1:!0})}run(c){return c.get(Te).reset()}});C(class extends A{constructor(){super({id:"workbench.action.moveView",title:w(6840,"Move View"),category:_.View,f1:!0})}async run(c){var a;const e=c.get(Te),t=c.get(O),i=c.get(Fe),o=c.get(K),n=c.get(Gt),s=fo.getValue(o);let r;s&&((a=e.getViewDescriptorById(s))!=null&&a.canMoveView)&&(r=s);try{if(r=await this.getView(i,e,n,r),!r)return;const l=new fS;t.invokeFunction(h=>l.run(h,r))}catch{}}getViewItems(c,e){const t=[];return e.getVisiblePaneCompositeIds(0).forEach(s=>{const r=c.getViewContainerById(s),a=c.getViewContainerModel(r);let l=!1;a.visibleViewDescriptors.forEach(h=>{h.canMoveView&&(l||(t.push({type:"separator",label:d(6841,"Side Bar / {0}",a.title)}),l=!0),t.push({id:h.id,label:h.name.value}))})}),e.getPinnedPaneCompositeIds(1).forEach(s=>{const r=c.getViewContainerById(s),a=c.getViewContainerModel(r);let l=!1;a.visibleViewDescriptors.forEach(h=>{h.canMoveView&&(l||(t.push({type:"separator",label:d(6842,"Panel / {0}",a.title)}),l=!0),t.push({id:h.id,label:h.name.value}))})}),e.getPinnedPaneCompositeIds(2).forEach(s=>{const r=c.getViewContainerById(s),a=c.getViewContainerModel(r);let l=!1;a.visibleViewDescriptors.forEach(h=>{h.canMoveView&&(l||(t.push({type:"separator",label:d(6843,"Secondary Side Bar / {0}",a.title)}),l=!0),t.push({id:h.id,label:h.name.value}))})}),t}async getView(c,e,t,i){const o=new P,n=o.add(c.createQuickPick({useSeparators:!0}));return n.placeholder=d(6844,"Select a View to Move"),n.items=this.getViewItems(e,t),n.selectedItems=n.items.filter(s=>s.id===i),new Promise((s,r)=>{o.add(n.onDidAccept(()=>{const a=n.selectedItems[0];a.id?s(a.id):r(),n.hide()})),o.add(n.onDidHide(()=>{o.dispose(),r()})),n.show()})}});class fS extends A{constructor(){super({id:"workbench.action.moveFocusedView",title:w(6845,"Move Focused View"),category:_.View,precondition:fo.notEqualsTo(""),f1:!0})}run(e,t){const i=e.get(Te),o=e.get(it),n=e.get(Fe),s=e.get(K),r=e.get(xt),a=e.get(Gt),l=t||fo.getValue(s);if(l===void 0||l.trim()===""){r.error(d(6846,"There is no view currently focused."));return}const h=i.getViewDescriptorById(l);if(!h||!h.canMoveView){r.error(d(6847,"The currently focused view is not movable."));return}const p=new P,g=p.add(n.createQuickPick({useSeparators:!0}));g.placeholder=d(6848,"Select a Destination for the View"),g.title=d(6849,"View: Move {0}",h.name.value);const m=[],f=i.getViewContainerByViewId(l),v=i.getViewLocationById(l),S=i.getViewContainerModel(f).allViewDescriptors.length===1;S&&v===1||m.push({id:"_.panel.newcontainer",label:d(6850,"New Panel Entry")}),S&&v===0||m.push({id:"_.sidebar.newcontainer",label:d(6851,"New Side Bar Entry")}),S&&v===2||m.push({id:"_.auxiliarybar.newcontainer",label:d(6852,"New Secondary Side Bar Entry")}),m.push({type:"separator",label:d(6853,"Side Bar")});const E=a.getVisiblePaneCompositeIds(0);m.push(...E.filter(M=>M===i.getViewContainerByViewId(l).id?!1:!i.getViewContainerById(M).rejectAddedViews).map(M=>({id:M,label:i.getViewContainerModel(i.getViewContainerById(M)).title}))),m.push({type:"separator",label:d(6854,"Panel")});const D=a.getPinnedPaneCompositeIds(1);m.push(...D.filter(M=>M===i.getViewContainerByViewId(l).id?!1:!i.getViewContainerById(M).rejectAddedViews).map(M=>({id:M,label:i.getViewContainerModel(i.getViewContainerById(M)).title}))),m.push({type:"separator",label:d(6855,"Secondary Side Bar")});const V=a.getPinnedPaneCompositeIds(2);m.push(...V.filter(M=>M===i.getViewContainerByViewId(l).id?!1:!i.getViewContainerById(M).rejectAddedViews).map(M=>({id:M,label:i.getViewContainerModel(i.getViewContainerById(M)).title}))),g.items=m,p.add(g.onDidAccept(()=>{const M=g.selectedItems[0];M.id==="_.panel.newcontainer"?(i.moveViewToLocation(h,1,this.desc.id),o.openView(l,!0)):M.id==="_.sidebar.newcontainer"?(i.moveViewToLocation(h,0,this.desc.id),o.openView(l,!0)):M.id==="_.auxiliarybar.newcontainer"?(i.moveViewToLocation(h,2,this.desc.id),o.openView(l,!0)):M.id&&(i.moveViewsToContainer([h],i.getViewContainerById(M.id),void 0,this.desc.id),o.openView(l,!0)),g.hide()})),p.add(g.onDidHide(()=>p.dispose())),g.show()}}C(fS);C(class extends A{constructor(){super({id:"workbench.action.resetFocusedViewLocation",title:w(6856,"Reset Focused View Location"),category:_.View,f1:!0,precondition:fo.notEqualsTo("")})}run(c){const e=c.get(Te),t=c.get(K),i=c.get(xt),o=c.get(it),n=fo.getValue(t);let s=null;if(n!==void 0&&n.trim()!==""&&(s=e.getViewDescriptorById(n)),!s){i.error(d(6857,"There is no view currently focused."));return}const r=e.getDefaultContainerById(s.id);!r||r===e.getViewContainerByViewId(s.id)||(e.moveViewsToContainer([s],r,void 0,this.desc.id),o.openView(s.id,!0))}});const Ib=class Ib extends A{resizePart(e,t,i,o){let n;if(o===void 0){const s=i.hasFocus("workbench.parts.editor"),r=i.hasFocus("workbench.parts.sidebar"),a=i.hasFocus("workbench.parts.panel"),l=i.hasFocus("workbench.parts.auxiliarybar");r?n="workbench.parts.sidebar":a?n="workbench.parts.panel":s?n="workbench.parts.editor":l&&(n="workbench.parts.auxiliarybar")}else n=o;n&&i.resizePart(n,e,t)}};Ib.RESIZE_INCREMENT=60;let _t=Ib;class LT extends _t{constructor(){super({id:"workbench.action.increaseViewSize",title:w(6858,"Increase Current View Size"),f1:!0,precondition:Vi.toNegated()})}run(e){this.resizePart(_t.RESIZE_INCREMENT,_t.RESIZE_INCREMENT,e.get(Y))}}class PT extends _t{constructor(){super({id:"workbench.action.increaseViewWidth",title:w(6859,"Increase Editor Width"),f1:!0,precondition:Vi.toNegated()})}run(e){this.resizePart(_t.RESIZE_INCREMENT,0,e.get(Y),"workbench.parts.editor")}}class RT extends _t{constructor(){super({id:"workbench.action.increaseViewHeight",title:w(6860,"Increase Editor Height"),f1:!0,precondition:Vi.toNegated()})}run(e){this.resizePart(0,_t.RESIZE_INCREMENT,e.get(Y),"workbench.parts.editor")}}class BT extends _t{constructor(){super({id:"workbench.action.decreaseViewSize",title:w(6861,"Decrease Current View Size"),f1:!0,precondition:Vi.toNegated()})}run(e){this.resizePart(-_t.RESIZE_INCREMENT,-_t.RESIZE_INCREMENT,e.get(Y))}}class OT extends _t{constructor(){super({id:"workbench.action.decreaseViewWidth",title:w(6862,"Decrease Editor Width"),f1:!0,precondition:Vi.toNegated()})}run(e){this.resizePart(-_t.RESIZE_INCREMENT,0,e.get(Y),"workbench.parts.editor")}}class NT extends _t{constructor(){super({id:"workbench.action.decreaseViewHeight",title:w(6863,"Decrease Editor Height"),f1:!0,precondition:Vi.toNegated()})}run(e){this.resizePart(0,-_t.RESIZE_INCREMENT,e.get(Y),"workbench.parts.editor")}}C(LT);C(PT);C(RT);C(BT);C(OT);C(NT);function FT(c){return c.iconA!==void 0}const Ns=(c,e,t,i)=>({id:c,active:e,label:t,visualIcon:i,activeIcon:T.eye,inactiveIcon:T.eyeClosed,activeAriaLabel:d(6864,"Select to Hide"),inactiveAriaLabel:d(6865,"Select to Show"),useButtons:!0}),lo=(c,e,t,i)=>({id:c,active:e,label:t,visualIcon:i,activeIcon:T.check,activeAriaLabel:d(6866,"Active"),useButtons:!1}),GT=y.and(Ka.toNegated(),y.notEquals("config.window.menuBarVisibility","hidden"),y.notEquals("config.window.menuBarVisibility","toggle"),y.notEquals("config.window.menuBarVisibility","compact")),Eu=[];(!be||!Es)&&Eu.push(Ns("workbench.action.toggleMenuBar",GT,d(6867,"Menu Bar"),vT));Eu.push(Ns(uS,y.notEquals("config.workbench.activityBar.location","hidden"),d(6868,"Activity Bar"),{whenA:y.equals("config.workbench.sideBar.location","left"),iconA:yT,iconB:CT}),Ns(Ko.ID,Wo,d(6869,"Primary Side Bar"),{whenA:y.equals("config.workbench.sideBar.location","left"),iconA:Nd,iconB:Fd}),Ns(ji.ID,$o,d(6855,"Secondary Side Bar"),{whenA:y.equals("config.workbench.sideBar.location","left"),iconA:Fd,iconB:Nd}),Ns(fn.ID,Ua,d(6854,"Panel"),kT),Ns(Hd.ID,y.equals("config.workbench.statusBar.visible",!0),d(6870,"Status Bar"),_T));const bS=[lo(Wd.ID,y.equals("config.workbench.sideBar.location","left"),d(6871,"Left"),Nd),lo(Gd.ID,y.equals("config.workbench.sideBar.location","right"),d(6872,"Right"),Fd)],wS=[lo("workbench.action.alignPanelLeft",Go.isEqualTo("left"),d(6873,"Left"),xT),lo("workbench.action.alignPanelRight",Go.isEqualTo("right"),d(6874,"Right"),IT),lo("workbench.action.alignPanelCenter",Go.isEqualTo("center"),d(6875,"Center"),DT),lo("workbench.action.alignPanelJustify",Go.isEqualTo("justify"),d(6876,"Justify"),AT)],vS=[lo("workbench.action.toggleFullScreen",Sf,d(6877,"Full Screen"),TT),lo("workbench.action.toggleZenMode",Nt,d(6878,"Zen Mode"),MT),lo("workbench.action.toggleCenteredLayout",xv,d(6879,"Centered Layout"),VT)],yS=new Set;for(const{active:c}of[...Eu,...bS,...wS,...vS])for(const e of c.keys())yS.add(e);C(class extends A{constructor(){super({id:"workbench.action.customizeLayout",title:w(6880,"Customize Layout..."),f1:!0,icon:mS,menu:[{id:b.LayoutControlMenuSubmenu,group:"z_end"},{id:b.LayoutControlMenu,when:y.equals("config.workbench.layoutControl.type","both"),group:"z_end"}]})}getItems(e,t){const i=o=>{const n=o.active.evaluate(e.getContext(null));let s=o.useButtons?o.label:o.label+(n&&o.activeIcon?` $(${o.activeIcon.id})`:!n&&o.inactiveIcon?` $(${o.inactiveIcon.id})`:"");const r=o.label+(n&&o.activeAriaLabel?` (${o.activeAriaLabel})`:!n&&o.inactiveAriaLabel?` (${o.inactiveAriaLabel})`:"");if(o.visualIcon){let l=o.visualIcon;FT(l)&&(l=l.whenA.evaluate(e.getContext(null))?l.iconA:l.iconB),s=`$(${l.id}) ${s}`}const a=n?o.activeIcon:o.inactiveIcon;return{type:"item",id:o.id,label:s,ariaLabel:r,keybinding:t.lookupKeybinding(o.id,e),buttons:o.useButtons?[{alwaysVisible:!1,tooltip:r,iconClass:a?oe.asClassName(a):void 0}]:void 0}};return[{type:"separator",label:d(6881,"Visibility")},...Eu.map(i),{type:"separator",label:d(6882,"Primary Side Bar Position")},...bS.map(i),{type:"separator",label:d(6883,"Panel Alignment")},...wS.map(i),{type:"separator",label:d(6884,"Modes")},...vS.map(i)]}run(e){if(this._currentQuickPick){this._currentQuickPick.hide();return}const t=e.get(F),i=e.get(K),o=e.get(lt),n=e.get(Fe),s=e.get(xe),r=new P,a=r.add(n.createQuickPick({useSeparators:!0}));this._currentQuickPick=a,a.items=this.getItems(i,s),a.ignoreFocusOut=!0,a.hideInput=!0,a.title=d(6885,"Customize Layout");const l={alwaysVisible:!0,iconClass:oe.asClassName(T.close),tooltip:d(6886,"Close")},h={alwaysVisible:!0,iconClass:oe.asClassName(T.discard),tooltip:d(6887,"Restore Defaults")};a.buttons=[h,l];let p;r.add(i.onDidChangeContext(g=>{g.affectsSome(yS)&&(a.items=this.getItems(i,s),p&&(a.activeItems=a.items.filter(m=>m.id===(p==null?void 0:p.id))),setTimeout(()=>n.focus(),0))})),r.add(a.onDidAccept(g=>{a.selectedItems.length&&(p=a.selectedItems[0],o.executeCommand(p.id))})),r.add(a.onDidTriggerItemButton(g=>{g.item&&(p=g.item,o.executeCommand(p.id))})),r.add(a.onDidTriggerButton(g=>{if(g===l)a.hide();else if(g===h){const m=f=>{const v=t.inspect(f);t.updateValue(f,v.defaultValue)};m("workbench.activityBar.location"),m("workbench.sideBar.location"),m("workbench.statusBar.visible"),m("workbench.panel.defaultLocation"),(!be||!Es)&&m("window.menuBarVisibility"),o.executeCommand("workbench.action.alignPanelCenter")}})),r.add(a.onDidHide(()=>{a.dispose()})),r.add(a.onDispose(()=>{this._currentQuickPick=void 0,r.dispose()})),a.show()}});var WT=".monaco-workbench .menubar .toolbar-toggle-more,.monaco-workbench .menubar>.menubar-menu-button{color:var(--vscode-titleBar-activeForeground)}.monaco-workbench .activitybar .menubar.compact .toolbar-toggle-more,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button{color:var(--vscode-activityBar-inactiveForeground)}.monaco-workbench .activitybar .menubar.compact:not(:focus-within)>.menubar-menu-button:hover,.monaco-workbench .activitybar .menubar.compact:not(:focus-within)>.menubar-menu-button:hover .toolbar-toggle-more,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button.open,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button.open .toolbar-toggle-more,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button:focus,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button:focus .toolbar-toggle-more{color:var(--vscode-activityBar-foreground)}.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button:focus{background-color:var(--vscode-menubar-selectionBackground)}.monaco-workbench .menubar.inactive:not(.compact)>.menubar-menu-button,.monaco-workbench .menubar.inactive:not(.compact)>.menubar-menu-button .toolbar-toggle-more{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .menubar:not(.compact)>.menubar-menu-button.open,.monaco-workbench .menubar:not(.compact)>.menubar-menu-button.open .toolbar-toggle-more,.monaco-workbench .menubar:not(.compact)>.menubar-menu-button:focus,.monaco-workbench .menubar:not(.compact)>.menubar-menu-button:focus .toolbar-toggle-more,.monaco-workbench .menubar:not(:focus-within):not(.compact)>.menubar-menu-button:hover,.monaco-workbench .menubar:not(:focus-within):not(.compact)>.menubar-menu-button:hover .toolbar-toggle-more{color:var(--vscode-menubar-selectionForeground)}.monaco-workbench .menubar:not(.compact)>.menubar-menu-button.open .menubar-menu-title,.monaco-workbench .menubar:not(.compact)>.menubar-menu-button:focus .menubar-menu-title,.monaco-workbench .menubar:not(:focus-within):not(.compact)>.menubar-menu-button:hover .menubar-menu-title{background-color:var(--vscode-menubar-selectionBackground)}.monaco-workbench .menubar>.menubar-menu-button:hover .menubar-menu-title{outline:dashed 1px var(--vscode-menubar-selectionBorder)}.monaco-workbench .menubar>.menubar-menu-button.open .menubar-menu-title,.monaco-workbench .menubar>.menubar-menu-button:focus .menubar-menu-title{outline:solid 1px var(--vscode-menubar-selectionBorder)}.monaco-workbench .menubar>.menubar-menu-button.open .menubar-menu-title,.monaco-workbench .menubar>.menubar-menu-button:focus .menubar-menu-title,.monaco-workbench .menubar>.menubar-menu-button:hover .menubar-menu-title{outline-color:var(--vscode-menubar-selectionBorder);outline-offset:-1px}";we(WT,{});var HT=".menubar{box-sizing:border-box;display:flex;flex-shrink:1;height:100%;overflow:hidden}.menubar.overflow-menu-only{width:38px}.fullscreen .menubar:not(.compact){margin:0;padding:4px 5px}.menubar>.menubar-menu-button{-webkit-app-region:no-drag;zoom:1;align-items:center;box-sizing:border-box;cursor:default;display:flex;outline:0!important;white-space:nowrap}.monaco-workbench .menubar:not(.compact)>.menubar-menu-button:focus .menubar-menu-title{outline-color:var(--vscode-focusBorder);outline-offset:-1px;outline-style:solid;outline-width:1px}.menubar.compact{flex-shrink:0;overflow:visible}.menubar.compact>.menubar-menu-button{height:100%;padding:0;width:100%}.menubar-menu-title{border-radius:5px;padding:0 8px}.menubar .menubar-menu-items-holder{left:0;opacity:1;position:fixed;z-index:2000}.menubar.compact .menubar-menu-items-holder{position:fixed}.menubar .menubar-menu-items-holder.monaco-menu-container{border:none;outline:0}.menubar .menubar-menu-items-holder.monaco-menu-container :focus{outline:0}.menubar .toolbar-toggle-more{align-items:center;display:flex;height:22px;justify-content:center;padding:0 8px;vertical-align:sub;width:22px}.menubar.compact .toolbar-toggle-more{align-items:center;cursor:pointer;display:flex;justify-content:center;left:0;position:relative;top:0;width:100%}.menubar.compact .toolbar-toggle-more:before,.menubar:not(.compact) .menubar-menu-button:first-child .toolbar-toggle-more:before{content:var(--vscode-icon-menu-content)!important;font-family:var(--vscode-icon-menu-font-family)!important}.menubar.compact>.menubar-menu-button.open .menubar-menu-title,.menubar.compact>.menubar-menu-button:focus .menubar-menu-title,.menubar.compact>.menubar-menu-button:hover .menubar-menu-title{outline-offset:-8px!important;outline-width:1px!important}";we(HT,{});const Rs=H;var je;(function(c){c[c.HIDDEN=0]="HIDDEN",c[c.VISIBLE=1]="VISIBLE",c[c.FOCUSED=2]="FOCUSED",c[c.OPEN=3]="OPEN"})(je||(je={}));const Ue=class Ue extends R{constructor(e,t,i){super(),this.container=e,this.options=t,this.menuStyle=i,this._mnemonicsInUse=!1,this.openedViaKeyboard=!1,this.awaitingAltRelease=!1,this.ignoreNextMouseUp=!1,this.updatePending=!1,this.numMenusShown=0,this.overflowLayoutScheduled=void 0,this.menuDisposables=this._register(new P),this.container.setAttribute("role","menubar"),this.isCompact&&this.container.classList.add("compact"),this.menus=[],this.mnemonics=new Map,this._focusState=je.VISIBLE,this._onVisibilityChange=this._register(new I),this._onFocusStateChange=this._register(new I),this.createOverflowMenu(),this.menuUpdater=this._register(new Yr(()=>this.update(),200)),this.actionRunner=this.options.actionRunner??this._register(new bc),this._register(this.actionRunner.onWillRun(()=>{this.setUnfocusedState()})),this._register(Iv.getInstance().event(this.onModifierKeyToggled,this)),this._register(L(this.container,B.KEY_DOWN,n=>{const s=new xi(n);let r=!0;const a=n.key?n.key.toLocaleLowerCase():"",l=be&&!this.isCompact;if(s.equals(15)||l&&s.equals(1026))this.focusPrevious();else if(s.equals(17)||l&&s.equals(2))this.focusNext();else if(s.equals(9)&&this.isFocused&&!this.isOpen)this.setUnfocusedState();else if(!this.isOpen&&!s.ctrlKey&&this.options.enableMnemonics&&this.mnemonicsInUse&&this.mnemonics.has(a)){const h=this.mnemonics.get(a);this.onMenuTriggered(h,!1)}else r=!1;!this.isCompact&&(s.equals(1026)||s.equals(2))&&s.preventDefault(),r&&(s.preventDefault(),s.stopPropagation())}));const o=fe(this.container);this._register(L(o,B.MOUSE_DOWN,()=>{this.isFocused&&this.setUnfocusedState()})),this._register(L(this.container,B.FOCUS_IN,n=>{const s=n;s.relatedTarget&&(this.container.contains(s.relatedTarget)||(this.focusToReturn=s.relatedTarget))})),this._register(L(this.container,B.FOCUS_OUT,n=>{const s=n;s.relatedTarget?s.relatedTarget&&!this.container.contains(s.relatedTarget)&&(this.focusToReturn=void 0,this.setUnfocusedState()):this.setUnfocusedState()})),this._register(L(o,B.KEY_DOWN,n=>{if(!this.options.enableMnemonics||!n.altKey||n.ctrlKey||n.defaultPrevented)return;const s=n.key.toLocaleLowerCase();if(!this.mnemonics.has(s))return;this.mnemonicsInUse=!0,this.updateMnemonicVisibility(!0);const r=this.mnemonics.get(s);this.onMenuTriggered(r,!1)})),this.setUnfocusedState()}push(e){JE(e).forEach(i=>{const o=this.menus.length,n=Tb(i.label),s=Vb.exec(i.label);if(s){const r=s[1]?s[1]:s[3];this.registerMnemonic(this.menus.length,r)}if(this.isCompact)this.menus.push(i);else{const r=Rs("div.menubar-menu-button",{role:"menuitem",tabindex:-1,"aria-label":n,"aria-haspopup":!0}),a=Rs("div.menubar-menu-title",{role:"none","aria-hidden":!0});r.appendChild(a),this.container.insertBefore(r,this.overflowMenu.buttonElement),this.updateLabels(a,r,i.label),this._register(L(r,B.KEY_UP,l=>{const h=new xi(l);let p=!0;(h.equals(18)||h.equals(3))&&!this.isOpen?(this.focusedMenu={index:o},this.openedViaKeyboard=!0,this.focusState=je.OPEN):p=!1,p&&(h.preventDefault(),h.stopPropagation())})),this._register(dn.addTarget(r)),this._register(L(r,St.Tap,l=>{this.isOpen&&this.focusedMenu&&this.focusedMenu.holder&&Yi(l.initialTarget,this.focusedMenu.holder)||(this.ignoreNextMouseUp=!1,this.onMenuTriggered(o,!0),l.preventDefault(),l.stopPropagation())})),this._register(L(r,B.MOUSE_DOWN,l=>{if(!new ai(fe(r),l).leftButton){l.preventDefault();return}this.isOpen?this.ignoreNextMouseUp=!1:(this.ignoreNextMouseUp=!0,this.onMenuTriggered(o,!0)),l.preventDefault(),l.stopPropagation()})),this._register(L(r,B.MOUSE_UP,l=>{l.defaultPrevented||(this.ignoreNextMouseUp?this.ignoreNextMouseUp=!1:this.isFocused&&this.onMenuTriggered(o,!0))})),this._register(L(r,B.MOUSE_ENTER,()=>{this.isOpen&&!this.isCurrentMenu(o)?(r.focus(),this.cleanupCustomMenu(),this.showCustomMenu(o,!1)):this.isFocused&&!this.isOpen&&(this.focusedMenu={index:o},r.focus())})),this.menus.push({label:i.label,actions:i.actions,buttonElement:r,titleElement:a})}})}createOverflowMenu(){const e=this.isCompact?d(10746,"Application Menu"):d(10747,"More"),t=Rs("div.menubar-menu-button",{role:"menuitem",tabindex:this.isCompact?0:-1,"aria-label":e,"aria-haspopup":!0}),i=Rs("div.menubar-menu-title.toolbar-toggle-more"+oe.asCSSSelector(T.menuBarMore),{role:"none","aria-hidden":!0});t.appendChild(i),this.container.appendChild(t),t.style.visibility="hidden",this._register(L(t,B.KEY_UP,o=>{var a,l;const n=new xi(o);let s=!0;const r=[3];this.isCompact?(r.push(10),((a=this.options.compactMode)==null?void 0:a.horizontal)===Vn.Right?r.push(17):((l=this.options.compactMode)==null?void 0:l.horizontal)===Vn.Left&&r.push(15)):r.push(18),r.some(h=>n.equals(h))&&!this.isOpen?(this.focusedMenu={index:Ue.OVERFLOW_INDEX},this.openedViaKeyboard=!0,this.focusState=je.OPEN):s=!1,s&&(n.preventDefault(),n.stopPropagation())})),this._register(dn.addTarget(t)),this._register(L(t,St.Tap,o=>{this.isOpen&&this.focusedMenu&&this.focusedMenu.holder&&Yi(o.initialTarget,this.focusedMenu.holder)||(this.ignoreNextMouseUp=!1,this.onMenuTriggered(Ue.OVERFLOW_INDEX,!0),o.preventDefault(),o.stopPropagation())})),this._register(L(t,B.MOUSE_DOWN,o=>{if(!new ai(fe(t),o).leftButton){o.preventDefault();return}this.isOpen?this.ignoreNextMouseUp=!1:(this.ignoreNextMouseUp=!0,this.onMenuTriggered(Ue.OVERFLOW_INDEX,!0)),o.preventDefault(),o.stopPropagation()})),this._register(L(t,B.MOUSE_UP,o=>{o.defaultPrevented||(this.ignoreNextMouseUp?this.ignoreNextMouseUp=!1:this.isFocused&&this.onMenuTriggered(Ue.OVERFLOW_INDEX,!0))})),this._register(L(t,B.MOUSE_ENTER,()=>{this.isOpen&&!this.isCurrentMenu(Ue.OVERFLOW_INDEX)?(this.overflowMenu.buttonElement.focus(),this.cleanupCustomMenu(),this.showCustomMenu(Ue.OVERFLOW_INDEX,!1)):this.isFocused&&!this.isOpen&&(this.focusedMenu={index:Ue.OVERFLOW_INDEX},t.focus())})),this.overflowMenu={buttonElement:t,titleElement:i,label:"More",actions:[]}}updateMenu(e){const t=this.menus.filter(i=>i.label===e.label);t&&t.length&&(t[0].actions=e.actions)}dispose(){super.dispose(),this.menus.forEach(e=>{var t,i;(t=e.titleElement)==null||t.remove(),(i=e.buttonElement)==null||i.remove()}),this.overflowMenu.titleElement.remove(),this.overflowMenu.buttonElement.remove(),Re(this.overflowLayoutScheduled),this.overflowLayoutScheduled=void 0}blur(){this.setUnfocusedState()}getWidth(){if(!this.isCompact&&this.menus){const e=this.menus[0].buttonElement.getBoundingClientRect().left;return(this.hasOverflow?this.overflowMenu.buttonElement.getBoundingClientRect().right:this.menus[this.menus.length-1].buttonElement.getBoundingClientRect().right)-e}return 0}getHeight(){return this.container.clientHeight}toggleFocus(){!this.isFocused&&this.options.visibility!=="hidden"?(this.mnemonicsInUse=!0,this.focusedMenu={index:this.numMenusShown>0?0:Ue.OVERFLOW_INDEX},this.focusState=je.FOCUSED):this.isOpen||this.setUnfocusedState()}updateOverflowAction(){var r,a;if(!this.menus||!this.menus.length)return;const e="overflow-menu-only";this.container.classList.toggle(e,!1);const t=this.container.offsetWidth;let i=0,o=this.isCompact;const n=this.numMenusShown;this.numMenusShown=0;const s=this.menus.filter(l=>l.buttonElement!==void 0&&l.titleElement!==void 0);for(const l of s){if(!o){const h=l.buttonElement.offsetWidth;i+h>t?o=!0:(i+=h,this.numMenusShown++,this.numMenusShown>n&&(l.buttonElement.style.visibility="visible"))}o&&(l.buttonElement.style.visibility="hidden")}if(this.numMenusShown-1<=s.length/4){for(const l of s)l.buttonElement.style.visibility="hidden";o=!0,this.numMenusShown=0,i=0}if(this.isCompact){this.overflowMenu.actions=[];for(let h=this.numMenusShown;h<this.menus.length;h++)this.overflowMenu.actions.push(new So(`menubar.submenu.${this.menus[h].label}`,this.menus[h].label,this.menus[h].actions||[]));const l=(a=(r=this.options).getCompactMenuActions)==null?void 0:a.call(r);l&&l.length&&(this.overflowMenu.actions.push(new We),this.overflowMenu.actions.push(...l)),this.overflowMenu.buttonElement.style.visibility="visible"}else if(o){for(;i+this.overflowMenu.buttonElement.offsetWidth>t&&this.numMenusShown>0;){this.numMenusShown--;const l=s[this.numMenusShown].buttonElement.offsetWidth;s[this.numMenusShown].buttonElement.style.visibility="hidden",i-=l}this.overflowMenu.actions=[];for(let l=this.numMenusShown;l<s.length;l++)this.overflowMenu.actions.push(new So(`menubar.submenu.${s[l].label}`,s[l].label,s[l].actions||[]));this.overflowMenu.buttonElement.nextElementSibling!==s[this.numMenusShown].buttonElement&&(this.overflowMenu.buttonElement.remove(),this.container.insertBefore(this.overflowMenu.buttonElement,s[this.numMenusShown].buttonElement)),this.overflowMenu.buttonElement.style.visibility="visible"}else this.overflowMenu.buttonElement.remove(),this.container.appendChild(this.overflowMenu.buttonElement),this.overflowMenu.buttonElement.style.visibility="hidden";this.container.classList.toggle(e,this.numMenusShown===0)}updateLabels(e,t,i){const o=Tb(i);if(this.options.enableMnemonics){const s=qE(i);Pu.lastIndex=0;let r=Pu.exec(s);for(;r&&r[1];)r=Pu.exec(s);const a=l=>l.replace(/&amp;&amp;/g,"&amp;");r?(e.innerText="",e.append($E(a(s.substr(0,r.index))," "),Rs("mnemonic",{"aria-hidden":"true"},r[3]),jE(a(s.substr(r.index+r[0].length))," "))):e.innerText=a(s).trim()}else e.innerText=o.replace(/&&/g,"&");const n=Vb.exec(i);if(n){const s=n[1]?n[1]:n[3];this.options.enableMnemonics?t.setAttribute("aria-keyshortcuts","Alt+"+s.toLocaleLowerCase()):t.removeAttribute("aria-keyshortcuts")}}update(e){if(e&&(this.options=e),this.isFocused){this.updatePending=!0;return}this.menus.forEach(t=>{!t.buttonElement||!t.titleElement||this.updateLabels(t.titleElement,t.buttonElement,t.label)}),this.overflowLayoutScheduled||(this.overflowLayoutScheduled=lp(fe(this.container),()=>{this.updateOverflowAction(),this.overflowLayoutScheduled=void 0})),this.setUnfocusedState()}registerMnemonic(e,t){this.mnemonics.set(t.toLocaleLowerCase(),e)}hideMenubar(){this.container.style.display!=="none"&&(this.container.style.display="none",this._onVisibilityChange.fire(!1))}showMenubar(){this.container.style.display!=="flex"&&(this.container.style.display="flex",this._onVisibilityChange.fire(!0),this.updateOverflowAction())}get focusState(){return this._focusState}set focusState(e){var n,s;if(this._focusState>=je.FOCUSED&&e<je.FOCUSED&&this.updatePending&&(this.menuUpdater.schedule(),this.updatePending=!1),e===this._focusState)return;const t=this.isVisible,i=this.isOpen,o=this.isFocused;switch(this._focusState=e,e){case je.HIDDEN:t&&this.hideMenubar(),i&&this.cleanupCustomMenu(),o&&(this.focusedMenu=void 0,this.focusToReturn&&(this.focusToReturn.focus(),this.focusToReturn=void 0));break;case je.VISIBLE:t||this.showMenubar(),i&&this.cleanupCustomMenu(),o&&(this.focusedMenu&&(this.focusedMenu.index===Ue.OVERFLOW_INDEX?this.overflowMenu.buttonElement.blur():(n=this.menus[this.focusedMenu.index].buttonElement)==null||n.blur()),this.focusedMenu=void 0,this.focusToReturn&&(this.focusToReturn.focus(),this.focusToReturn=void 0));break;case je.FOCUSED:t||this.showMenubar(),i&&this.cleanupCustomMenu(),this.focusedMenu&&(this.focusedMenu.index===Ue.OVERFLOW_INDEX?this.overflowMenu.buttonElement.focus():(s=this.menus[this.focusedMenu.index].buttonElement)==null||s.focus());break;case je.OPEN:t||this.showMenubar(),this.focusedMenu&&(this.cleanupCustomMenu(),this.showCustomMenu(this.focusedMenu.index,this.openedViaKeyboard));break}this._focusState=e,this._onFocusStateChange.fire(this.focusState>=je.FOCUSED)}get isVisible(){return this.focusState>=je.VISIBLE}get isFocused(){return this.focusState>=je.FOCUSED}get isOpen(){return this.focusState>=je.OPEN}get hasOverflow(){return this.isCompact||this.numMenusShown<this.menus.length}get isCompact(){return this.options.compactMode!==void 0}setUnfocusedState(){this.options.visibility==="toggle"||this.options.visibility==="hidden"?this.focusState=je.HIDDEN:this.options.visibility==="classic"&&Dv(ge)?this.focusState=je.HIDDEN:this.focusState=je.VISIBLE,this.ignoreNextMouseUp=!1,this.mnemonicsInUse=!1,this.updateMnemonicVisibility(!1)}focusPrevious(){var t;if(!this.focusedMenu||this.numMenusShown===0)return;let e=(this.focusedMenu.index-1+this.numMenusShown)%this.numMenusShown;this.focusedMenu.index===Ue.OVERFLOW_INDEX?e=this.numMenusShown-1:this.focusedMenu.index===0&&this.hasOverflow&&(e=Ue.OVERFLOW_INDEX),e!==this.focusedMenu.index&&(this.isOpen?(this.cleanupCustomMenu(),this.showCustomMenu(e)):this.isFocused&&(this.focusedMenu.index=e,e===Ue.OVERFLOW_INDEX?this.overflowMenu.buttonElement.focus():(t=this.menus[e].buttonElement)==null||t.focus()))}focusNext(){var t;if(!this.focusedMenu||this.numMenusShown===0)return;let e=(this.focusedMenu.index+1)%this.numMenusShown;this.focusedMenu.index===Ue.OVERFLOW_INDEX?e=0:this.focusedMenu.index===this.numMenusShown-1&&(e=Ue.OVERFLOW_INDEX),e!==this.focusedMenu.index&&(this.isOpen?(this.cleanupCustomMenu(),this.showCustomMenu(e)):this.isFocused&&(this.focusedMenu.index=e,e===Ue.OVERFLOW_INDEX?this.overflowMenu.buttonElement.focus():(t=this.menus[e].buttonElement)==null||t.focus()))}updateMnemonicVisibility(e){this.menus&&this.menus.forEach(t=>{if(t.titleElement&&t.titleElement.children.length){const i=t.titleElement.children.item(0);i&&(i.style.textDecoration=this.options.alwaysOnMnemonics||e?"underline":"")}})}get mnemonicsInUse(){return this._mnemonicsInUse}set mnemonicsInUse(e){this._mnemonicsInUse=e}get shouldAltKeyFocus(){return be?!1:!this.options.disableAltFocus||this.options.visibility==="toggle"}get onVisibilityChange(){return this._onVisibilityChange.event}get onFocusStateChange(){return this._onFocusStateChange.event}onMenuTriggered(e,t){this.isOpen?this.isCurrentMenu(e)?this.setUnfocusedState():(this.cleanupCustomMenu(),this.showCustomMenu(e,this.openedViaKeyboard)):(this.focusedMenu={index:e},this.openedViaKeyboard=!t,this.focusState=je.OPEN)}onModifierKeyToggled(e){const t=!e.altKey&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey;this.options.visibility!=="hidden"&&(e.event&&this.shouldAltKeyFocus&&YE.toEnum(e.event.code)===159&&e.event.preventDefault(),this.isFocused&&e.lastKeyPressed==="alt"&&e.altKey&&(this.setUnfocusedState(),this.mnemonicsInUse=!1,this.awaitingAltRelease=!0),t&&e.lastKeyPressed==="alt"&&e.lastKeyReleased==="alt"&&(this.awaitingAltRelease||(!this.isFocused&&this.shouldAltKeyFocus?(this.mnemonicsInUse=!0,this.focusedMenu={index:this.numMenusShown>0?0:Ue.OVERFLOW_INDEX},this.focusState=je.FOCUSED):this.isOpen||this.setUnfocusedState())),!e.altKey&&e.lastKeyReleased==="alt"&&(this.awaitingAltRelease=!1),this.options.enableMnemonics&&this.menus&&!this.isOpen&&this.updateMnemonicVisibility(!this.awaitingAltRelease&&e.altKey||this.mnemonicsInUse))}isCurrentMenu(e){return this.focusedMenu?this.focusedMenu.index===e:!1}cleanupCustomMenu(){var e,t,i;this.focusedMenu&&(this.focusedMenu.index===Ue.OVERFLOW_INDEX?this.overflowMenu.buttonElement.focus():(e=this.menus[this.focusedMenu.index].buttonElement)==null||e.focus(),this.focusedMenu.holder&&((t=this.focusedMenu.holder.parentElement)==null||t.classList.remove("open"),this.focusedMenu.holder.remove()),(i=this.focusedMenu.widget)==null||i.dispose(),this.focusedMenu={index:this.focusedMenu.index}),this.menuDisposables.clear()}showCustomMenu(e,t=!0){var h,p,g,m;const i=e>=this.numMenusShown?Ue.OVERFLOW_INDEX:e,o=i===Ue.OVERFLOW_INDEX?this.overflowMenu:this.menus[i];if(!o.actions||!o.buttonElement||!o.titleElement)return;const n=Rs("div.menubar-menu-items-holder",{title:""});o.buttonElement.classList.add("open");const s=o.titleElement.getBoundingClientRect(),r=ZE(o.titleElement);if(((h=this.options.compactMode)==null?void 0:h.horizontal)===Vn.Right)n.style.left=`${s.left+this.container.clientWidth}px`;else if(((p=this.options.compactMode)==null?void 0:p.horizontal)===Vn.Left){const f=fe(this.container).innerWidth;n.style.right=`${f-s.left}px`,n.style.left="auto"}else n.style.left=`${s.left*r}px`;((g=this.options.compactMode)==null?void 0:g.vertical)===Ca.Above?n.style.top=`${s.top-this.menus.length*30+this.container.clientHeight}px`:((m=this.options.compactMode)==null?void 0:m.vertical)===Ca.Below?n.style.top=`${s.top}px`:n.style.top=`${s.bottom*r}px`,o.buttonElement.appendChild(n);const a={getKeyBinding:this.options.getKeybinding,actionRunner:this.actionRunner,enableMnemonics:this.options.alwaysOnMnemonics||this.mnemonicsInUse&&this.options.enableMnemonics,ariaLabel:o.buttonElement.getAttribute("aria-label")??void 0,expandDirection:this.isCompact?this.options.compactMode:{horizontal:Vn.Right,vertical:Ca.Below},useEventAsContext:!0},l=this.menuDisposables.add(new XE(n,o.actions,a,this.menuStyle));this.menuDisposables.add(l.onDidCancel(()=>{this.focusState=je.FOCUSED})),i!==e?l.trigger(e-this.numMenusShown):l.focus(t),this.focusedMenu={index:i,holder:n,widget:l}}};Ue.OVERFLOW_INDEX=-1;let $p=Ue;function Pw(c){return c&&c.hasOwnProperty("folderUri")}function zT(c){return c&&c.hasOwnProperty("workspace")}const CS="inRecentFilesPicker";class SS extends A{constructor(e){super(e),this.removeFromRecentlyOpened={iconClass:oe.asClassName(T.removeClose),tooltip:d(10276,"Remove from Recently Opened")},this.dirtyRecentlyOpenedFolder={iconClass:"dirty-workspace "+oe.asClassName(T.closeDirty),tooltip:d(10277,"Folder With Unsaved Files"),alwaysVisible:!0},this.dirtyRecentlyOpenedWorkspace={...this.dirtyRecentlyOpenedFolder,tooltip:d(10278,"Workspace With Unsaved Files")}}async run(e){const t=e.get(tu),i=e.get(Fe),o=e.get(ei),n=e.get(mi),s=e.get(xe),r=e.get(wc),a=e.get(Zr),l=e.get(st),h=e.get(xt),p=await t.getRecentlyOpened(),g=await t.getDirtyWorkspaces();let m=!1;const f=new Bt,v=new Bt;for(const Q of g)Pw(Q)?f.set(Q.folderUri,!0):(v.set(Q.workspace.configPath,Q.workspace),m=!0);const S=new Bt,E=new Bt;for(const Q of p.workspaces)cd(Q)?S.set(Q.folderUri,!0):(E.set(Q.workspace.configPath,Q.workspace),m=!0);const D=[];for(const Q of p.workspaces){const $e=cd(Q)?f.has(Q.folderUri):v.has(Q.workspace.configPath);D.push(this.toQuickPick(r,a,n,Q,$e))}for(const Q of g)Pw(Q)&&!S.has(Q.folderUri)?D.push(this.toQuickPick(r,a,n,Q,!0)):zT(Q)&&!E.has(Q.workspace.configPath)&&D.push(this.toQuickPick(r,a,n,Q,!0));const V=p.files.map(Q=>this.toQuickPick(r,a,n,Q,!1)),M=p.workspaces[0],J=M&&o.isCurrentWorkspace(hp(M)?M.workspace:M.folderUri);let q;const W={type:"separator",label:m?d(10279,"folders & workspaces"):d(10280,"folders")},G={type:"separator",label:d(10281,"files")},se=[W,...D,G,...V],Le=await i.pick(se,{contextKey:CS,activeItem:[...D,...V][J?1:0],placeHolder:be?d(10282,"Select to open (hold Cmd-key to force new window or Option-key for same window)"):d(10283,"Select to open (hold Ctrl-key to force new window or Alt-key for same window)"),matchOnDescription:!0,onKeyMods:Q=>q=Q,quickNavigate:this.isQuickNavigate()?{keybindings:s.lookupKeybindings(this.desc.id)}:void 0,hideInput:this.isQuickNavigate(),onDidTriggerItemButton:async Q=>{if(Q.button===this.removeFromRecentlyOpened)await t.removeRecentlyOpened([Q.item.resource]),Q.removeItem();else if(Q.button===this.dirtyRecentlyOpenedFolder||Q.button===this.dirtyRecentlyOpenedWorkspace){const $e=Q.button===this.dirtyRecentlyOpenedWorkspace,{confirmed:io}=await h.confirm({title:$e?d(10284,"Workspace with Unsaved Files"):d(10285,"Folder with Unsaved Files"),message:$e?d(10286,"Do you want to open the workspace to review the unsaved files?"):d(10287,"Do you want to open the folder to review the unsaved files?"),detail:$e?d(10288,"Workspaces with unsaved files cannot be removed until all unsaved files have been saved or reverted."):d(10289,"Folders with unsaved files cannot be removed until all unsaved files have been saved or reverted.")});io&&(l.openWindow([Q.item.openable],{remoteAuthority:Q.item.remoteAuthority||null}),i.cancel())}}});if(Le)return l.openWindow([Le.openable],{forceNewWindow:q==null?void 0:q.ctrlCmd,forceReuseWindow:q==null?void 0:q.alt,remoteAuthority:Le.remoteAuthority||null})}toQuickPick(e,t,i,o,n){let s,r,a,l,h=!1;cd(o)?(l=o.folderUri,r=Ru(e,t,l,ft.FOLDER),s={folderUri:l},a=o.label||i.getWorkspaceLabel(l,{verbose:2})):hp(o)?(l=o.workspace.configPath,r=Ru(e,t,l,ft.ROOT_FOLDER),s={workspaceUri:l},a=o.label||i.getWorkspaceLabel(o.workspace,{verbose:2}),h=!0):(l=o.fileUri,r=Ru(e,t,l,ft.FILE),s={fileUri:l},a=o.label||i.getUriLabel(l));const{name:p,parentPath:g}=ek(a);return{iconClasses:r,label:p,ariaLabel:n?h?d(10290,"{0}, workspace with unsaved changes",p):d(10291,"{0}, folder with unsaved changes",p):p,description:g,buttons:n?[h?this.dirtyRecentlyOpenedWorkspace:this.dirtyRecentlyOpenedFolder]:[this.removeFromRecentlyOpened],openable:s,resource:l,remoteAuthority:o.remoteAuthority}}}const Dh=class Dh extends SS{constructor(){super({id:Dh.ID,title:{...w(10292,"Open Recent..."),mnemonicTitle:d(10293,"&&More...")},category:_.File,f1:!0,keybinding:{weight:200,primary:2096,mac:{primary:304}},menu:{id:b.MenubarRecentMenu,group:"y_more",order:1}})}isQuickNavigate(){return!1}};Dh.ID="workbench.action.openRecent";let el=Dh;class UT extends SS{constructor(){super({id:"workbench.action.quickOpenRecent",title:w(10294,"Quick Open Recent..."),category:_.File,f1:!1})}isQuickNavigate(){return!0}}class KT extends A{constructor(){super({id:"workbench.action.toggleFullScreen",title:{...w(10295,"Toggle Full Screen"),mnemonicTitle:d(10296,"&&Full Screen")},category:_.View,f1:!0,keybinding:{weight:200,primary:69,mac:{primary:2340}},precondition:tk.toNegated(),toggled:Sf,menu:[{id:b.MenubarAppearanceMenu,group:"1_toggle_view",order:1}]})}run(e){return e.get(st).toggleFullScreen(Ar())}}const Ah=class Ah extends A{constructor(){super({id:Ah.ID,title:w(10297,"Reload Window"),category:_.Developer,f1:!0,keybinding:{weight:250,when:QE,primary:2096}})}async run(e){return e.get(st).reload()}};Ah.ID="workbench.action.reloadWindow";let jp=Ah;class qT extends A{constructor(){super({id:"workbench.action.showAboutDialog",title:{...w(10298,"About"),mnemonicTitle:d(10299,"&&About")},category:_.Help,f1:!0,menu:{id:b.MenubarHelpMenu,group:"z_about",order:1,when:Ka.toNegated()}})}run(e){return e.get(xt).about()}}class $T extends A{constructor(){super({id:"workbench.action.newWindow",title:{...w(10300,"New Window"),mnemonicTitle:d(10301,"New &&Window")},f1:!0,keybinding:{weight:200,primary:vt?Xt?Ee(2089,1068):3628:3116,secondary:vt?[3116]:void 0},menu:{id:b.MenubarFileMenu,group:"1_new",order:3}})}run(e){return e.get(st).openWindow({remoteAuthority:null})}}class jT extends A{constructor(){super({id:"workbench.action.blur",title:w(10302,"Remove keyboard focus from focused element")})}run(){const e=un();pn(e)&&e.blur()}}C($T);C(KT);C(UT);C(el);C(jp);C(qT);C(jT);const ES=y.and(Av,y.has(CS)),Rw="workbench.action.quickOpenNavigateNextInRecentFilesPicker";ee.registerCommandAndKeybindingRule({id:Rw,weight:250,handler:eu(Rw,!0),when:ES,primary:2096,mac:{primary:304}});const Bw="workbench.action.quickOpenNavigatePreviousInRecentFilesPicker";ee.registerCommandAndKeybindingRule({id:Bw,weight:250,handler:eu(Bw,!1),when:ES,primary:3120,mac:{primary:1328}});qe.registerCommand("workbench.action.toggleConfirmBeforeClose",c=>{const e=c.get(F),t=e.inspect("window.confirmBeforeClose").userValue;return e.updateValue("window.confirmBeforeClose",t==="never"?"keyboardOnly":"never")});k.appendMenuItem(b.MenubarFileMenu,{group:"z_ConfirmClose",command:{id:"workbench.action.toggleConfirmBeforeClose",title:d(10303,"Confirm Before Close"),toggled:y.notEquals("config.window.confirmBeforeClose","never")},order:1,when:Tv});k.appendMenuItem(b.MenubarFileMenu,{title:d(10304,"Open &&Recent"),submenu:b.MenubarRecentMenu,group:"2_open",order:4});k.appendMenuItem(b.MenubarMainMenu,{submenu:b.MenubarFileMenu,title:{value:"File",original:"File",mnemonicTitle:d(7024,"&&File")},order:1});k.appendMenuItem(b.MenubarMainMenu,{submenu:b.MenubarEditMenu,title:{value:"Edit",original:"Edit",mnemonicTitle:d(7025,"&&Edit")},order:2});k.appendMenuItem(b.MenubarMainMenu,{submenu:b.MenubarSelectionMenu,title:{value:"Selection",original:"Selection",mnemonicTitle:d(7026,"&&Selection")},order:3});k.appendMenuItem(b.MenubarMainMenu,{submenu:b.MenubarViewMenu,title:{value:"View",original:"View",mnemonicTitle:d(7027,"&&View")},order:4});k.appendMenuItem(b.MenubarMainMenu,{submenu:b.MenubarGoMenu,title:{value:"Go",original:"Go",mnemonicTitle:d(7028,"&&Go")},order:5});k.appendMenuItem(b.MenubarMainMenu,{submenu:b.MenubarTerminalMenu,title:{value:"Terminal",original:"Terminal",mnemonicTitle:d(7029,"&&Terminal")},order:7});k.appendMenuItem(b.MenubarMainMenu,{submenu:b.MenubarHelpMenu,title:{value:"Help",original:"Help",mnemonicTitle:d(7030,"&&Help")},order:8});k.appendMenuItem(b.MenubarMainMenu,{submenu:b.MenubarPreferencesMenu,title:{value:"Preferences",original:"Preferences",mnemonicTitle:d(7031,"Preferences")},when:Ka,order:9});const Na=class Na extends R{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f){super(),this.menuService=e,this.workspacesService=t,this.contextKeyService=i,this.keybindingService=o,this.configurationService=n,this.labelService=s,this.updateService=r,this.storageService=a,this.notificationService=l,this.preferencesService=h,this.environmentService=p,this.accessibilityService=g,this.hostService=m,this.commandService=f,this.keys=["window.menuBarVisibility","window.enableMenuBarMnemonics","window.customMenuBarAltFocus","workbench.sideBar.location","window.nativeTabs"],this.menus={},this.topLevelTitles={},this.recentlyOpened={files:[],workspaces:[]},this.mainMenu=this._register(this.menuService.createMenu(b.MenubarMainMenu,this.contextKeyService)),this.mainMenuDisposables=this._register(new P),this.setupMainMenu(),this.menuUpdater=this._register(new Yr(()=>this.doUpdateMenubar(!1),200)),this.notifyUserOfCustomMenubarAccessibility()}registerListeners(){this._register(this.hostService.onDidChangeFocus(e=>this.onDidChangeWindowFocus(e))),this._register(this.configurationService.onDidChangeConfiguration(e=>this.onConfigurationUpdated(e))),this._register(this.updateService.onStateChange(()=>this.onUpdateStateChange())),this._register(this.workspacesService.onDidChangeRecentlyOpened(()=>{this.onDidChangeRecentlyOpened()})),this._register(this.keybindingService.onDidUpdateKeybindings(()=>this.updateMenubar())),this._register(this.labelService.onDidChangeFormatters(()=>{this.onDidChangeRecentlyOpened()})),this._register(this.mainMenu.onDidChange(()=>{this.setupMainMenu(),this.doUpdateMenubar(!0)}))}setupMainMenu(){this.mainMenuDisposables.clear(),this.menus={},this.topLevelTitles={};const[,e]=this.mainMenu.getActions()[0];for(const t of e)t instanceof vd&&typeof t.item.title!="string"&&(this.menus[t.item.title.original]=this.mainMenuDisposables.add(this.menuService.createMenu(t.item.submenu,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.topLevelTitles[t.item.title.original]=t.item.title.mnemonicTitle??t.item.title.value)}updateMenubar(){this.menuUpdater.schedule()}calculateActionLabel(e){return e.label}onUpdateStateChange(){this.updateMenubar()}onUpdateKeybindings(){this.updateMenubar()}getOpenRecentActions(){if(!this.recentlyOpened)return[];const{workspaces:e,files:t}=this.recentlyOpened,i=[];if(e.length>0){for(let o=0;o<Na.MAX_MENU_RECENT_ENTRIES&&o<e.length;o++)i.push(this.createOpenRecentMenuAction(e[o]));i.push(new We)}if(t.length>0){for(let o=0;o<Na.MAX_MENU_RECENT_ENTRIES&&o<t.length;o++)i.push(this.createOpenRecentMenuAction(t[o]));i.push(new We)}return i}onDidChangeWindowFocus(e){e&&this.onDidChangeRecentlyOpened()}onConfigurationUpdated(e){this.keys.some(t=>e.affectsConfiguration(t))&&this.updateMenubar(),e.affectsConfiguration("editor.accessibilitySupport")&&this.notifyUserOfCustomMenubarAccessibility(),e.affectsConfiguration("window.menuBarVisibility")&&this.onDidChangeRecentlyOpened()}get menubarHidden(){return be&&Es?!1:Sa(this.configurationService)==="hidden"}onDidChangeRecentlyOpened(){this.menubarHidden||this.workspacesService.getRecentlyOpened().then(e=>{this.recentlyOpened=e,this.updateMenubar()})}createOpenRecentMenuAction(e){let t,i,o,n;const s=e.remoteAuthority;cd(e)?(i=e.folderUri,t=e.label||this.labelService.getWorkspaceLabel(i,{verbose:2}),o="openRecentFolder",n={folderUri:i}):hp(e)?(i=e.workspace.configPath,t=e.label||this.labelService.getWorkspaceLabel(e.workspace,{verbose:2}),o="openRecentWorkspace",n={workspaceUri:i}):(i=e.fileUri,t=e.label||this.labelService.getUriLabel(i),o="openRecentFile",n={fileUri:i});const r=et({id:o,label:ik(t),run:a=>{const l=a&&(!be&&(a.ctrlKey||a.shiftKey)||be&&(a.metaKey||a.altKey));return this.hostService.openWindow([n],{forceNewWindow:!!l,remoteAuthority:s||null})}});return Object.assign(r,{uri:i,remoteAuthority:s})}notifyUserOfCustomMenubarAccessibility(){if(vt||be)return;const e=this.storageService.getBoolean("menubar/accessibleMenubarNotified",-1,!1),t=!ok(this.configurationService);if(e||t||!this.accessibilityService.isScreenReaderOptimized())return;const i=d(7032,"Accessibility support is enabled for you. For the most accessible experience, we recommend the custom title bar style.");this.notificationService.prompt(me.Info,i,[{label:d(7033,"Open Settings"),run:()=>this.preferencesService.openUserSettings({query:"window.titleBarStyle"})}]),this.storageService.store("menubar/accessibleMenubarNotified",!0,-1,0)}};Na.MAX_MENU_RECENT_ENTRIES=10;let Yp=Na,Bs;function YT(){return Bs||(Bs=new I,C(class extends A{constructor(){super({id:"workbench.actions.menubar.focus",title:w(7034,"Focus Application Menu"),keybinding:{primary:580,weight:200,when:Tv},f1:!0})}async run(){Bs==null||Bs.fire()}})),Bs}let Zp=class extends Yp{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f,v){super(e,t,i,o,n,s,r,a,l,h,p,g,f,v),this.telemetryService=m,this.alwaysOnMnemonics=!1,this.focusInsideMenubar=!1,this.pendingFirstTimeUpdate=!1,this.visible=!0,this.webNavigationMenu=this._register(this.menuService.createMenu(b.MenubarHomeMenu,this.contextKeyService)),this.reinstallDisposables=this._register(new P),this._onVisibilityChange=this._register(new I),this._onFocusStateChange=this._register(new I),this.actionRunner=this._register(new bc),this.actionRunner.onDidRun(S=>{this.telemetryService.publicLog2("workbenchActionExecuted",{id:S.action.id,from:"menu"})}),this.workspacesService.getRecentlyOpened().then(S=>{this.recentlyOpened=S}),this.registerListeners()}doUpdateMenubar(e){this.focusInsideMenubar||this.setupCustomMenubar(e),e&&(this.pendingFirstTimeUpdate=!0)}getUpdateAction(){switch(this.updateService.state.type){case"idle":return new de("update.check",d(7035,"Check for &&Updates..."),void 0,!0,()=>this.updateService.checkForUpdates(!0));case"checking for updates":return new de("update.checking",d(7036,"Checking for Updates..."),void 0,!1);case"available for download":return new de("update.downloadNow",d(7037,"D&&ownload Update"),void 0,!0,()=>this.updateService.downloadUpdate());case"downloading":return new de("update.downloading",d(7038,"Downloading Update..."),void 0,!1);case"downloaded":return be?null:new de("update.install",d(7039,"Install &&Update..."),void 0,!0,()=>this.updateService.applyUpdate());case"updating":return new de("update.updating",d(7040,"Installing Update..."),void 0,!1);case"ready":return new de("update.restart",d(7041,"Restart to &&Update"),void 0,!0,()=>this.updateService.quitAndInstall());default:return null}}get currentMenubarVisibility(){return Sa(this.configurationService)}get currentDisableMenuBarAltFocus(){const e=this.configurationService.getValue("window.customMenuBarAltFocus");let t=!1;return typeof e=="boolean"&&(t=!e),t}insertActionsBefore(e,t){switch(e.id){case el.ID:t.push(...this.getOpenRecentActions());break;case"workbench.action.showAboutDialog":if(!be&&!vt){const i=this.getUpdateAction();i&&(i.label=Lo(i.label),t.push(i),t.push(new We))}break}}get currentEnableMenuBarMnemonics(){let e=this.configurationService.getValue("window.enableMenuBarMnemonics");return typeof e!="boolean"&&(e=!0),e&&(!vt||Dv(ge))}get currentCompactMenuMode(){if(this.currentMenubarVisibility!=="compact")return;const t=this.configurationService.getValue("workbench.sideBar.location")==="right"?Vn.Left:Vn.Right,o=this.configurationService.getValue("workbench.activityBar.location")==="bottom"?Ca.Above:Ca.Below;return{horizontal:t,vertical:o}}onDidVisibilityChange(e){this.visible=e,this.onDidChangeRecentlyOpened(),this._onVisibilityChange.fire(e)}toActionsArray(e){const t=[];return Tr(e,{shouldForwardArgs:!0},t),t}setupCustomMenubar(e){var i;if(!this.container)return;e?(this.menubar&&this.reinstallDisposables.clear(),this.menubar=this.reinstallDisposables.add(new $p(this.container,this.getMenuBarOptions(),sk)),this.accessibilityService.alwaysUnderlineAccessKeys().then(o=>{var n;this.alwaysOnMnemonics=o,(n=this.menubar)==null||n.update(this.getMenuBarOptions())}),this.reinstallDisposables.add(this.menubar.onFocusStateChange(o=>{this._onFocusStateChange.fire(o),o||(this.pendingFirstTimeUpdate?(this.setupCustomMenubar(!0),this.pendingFirstTimeUpdate=!1):this.updateMenubar(),this.focusInsideMenubar=!1)})),this.reinstallDisposables.add(this.menubar.onVisibilityChange(o=>this.onDidVisibilityChange(o))),this.reinstallDisposables.add(L(this.container,B.FOCUS_IN,()=>{this.focusInsideMenubar=!0})),this.reinstallDisposables.add(L(this.container,B.FOCUS_OUT,()=>{this.focusInsideMenubar=!1})),this.menubar.isVisible&&this.onDidVisibilityChange(!0)):(i=this.menubar)==null||i.update(this.getMenuBarOptions());const t=(o,n,s)=>{n.splice(0);for(const r of o)if(this.insertActionsBefore(r,n),r instanceof We)n.push(r);else if(r instanceof vd||r instanceof Mb){let a=typeof r.item.title=="string"?r.item.title:r.item.title.mnemonicTitle??r.item.title.value;if(r instanceof vd){const l=[];t(r.actions,l,s),l.length>0&&n.push(new So(r.id,Lo(a),l))}else{ak(r.item.toggled)&&(a=r.item.toggled.mnemonicTitle??r.item.toggled.title??a);const l=new de(r.id,Lo(a),r.class,r.enabled,()=>this.commandService.executeCommand(r.id));l.tooltip=r.tooltip,l.checked=r.checked,n.push(l)}}if(s==="File"&&this.currentCompactMenuMode===void 0){const r=this.getWebNavigationActions();r.length&&n.push(...r)}};for(const o of Object.keys(this.topLevelTitles)){const n=this.menus[o];e&&n&&(this.reinstallDisposables.add(n.onDidChange(()=>{var r;if(!this.focusInsideMenubar){const a=[];t(this.toActionsArray(n),a,o),(r=this.menubar)==null||r.updateMenu({actions:a,label:Lo(this.topLevelTitles[o])})}})),n===this.menus.File&&this.reinstallDisposables.add(this.webNavigationMenu.onDidChange(()=>{var r;if(!this.focusInsideMenubar){const a=[];t(this.toActionsArray(n),a,o),(r=this.menubar)==null||r.updateMenu({actions:a,label:Lo(this.topLevelTitles[o])})}})));const s=[];n&&t(this.toActionsArray(n),s,o),this.menubar&&(e?this.menubar.push({actions:s,label:Lo(this.topLevelTitles[o])}):this.menubar.updateMenu({actions:s,label:Lo(this.topLevelTitles[o])}))}}getWebNavigationActions(){if(!vt)return[];const e=[];for(const t of this.webNavigationMenu.getActions()){const[,i]=t;for(const o of i)if(o instanceof Mb){const n=typeof o.item.title=="string"?o.item.title:o.item.title.mnemonicTitle??o.item.title.value;e.push(new de(o.id,Lo(n),o.class,o.enabled,async s=>{this.commandService.executeCommand(o.id,s)}))}e.push(new We)}return e.length&&e.pop(),e}getMenuBarOptions(){return{enableMnemonics:this.currentEnableMenuBarMnemonics,disableAltFocus:this.currentDisableMenuBarAltFocus,visibility:this.currentMenubarVisibility,actionRunner:this.actionRunner,getKeybinding:e=>this.keybindingService.lookupKeybinding(e.id),alwaysOnMnemonics:this.alwaysOnMnemonics,compactMode:this.currentCompactMenuMode,getCompactMenuActions:()=>vt?this.getWebNavigationActions():[]}}onDidChangeWindowFocus(e){var t;this.visible&&(super.onDidChangeWindowFocus(e),this.container&&(e?this.container.classList.remove("inactive"):(this.container.classList.add("inactive"),(t=this.menubar)==null||t.blur())))}onUpdateStateChange(){this.visible&&super.onUpdateStateChange()}onDidChangeRecentlyOpened(){this.visible&&super.onDidChangeRecentlyOpened()}onUpdateKeybindings(){this.visible&&super.onUpdateKeybindings()}registerListeners(){super.registerListeners(),this._register(L(ge,B.RESIZE,()=>{this.menubar&&!(qa&&rk.pointerEvents)&&this.menubar.blur()})),vt&&(this._register(Mv(e=>{e===ge.vscodeWindowId&&this.updateMenubar()})),this._register(this.webNavigationMenu.onDidChange(()=>this.updateMenubar())),this._register(YT().event(()=>{var e;return(e=this.menubar)==null?void 0:e.toggleFocus()})))}get onVisibilityChange(){return this._onVisibilityChange.event}get onFocusStateChange(){return this._onFocusStateChange.event}getMenubarItemsDimensions(){return this.menubar?new he(this.menubar.getWidth(),this.menubar.getHeight()):new he(0,0)}create(e){return this.container=e,this.container&&this.doUpdateMenubar(!0),this.container}layout(e){var t;(t=this.menubar)==null||t.update(this.getMenuBarOptions())}toggleFocus(){var e;(e=this.menubar)==null||e.toggleFocus()}};Zp=x([u(0,yt),u(1,tu),u(2,K),u(3,xe),u(4,F),u(5,mi),u(6,nk),u(7,ie),u(8,He),u(9,bn),u(10,bt),u(11,Vv),u(12,Be),u(13,st),u(14,lt)],Zp);const Ju=X("settings-view-bar-icon",T.settingsGear,d(10748,"Settings icon in the view bar."));var ma,Yo;let tl=(Yo=class extends R{constructor(e,t,i,o,n,s,r){super(),this.contextMenuActionsProvider=e,this.colors=t,this.activityHoverOptions=i,this.instantiationService=n,this.storageService=s,this.extensionService=r,this.globalActivityAction=this._register(new de(yd)),this.accountAction=this._register(new de(Cd)),this.element=document.createElement("div");const a=()=>({anchorAlignment:o.getValue("workbench.sideBar.location")==="left"?1:0,anchorAxisAlignment:1});this.globalActivityActionBar=this._register(new Vo(this.element,{actionViewItemProvider:(l,h)=>{if(l.id===yd)return this.instantiationService.createInstance(ol,this.contextMenuActionsProvider,{...h,colors:this.colors,hoverOptions:this.activityHoverOptions},a);if(l.id===Cd)return this.instantiationService.createInstance(Ss,this.contextMenuActionsProvider,{...h,colors:this.colors,hoverOptions:this.activityHoverOptions},a,p=>{p.unshift(et({id:"hideAccounts",label:d(7049,"Hide Accounts"),run:()=>nl(s,!1)}),new We)});throw new Error(`No view item for action '${l.id}'`)},orientation:1,ariaLabel:d(7050,"Manage"),preventLoopNavigation:!0})),this.accountsVisibilityPreference&&this.globalActivityActionBar.push(this.accountAction,{index:ma.ACCOUNTS_ACTION_INDEX}),this.globalActivityActionBar.push(this.globalActivityAction),this.registerListeners()}registerListeners(){this.extensionService.whenInstalledExtensionsRegistered().then(()=>{this._store.isDisposed||this._register(this.storageService.onDidChangeValue(0,Ss.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,this._store)(()=>this.toggleAccountsActivity()))})}create(e){e.appendChild(this.element)}focus(){this.globalActivityActionBar.focus(!0)}size(){return this.globalActivityActionBar.viewItems.length}getContextMenuActions(){return[et({id:"toggleAccountsVisibility",label:d(7051,"Accounts"),checked:this.accountsVisibilityPreference,run:()=>this.accountsVisibilityPreference=!this.accountsVisibilityPreference})]}toggleAccountsActivity(){this.globalActivityActionBar.length()===2&&this.accountsVisibilityPreference||(this.globalActivityActionBar.length()===2?this.globalActivityActionBar.pull(ma.ACCOUNTS_ACTION_INDEX):this.globalActivityActionBar.push(this.accountAction,{index:ma.ACCOUNTS_ACTION_INDEX}))}get accountsVisibilityPreference(){return Xp(this.storageService)}set accountsVisibilityPreference(e){nl(this.storageService,e)}},ma=Yo,Yo.ACCOUNTS_ACTION_INDEX=0,Yo.ACCOUNTS_ICON=X("accounts-view-bar-icon",T.account,d(7048,"Accounts icon in the view bar.")),Yo);tl=ma=x([u(3,F),u(4,O),u(5,ie),u(6,Vt)],tl);let il=class extends tc{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m){super(t,{draggable:!1,icon:!0,hasPopup:!0,...i},()=>!0,s,r,p,g),this.menuId=e,this.contextMenuActionsProvider=o,this.contextMenuAlignmentOptions=n,this.menuService=a,this.contextMenuService=l,this.contextKeyService=h,this.activityService=m,this.updateItemActivity(),this._register(this.activityService.onDidChangeActivity(f=>{ln(f)&&f===this.compositeBarActionItem.id&&this.updateItemActivity()}))}updateItemActivity(){const e=this.activityService.getActivity(this.compositeBarActionItem.id);let t=e[0];if(t){const{badge:i,priority:o}=t;i instanceof yo&&e.length>1&&(t={badge:this.getCumulativeNumberBadge(e,o??0)})}this.action.activity=t}getCumulativeNumberBadge(e,t){const i=e.filter(s=>s.badge instanceof yo&&(s.priority??0)===t),o=i.reduce((s,r)=>s+r.badge.number,0),n=()=>i.reduce((s,r,a)=>(s=s+r.badge.getDescription(),a<i.length-1&&(s=`${s}
`),s),"");return new yo(o,n)}render(e){super.render(e),this._register(L(this.container,B.MOUSE_DOWN,async t=>{re.stop(t,!0),(t==null?void 0:t.button)!==2&&this.run()})),this._register(L(this.container,B.CONTEXT_MENU,async t=>{t.stopPropagation();const i=new P,o=await this.resolveContextMenuActions(i),n=new ai(fe(this.container),t);this.contextMenuService.showContextMenu({getAnchor:()=>n,getActions:()=>o,onHide:()=>i.dispose()})})),this._register(L(this.container,B.KEY_UP,t=>{const i=new xi(t);(i.equals(3)||i.equals(10))&&(re.stop(t,!0),this.run())})),this._register(L(this.container,St.Tap,t=>{re.stop(t,!0),this.run()}))}async resolveContextMenuActions(e){return this.contextMenuActionsProvider()}async run(){const e=new P,t=e.add(this.menuService.createMenu(this.menuId,this.contextKeyService)),i=await this.resolveMainMenuActions(t,e),{anchorAlignment:o,anchorAxisAlignment:n}=this.contextMenuAlignmentOptions()??{anchorAlignment:void 0,anchorAxisAlignment:void 0};this.contextMenuService.showContextMenu({getAnchor:()=>this.label,anchorAlignment:o,anchorAxisAlignment:n,getActions:()=>i,onHide:()=>e.dispose(),menuActionOptions:{renderShortTitle:!0}})}async resolveMainMenuActions(e,t){const i=[];return hn(e,{renderShortTitle:!0},{primary:[],secondary:i}),i}};il=x([u(5,te),u(6,Xe),u(7,yt),u(8,Ve),u(9,K),u(10,F),u(11,xe),u(12,Wt)],il);var lr;let Ss=(lr=class extends il{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f,v,S,E,D,V,M){const J=V.createInstance(Fr,{id:Cd,name:d(7051,"Accounts"),classNames:oe.asClassNameArray(tl.ACCOUNTS_ICON)});super(b.AccountsContext,J,t,e,i,n,r,l,a,h,f,v,D),this.fillContextMenuActions=o,this.lifecycleService=s,this.authenticationService=p,this.productService=m,this.secretStorageService=S,this.logService=E,this.commandService=M,this.groupedAccounts=new Map,this.problematicProviders=new Set,this.initialized=!1,this.sessionFromEmbedder=new iu(()=>ck(this.secretStorageService,this.productService)),this._register(J),this.registerListeners(),this.initialize()}registerListeners(){this._register(this.authenticationService.onDidRegisterAuthenticationProvider(async e=>{await this.addAccountsFromProvider(e.id)})),this._register(this.authenticationService.onDidUnregisterAuthenticationProvider(e=>{this.groupedAccounts.delete(e.id),this.problematicProviders.delete(e.id)})),this._register(this.authenticationService.onDidChangeSessions(async e=>{if(e.event.removed)for(const t of e.event.removed)this.removeAccount(e.providerId,t.account);for(const t of[...e.event.changed??[],...e.event.added??[]])try{await this.addOrUpdateAccount(e.providerId,t.account)}catch(i){this.logService.error(i)}}))}async initialize(){if(await this.lifecycleService.when(3),this._store.isDisposed)return;const e=this._register(dk(fe(this.element),async()=>{await this.doInitialize(),e.dispose()}))}async doInitialize(){const e=this.authenticationService.getProviderIds(),t=await Promise.allSettled(e.map(i=>this.addAccountsFromProvider(i)));for(const i of t)i.status==="rejected"&&this.logService.error(i.reason);this.initialized=!0}async resolveMainMenuActions(e,t){await super.resolveMainMenuActions(e,t);const i=this.authenticationService.getProviderIds(),o=e.getActions();let n=[];for(const s of i){if(!this.initialized){const l=t.add(new de("noAccountsAvailable",d(7052,"Loading..."),void 0,!1));n.push(l);break}const r=this.authenticationService.getProvider(s).label,a=this.groupedAccounts.get(s);if(!a){if(this.problematicProviders.has(s)){const l=t.add(new de("providerUnavailable",d(7053,"{0} is currently unavailable",r),void 0,!1));n.push(l);try{await this.addAccountsFromProvider(s)}catch(h){this.logService.error(h)}}continue}for(const l of a){const p=[et({id:`configureSessions${l.label}`,label:d(7054,"Manage Trusted Extensions"),enabled:!0,run:()=>this.commandService.executeCommand("_manageTrustedExtensionsForAccount",{providerId:s,accountLabel:l.label})})];l.canSignOut&&p.push(et({id:"signOut",label:d(7055,"Sign Out"),enabled:!0,run:()=>this.commandService.executeCommand("_signOutOfAccount",{providerId:s,accountLabel:l.label})}));const g=new So("activitybar.submenu",`${l.label} (${r})`,p);n.push(g)}}if(i.length&&!n.length){const s=t.add(new de("noAccountsAvailable",d(7056,"You are not signed in to any accounts"),void 0,!1));n.push(s)}return n.length&&o.length&&n.push(new We),o.forEach((s,r)=>{const a=s[1];n=n.concat(a),r!==o.length-1&&n.push(new We)}),n}async resolveContextMenuActions(e){const t=await super.resolveContextMenuActions(e);return this.fillContextMenuActions(t),t}async addOrUpdateAccount(e,t){let i=this.groupedAccounts.get(e);i||(i=[],this.groupedAccounts.set(e,i));const o=await this.sessionFromEmbedder.value;let n=!0;o&&!o.canSignOut&&(await this.authenticationService.getSessions(e)).some(r=>r.id===o.id&&r.account.id===t.id)&&(n=!1);const s=i.find(r=>r.label===t.label);s?n||(s.canSignOut=n):i.push({...t,canSignOut:n})}removeAccount(e,t){const i=this.groupedAccounts.get(e);if(!i)return;const o=i.findIndex(n=>n.id===t.id);o!==-1&&(i.splice(o,1),i.length===0&&this.groupedAccounts.delete(e))}async addAccountsFromProvider(e){try{const t=await this.authenticationService.getSessions(e);this.problematicProviders.delete(e);for(const i of t)try{await this.addOrUpdateAccount(e,i.account)}catch(o){this.logService.error(o)}}catch(t){this.logService.error(t),this.problematicProviders.add(e)}}},lr.ACCOUNTS_VISIBILITY_PREFERENCE_KEY="workbench.activity.showAccounts",lr);Ss=x([u(4,te),u(5,wn),u(6,Xe),u(7,Ve),u(8,yt),u(9,K),u(10,Lv),u(11,bt),u(12,ou),u(13,F),u(14,xe),u(15,Pv),u(16,Je),u(17,Wt),u(18,O),u(19,lt)],Ss);let ol=class extends il{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f){const v=m.createInstance(Fr,{id:yd,name:d(7050,"Manage"),classNames:oe.asClassNameArray(o.currentProfile.icon?oe.fromId(o.currentProfile.icon):Ju)});super(b.GlobalActivity,v,t,e,i,n,s,r,a,l,h,g,f),this.userDataProfileService=o,this._register(v),this._register(this.userDataProfileService.onDidChangeCurrentProfile(S=>{v.compositeBarActionItem={...v.compositeBarActionItem,classNames:oe.asClassNameArray(o.currentProfile.icon?oe.fromId(o.currentProfile.icon):Ju)}}))}render(e){super.render(e),this.profileBadge=ve(e,H(".profile-badge")),this.profileBadgeContent=ve(this.profileBadge,H(".profile-badge-content")),this.updateProfileBadge()}updateProfileBadge(){!this.profileBadge||!this.profileBadgeContent||(Zt(this.profileBadgeContent),Co(this.profileBadge),!this.userDataProfileService.currentProfile.isDefault&&(this.userDataProfileService.currentProfile.icon&&this.userDataProfileService.currentProfile.icon!==Ju.id||this.action.activity||(qi(this.profileBadge),this.profileBadgeContent.classList.add("profile-text-overlay"),this.profileBadgeContent.textContent=this.userDataProfileService.currentProfile.name.substring(0,2).toUpperCase())))}updateActivity(){super.updateActivity(),this.updateProfileBadge()}computeTitle(){return this.userDataProfileService.currentProfile.isDefault?super.computeTitle():d(7057,"Manage {0} (Profile)",this.userDataProfileService.currentProfile.name)}};ol=x([u(3,Rv),u(4,te),u(5,Xe),u(6,yt),u(7,Ve),u(8,K),u(9,F),u(10,bt),u(11,xe),u(12,O),u(13,Wt)],ol);let Ow=class extends Ss{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f,v,S,E,D,V){super(()=>kS(v,!0),{...t,colors:M=>({badgeBackground:M.getColor(vc),badgeForeground:M.getColor(yc)}),hoverOptions:e,compact:!0},()=>{},M=>M,i,o,n,s,r,a,l,h,p,g,m,f,S,E,D,V)}};Ow=x([u(2,te),u(3,wn),u(4,Xe),u(5,Ve),u(6,yt),u(7,K),u(8,Lv),u(9,bt),u(10,ou),u(11,F),u(12,xe),u(13,Pv),u(14,ie),u(15,Je),u(16,Wt),u(17,O),u(18,lt)],Ow);let Nw=class extends ol{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f){super(()=>kS(f,!1),{...t,colors:v=>({badgeBackground:v.getColor(vc),badgeForeground:v.getColor(yc)}),hoverOptions:e,compact:!0},()=>{},i,o,n,s,r,a,l,h,p,g,m)}};Nw=x([u(2,Rv),u(3,te),u(4,Xe),u(5,yt),u(6,Ve),u(7,K),u(8,F),u(9,bt),u(10,xe),u(11,O),u(12,Wt),u(13,ie)],Nw);function kS(c,e){const t=[];return e&&t.push(et({id:"hideAccounts",label:d(7049,"Hide Accounts"),run:()=>nl(c,!1)}),new We),[...t,et({id:"toggle.hideAccounts",label:d(7051,"Accounts"),checked:Xp(c),run:()=>nl(c,!Xp(c))}),et({id:"toggle.hideManage",label:d(7050,"Manage"),checked:!0,enabled:!1,run:()=>{throw new Error('"Manage" can not be hidden')}})]}function Xp(c){return c.getBoolean(Ss.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,0,!0)}function nl(c,e){c.store(Ss.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,e,0,0)}var Fs,Fi;let On=(Fi=class extends rb{constructor(e,t,i,o,n){super("workbench.parts.activitybar",{hasTitle:!1},o,n,i),this.paneCompositePart=e,this.instantiationService=t,this.minimumWidth=48,this.maximumWidth=48,this.minimumHeight=0,this.maximumHeight=Number.POSITIVE_INFINITY,this.compositeBar=this._register(new Se)}createCompositeBar(){return this.instantiationService.createInstance(sl,{partContainerClass:"activitybar",pinnedViewContainersKey:Fs.pinnedViewContainersKey,placeholderViewContainersKey:Fs.placeholderViewContainersKey,viewContainersWorkspaceStateKey:Fs.viewContainersWorkspaceStateKey,orientation:1,icon:!0,iconSize:24,activityHoverOptions:{position:()=>this.layoutService.getSideBarPosition()===0?1:0},preventLoopNavigation:!0,recomputeSizes:!1,fillExtraContextMenuActions:(e,t)=>{},compositeSize:52,colors:e=>({activeForegroundColor:e.getColor(lk),inactiveForegroundColor:e.getColor(hk),activeBorderColor:e.getColor(Bv),activeBackground:e.getColor(Ov),badgeBackground:e.getColor(vc),badgeForeground:e.getColor(yc),dragAndDropBorder:e.getColor(uk),activeBackgroundColor:void 0,inactiveBackgroundColor:void 0,activeBorderBottomColor:void 0}),overflowActionSize:Fs.ACTION_HEIGHT},"workbench.parts.activitybar",this.paneCompositePart,!0)}createContentArea(e){return this.element=e,this.content=ve(this.element,H(".content")),this.layoutService.isVisible("workbench.parts.activitybar")&&this.show(),this.content}getPinnedPaneCompositeIds(){var e;return((e=this.compositeBar.value)==null?void 0:e.getPinnedPaneCompositeIds())??[]}getVisiblePaneCompositeIds(){var e;return((e=this.compositeBar.value)==null?void 0:e.getVisiblePaneCompositeIds())??[]}getPaneCompositeIds(){var e;return((e=this.compositeBar.value)==null?void 0:e.getPaneCompositeIds())??[]}focus(){var e;(e=this.compositeBar.value)==null||e.focus()}updateStyles(){super.updateStyles();const e=ae(this.getContainer()),t=this.getColor(pk)||"";e.style.backgroundColor=t;const i=this.getColor(gk)||this.getColor(Yt)||"";e.classList.toggle("bordered",!!i),e.style.borderColor=i||""}show(e){this.content&&(this.compositeBar.value||(this.compositeBar.value=this.createCompositeBar(),this.compositeBar.value.create(this.content),this.dimension&&this.layout(this.dimension.width,this.dimension.height)),e&&this.focus())}hide(){this.compositeBar.value&&(this.compositeBar.clear(),this.content&&Zt(this.content))}layout(e,t){if(super.layout(e,t,0,0),!this.compositeBar.value)return;const i=super.layoutContents(e,t).contentSize;this.compositeBar.value.layout(e,i.height)}toJSON(){return{type:"workbench.parts.activitybar"}}},Fs=Fi,Fi.ACTION_HEIGHT=48,Fi.pinnedViewContainersKey="workbench.activity.pinnedViewlets2",Fi.placeholderViewContainersKey="workbench.activity.placeholderViewlets",Fi.viewContainersWorkspaceStateKey="workbench.activity.viewletsWorkspaceState",Fi);On=Fs=x([u(1,O),u(2,Y),u(3,te),u(4,ie)],On);let sl=class extends Bd{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f){super({...e,fillExtraContextMenuActions:(v,S)=>{e.fillExtraContextMenuActions(v,S),this.fillContextMenuActions(v,S)}},t,i,n,s,r,a,l,h,p,f),this.configurationService=g,this.menuService=m,this.keyboardNavigationDisposables=this._register(new P),o&&(this.globalCompositeBar=this._register(n.createInstance(tl,()=>this.getContextMenuActions(),v=>this.options.colors(v),this.options.activityHoverOptions))),this._register(this.configurationService.onDidChangeConfiguration(v=>{v.affectsConfiguration("window.menuBarVisibility")&&(Sa(this.configurationService)==="compact"?this.installMenubar():this.uninstallMenubar())}))}fillContextMenuActions(e,t){const i=Sa(this.configurationService);(i==="compact"||i==="hidden"||i==="toggle")&&e.unshift(et({id:"toggleMenuVisibility",label:d(3751,"Menu"),checked:i==="compact",run:()=>this.configurationService.updateValue("window.menuBarVisibility",i==="compact"?"toggle":"compact")}),new We),i==="compact"&&this.menuBarContainer&&(t!=null&&t.target)&&Yi(t.target,this.menuBarContainer)&&e.unshift(et({id:"hideCompactMenu",label:d(3752,"Hide Menu"),run:()=>this.configurationService.updateValue("window.menuBarVisibility","toggle")}),new We),this.globalCompositeBar&&(e.push(new We),e.push(...this.globalCompositeBar.getContextMenuActions())),e.push(new We),e.push(...this.getActivityBarContextMenuActions())}uninstallMenubar(){this.menuBar&&(this.menuBar.dispose(),this.menuBar=void 0),this.menuBarContainer&&(this.menuBarContainer.remove(),this.menuBarContainer=void 0)}installMenubar(){if(this.menuBar)return;this.menuBarContainer=document.createElement("div"),this.menuBarContainer.classList.add("menubar"),ae(this.element).prepend(this.menuBarContainer),this.menuBar=this._register(this.instantiationService.createInstance(Zp)),this.menuBar.create(this.menuBarContainer)}registerKeyboardNavigationListeners(){this.keyboardNavigationDisposables.clear(),this.menuBarContainer&&this.keyboardNavigationDisposables.add(L(this.menuBarContainer,B.KEY_DOWN,e=>{const t=new xi(e);(t.equals(18)||t.equals(17))&&this.focus()})),this.compositeBarContainer&&this.keyboardNavigationDisposables.add(L(this.compositeBarContainer,B.KEY_DOWN,e=>{var i,o;const t=new xi(e);t.equals(18)||t.equals(17)?(i=this.globalCompositeBar)==null||i.focus():(t.equals(16)||t.equals(15))&&((o=this.menuBar)==null||o.toggleFocus())})),this.globalCompositeBar&&this.keyboardNavigationDisposables.add(L(this.globalCompositeBar.element,B.KEY_DOWN,e=>{const t=new xi(e);(t.equals(16)||t.equals(15))&&this.focus(this.getVisiblePaneCompositeIds().length-1)}))}create(e){return this.element=e,Sa(this.configurationService)==="compact"&&this.installMenubar(),this.compositeBarContainer=super.create(this.element),this.globalCompositeBar&&this.globalCompositeBar.create(this.element),this.registerKeyboardNavigationListeners(),this.compositeBarContainer}layout(e,t){this.menuBarContainer&&(this.options.orientation===1?t-=this.menuBarContainer.clientHeight:e-=this.menuBarContainer.clientWidth),this.globalCompositeBar&&(this.options.orientation===1?t-=this.globalCompositeBar.size()*On.ACTION_HEIGHT:e-=this.globalCompositeBar.element.clientWidth),super.layout(e,t)}getActivityBarContextMenuActions(){const e=this.menuService.getMenuActions(b.ActivityBarPositionMenu,this.contextKeyService,{shouldForwardArgs:!0,renderShortTitle:!0}),t=[];return Tr(e,{primary:[],secondary:t}),[new So("workbench.action.panel.position",d(3753,"Activity Bar Position"),t),et({id:kt.ID,label:kt.getLabel(this.layoutService),run:()=>this.instantiationService.invokeFunction(i=>new kt().run(i))})]}};sl=x([u(4,O),u(5,ie),u(6,Vt),u(7,Te),u(8,it),u(9,K),u(10,bt),u(11,F),u(12,yt),u(13,Y)],sl);C(class extends A{constructor(){super({id:"workbench.action.activityBarLocation.default",title:{...w(3754,"Move Activity Bar to Side"),mnemonicTitle:d(3755,"&&Default")},shortTitle:d(3756,"Default"),category:_.View,toggled:y.equals("config.workbench.activityBar.location","default"),menu:[{id:b.ActivityBarPositionMenu,order:1},{id:b.CommandPalette,when:y.notEquals("config.workbench.activityBar.location","default")}]})}run(c){c.get(F).updateValue("workbench.activityBar.location","default")}});C(class extends A{constructor(){super({id:"workbench.action.activityBarLocation.top",title:{...w(3757,"Move Activity Bar to Top"),mnemonicTitle:d(3758,"&&Top")},shortTitle:d(3759,"Top"),category:_.View,toggled:y.equals("config.workbench.activityBar.location","top"),menu:[{id:b.ActivityBarPositionMenu,order:2},{id:b.CommandPalette,when:y.notEquals("config.workbench.activityBar.location","top")}]})}run(c){c.get(F).updateValue("workbench.activityBar.location","top")}});C(class extends A{constructor(){super({id:"workbench.action.activityBarLocation.bottom",title:{...w(3760,"Move Activity Bar to Bottom"),mnemonicTitle:d(3761,"&&Bottom")},shortTitle:d(3762,"Bottom"),category:_.View,toggled:y.equals("config.workbench.activityBar.location","bottom"),menu:[{id:b.ActivityBarPositionMenu,order:3},{id:b.CommandPalette,when:y.notEquals("config.workbench.activityBar.location","bottom")}]})}run(c){c.get(F).updateValue("workbench.activityBar.location","bottom")}});C(class extends A{constructor(){super({id:"workbench.action.activityBarLocation.hide",title:{...w(3763,"Hide Activity Bar"),mnemonicTitle:d(3764,"&&Hidden")},shortTitle:d(3765,"Hidden"),category:_.View,toggled:y.equals("config.workbench.activityBar.location","hidden"),menu:[{id:b.ActivityBarPositionMenu,order:4},{id:b.CommandPalette,when:y.notEquals("config.workbench.activityBar.location","hidden")}]})}run(c){c.get(F).updateValue("workbench.activityBar.location","hidden")}});k.appendMenuItem(b.MenubarAppearanceMenu,{submenu:b.ActivityBarPositionMenu,title:d(3766,"Activity Bar Position"),group:"3_workbench_layout_move",order:2});k.appendMenuItem(b.ViewContainerTitleContext,{submenu:b.ActivityBarPositionMenu,title:d(3766,"Activity Bar Position"),when:y.equals("viewContainerLocation",Ut(0)),group:"3_workbench_layout_move",order:1});k.appendMenuItem(b.ViewTitleContext,{submenu:b.ActivityBarPositionMenu,title:d(3766,"Activity Bar Position"),when:y.equals("viewLocation",Ut(0)),group:"3_workbench_layout_move",order:1});class _S extends A{constructor(e,t){super(e),this.offset=t}async run(e){const t=e.get(Gt),i=t.getVisiblePaneCompositeIds(0),o=t.getActivePaneComposite(0);if(!o)return;let n;for(let s=0;s<i.length;s++)if(i[s]===o.getId()){n=i[(s+i.length+this.offset)%i.length];break}await t.openPaneComposite(n,0,!0)}}C(class extends _S{constructor(){super({id:"workbench.action.previousSideBarView",title:w(3767,"Previous Primary Side Bar View"),category:_.View,f1:!0},-1)}});C(class extends _S{constructor(){super({id:"workbench.action.nextSideBarView",title:w(3768,"Next Primary Side Bar View"),category:_.View,f1:!0},1)}});C(class extends A{constructor(){super({id:"workbench.action.focusActivityBar",title:w(3769,"Focus Activity Bar"),category:_.View,f1:!0})}async run(e){e.get(Y).focusPart("workbench.parts.activitybar")}});nu((c,e)=>{const t=c.getColor(Bv);t&&e.addRule(`
			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked .active-item-indicator:before {
				border-left-color: ${t};
			}
		`);const i=c.getColor(mk);i&&e.addRule(`
			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:focus::before {
				visibility: hidden;
			}

			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:focus .active-item-indicator:before {
				visibility: visible;
				border-left-color: ${i};
			}
		`);const o=c.getColor(Ov);o&&e.addRule(`
			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked .active-item-indicator {
				z-index: 0;
				background-color: ${o};
			}
		`);const n=c.getColor(su);if(n)e.addRule(`
			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item .action-label::before{
				padding: 6px;
			}

			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.active .action-label::before,
			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.active:hover .action-label::before,
			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked .action-label::before,
			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:hover .action-label::before {
				outline: 1px solid ${n};
			}

			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:hover .action-label::before {
				outline: 1px dashed ${n};
			}

			.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:focus .active-item-indicator:before {
				border-left-color: ${n};
			}
		`);else{const s=c.getColor(Nv);s&&e.addRule(`
				.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:focus .active-item-indicator::before {
						border-left-color: ${s};
					}
				`)}});var Jp,qn;let Qp=(qn=class extends ic{get snap(){return!0}get preferredWidth(){const e=this.getActivePaneComposite();if(!e)return;const t=e.getOptimalWidth();if(typeof t=="number")return Math.max(t,300)}constructor(e,t,i,o,n,s,r,a,l,h,p,g,m){super("workbench.parts.sidebar",{hasTitle:!0,borderWidth:()=>this.getColor(Sd)||this.getColor(Yt)?1:0},Jp.activeViewletSettingsKey,fk.bindTo(h),bk.bindTo(h),"sideBar","viewlet",wk,e,t,i,o,n,s,r,a,l,h,p,m),this.configurationService=g,this.minimumWidth=170,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=0,this.maximumHeight=Number.POSITIVE_INFINITY,this.priority=1,this.activityBarPart=this._register(this.instantiationService.createInstance(On,this)),this.rememberActivityBarVisiblePosition(),this._register(g.onDidChangeConfiguration(f=>{f.affectsConfiguration("workbench.activityBar.location")&&this.onDidChangeActivityBarLocation()})),this.registerActions()}onDidChangeActivityBarLocation(){var t;this.activityBarPart.hide(),this.updateCompositeBar();const e=(t=this.getActiveComposite())==null?void 0:t.getId();e&&this.onTitleAreaUpdate(e),this.shouldShowActivityBar()&&this.activityBarPart.show(),this.rememberActivityBarVisiblePosition()}updateStyles(){super.updateStyles();const e=ae(this.getContainer());e.style.backgroundColor=this.getColor(nr)||"",e.style.color=this.getColor(Fv)||"";const t=this.getColor(Sd)||this.getColor(Yt),i=this.layoutService.getSideBarPosition()===0;e.style.borderRightWidth=t&&i?"1px":"",e.style.borderRightStyle=t&&i?"solid":"",e.style.borderRightColor=i&&t||"",e.style.borderLeftWidth=t&&!i?"1px":"",e.style.borderLeftStyle=t&&!i?"solid":"",e.style.borderLeftColor=i?"":t||"",e.style.outlineColor=this.getColor(vk)??""}layout(e,t,i,o){this.layoutService.isVisible("workbench.parts.sidebar")&&super.layout(e,t,i,o)}getTitleAreaDropDownAnchorAlignment(){return this.layoutService.getSideBarPosition()===0?0:1}createCompositeBar(){return this.instantiationService.createInstance(sl,this.getCompositeBarOptions(),this.partId,this,!1)}getCompositeBarOptions(){return{partContainerClass:"sidebar",pinnedViewContainersKey:On.pinnedViewContainersKey,placeholderViewContainersKey:On.placeholderViewContainersKey,viewContainersWorkspaceStateKey:On.viewContainersWorkspaceStateKey,icon:!0,orientation:0,recomputeSizes:!0,activityHoverOptions:{position:()=>this.getCompositeBarPosition()===_e.BOTTOM?3:2},fillExtraContextMenuActions:e=>{const t=this.getViewsSubmenuAction();t&&(e.push(new We),e.push(t))},compositeSize:0,iconSize:16,overflowActionSize:30,colors:e=>({activeBackgroundColor:e.getColor(nr),inactiveBackgroundColor:e.getColor(nr),activeBorderBottomColor:e.getColor(Gv),activeForegroundColor:e.getColor(Wv),inactiveForegroundColor:e.getColor(Hv),badgeBackground:e.getColor(vc),badgeForeground:e.getColor(yc),dragAndDropBorder:e.getColor(zv)}),compact:!0}}shouldShowCompositeBar(){const e=this.configurationService.getValue("workbench.activityBar.location");return e==="top"||e==="bottom"}shouldShowActivityBar(){return this.shouldShowCompositeBar()?!1:this.configurationService.getValue("workbench.activityBar.location")!=="hidden"}getCompositeBarPosition(){switch(this.configurationService.getValue("workbench.activityBar.location")){case"top":return _e.TOP;case"bottom":return _e.BOTTOM;case"hidden":case"default":default:return _e.TITLE}}rememberActivityBarVisiblePosition(){const e=this.configurationService.getValue("workbench.activityBar.location");e!=="hidden"&&this.storageService.store("workbench.activityBar.location",e,0,0)}getRememberedActivityBarVisiblePosition(){switch(this.storageService.get("workbench.activityBar.location",0)){case"top":return"top";case"bottom":return"bottom";default:return"default"}}getPinnedPaneCompositeIds(){return this.shouldShowCompositeBar()?super.getPinnedPaneCompositeIds():this.activityBarPart.getPinnedPaneCompositeIds()}getVisiblePaneCompositeIds(){return this.shouldShowCompositeBar()?super.getVisiblePaneCompositeIds():this.activityBarPart.getVisiblePaneCompositeIds()}getPaneCompositeIds(){return this.shouldShowCompositeBar()?super.getPaneCompositeIds():this.activityBarPart.getPaneCompositeIds()}async focusActivityBar(){this.configurationService.getValue("workbench.activityBar.location")==="hidden"&&(await this.configurationService.updateValue("workbench.activityBar.location",this.getRememberedActivityBarVisiblePosition()),this.onDidChangeActivityBarLocation()),this.shouldShowCompositeBar()?this.focusCompositeBar():(this.layoutService.isVisible("workbench.parts.activitybar")||this.layoutService.setPartHidden(!1,"workbench.parts.activitybar"),this.activityBarPart.show(!0))}registerActions(){const e=this;this._register(C(class extends A{constructor(){super({id:uS,title:w(3750,"Toggle Activity Bar Visibility")})}run(){const t=e.configurationService.getValue("workbench.activityBar.location")==="hidden"?e.getRememberedActivityBarVisiblePosition():"hidden";return e.configurationService.updateValue("workbench.activityBar.location",t)}}))}toJSON(){return{type:"workbench.parts.sidebar"}}},Jp=qn,qn.activeViewletSettingsKey="workbench.sidebar.activeviewletid",qn);Qp=Jp=x([u(0,He),u(1,ie),u(2,Ve),u(3,Y),u(4,xe),u(5,Xe),u(6,O),u(7,te),u(8,Te),u(9,K),u(10,Vt),u(11,F),u(12,yt)],Qp);let eg=class extends R{constructor(e,t,i){super(),this.viewId=e,this.viewDescriptorService=t,this.activityService=i,this.activity=void 0,this.activityDisposable=R.None,this._register(N.filter(this.viewDescriptorService.onDidChangeContainer,o=>o.views.some(n=>n.id===e))(()=>this.update())),this._register(N.filter(this.viewDescriptorService.onDidChangeLocation,o=>o.views.some(n=>n.id===e))(()=>this.update()))}setActivity(e){this.activity=e,this.update()}clearActivity(){this.activity=void 0,this.update()}update(){this.activityDisposable.dispose();const e=this.viewDescriptorService.getViewContainerByViewId(this.viewId);e&&this.activity&&(this.activityDisposable=this.activityService.showViewContainerActivity(e.id,this.activity))}dispose(){this.activityDisposable.dispose(),super.dispose()}};eg=x([u(1,Te),u(2,Wt)],eg);let tg=class extends R{constructor(e,t){super(),this.viewDescriptorService=e,this.instantiationService=t,this.viewActivities=new Map,this._onDidChangeActivity=this._register(new I),this.onDidChangeActivity=this._onDidChangeActivity.event,this.viewContainerActivities=new Map,this.globalActivities=new Map}showViewContainerActivity(e,t){const i=this.viewDescriptorService.getViewContainerById(e);if(i){let o=this.viewContainerActivities.get(e);o||(o=[],this.viewContainerActivities.set(e,o));for(let n=0;n<=o.length;n++)if(n===o.length||Rn(t.priority)){o.push(t);break}else if(Rn(o[n].priority)||o[n].priority<=t.priority){o.splice(n,0,t);break}return this._onDidChangeActivity.fire(i),ne(()=>{o.splice(o.indexOf(t),1),o.length===0&&this.viewContainerActivities.delete(e),this._onDidChangeActivity.fire(i)})}return R.None}getViewContainerActivities(e){return this.viewDescriptorService.getViewContainerById(e)?this.viewContainerActivities.get(e)??[]:[]}showViewActivity(e,t){let i=this.viewActivities.get(e);i?i.id++:(i={id:1,activity:this.instantiationService.createInstance(eg,e)},this.viewActivities.set(e,i));const o=i.id;i.activity.setActivity(t);const n=i;return ne(()=>{n.id===o&&(n.activity.dispose(),this.viewActivities.delete(e))})}showAccountsActivity(e){return this.showActivity(Cd,e)}showGlobalActivity(e){return this.showActivity(yd,e)}getActivity(e){return this.globalActivities.get(e)??[]}showActivity(e,t){let i=this.globalActivities.get(e);return i||(i=[],this.globalActivities.set(e,i)),i.push(t),this._onDidChangeActivity.fire(e),ne(()=>{i.splice(i.indexOf(t),1),i.length===0&&this.globalActivities.delete(e),this._onDidChangeActivity.fire(e)})}};tg=x([u(0,Te),u(1,O)],tg);var ig,$n;let og=($n=class extends ic{get preferredHeight(){return this.layoutService.mainContainerDimension.height*.4}get preferredWidth(){const e=this.getActivePaneComposite();if(!e)return;const t=e.getOptimalWidth();if(typeof t=="number")return Math.max(t,300)}constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f){super("workbench.parts.panel",{hasTitle:!0},ig.activePanelSettingsKey,yk.bindTo(h),Ck.bindTo(h),"panel","panel",void 0,e,t,i,o,n,s,r,a,l,h,p,m),this.commandService=g,this.configurationService=f,this.minimumWidth=300,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=77,this.maximumHeight=Number.POSITIVE_INFINITY,this._register(this.configurationService.onDidChangeConfiguration(v=>{v.affectsConfiguration("workbench.panel.showLabels")&&this.updateCompositeBar(!0)}))}updateStyles(){super.updateStyles();const e=ae(this.getContainer());e.style.backgroundColor=this.getColor(Bu)||"";const t=this.getColor(Ed)||this.getColor(Yt)||"";e.style.borderLeftColor=t,e.style.borderRightColor=t,e.style.borderBottomColor=t;const i=this.getTitleArea();i&&(i.style.borderTopColor=this.getColor(Ed)||this.getColor(Yt)||"")}getCompositeBarOptions(){return{partContainerClass:"panel",pinnedViewContainersKey:"workbench.panel.pinnedPanels",placeholderViewContainersKey:"workbench.panel.placeholderPanels",viewContainersWorkspaceStateKey:"workbench.panel.viewContainersWorkspaceState",icon:this.configurationService.getValue("workbench.panel.showLabels")===!1,orientation:0,recomputeSizes:!0,activityHoverOptions:{position:()=>this.layoutService.getPanelPosition()===2&&!this.layoutService.isPanelMaximized()?3:2},fillExtraContextMenuActions:e=>this.fillExtraContextMenuActions(e),compositeSize:0,iconSize:16,compact:!0,overflowActionSize:44,colors:e=>({activeBackgroundColor:e.getColor(Bu),inactiveBackgroundColor:e.getColor(Bu),activeBorderBottomColor:e.getColor(Uv),activeForegroundColor:e.getColor(Kv),inactiveForegroundColor:e.getColor(qv),badgeBackground:e.getColor(Cv),badgeForeground:e.getColor(yv),dragAndDropBorder:e.getColor($v)})}}fillExtraContextMenuActions(e){const t=this.menuService.getMenuActions(b.PanelPositionMenu,this.contextKeyService,{shouldForwardArgs:!0}),i=this.menuService.getMenuActions(b.PanelAlignmentMenu,this.contextKeyService,{shouldForwardArgs:!0}),o=[],n=[];Tr(t,{primary:[],secondary:o}),Tr(i,{primary:[],secondary:n});const s=this.configurationService.getValue("workbench.panel.showLabels"),r=et({id:"workbench.action.panel.toggleShowLabels",label:s?d(3770,"Show Icons"):d(3771,"Show Labels"),run:()=>this.configurationService.updateValue("workbench.panel.showLabels",!s)});e.push(new We,new So("workbench.action.panel.position",d(3772,"Panel Position"),o),new So("workbench.action.panel.align",d(3773,"Align Panel"),n),r,et({id:fn.ID,label:d(3774,"Hide Panel"),run:()=>this.commandService.executeCommand(fn.ID)}))}layout(e,t,i,o){let n;switch(this.layoutService.getPanelPosition()){case 1:n=new he(e-1,t);break;case 3:n=new he(e,t-1);break;default:n=new he(e,t);break}super.layout(n.width,n.height,i,o)}shouldShowCompositeBar(){return!0}getCompositeBarPosition(){return _e.TITLE}toJSON(){return{type:"workbench.parts.panel"}}},ig=$n,$n.activePanelSettingsKey="workbench.panelpart.activepanelid",$n);og=ig=x([u(0,He),u(1,ie),u(2,Ve),u(3,Y),u(4,xe),u(5,Xe),u(6,O),u(7,te),u(8,Te),u(9,K),u(10,Vt),u(11,lt),u(12,yt),u(13,F)],og);var ZT=".monaco-workbench.noauxiliarybar .part.auxiliarybar{display:none!important;visibility:hidden!important}.monaco-workbench .part.auxiliarybar>.content .monaco-editor,.monaco-workbench .part.auxiliarybar>.content .monaco-editor .margin,.monaco-workbench .part.auxiliarybar>.content .monaco-editor .monaco-editor-background{background-color:var(--vscode-sideBar-background)}.monaco-workbench .part.auxiliarybar .title-actions .actions-container{justify-content:flex-end}.monaco-workbench .part.auxiliarybar .title-actions .action-item{margin-right:4px}.monaco-workbench .part.auxiliarybar>.title{background-color:var(--vscode-sideBarTitle-background)}.monaco-workbench .part.auxiliarybar>.title>.title-label{flex:1}.monaco-workbench .part.auxiliarybar>.title>.title-label h2{text-transform:uppercase}.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container{flex:1}.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus,.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus{outline:0!important}.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label,.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label{border-radius:0;outline-offset:2px}.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label:before,.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item .action-label:before{left:5px;position:absolute}.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked.clicked:focus .active-item-indicator:before,.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator:before{border-top-color:var(--vscode-panelTitle-activeBorder)!important}.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked.clicked:focus .active-item-indicator:before,.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator:before{border-top-color:var(--vscode-activityBarTop-activeBorder)!important}.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .action-label,.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label{color:var(--vscode-sideBarTitle-foreground)!important}.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:focus .action-label,.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label{color:var(--vscode-activityBarTop-foreground)!important}.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked .action-label,.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label,.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item.checked .action-label,.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:hover .action-label{outline:var(--vscode-contrastActiveBorder,unset) solid 1px!important}.monaco-workbench .part.auxiliarybar>.header-or-footer>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:not(.checked):hover .action-label,.monaco-workbench .part.auxiliarybar>.title>.composite-bar-container>.composite-bar>.monaco-action-bar .action-item:not(.checked):hover .action-label{outline:var(--vscode-contrastActiveBorder,unset) dashed 1px!important}.monaco-workbench .auxiliarybar.part.pane-composite-part>.composite.title>.title-actions{flex:inherit}.monaco-workbench .auxiliarybar.pane-composite-part>.title.has-composite-bar>.title-actions .monaco-action-bar .action-item{max-width:150px}";we(ZT,{});var Gs,Gi;let ng=(Gi=class extends ic{get preferredHeight(){return this.layoutService.mainContainerDimension.height*.4}get preferredWidth(){const e=this.getActivePaneComposite();if(!e)return;const t=e.getOptimalWidth();if(typeof t=="number")return Math.max(t,300)}constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f){super("workbench.parts.auxiliarybar",{hasTitle:!0,borderWidth:()=>this.getColor(Sd)||this.getColor(Yt)?1:0},Gs.activePanelSettingsKey,Sk.bindTo(h),Ek.bindTo(h),"auxiliarybar","auxiliarybar",void 0,e,t,i,o,n,s,r,a,l,h,p,m),this.commandService=g,this.configurationService=f,this.minimumWidth=170,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=0,this.maximumHeight=Number.POSITIVE_INFINITY,this.priority=1,this._register(f.onDidChangeConfiguration(v=>{v.affectsConfiguration("workbench.activityBar.location")&&this.onDidChangeActivityBarLocation()}))}onDidChangeActivityBarLocation(){var t;this.updateCompositeBar();const e=(t=this.getActiveComposite())==null?void 0:t.getId();e&&this.onTitleAreaUpdate(e)}updateStyles(){super.updateStyles();const e=ae(this.getContainer());e.style.backgroundColor=this.getColor(nr)||"";const t=this.getColor(Sd)||this.getColor(Yt),i=this.layoutService.getSideBarPosition()===1;e.style.color=this.getColor(Fv)||"",e.style.borderLeftColor=t??"",e.style.borderRightColor=t??"",e.style.borderLeftStyle=t&&!i?"solid":"none",e.style.borderRightStyle=t&&i?"solid":"none",e.style.borderLeftWidth=t&&!i?"1px":"0px",e.style.borderRightWidth=t&&i?"1px":"0px"}getCompositeBarOptions(){const e=this;return{partContainerClass:"auxiliarybar",pinnedViewContainersKey:Gs.pinnedPanelsKey,placeholderViewContainersKey:Gs.placeholdeViewContainersKey,viewContainersWorkspaceStateKey:Gs.viewContainersWorkspaceStateKey,icon:!0,orientation:0,recomputeSizes:!0,activityHoverOptions:{position:()=>this.getCompositeBarPosition()===_e.BOTTOM?3:2},fillExtraContextMenuActions:t=>this.fillExtraContextMenuActions(t),compositeSize:0,iconSize:16,get overflowActionSize(){return e.getCompositeBarPosition()===_e.TITLE?40:30},colors:t=>({activeBackgroundColor:t.getColor(nr),inactiveBackgroundColor:t.getColor(nr),get activeBorderBottomColor(){return e.getCompositeBarPosition()===_e.TITLE?t.getColor(Uv):t.getColor(Gv)},get activeForegroundColor(){return e.getCompositeBarPosition()===_e.TITLE?t.getColor(Kv):t.getColor(Wv)},get inactiveForegroundColor(){return e.getCompositeBarPosition()===_e.TITLE?t.getColor(qv):t.getColor(Hv)},badgeBackground:t.getColor(vc),badgeForeground:t.getColor(yc),get dragAndDropBorder(){return e.getCompositeBarPosition()===_e.TITLE?t.getColor($v):t.getColor(zv)}}),compact:!0}}fillExtraContextMenuActions(e){const t=this.layoutService.getSideBarPosition()===0,i=this.getViewsSubmenuAction();i&&(e.push(new We),e.push(i));const o=this.menuService.getMenuActions(b.ActivityBarPositionMenu,this.contextKeyService,{shouldForwardArgs:!0,renderShortTitle:!0}),n=[];Tr(o,{primary:[],secondary:n}),e.push(new We,new So("workbench.action.panel.position",d(3775,"Activity Bar Position"),n),et({id:kt.ID,label:t?d(3776,"Move Secondary Side Bar Left"):d(3777,"Move Secondary Side Bar Right"),run:()=>this.commandService.executeCommand(kt.ID)}),et({id:ji.ID,label:d(3778,"Hide Secondary Side Bar"),run:()=>this.commandService.executeCommand(ji.ID)}))}shouldShowCompositeBar(){return this.configurationService.getValue("workbench.activityBar.location")!=="hidden"}getCompositeBarPosition(){switch(this.configurationService.getValue("workbench.activityBar.location")){case"top":return _e.TOP;case"bottom":return _e.BOTTOM;case"hidden":return _e.TITLE;case"default":return _e.TITLE;default:return _e.TITLE}}createHeaderArea(){const e=super.createHeaderArea(),t=H(".auxiliary-bar-global-header"),i=this.headerFooterCompositeBarDispoables.add(this.instantiationService.createInstance(kv,b.AuxiliaryBarHeader,void 0,void 0)),o=this.headerFooterCompositeBarDispoables.add(this.instantiationService.createInstance(Xh,t,{actionViewItemProvider:(n,s)=>this.headerActionViewItemProvider(n,s),orientation:0,hiddenItemStrategy:-1,getKeyBinding:n=>this.keybindingService.lookupKeybinding(n.id)}));return o.setActions(cn(i.getPrimaryActions())),this.headerFooterCompositeBarDispoables.add(i.onDidChange(()=>o.setActions(cn(i.getPrimaryActions())))),e.appendChild(t),e}headerActionViewItemProvider(e,t){if(e.id===ji.ID)return this.instantiationService.createInstance(Ef,void 0,e,t)}toJSON(){return{type:"workbench.parts.auxiliarybar"}}},Gs=Gi,Gi.activePanelSettingsKey="workbench.auxiliarybar.activepanelid",Gi.pinnedPanelsKey="workbench.auxiliarybar.pinnedPanels",Gi.placeholdeViewContainersKey="workbench.auxiliarybar.placeholderPanels",Gi.viewContainersWorkspaceStateKey="workbench.auxiliarybar.viewContainersWorkspaceState",Gi);ng=Gs=x([u(0,He),u(1,ie),u(2,Ve),u(3,Y),u(4,xe),u(5,Xe),u(6,O),u(7,te),u(8,Te),u(9,K),u(10,Vt),u(11,lt),u(12,yt),u(13,F)],ng);var XT=".monaco-grid-view{overflow:hidden;position:relative}.monaco-grid-branch-node,.monaco-grid-view{height:100%;width:100%}";we(XT,{});const JT={separatorBorder:at.transparent};function Ki(c){return c===0?1:0}class QT{constructor(e){this.isLayoutEnabled=e}}function e1(c,e){return e===1?{left:c.start,right:c.end,top:c.orthogonalStart,bottom:c.orthogonalEnd}:{top:c.start,bottom:c.end,left:c.orthogonalStart,right:c.orthogonalEnd}}function t1(c,e){return e===1?{start:c.left,end:c.right,orthogonalStart:c.top,orthogonalEnd:c.bottom}:{start:c.top,end:c.bottom,orthogonalStart:c.left,orthogonalEnd:c.right}}function bi(c,e){if(Math.abs(c)>e)throw new Error("Invalid index");return kk(c,e+1)}class Pe{get size(){return this._size}get orthogonalSize(){return this._orthogonalSize}get absoluteOffset(){return this._absoluteOffset}get absoluteOrthogonalOffset(){return this._absoluteOrthogonalOffset}get styles(){return this._styles}get width(){return this.orientation===1?this.size:this.orthogonalSize}get height(){return this.orientation===1?this.orthogonalSize:this.size}get top(){return this.orientation===1?this._absoluteOffset:this._absoluteOrthogonalOffset}get left(){return this.orientation===1?this._absoluteOrthogonalOffset:this._absoluteOffset}get minimumSize(){return this.children.length===0?0:Math.max(...this.children.map((e,t)=>this.splitview.isViewVisible(t)?e.minimumOrthogonalSize:0))}get maximumSize(){return Math.min(...this.children.map((e,t)=>this.splitview.isViewVisible(t)?e.maximumOrthogonalSize:Number.POSITIVE_INFINITY))}get priority(){if(this.children.length===0)return 0;const e=this.children.map(t=>typeof t.priority>"u"?0:t.priority);return e.some(t=>t===2)?2:e.some(t=>t===1)?1:0}get proportionalLayout(){return this.children.length===0?!0:this.children.every(e=>e.proportionalLayout)}get minimumOrthogonalSize(){return this.splitview.minimumSize}get maximumOrthogonalSize(){return this.splitview.maximumSize}get minimumWidth(){return this.orientation===1?this.minimumOrthogonalSize:this.minimumSize}get minimumHeight(){return this.orientation===1?this.minimumSize:this.minimumOrthogonalSize}get maximumWidth(){return this.orientation===1?this.maximumOrthogonalSize:this.maximumSize}get maximumHeight(){return this.orientation===1?this.maximumSize:this.maximumOrthogonalSize}get boundarySashes(){return this._boundarySashes}set boundarySashes(e){if(!(this._boundarySashes.start===e.start&&this._boundarySashes.end===e.end&&this._boundarySashes.orthogonalStart===e.orthogonalStart&&this._boundarySashes.orthogonalEnd===e.orthogonalEnd)){this._boundarySashes=e,this.splitview.orthogonalStartSash=e.orthogonalStart,this.splitview.orthogonalEndSash=e.orthogonalEnd;for(let t=0;t<this.children.length;t++){const i=this.children[t],o=t===0,n=t===this.children.length-1;i.boundarySashes={start:e.orthogonalStart,end:e.orthogonalEnd,orthogonalStart:o?e.start:i.boundarySashes.orthogonalStart,orthogonalEnd:n?e.end:i.boundarySashes.orthogonalEnd}}}}get edgeSnapping(){return this._edgeSnapping}set edgeSnapping(e){if(this._edgeSnapping!==e){this._edgeSnapping=e;for(const t of this.children)t instanceof Pe&&(t.edgeSnapping=e);this.updateSplitviewEdgeSnappingEnablement()}}constructor(e,t,i,o,n=0,s=0,r=!1,a){if(this.orientation=e,this.layoutController=t,this.splitviewProportionalLayout=o,this.children=[],this._absoluteOffset=0,this._absoluteOrthogonalOffset=0,this.absoluteOrthogonalSize=0,this._onDidChange=new I,this.onDidChange=this._onDidChange.event,this._onDidVisibilityChange=new I,this.onDidVisibilityChange=this._onDidVisibilityChange.event,this.childrenVisibilityChangeDisposable=new P,this._onDidScroll=new I,this.onDidScrollDisposable=R.None,this.onDidScroll=this._onDidScroll.event,this.childrenChangeDisposable=R.None,this._onDidSashReset=new I,this.onDidSashReset=this._onDidSashReset.event,this.splitviewSashResetDisposable=R.None,this.childrenSashResetDisposable=R.None,this._boundarySashes={},this._edgeSnapping=!1,this._styles=i,this._size=n,this._orthogonalSize=s,this.element=H(".monaco-grid-branch-node"),!a)this.splitview=new $a(this.element,{orientation:e,styles:i,proportionalLayout:o}),this.splitview.layout(n,{orthogonalSize:s,absoluteOffset:0,absoluteOrthogonalOffset:0,absoluteSize:n,absoluteOrthogonalSize:s});else{const h={views:a.map(g=>({view:g.node,size:g.node.size,visible:g.visible!==!1})),size:this.orthogonalSize},p={proportionalLayout:o,orientation:e,styles:i};this.children=a.map(g=>g.node),this.splitview=new $a(this.element,{...p,descriptor:h}),this.children.forEach((g,m)=>{const f=m===0,v=m===this.children.length;g.boundarySashes={start:this.boundarySashes.orthogonalStart,end:this.boundarySashes.orthogonalEnd,orthogonalStart:f?this.boundarySashes.start:this.splitview.sashes[m-1],orthogonalEnd:v?this.boundarySashes.end:this.splitview.sashes[m]}})}const l=N.map(this.splitview.onDidSashReset,h=>[h]);this.splitviewSashResetDisposable=l(this._onDidSashReset.fire,this._onDidSashReset),this.updateChildrenEvents()}style(e){this._styles=e,this.splitview.style(e);for(const t of this.children)t instanceof Pe&&t.style(e)}layout(e,t,i){if(this.layoutController.isLayoutEnabled){if(typeof i>"u")throw new Error("Invalid state");this._size=i.orthogonalSize,this._orthogonalSize=e,this._absoluteOffset=i.absoluteOffset+t,this._absoluteOrthogonalOffset=i.absoluteOrthogonalOffset,this.absoluteOrthogonalSize=i.absoluteOrthogonalSize,this.splitview.layout(i.orthogonalSize,{orthogonalSize:e,absoluteOffset:this._absoluteOrthogonalOffset,absoluteOrthogonalOffset:this._absoluteOffset,absoluteSize:i.absoluteOrthogonalSize,absoluteOrthogonalSize:i.absoluteSize}),this.updateSplitviewEdgeSnappingEnablement()}}setVisible(e){for(const t of this.children)t.setVisible(e)}addChild(e,t,i,o){i=bi(i,this.children.length),this.splitview.addView(e,t,i,o),this.children.splice(i,0,e),this.updateBoundarySashes(),this.onDidChildrenChange()}removeChild(e,t){e=bi(e,this.children.length);const i=this.splitview.removeView(e,t);return this.children.splice(e,1),this.updateBoundarySashes(),this.onDidChildrenChange(),i}removeAllChildren(){const e=this.splitview.removeAllViews();return this.children.splice(0,this.children.length),this.updateBoundarySashes(),this.onDidChildrenChange(),e}moveChild(e,t){e=bi(e,this.children.length),t=bi(t,this.children.length),e!==t&&(e<t&&(t-=1),this.splitview.moveView(e,t),this.children.splice(t,0,this.children.splice(e,1)[0]),this.updateBoundarySashes(),this.onDidChildrenChange())}swapChildren(e,t){e=bi(e,this.children.length),t=bi(t,this.children.length),e!==t&&(this.splitview.swapViews(e,t),[this.children[e].boundarySashes,this.children[t].boundarySashes]=[this.children[e].boundarySashes,this.children[t].boundarySashes],[this.children[e],this.children[t]]=[this.children[t],this.children[e]],this.onDidChildrenChange())}resizeChild(e,t){e=bi(e,this.children.length),this.splitview.resizeView(e,t)}isChildExpanded(e){return this.splitview.isViewExpanded(e)}distributeViewSizes(e=!1){if(this.splitview.distributeViewSizes(),e)for(const t of this.children)t instanceof Pe&&t.distributeViewSizes(!0)}getChildSize(e){return e=bi(e,this.children.length),this.splitview.getViewSize(e)}isChildVisible(e){return e=bi(e,this.children.length),this.splitview.isViewVisible(e)}setChildVisible(e,t){if(e=bi(e,this.children.length),this.splitview.isViewVisible(e)===t)return;const i=this.splitview.contentSize===0;this.splitview.setViewVisible(e,t);const o=this.splitview.contentSize===0;(t&&i||!t&&o)&&this._onDidVisibilityChange.fire(t)}getChildCachedVisibleSize(e){return e=bi(e,this.children.length),this.splitview.getViewCachedVisibleSize(e)}updateBoundarySashes(){for(let e=0;e<this.children.length;e++)this.children[e].boundarySashes={start:this.boundarySashes.orthogonalStart,end:this.boundarySashes.orthogonalEnd,orthogonalStart:e===0?this.boundarySashes.start:this.splitview.sashes[e-1],orthogonalEnd:e===this.children.length-1?this.boundarySashes.end:this.splitview.sashes[e]}}onDidChildrenChange(){this.updateChildrenEvents(),this._onDidChange.fire(void 0)}updateChildrenEvents(){const e=N.map(N.any(...this.children.map(o=>o.onDidChange)),()=>{});this.childrenChangeDisposable.dispose(),this.childrenChangeDisposable=e(this._onDidChange.fire,this._onDidChange);const t=N.any(...this.children.map((o,n)=>N.map(o.onDidSashReset,s=>[n,...s])));this.childrenSashResetDisposable.dispose(),this.childrenSashResetDisposable=t(this._onDidSashReset.fire,this._onDidSashReset);const i=N.any(N.signal(this.splitview.onDidScroll),...this.children.map(o=>o.onDidScroll));this.onDidScrollDisposable.dispose(),this.onDidScrollDisposable=i(this._onDidScroll.fire,this._onDidScroll),this.childrenVisibilityChangeDisposable.clear(),this.children.forEach((o,n)=>{o instanceof Pe&&this.childrenVisibilityChangeDisposable.add(o.onDidVisibilityChange(s=>{this.setChildVisible(n,s)}))})}trySet2x2(e){if(this.children.length!==2||e.children.length!==2)return R.None;if(this.getChildSize(0)!==e.getChildSize(0))return R.None;const[t,i]=this.children,[o,n]=e.children;if(!(t instanceof Qe)||!(i instanceof Qe))return R.None;if(!(o instanceof Qe)||!(n instanceof Qe))return R.None;this.orientation===0?(i.linkedWidthNode=o.linkedHeightNode=t,t.linkedWidthNode=n.linkedHeightNode=i,n.linkedWidthNode=t.linkedHeightNode=o,o.linkedWidthNode=i.linkedHeightNode=n):(o.linkedWidthNode=i.linkedHeightNode=t,n.linkedWidthNode=t.linkedHeightNode=i,t.linkedWidthNode=n.linkedHeightNode=o,i.linkedWidthNode=o.linkedHeightNode=n);const s=this.splitview.sashes[0],r=e.splitview.sashes[0];return s.linkedSash=r,r.linkedSash=s,this._onDidChange.fire(void 0),e._onDidChange.fire(void 0),ne(()=>{s.linkedSash=r.linkedSash=void 0,t.linkedHeightNode=t.linkedWidthNode=void 0,i.linkedHeightNode=i.linkedWidthNode=void 0,o.linkedHeightNode=o.linkedWidthNode=void 0,n.linkedHeightNode=n.linkedWidthNode=void 0})}updateSplitviewEdgeSnappingEnablement(){this.splitview.startSnappingEnabled=this._edgeSnapping||this._absoluteOrthogonalOffset>0,this.splitview.endSnappingEnabled=this._edgeSnapping||this._absoluteOrthogonalOffset+this._size<this.absoluteOrthogonalSize}dispose(){for(const e of this.children)e.dispose();this._onDidChange.dispose(),this._onDidSashReset.dispose(),this._onDidVisibilityChange.dispose(),this.childrenVisibilityChangeDisposable.dispose(),this.splitviewSashResetDisposable.dispose(),this.childrenSashResetDisposable.dispose(),this.childrenChangeDisposable.dispose(),this.onDidScrollDisposable.dispose(),this.splitview.dispose()}}function i1(c){const[e,t]=N.split(c.onDidChange,Rn);return N.any(t,N.map(N.latch(N.map(e,i=>[c.minimumWidth,c.maximumWidth,c.minimumHeight,c.maximumHeight]),fs),i=>{}))}class Qe{get size(){return this._size}get orthogonalSize(){return this._orthogonalSize}get linkedWidthNode(){return this._linkedWidthNode}set linkedWidthNode(e){this._onDidLinkedWidthNodeChange.input=e?e._onDidViewChange:N.None,this._linkedWidthNode=e,this._onDidSetLinkedNode.fire(void 0)}get linkedHeightNode(){return this._linkedHeightNode}set linkedHeightNode(e){this._onDidLinkedHeightNodeChange.input=e?e._onDidViewChange:N.None,this._linkedHeightNode=e,this._onDidSetLinkedNode.fire(void 0)}constructor(e,t,i,o,n=0){this.view=e,this.orientation=t,this.layoutController=i,this._size=0,this.absoluteOffset=0,this.absoluteOrthogonalOffset=0,this.onDidScroll=N.None,this.onDidSashReset=N.None,this._onDidLinkedWidthNodeChange=new bo,this._linkedWidthNode=void 0,this._onDidLinkedHeightNodeChange=new bo,this._linkedHeightNode=void 0,this._onDidSetLinkedNode=new I,this.disposables=new P,this._boundarySashes={},this.cachedWidth=0,this.cachedHeight=0,this.cachedTop=0,this.cachedLeft=0,this._orthogonalSize=o,this._size=n;const s=i1(e);this._onDidViewChange=N.map(s,r=>r&&(this.orientation===0?r.width:r.height),this.disposables),this.onDidChange=N.any(this._onDidViewChange,this._onDidSetLinkedNode.event,this._onDidLinkedWidthNodeChange.event,this._onDidLinkedHeightNodeChange.event)}get width(){return this.orientation===1?this.orthogonalSize:this.size}get height(){return this.orientation===1?this.size:this.orthogonalSize}get top(){return this.orientation===1?this.absoluteOffset:this.absoluteOrthogonalOffset}get left(){return this.orientation===1?this.absoluteOrthogonalOffset:this.absoluteOffset}get element(){return this.view.element}get minimumWidth(){return this.linkedWidthNode?Math.max(this.linkedWidthNode.view.minimumWidth,this.view.minimumWidth):this.view.minimumWidth}get maximumWidth(){return this.linkedWidthNode?Math.min(this.linkedWidthNode.view.maximumWidth,this.view.maximumWidth):this.view.maximumWidth}get minimumHeight(){return this.linkedHeightNode?Math.max(this.linkedHeightNode.view.minimumHeight,this.view.minimumHeight):this.view.minimumHeight}get maximumHeight(){return this.linkedHeightNode?Math.min(this.linkedHeightNode.view.maximumHeight,this.view.maximumHeight):this.view.maximumHeight}get minimumSize(){return this.orientation===1?this.minimumHeight:this.minimumWidth}get maximumSize(){return this.orientation===1?this.maximumHeight:this.maximumWidth}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return this.view.snap}get minimumOrthogonalSize(){return this.orientation===1?this.minimumWidth:this.minimumHeight}get maximumOrthogonalSize(){return this.orientation===1?this.maximumWidth:this.maximumHeight}get boundarySashes(){return this._boundarySashes}set boundarySashes(e){var t,i;this._boundarySashes=e,(i=(t=this.view).setBoundarySashes)==null||i.call(t,e1(e,this.orientation))}layout(e,t,i){if(this.layoutController.isLayoutEnabled){if(typeof i>"u")throw new Error("Invalid state");this._size=e,this._orthogonalSize=i.orthogonalSize,this.absoluteOffset=i.absoluteOffset+t,this.absoluteOrthogonalOffset=i.absoluteOrthogonalOffset,this._layout(this.width,this.height,this.top,this.left)}}_layout(e,t,i,o){this.cachedWidth===e&&this.cachedHeight===t&&this.cachedTop===i&&this.cachedLeft===o||(this.cachedWidth=e,this.cachedHeight=t,this.cachedTop=i,this.cachedLeft=o,this.view.layout(e,t,i,o))}setVisible(e){var t,i;(i=(t=this.view).setVisible)==null||i.call(t,e)}dispose(){this.disposables.dispose()}}function xS(c,e,t){if(c instanceof Pe){const i=new Pe(Ki(c.orientation),c.layoutController,c.styles,c.splitviewProportionalLayout,e,t,c.edgeSnapping);let o=0;for(let n=c.children.length-1;n>=0;n--){const s=c.children[n],r=s instanceof Pe?s.orthogonalSize:s.size;let a=c.size===0?0:Math.round(e*r/c.size);o+=a,n===0&&(a+=e-o),i.addChild(xS(s,t,a),a,0,!0)}return c.dispose(),i}else{const i=new Qe(c.view,Ki(c.orientation),c.layoutController,t);return c.dispose(),i}}class ar{get root(){return this._root}set root(e){const t=this._root;t&&(t.element.remove(),t.dispose()),this._root=e,this.element.appendChild(e.element),this.onDidSashResetRelay.input=e.onDidSashReset,this._onDidChange.input=N.map(e.onDidChange,()=>{}),this._onDidScroll.input=e.onDidScroll}get width(){return this.root.width}get height(){return this.root.height}get minimumWidth(){return this.root.minimumWidth}get minimumHeight(){return this.root.minimumHeight}get maximumWidth(){return this.root.maximumHeight}get maximumHeight(){return this.root.maximumHeight}get orientation(){return this._root.orientation}get boundarySashes(){return this._boundarySashes}set orientation(e){if(this._root.orientation===e)return;const{size:t,orthogonalSize:i,absoluteOffset:o,absoluteOrthogonalOffset:n}=this._root;this.root=xS(this._root,i,t),this.root.layout(t,0,{orthogonalSize:i,absoluteOffset:n,absoluteOrthogonalOffset:o,absoluteSize:t,absoluteOrthogonalSize:i}),this.boundarySashes=this.boundarySashes}set boundarySashes(e){this._boundarySashes=e,this.root.boundarySashes=t1(e,this.orientation)}set edgeSnapping(e){this.root.edgeSnapping=e}constructor(e={}){this.onDidSashResetRelay=new bo,this._onDidScroll=new bo,this._onDidChange=new bo,this._boundarySashes={},this.disposable2x2=R.None,this.onDidSashReset=this.onDidSashResetRelay.event,this.onDidScroll=this._onDidScroll.event,this.onDidChange=this._onDidChange.event,this.maximizedNode=void 0,this._onDidChangeViewMaximized=new I,this.onDidChangeViewMaximized=this._onDidChangeViewMaximized.event,this.element=H(".monaco-grid-view"),this.styles=e.styles||JT,this.proportionalLayout=typeof e.proportionalLayout<"u"?!!e.proportionalLayout:!0,this.layoutController=new QT(!1),this.root=new Pe(0,this.layoutController,this.styles,this.proportionalLayout)}style(e){this.styles=e,this.root.style(e)}layout(e,t,i=0,o=0){this.layoutController.isLayoutEnabled=!0;const[n,s,r,a]=this.root.orientation===1?[t,e,i,o]:[e,t,o,i];this.root.layout(n,0,{orthogonalSize:s,absoluteOffset:r,absoluteOrthogonalOffset:a,absoluteSize:n,absoluteOrthogonalSize:s})}addView(e,t,i){this.hasMaximizedView()&&this.exitMaximizedView(),this.disposable2x2.dispose(),this.disposable2x2=R.None;const[o,n]=Ye(i),[s,r]=this.getNode(o);if(r instanceof Pe){const a=new Qe(e,Ki(r.orientation),this.layoutController,r.orthogonalSize);try{r.addChild(a,t,n)}catch(l){throw a.dispose(),l}}else{const[,a]=Ye(s),[,l]=Ye(o);let h=0;const p=a.getChildCachedVisibleSize(l);typeof p=="number"&&(h=Kt.Invisible(p)),a.removeChild(l).dispose();const m=new Pe(r.orientation,r.layoutController,this.styles,this.proportionalLayout,r.size,r.orthogonalSize,a.edgeSnapping);a.addChild(m,r.size,l);const f=new Qe(r.view,a.orientation,this.layoutController,r.size);m.addChild(f,h,0),typeof t!="number"&&t.type==="split"&&(t=Kt.Split(0));const v=new Qe(e,a.orientation,this.layoutController,r.size);m.addChild(v,t,n)}this.trySet2x2()}removeView(e,t){this.hasMaximizedView()&&this.exitMaximizedView(),this.disposable2x2.dispose(),this.disposable2x2=R.None;const[i,o]=Ye(e),[n,s]=this.getNode(i);if(!(s instanceof Pe))throw new Error("Invalid location");const r=s.children[o];if(!(r instanceof Qe))throw new Error("Invalid location");if(s.removeChild(o,t),r.dispose(),s.children.length===0)throw new Error("Invalid grid state");if(s.children.length>1)return this.trySet2x2(),r.view;if(n.length===0){const m=s.children[0];return m instanceof Qe||(s.removeChild(0),s.dispose(),this.root=m,this.boundarySashes=this.boundarySashes,this.trySet2x2()),r.view}const[,a]=Ye(n),[,l]=Ye(i),h=s.isChildVisible(0),p=s.removeChild(0),g=a.children.map((m,f)=>a.getChildSize(f));if(a.removeChild(l,t),s.dispose(),p instanceof Pe){g.splice(l,1,...p.children.map(f=>f.size));const m=p.removeAllChildren();for(let f=0;f<m.length;f++)a.addChild(m[f],m[f].size,l+f)}else{const m=new Qe(p.view,Ki(p.orientation),this.layoutController,p.size),f=h?p.orthogonalSize:Kt.Invisible(p.orthogonalSize);a.addChild(m,f,l)}p.dispose();for(let m=0;m<g.length;m++)a.resizeChild(m,g[m]);return this.trySet2x2(),r.view}moveView(e,t,i){this.hasMaximizedView()&&this.exitMaximizedView();const[,o]=this.getNode(e);if(!(o instanceof Pe))throw new Error("Invalid location");o.moveChild(t,i),this.trySet2x2()}swapViews(e,t){this.hasMaximizedView()&&this.exitMaximizedView();const[i,o]=Ye(e),[,n]=this.getNode(i);if(!(n instanceof Pe))throw new Error("Invalid from location");const s=n.getChildSize(o),r=n.children[o];if(!(r instanceof Qe))throw new Error("Invalid from location");const[a,l]=Ye(t),[,h]=this.getNode(a);if(!(h instanceof Pe))throw new Error("Invalid to location");const p=h.getChildSize(l),g=h.children[l];if(!(g instanceof Qe))throw new Error("Invalid to location");n===h?n.swapChildren(o,l):(n.removeChild(o),h.removeChild(l),n.addChild(g,s,o),h.addChild(r,p,l)),this.trySet2x2()}resizeView(e,t){this.hasMaximizedView()&&this.exitMaximizedView();const[i,o]=Ye(e),[n,s]=this.getNode(i);if(!(s instanceof Pe))throw new Error("Invalid location");if(!t.width&&!t.height)return;const[r,a]=s.orientation===1?[t.width,t.height]:[t.height,t.width];if(typeof a=="number"&&n.length>0){const[,l]=Ye(n),[,h]=Ye(i);l.resizeChild(h,a)}typeof r=="number"&&s.resizeChild(o,r),this.trySet2x2()}getViewSize(e){if(!e)return{width:this.root.width,height:this.root.height};const[,t]=this.getNode(e);return{width:t.width,height:t.height}}getViewCachedVisibleSize(e){const[t,i]=Ye(e),[,o]=this.getNode(t);if(!(o instanceof Pe))throw new Error("Invalid location");return o.getChildCachedVisibleSize(i)}expandView(e){this.hasMaximizedView()&&this.exitMaximizedView();const[t,i]=this.getNode(e);if(!(i instanceof Qe))throw new Error("Invalid location");for(let o=0;o<t.length;o++)t[o].resizeChild(e[o],Number.POSITIVE_INFINITY)}isViewExpanded(e){if(this.hasMaximizedView())return!1;const[t,i]=this.getNode(e);if(!(i instanceof Qe))throw new Error("Invalid location");for(let o=0;o<t.length;o++)if(!t[o].isChildExpanded(e[o]))return!1;return!0}maximizeView(e){const[,t]=this.getNode(e);if(!(t instanceof Qe))throw new Error("Location is not a LeafNode");if(this.maximizedNode===t)return;this.hasMaximizedView()&&this.exitMaximizedView();function i(o,n){for(let s=0;s<o.children.length;s++){const r=o.children[s];r instanceof Qe?r!==n&&o.setChildVisible(s,!1):i(r,n)}}i(this.root,t),this.maximizedNode=t,this._onDidChangeViewMaximized.fire(!0)}exitMaximizedView(){if(!this.maximizedNode)return;this.maximizedNode=void 0;function e(t){for(let i=t.children.length-1;i>=0;i--){const o=t.children[i];o instanceof Qe?t.setChildVisible(i,!0):e(o)}}e(this.root),this._onDidChangeViewMaximized.fire(!1)}hasMaximizedView(){return this.maximizedNode!==void 0}isViewMaximized(e){const[,t]=this.getNode(e);if(!(t instanceof Qe))throw new Error("Location is not a LeafNode");return t===this.maximizedNode}distributeViewSizes(e){if(this.hasMaximizedView()&&this.exitMaximizedView(),!e){this.root.distributeViewSizes(!0);return}const[,t]=this.getNode(e);if(!(t instanceof Pe))throw new Error("Invalid location");t.distributeViewSizes(),this.trySet2x2()}isViewVisible(e){const[t,i]=Ye(e),[,o]=this.getNode(t);if(!(o instanceof Pe))throw new Error("Invalid from location");return o.isChildVisible(i)}setViewVisible(e,t){if(this.hasMaximizedView()){this.exitMaximizedView();return}const[i,o]=Ye(e),[,n]=this.getNode(i);if(!(n instanceof Pe))throw new Error("Invalid from location");n.setChildVisible(o,t)}getView(e){const t=e?this.getNode(e)[1]:this._root;return this._getViews(t,this.orientation)}static deserialize(e,t,i={}){var r;if(typeof e.orientation!="number")throw new Error("Invalid JSON: 'orientation' property must be a number.");if(typeof e.width!="number")throw new Error("Invalid JSON: 'width' property must be a number.");if(typeof e.height!="number")throw new Error("Invalid JSON: 'height' property must be a number.");if(((r=e.root)==null?void 0:r.type)!=="branch")throw new Error("Invalid JSON: 'root' property must have 'type' value of branch.");const o=e.orientation,n=e.height,s=new ar(i);return s._deserialize(e.root,o,t,n),s}_deserialize(e,t,i,o){this.root=this._deserializeNode(e,t,i,o)}_deserializeNode(e,t,i,o){let n;if(e.type==="branch"){const r=e.data.map(a=>({node:this._deserializeNode(a,Ki(t),i,e.size),visible:a.visible}));n=new Pe(t,this.layoutController,this.styles,this.proportionalLayout,e.size,o,void 0,r)}else n=new Qe(i.fromJSON(e.data),t,this.layoutController,o,e.size),e.maximized&&!this.maximizedNode&&(this.maximizedNode=n,this._onDidChangeViewMaximized.fire(!0));return n}_getViews(e,t,i){const o={top:e.top,left:e.left,width:e.width,height:e.height};if(e instanceof Qe)return{view:e.view,box:o,cachedVisibleSize:i,maximized:this.maximizedNode===e};const n=[];for(let s=0;s<e.children.length;s++){const r=e.children[s],a=e.getChildCachedVisibleSize(s);n.push(this._getViews(r,Ki(t),a))}return{children:n,box:o}}getNode(e,t=this.root,i=[]){if(e.length===0)return[i,t];if(!(t instanceof Pe))throw new Error("Invalid location");const[o,...n]=e;if(o<0||o>=t.children.length)throw new Error("Invalid location");const s=t.children[o];return i.push(t),this.getNode(n,s,i)}trySet2x2(){if(this.disposable2x2.dispose(),this.disposable2x2=R.None,this.root.children.length!==2)return;const[e,t]=this.root.children;!(e instanceof Pe)||!(t instanceof Pe)||(this.disposable2x2=e.trySet2x2(t))}getViewMap(e,t){t||(t=this.root),t instanceof Pe?t.children.forEach(i=>this.getViewMap(e,i)):e.set(t.view,t.element)}dispose(){this.onDidSashResetRelay.dispose(),this.root.dispose(),this.element.remove()}}function o1(c){switch(c){case 0:return 1;case 1:return 0;case 2:return 3;case 3:return 2}}function Fn(c){return!!c.children}function IS(c,e){if(e.length===0)return c;if(!Fn(c))throw new Error("Invalid location");const[t,...i]=e;return IS(c.children[t],i)}function n1(c,e){return!(c.start>=e.end||e.start>=c.end)}function DS(c,e){const t=cb(e),i=e===0?c.top:e===3?c.left+c.width:e===1?c.top+c.height:c.left,o={start:t===1?c.top:c.left,end:t===1?c.top+c.height:c.left+c.width};return{offset:i,range:o}}function s1(c,e,t){const i=[];function o(n,s,r){if(Fn(n))for(const a of n.children)o(a,s,r);else{const{offset:a,range:l}=DS(n.box,s);a===r.offset&&n1(l,r.range)&&i.push(n)}}return o(c,e,t),i}function sg(c,e){return e.length%2===0?Ki(c):c}function cb(c){return c===0||c===1?0:1}function Fw(c,e,t){const i=sg(c,e),o=cb(t);if(i===o){let[n,s]=Ye(e);return(t===3||t===1)&&(s+=1),[...n,s]}else{const n=t===3||t===1?1:0;return[...e,n]}}function r1(c){const e=c.parentElement;if(!e)throw new Error("Invalid grid element");let t=e.firstElementChild,i=0;for(;t!==c&&t!==e.lastElementChild&&t;)t=t.nextElementSibling,i++;return i}function AS(c){const e=c.parentElement;if(!e)throw new Error("Invalid grid element");if(/\bmonaco-grid-view\b/.test(e.className))return[];const t=r1(e),i=e.parentElement.parentElement.parentElement.parentElement;return[...AS(i),t]}var cr;(function(c){c.Distribute={type:"distribute"},c.Split={type:"split"},c.Auto={type:"auto"};function e(t){return{type:"invisible",cachedVisibleSize:t}}c.Invisible=e})(cr||(cr={}));class a1 extends R{get orientation(){return this.gridview.orientation}set orientation(e){this.gridview.orientation=e}get width(){return this.gridview.width}get height(){return this.gridview.height}get minimumWidth(){return this.gridview.minimumWidth}get minimumHeight(){return this.gridview.minimumHeight}get maximumWidth(){return this.gridview.maximumWidth}get maximumHeight(){return this.gridview.maximumHeight}get boundarySashes(){return this.gridview.boundarySashes}set boundarySashes(e){this.gridview.boundarySashes=e}set edgeSnapping(e){this.gridview.edgeSnapping=e}get element(){return this.gridview.element}constructor(e,t={}){super(),this.views=new Map,this.didLayout=!1,e instanceof ar?(this.gridview=e,this.gridview.getViewMap(this.views)):this.gridview=new ar(t),this._register(this.gridview),this._register(this.gridview.onDidSashReset(this.onDidSashReset,this)),e instanceof ar||this._addView(e,0,[0]),this.onDidChange=this.gridview.onDidChange,this.onDidScroll=this.gridview.onDidScroll,this.onDidChangeViewMaximized=this.gridview.onDidChangeViewMaximized}style(e){this.gridview.style(e)}layout(e,t,i=0,o=0){this.gridview.layout(e,t,i,o),this.didLayout=!0}addView(e,t,i,o){if(this.views.has(e))throw new Error("Can't add same view twice");const n=cb(o);this.views.size===1&&this.orientation!==n&&(this.orientation=n);const s=this.getViewLocation(i),r=Fw(this.gridview.orientation,s,o);let a;if(typeof t=="number")a=t;else if(t.type==="split"){const[,l]=Ye(s);a=Kt.Split(l)}else if(t.type==="distribute")a=Kt.Distribute;else if(t.type==="auto"){const[,l]=Ye(s);a=Kt.Auto(l)}else a=t;this._addView(e,a,r)}addViewAt(e,t,i){if(this.views.has(e))throw new Error("Can't add same view twice");let o;typeof t=="number"?o=t:t.type==="distribute"?o=Kt.Distribute:o=t,this._addView(e,o,i)}_addView(e,t,i){this.views.set(e,e.element),this.gridview.addView(e,t,i)}removeView(e,t){if(this.views.size===1)throw new Error("Can't remove last view");const i=this.getViewLocation(e);let o;if((t==null?void 0:t.type)==="distribute")o=Kt.Distribute;else if((t==null?void 0:t.type)==="auto"){const n=i[i.length-1];o=Kt.Auto(n===0?1:n-1)}this.gridview.removeView(i,o),this.views.delete(e)}moveView(e,t,i,o){const n=this.getViewLocation(e),[s,r]=Ye(n),a=this.getViewLocation(i),l=Fw(this.gridview.orientation,a,o),[h,p]=Ye(l);fs(s,h)?this.gridview.moveView(s,r,p):(this.removeView(e,typeof t=="number"?void 0:t),this.addView(e,t,i,o))}moveViewTo(e,t){const i=this.getViewLocation(e),[o,n]=Ye(i),[s,r]=Ye(t);if(fs(o,s))this.gridview.moveView(o,n,r);else{const a=this.getViewSize(e),l=sg(this.gridview.orientation,i),h=this.getViewCachedVisibleSize(e),p=typeof h>"u"?l===1?a.width:a.height:cr.Invisible(h);this.removeView(e),this.addViewAt(e,p,t)}}swapViews(e,t){const i=this.getViewLocation(e),o=this.getViewLocation(t);return this.gridview.swapViews(i,o)}resizeView(e,t){const i=this.getViewLocation(e);return this.gridview.resizeView(i,t)}isViewExpanded(e){const t=this.getViewLocation(e);return this.gridview.isViewExpanded(t)}isViewMaximized(e){const t=this.getViewLocation(e);return this.gridview.isViewMaximized(t)}hasMaximizedView(){return this.gridview.hasMaximizedView()}getViewSize(e){if(!e)return this.gridview.getViewSize();const t=this.getViewLocation(e);return this.gridview.getViewSize(t)}getViewCachedVisibleSize(e){const t=this.getViewLocation(e);return this.gridview.getViewCachedVisibleSize(t)}maximizeView(e){if(this.views.size<2)throw new Error("At least two views are required to maximize a view");const t=this.getViewLocation(e);this.gridview.maximizeView(t)}exitMaximizedView(){this.gridview.exitMaximizedView()}expandView(e){const t=this.getViewLocation(e);this.gridview.expandView(t)}distributeViewSizes(){this.gridview.distributeViewSizes()}isViewVisible(e){const t=this.getViewLocation(e);return this.gridview.isViewVisible(t)}setViewVisible(e,t){const i=this.getViewLocation(e);this.gridview.setViewVisible(i,t)}getViews(){return this.gridview.getView()}getNeighborViews(e,t,i=!1){if(!this.didLayout)throw new Error("Can't call getNeighborViews before first layout");const o=this.getViewLocation(e),n=this.getViews(),s=IS(n,o);let r=DS(s.box,t);return i&&(t===0&&s.box.top===0?r={offset:n.box.top+n.box.height,range:r.range}:t===3&&s.box.left+s.box.width===n.box.width?r={offset:0,range:r.range}:t===1&&s.box.top+s.box.height===n.box.height?r={offset:0,range:r.range}:t===2&&s.box.left===0&&(r={offset:n.box.left+n.box.width,range:r.range})),s1(n,o1(t),r).map(a=>a.view)}getViewLocation(e){const t=this.views.get(e);if(!t)throw new Error("View not found");return AS(t)}onDidSashReset(e){const t=n=>{const s=this.gridview.getView(n);if(Fn(s))return!1;const r=sg(this.orientation,n),a=r===1?s.view.preferredWidth:s.view.preferredHeight;if(typeof a!="number")return!1;const l=r===1?{width:Math.round(a)}:{height:Math.round(a)};return this.gridview.resizeView(n,l),!0};if(t(e))return;const[i,o]=Ye(e);t([...i,o+1])||this.gridview.distributeViewSizes(i)}}class qo extends a1{constructor(){super(...arguments),this.initialLayoutContext=!0}static serializeNode(e,t){const i=t===0?e.box.width:e.box.height;if(!Fn(e)){const n={type:"leaf",data:e.view.toJSON(),size:i};return typeof e.cachedVisibleSize=="number"?(n.size=e.cachedVisibleSize,n.visible=!1):e.maximized&&(n.maximized=!0),n}const o=e.children.map(n=>qo.serializeNode(n,Ki(t)));return o.some(n=>n.visible!==!1)?{type:"branch",data:o,size:i}:{type:"branch",data:o,size:i,visible:!1}}static deserialize(e,t,i={}){if(typeof e.orientation!="number")throw new Error("Invalid JSON: 'orientation' property must be a number.");if(typeof e.width!="number")throw new Error("Invalid JSON: 'width' property must be a number.");if(typeof e.height!="number")throw new Error("Invalid JSON: 'height' property must be a number.");const o=ar.deserialize(e,t,i);return new qo(o,i)}static from(e,t={}){return qo.deserialize(PS(e),{fromJSON:i=>i},t)}serialize(){return{root:qo.serializeNode(this.getViews(),this.orientation),orientation:this.orientation,width:this.width,height:this.height}}layout(e,t,i=0,o=0){super.layout(e,t,i,o),this.initialLayoutContext&&(this.initialLayoutContext=!1,this.gridview.trySet2x2())}}function TS(c){return!!c.groups}function VS(c,e){if(!e&&c.groups&&c.groups.length<=1&&(c.groups=void 0),!TS(c))return;let t=0,i=0;for(const r of c.groups)VS(r,!1),r.size&&(t+=r.size,i++);const o=i>0?t:1,n=c.groups.length-i,s=o/n;for(const r of c.groups)r.size||(r.size=s)}function MS(c){return TS(c)?{type:"branch",data:c.groups.map(e=>MS(e)),size:c.size}:{type:"leaf",data:c.data,size:c.size}}function LS(c,e){if(c.type==="branch"){const t=c.data.map(i=>LS(i,Ki(e)));if(e===0){const i=c.size||(t.length===0?void 0:Math.max(...t.map(n=>n.width||0))),o=t.length===0?void 0:t.reduce((n,s)=>n+(s.height||0),0);return{width:i,height:o}}else{const i=t.length===0?void 0:t.reduce((n,s)=>n+(s.width||0),0),o=c.size||(t.length===0?void 0:Math.max(...t.map(n=>n.height||0)));return{width:i,height:o}}}else{const t=e===0?c.size:void 0,i=e===0?void 0:c.size;return{width:t,height:i}}}function PS(c){VS(c,!0);const e=MS(c),{width:t,height:i}=LS(e,c.orientation);return{root:e,orientation:c.orientation,width:t||1,height:i||1}}var c1='.monaco-workbench .part.editor>.content .editor-group-container{height:100%}.monaco-workbench .part.editor>.content .editor-group-container.empty{opacity:.5}.monaco-workbench .part.editor>.content .editor-group-container.empty.active,.monaco-workbench .part.editor>.content .editor-group-container.empty.dragged-over{opacity:1}.monaco-workbench .part.editor>.content:not(.empty) .editor-group-container.empty.active:focus{outline:1px solid var(--vscode-editorGroup-focusedEmptyBorder);outline-offset:-2px}.monaco-workbench .part.editor>.content.empty .editor-group-container.empty.active:focus{outline:none}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;margin:auto;max-width:290px}.monaco-workbench .part.editor>.content .editor-group-container:not(.empty)>.editor-group-watermark{display:none}.monaco-workbench .part.editor>.content.auxiliary .editor-group-container.empty>.editor-group-watermark,.monaco-workbench .part.editor>.content:not(.empty) .editor-group-container.empty>.editor-group-watermark{height:calc(100% - 70px);max-width:200px}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.letterpress{aspect-ratio:1/1;background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjYwIDI2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjEiPjxnIG9wYWNpdHk9Ii4xIj48cGF0aCBkPSJNMjU5Ljk5NiAyNDIuMDAySC0uMDAzVjE4aDI2MHYyMjRaTTUuOTk3IDI0LjAwNnYyMTEuOTkxaDI0OFYyNC4wMDZoLTI0OFoiLz48cGF0aCBkPSJNNzcgMjJoMTh2MjE2SDc3ek0xMTIgNDJoNzB2MThoLTcwek0xMTIgMTgyaDcwdjE4aC03MHpNMTI5LjQ5OCA3N2g4OHYxOGgtODh6TTEyOS40OTggMTEyaDg4djE4aC04OHpNMTI5LjQ5OCAxNDdoODh2MThoLTg4eiIvPjwvZz48L3N2Zz4=");background-position-x:center;background-repeat:no-repeat;background-size:contain;max-height:100%;width:100%}.monaco-workbench.vs-dark .part.editor>.content .editor-group-container .editor-group-watermark>.letterpress{background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjYwIDI2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjEiPjxnIG9wYWNpdHk9Ii4zIj48cGF0aCBkPSJNMjU5Ljk5NiAyNDIuMDAySC0uMDAzVjE4aDI2MHYyMjRaTTUuOTk3IDI0LjAwNnYyMTEuOTkxaDI0OFYyNC4wMDZoLTI0OFoiLz48cGF0aCBkPSJNNzcgMjJoMTh2MjE2SDc3ek0xMTIgNDJoNzB2MThoLTcwek0xMTIgMTgyaDcwdjE4aC03MHpNMTI5LjQ5OCA3N2g4OHYxOGgtODh6TTEyOS40OTggMTEyaDg4djE4aC04OHpNMTI5LjQ5OCAxNDdoODh2MThoLTg4eiIvPjwvZz48L3N2Zz4=")}.monaco-workbench.hc-light .part.editor>.content .editor-group-container .editor-group-watermark>.letterpress{background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjYwIDI2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjEiPjxnIGZpbGw9IiNkOWQ5ZDkiPjxwYXRoIGQ9Ik0yNTkuOTk2IDI0Mi4wMDJILS4wMDNWMThoMjYwdjIyNFpNNS45OTcgMjQuMDA2djIxMS45OTFoMjQ4VjI0LjAwNmgtMjQ4WiIvPjxwYXRoIGQ9Ik03NyAyMmgxOHYyMTZINzd6TTExMiA0Mmg3MHYxOGgtNzB6TTExMiAxODJoNzB2MThoLTcwek0xMjkuNDk4IDc3aDg4djE4aC04OHpNMTI5LjQ5OCAxMTJoODh2MThoLTg4ek0xMjkuNDk4IDE0N2g4OHYxOGgtODh6Ii8+PC9nPjwvc3ZnPg==")}.monaco-workbench.hc-black .part.editor>.content .editor-group-container .editor-group-watermark>.letterpress{background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjYwIDI2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjEiPjxnIGZpbGw9IiMzQzNDM0MiPjxwYXRoIGQ9Ik0yNTkuOTk2IDI0Mi4wMDJILS4wMDNWMThoMjYwdjIyNFpNNS45OTcgMjQuMDA2djIxMS45OTFoMjQ4VjI0LjAwNmgtMjQ4WiIvPjxwYXRoIGQ9Ik03NyAyMmgxOHYyMTZINzd6TTExMiA0Mmg3MHYxOGgtNzB6TTExMiAxODJoNzB2MThoLTcwek0xMjkuNDk4IDc3aDg4djE4aC04OHpNMTI5LjQ5OCAxMTJoODh2MThoLTg4ek0xMjkuNDk4IDE0N2g4OHYxOGgtODh6Ii8+PC9nPjwvc3ZnPg==")}.monaco-workbench .part.editor>.content .editor-group-container.max-height-478px>.editor-group-watermark>.shortcuts,.monaco-workbench .part.editor>.content.auxiliary .editor-group-container>.editor-group-watermark>.shortcuts,.monaco-workbench .part.editor>.content:not(.empty) .editor-group-container>.editor-group-watermark>.shortcuts{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts>.watermark-box{border-collapse:separate;border-spacing:11px 17px;display:inline-table}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dl{color:var(--vscode-editorWatermark-foreground);cursor:default;display:table-row;opacity:.8}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dt{letter-spacing:.04em;text-align:right}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dd{text-align:left}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dd,.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dt{display:table-cell;vertical-align:middle}.monaco-workbench .part.editor>.content .editor-group-container>.title{box-sizing:border-box;overflow:hidden;position:relative}.monaco-workbench .part.editor>.content .editor-group-container>.title:not(.tabs){display:flex;flex-wrap:nowrap}.monaco-workbench .part.editor>.content .editor-group-container>.title.title-border-bottom:after{background-color:var(--title-border-bottom-color);bottom:0;content:"";height:1px;left:0;pointer-events:none;position:absolute;width:100%;z-index:9}.monaco-workbench .part.editor>.content .editor-group-container.empty>.title{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-container-toolbar{display:none;height:35px}.monaco-workbench .part.editor>.content .editor-group-container.empty.locked>.editor-group-container-toolbar,.monaco-workbench .part.editor>.content.auxiliary .editor-group-container.empty>.editor-group-container-toolbar,.monaco-workbench .part.editor>.content:not(.empty) .editor-group-container.empty>.editor-group-container-toolbar{display:block}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-container-toolbar .actions-container{justify-content:flex-end}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-container-toolbar .action-item{margin-right:4px}.monaco-workbench .part.editor>.content .editor-group-container.empty>.editor-container{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.editor-container>.editor-instance{height:100%}.monaco-workbench .part.editor>.content .grid-view-container{height:100%;width:100%}';we(c1,{});var d1=".monaco-editor-pane-placeholder{align-items:center;box-sizing:border-box;display:flex;flex-direction:column;gap:10px;justify-content:center;padding:0 16px}.monaco-editor-pane-placeholder:focus{outline:none!important}.monaco-editor-pane-placeholder .editor-placeholder-icon-container .codicon{font-size:48px!important}.monaco-editor-pane-placeholder .editor-placeholder-icon-container .codicon.codicon-error{color:var(--vscode-editorError-foreground)}.monaco-editor-pane-placeholder .editor-placeholder-icon-container .codicon.codicon-warning{color:var(--vscode-editorWarning-foreground)}.monaco-editor-pane-placeholder .editor-placeholder-icon-container .codicon.codicon-info,.monaco-editor-pane-placeholder .editor-placeholder-icon-container .codicon.codicon-workspace-untrusted{color:var(--vscode-editorInfo-foreground)}.monaco-editor-pane-placeholder.max-height-200px .editor-placeholder-icon-container{display:none}.monaco-editor-pane-placeholder .editor-placeholder-label-container{font-size:14px;max-width:450px;text-align:center;user-select:text;-webkit-user-select:text;word-break:break-word}.monaco-editor-pane-placeholder .editor-placeholder-buttons-container{display:flex}.monaco-editor-pane-placeholder .editor-placeholder-buttons-container>.monaco-button{font-size:14px;margin:4px 5px;outline-offset:2px!important;padding:6px 11px;width:fit-content}";we(d1,{});class l1{constructor(e){this._container=e}set text(e){Ii(this._container,...Di(e??""))}set title(e){!this.hover&&e?this.hover=_k().setupManagedHover(Jh("mouse"),this._container,e):this.hover&&this.hover.update(e)}dispose(){var e;(e=this.hover)==null||e.dispose()}}var rg,fa,pd,jn;let Gr=(jn=class extends kf{constructor(e,t,i,o,n){super(e,t,i,o,n),this.inputDisposable=this._register(new Se)}createEditor(e){this.container=document.createElement("div"),this.container.className="monaco-editor-pane-placeholder",this.container.style.outline="none",this.container.tabIndex=0,this.scrollbar=this._register(new jv(this.container,{horizontal:1,vertical:1})),e.appendChild(this.scrollbar.getDomNode())}async setInput(e,t,i,o){await super.setInput(e,t,i,o),!o.isCancellationRequested&&(this.inputDisposable.value=await this.renderInput(e,t))}async renderInput(e,t){const[i,o]=Ho(this.container,this.scrollbar);Zt(i);const n=new P,{icon:s,label:r,actions:a}=await this.getContents(e,t,n),l=xk(r,rg.PLACEHOLDER_LABEL_MAX_LENGTH),h=i.appendChild(H(".editor-placeholder-icon-container")),p=n.add(new l1(h));p.text=s;const g=i.appendChild(H(".editor-placeholder-label-container")),m=document.createElement("span");if(m.textContent=l,g.appendChild(m),i.setAttribute("aria-label",`${Yv(e,void 0,this.group,void 0)}, ${l}`),a.length){const f=i.appendChild(H(".editor-placeholder-buttons-container")),v=n.add(new _f(f));for(let S=0;S<a.length;S++){const E=n.add(v.addButton({...Vr,secondary:S!==0}));E.label=a[S].label,n.add(E.onDidClick(D=>{D&&re.stop(D,!0),a[S].run()}))}}return o.scanDomNode(),n}clearInput(){this.container&&Zt(this.container),this.inputDisposable.clear(),super.clearInput()}layout(e){const[t,i]=Ho(this.container,this.scrollbar);mv(t,e.width,e.height),i.scanDomNode(),t.classList.toggle("max-height-200px",e.height<=200)}focus(){var e;super.focus(),(e=this.container)==null||e.focus()}dispose(){var e;(e=this.container)==null||e.remove(),super.dispose()}},rg=jn,jn.PLACEHOLDER_LABEL_MAX_LENGTH=1024,jn);Gr=rg=x([u(2,Be),u(3,te),u(4,ie)],Gr);var Ci;let ag=(Ci=class extends Gr{constructor(e,t,i,o,n,s){super(fa.ID,e,t,i,s),this.commandService=o,this.workspaceService=n}getTitle(){return fa.LABEL}async getContents(){return{icon:"$(workspace-untrusted)",label:Ik(Dk(this.workspaceService.getWorkspace()))?d(11844,"The file is not displayed in the editor because trust has not been granted to the folder."):d(11845,"The file is not displayed in the editor because trust has not been granted to the workspace."),actions:[{label:d(11846,"Manage Workspace Trust"),run:()=>this.commandService.executeCommand("workbench.trust.manage")}]}}},fa=Ci,Ci.ID="workbench.editors.workspaceTrustRequiredEditor",Ci.LABEL=d(11843,"Workspace Trust Required"),Ci.DESCRIPTOR=Jt.create(fa,Ci.ID,Ci.LABEL),Ci);ag=fa=x([u(1,Be),u(2,te),u(3,lt),u(4,ei),u(5,ie)],ag);var Si;let cg=(Si=class extends Gr{constructor(e,t,i,o,n,s){super(pd.ID,e,t,i,o),this.fileService=n,this.dialogService=s}async getContents(e,t,i){const o=e.resource,n=t.error,s=(n==null?void 0:n.fileOperationResult)===1;let r;s?r=d(11848,"The editor could not be opened because the file was not found."):Ea(n)&&n.forceMessage?r=n.message:n?r=d(11849,"The editor could not be opened due to an unexpected error: {0}",Ak(ja(n),Gr.PLACEHOLDER_LABEL_MAX_LENGTH/2)):r=d(11850,"The editor could not be opened due to an unexpected error.");let a="$(error)";Ea(n)&&(n.forceSeverity===me.Info?a="$(info)":n.forceSeverity===me.Warning&&(a="$(warning)"));let l;return Ea(n)&&n.actions.length>0?l=n.actions.map(h=>({label:h.label,run:()=>{const p=h.run();p instanceof Promise&&p.catch(g=>this.dialogService.error(ja(g)))}})):l=[{label:d(11851,"Try Again"),run:()=>this.group.openEditor(e,{...t,source:Zv.USER})}],s&&o&&this.fileService.hasProvider(o)&&i.add(this.fileService.onDidFilesChange(h=>{h.contains(o,1,0)&&this.group.openEditor(e,t)})),{icon:a,label:r,actions:l??[]}}},pd=Si,Si.ID="workbench.editors.errorEditor",Si.LABEL=d(11847,"Error Editor"),Si.DESCRIPTOR=Jt.create(pd,Si.ID,Si.LABEL),Si);cg=pd=x([u(1,Be),u(2,te),u(3,ie),u(4,Oe),u(5,xt)],cg);let dg=class extends R{get minimumWidth(){var e;return((e=this._activeEditorPane)==null?void 0:e.minimumWidth)??kd.width}get minimumHeight(){var e;return((e=this._activeEditorPane)==null?void 0:e.minimumHeight)??kd.height}get maximumWidth(){var e;return((e=this._activeEditorPane)==null?void 0:e.maximumWidth)??_d.width}get maximumHeight(){var e;return((e=this._activeEditorPane)==null?void 0:e.maximumHeight)??_d.height}get activeEditorPane(){return this._activeEditorPane}constructor(e,t,i,o,n,s,r,a,l,h){super(),this.editorGroupParent=e,this.editorPanesParent=t,this.groupView=i,this.layoutService=o,this.instantiationService=n,this.editorProgressService=s,this.workspaceTrustService=r,this.logService=a,this.dialogService=l,this.hostService=h,this._onDidFocus=this._register(new I),this.onDidFocus=this._onDidFocus.event,this._onDidChangeSizeConstraints=this._register(new I),this.onDidChangeSizeConstraints=this._onDidChangeSizeConstraints.event,this._activeEditorPane=null,this.editorPanes=[],this.mapEditorPaneToPendingSetInput=new Map,this.activeEditorPaneDisposables=this._register(new P),this.editorOperation=this._register(new Vk(this.editorProgressService)),this.editorPanesRegistry=$.as(wt.EditorPane),this.registerListeners()}registerListeners(){this._register(this.workspaceTrustService.onDidChangeTrust(()=>this.onDidChangeWorkspaceTrust()))}onDidChangeWorkspaceTrust(){var i,o;const e=(i=this._activeEditorPane)==null?void 0:i.input,t=(o=this._activeEditorPane)==null?void 0:o.options;e!=null&&e.hasCapability(16)&&this.groupView.openEditor(e,t)}async openEditor(e,t,i,o=Object.create(null)){try{return await this.doOpenEditor(this.getEditorPaneDescriptor(e),e,t,i,o)}catch(n){return t!=null&&t.ignoreError?{error:n}:this.doShowError(n,e,t,i,o)}}async doShowError(e,t,i,o,n){this.logService.error(e);let s=!1;if((i==null?void 0:i.source)===Zv.USER&&(!Ea(e)||e.allowDialog)&&(s=await this.doShowErrorDialog(e,t)),s)return{error:e};const r={...i};return jr(e)||(r.error=e),{...await this.doOpenEditor(cg.DESCRIPTOR,t,r,o,n),error:e}}async doShowErrorDialog(e,t){let i=me.Error,o,n=ja(e),s;Ea(e)&&(s=e.actions,i=e.forceSeverity??me.Error,e.forceMessage&&(o=e.message,n=void 0)),o||(o=d(11537,"Unable to open '{0}'",t.getName()));const r=[];if(s&&s.length>0)for(const p of s)r.push({label:p.label,run:()=>p});else r.push({label:d(11538,"&&OK"),run:()=>{}});let a;r.length===1&&(a={run:()=>{l=!0}});let l=!1;const{result:h}=await this.dialogService.prompt({type:i,message:o,detail:n,buttons:r,cancelButton:a});if(h){const p=h.run();p instanceof Promise&&p.catch(g=>this.dialogService.error(ja(g))),l=!0}return l}async doOpenEditor(e,t,i,o,n=Object.create(null)){const s=this.doShowEditorPane(e),r=un(),{changed:a,cancelled:l}=await this.doSetInput(s,t,i,n);return l||((!i||!i.preserveFocus)&&this.shouldRestoreFocus(r)?s.focus():o!=null&&o.preserveWindowOrder||this.hostService.moveTop(Cc(this.groupView.windowId,!0).window)),{pane:s,changed:a,cancelled:l}}shouldRestoreFocus(e){if(!this.layoutService.isRestored()||!e)return!0;const t=un();return!!(!t||t===e.ownerDocument.body||e===t||!Mk(t)||Yi(t,this.editorGroupParent))}getEditorPaneDescriptor(e){return e.hasCapability(16)&&!this.workspaceTrustService.isWorkspaceTrusted()?ag.DESCRIPTOR:ae(this.editorPanesRegistry.getEditorPane(e))}doShowEditorPane(e){if(this._activeEditorPane&&e.describes(this._activeEditorPane))return this._activeEditorPane;this.doHideActiveEditorPane();const t=this.doCreateEditorPane(e);this.doSetActiveEditorPane(t);const i=ae(t.getContainer());return this.editorPanesParent.appendChild(i),qi(i),t.setVisible(!0),this.pagePosition&&t.layout(new he(this.pagePosition.width,this.pagePosition.height),{top:this.pagePosition.top,left:this.pagePosition.left}),this.boundarySashes&&t.setBoundarySashes(this.boundarySashes),t}doCreateEditorPane(e){const t=this.doInstantiateEditorPane(e);if(!t.getContainer()){const i=document.createElement("div");i.classList.add("editor-instance"),this.editorPanesParent.appendChild(i),t.create(i)}return t}doInstantiateEditorPane(e){const t=this.editorPanes.find(o=>e.describes(o));if(t)return t;const i=this._register(e.instantiate(this.instantiationService,this.groupView));return this.editorPanes.push(i),i}doSetActiveEditorPane(e){this._activeEditorPane=e,this.activeEditorPaneDisposables.clear(),e&&(this.activeEditorPaneDisposables.add(e.onDidChangeSizeConstraints(t=>this._onDidChangeSizeConstraints.fire(t))),this.activeEditorPaneDisposables.add(e.onDidFocus(()=>this._onDidFocus.fire()))),this._onDidChangeSizeConstraints.fire(void 0)}async doSetInput(e,t,i,o){var a,l;let n=(a=e.input)==null?void 0:a.matches(t);if(n&&!(i!=null&&i.forceReload))return this.mapEditorPaneToPendingSetInput.has(e)&&await this.mapEditorPaneToPendingSetInput.get(e),n=(l=e.input)==null?void 0:l.matches(t),n&&e.setOptions(i),{changed:!1,cancelled:!n};const s=this.editorOperation.start(this.layoutService.isRestored()?800:3200);let r=!1;try{e.clearInput();const h=e.setInput(t,i,o,s.token);this.mapEditorPaneToPendingSetInput.set(e,h),await h,s.isCurrent()||(r=!0)}catch(h){if(!s.isCurrent())r=!0;else throw h}finally{s.isCurrent()&&this.mapEditorPaneToPendingSetInput.delete(e),s.stop()}return{changed:!n,cancelled:r}}doHideActiveEditorPane(){if(!this._activeEditorPane)return;this.editorOperation.stop(),this.safeRun(()=>{var t;return(t=this._activeEditorPane)==null?void 0:t.clearInput()}),this.safeRun(()=>{var t;return(t=this._activeEditorPane)==null?void 0:t.setVisible(!1)}),this.mapEditorPaneToPendingSetInput.delete(this._activeEditorPane);const e=this._activeEditorPane.getContainer();e&&(e.remove(),Co(e)),this.doSetActiveEditorPane(null)}closeEditor(e){var t;(t=this._activeEditorPane)!=null&&t.input&&e.matches(this._activeEditorPane.input)&&this.doHideActiveEditorPane()}setVisible(e){this.safeRun(()=>{var t;return(t=this._activeEditorPane)==null?void 0:t.setVisible(e)})}layout(e){this.pagePosition=e,this.safeRun(()=>{var t;return(t=this._activeEditorPane)==null?void 0:t.layout(new he(e.width,e.height),e)})}setBoundarySashes(e){this.boundarySashes=e,this.safeRun(()=>{var t;return(t=this._activeEditorPane)==null?void 0:t.setBoundarySashes(e)})}safeRun(e){try{e()}catch(t){this.logService.error(t)}}};dg=x([u(3,Y),u(4,O),u(5,vf),u(6,Tk),u(7,Je),u(8,xt),u(9,st)],dg);le("editorWatermark.foreground",{dark:Eo(Yc,.6),light:Eo(Yc,.68),hcDark:Yc,hcLight:Yc},d(11542,"Foreground color for the labels in the editor watermark."));const RS={text:d(11543,"Show All Commands"),id:"workbench.action.showCommands"},h1={text:d(11544,"Go to File"),id:"workbench.action.quickOpen"},u1={text:d(11545,"Open File"),id:"workbench.action.files.openFile",mac:!1},p1={text:d(11546,"Open Folder"),id:"workbench.action.files.openFolder",mac:!1},g1={text:d(11547,"Open File or Folder"),id:"workbench.action.files.openFileFolder",mac:!0},m1={text:d(11548,"Open Recent"),id:"workbench.action.openRecent"},f1={text:d(11549,"New Untitled Text File"),id:"workbench.action.files.newUntitledFile",mac:!0},b1={text:d(11550,"Find in Files"),id:"workbench.action.findInFiles"},w1={text:d(11551,"Toggle Terminal"),id:"workbench.action.terminal.toggleTerminal",when:y.equals("terminalProcessSupported",!0)},v1={text:d(11552,"Start Debugging"),id:"workbench.action.debug.start",when:y.equals("terminalProcessSupported",!0)},y1={text:d(11553,"Toggle Full Screen"),id:"workbench.action.toggleFullScreen"},C1={text:d(11554,"Show Settings"),id:"workbench.action.openSettings"},Gw=[RS,u1,p1,g1,m1,f1],Ww=[RS,h1,b1,v1,w1,y1,C1];let lg=class extends R{constructor(e,t,i,o,n){super(),this.keybindingService=t,this.contextService=i,this.contextKeyService=o,this.configurationService=n,this.transientDisposables=this._register(new P),this.enabled=!1,this.keybindingLabels=new Set;const s=rt(".editor-group-watermark",[rt(".letterpress"),rt(".shortcuts@shortcuts")]);ve(e,s.root),this.shortcuts=s.shortcuts,this.registerListeners(),this.workbenchState=i.getWorkbenchState(),this.render()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration("workbench.tips.enabled")&&this.render()})),this._register(this.contextService.onDidChangeWorkbenchState(i=>{this.workbenchState!==i&&(this.workbenchState=i,this.render())}));const e=[...Gw,...Ww].filter(i=>i.when!==void 0).map(i=>i.when),t=new Set;e.forEach(i=>i.keys().forEach(o=>t.add(o))),this._register(this.contextKeyService.onDidChangeContext(i=>{i.affectsSome(t)&&this.render()}))}render(){const e=this.configurationService.getValue("workbench.tips.enabled");if(e===this.enabled||(this.enabled=e,this.clear(),!e))return;const t=ve(this.shortcuts,H(".watermark-box")),o=(this.workbenchState!==1?Ww:Gw).filter(s=>!("when"in s)||this.contextKeyService.contextMatchesRules(s.when)).filter(s=>!("mac"in s)||s.mac===(be&&!vt)).filter(s=>!!qe.getCommand(s.id)).filter(s=>!!this.keybindingService.lookupKeybinding(s.id)),n=()=>{Zt(t),this.keybindingLabels.forEach(s=>s.dispose()),this.keybindingLabels.clear();for(const s of o){const r=this.keybindingService.lookupKeybinding(s.id);if(!r)continue;const a=ve(t,H("dl")),l=ve(a,H("dt"));l.textContent=s.text;const h=ve(a,H("dd")),p=new Lk(h,Pk,{renderUnboundKeybindings:!0,...Rk});p.set(r),this.keybindingLabels.add(p)}};n(),this.transientDisposables.add(this.keybindingService.onDidUpdateKeybindings(n))}clear(){Zt(this.shortcuts),this.transientDisposables.clear()}dispose(){super.dispose(),this.clear(),this.keybindingLabels.forEach(e=>e.dispose())}};lg=x([u(1,xe),u(2,ei),u(3,K),u(4,F)],lg);var S1=".monaco-workbench .part.editor>.content .editor-group-container>.title .breadcrumbs-below-tabs .breadcrumbs-control{cursor:default;flex:1 100%;height:22px}.monaco-workbench .part.editor>.content .editor-group-container>.title .breadcrumbs-below-tabs .breadcrumbs-control .monaco-icon-label{height:22px;line-height:22px}.monaco-workbench .part.editor>.content .editor-group-container>.title .breadcrumbs-below-tabs .breadcrumbs-control .monaco-icon-label:before{height:22px}.monaco-workbench .part.editor>.content .editor-group-container>.title .breadcrumbs-below-tabs .breadcrumbs-control .outline-element-icon{height:22px;line-height:22px;padding-right:3px}.monaco-workbench .part.editor>.content .editor-group-container>.title .breadcrumbs-below-tabs .breadcrumbs-control .monaco-breadcrumb-item{max-width:80%}.monaco-workbench .part.editor>.content .editor-group-container>.title .breadcrumbs-below-tabs .breadcrumbs-control .monaco-breadcrumb-item:before{align-items:center;display:flex;height:22px;justify-content:center;width:16px}.monaco-workbench .part.editor>.content .editor-group-container>.title .breadcrumbs-below-tabs .breadcrumbs-control .monaco-breadcrumb-item:last-child{padding-right:8px}.monaco-workbench .part.editor>.content .editor-group-container>.title .breadcrumbs-below-tabs .breadcrumbs-control .monaco-breadcrumb-item:last-child .codicon:last-child{display:none}";we(S1,{});var E1='.monaco-breadcrumbs{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:flex-start;outline-style:none;user-select:none;-webkit-user-select:none}.monaco-breadcrumbs .monaco-breadcrumb-item{align-items:center;align-self:center;cursor:pointer;display:flex;flex:0 1 auto;height:100%;outline:none;white-space:nowrap}.monaco-breadcrumbs.disabled .monaco-breadcrumb-item{cursor:default}.monaco-breadcrumbs .monaco-breadcrumb-item .codicon-breadcrumb-separator{color:inherit}.monaco-breadcrumbs .monaco-breadcrumb-item:first-of-type:before{content:" "}';we(E1,{});class db{}class k1{constructor(e,t,i,o){this._disposables=new P,this._onDidSelectItem=new I,this._onDidFocusItem=new I,this._onDidChangeFocus=new I,this.onDidSelectItem=this._onDidSelectItem.event,this.onDidFocusItem=this._onDidFocusItem.event,this.onDidChangeFocus=this._onDidChangeFocus.event,this._items=new Array,this._nodes=new Array,this._freeNodes=new Array,this._enabled=!0,this._focusedItemIdx=-1,this._selectedItemIdx=-1,this._domNode=document.createElement("div"),this._domNode.className="monaco-breadcrumbs",this._domNode.tabIndex=0,this._domNode.setAttribute("role","list"),this._scrollable=new jv(this._domNode,{vertical:2,horizontal:1,horizontalScrollbarSize:t,useShadows:!1,scrollYToX:!0}),this._separatorIcon=i,this._disposables.add(this._scrollable),this._disposables.add(Xv(this._domNode,"click",r=>this._onClick(r))),e.appendChild(this._scrollable.getDomNode());const n=Jv(this._domNode);this._style(n,o);const s=ms(this._domNode);this._disposables.add(s),this._disposables.add(s.onDidBlur(r=>this._onDidChangeFocus.fire(!1))),this._disposables.add(s.onDidFocus(r=>this._onDidChangeFocus.fire(!0)))}setHorizontalScrollbarSize(e){this._scrollable.updateOptions({horizontalScrollbarSize:e})}dispose(){var e,t;this._disposables.dispose(),(e=this._pendingLayout)==null||e.dispose(),(t=this._pendingDimLayout)==null||t.dispose(),this._onDidSelectItem.dispose(),this._onDidFocusItem.dispose(),this._onDidChangeFocus.dispose(),this._domNode.remove(),this._nodes.length=0,this._freeNodes.length=0}layout(e){var t,i;e&&he.equals(e,this._dimension)||(e?((t=this._pendingDimLayout)==null||t.dispose(),this._pendingDimLayout=this._updateDimensions(e)):((i=this._pendingLayout)==null||i.dispose(),this._pendingLayout=this._updateScrollbar()))}_updateDimensions(e){const t=new P;return t.add(Bk(fe(this._domNode),()=>{this._dimension=e,this._domNode.style.width=`${e.width}px`,this._domNode.style.height=`${e.height}px`,t.add(this._updateScrollbar())})),t}_updateScrollbar(){return Lb(fe(this._domNode),()=>{Lb(fe(this._domNode),()=>{this._scrollable.setRevealOnScroll(!1),this._scrollable.scanDomNode(),this._scrollable.setRevealOnScroll(!0)})})}_style(e,t){let i="";t.breadcrumbsBackground&&(i+=`.monaco-breadcrumbs { background-color: ${t.breadcrumbsBackground}}`),t.breadcrumbsForeground&&(i+=`.monaco-breadcrumbs .monaco-breadcrumb-item { color: ${t.breadcrumbsForeground}}
`),t.breadcrumbsFocusForeground&&(i+=`.monaco-breadcrumbs .monaco-breadcrumb-item.focused { color: ${t.breadcrumbsFocusForeground}}
`),t.breadcrumbsFocusAndSelectionForeground&&(i+=`.monaco-breadcrumbs .monaco-breadcrumb-item.focused.selected { color: ${t.breadcrumbsFocusAndSelectionForeground}}
`),t.breadcrumbsHoverForeground&&(i+=`.monaco-breadcrumbs:not(.disabled	) .monaco-breadcrumb-item:hover:not(.focused):not(.selected) { color: ${t.breadcrumbsHoverForeground}}
`),e.innerText=i}setEnabled(e){this._enabled=e,this._domNode.classList.toggle("disabled",!this._enabled)}domFocus(){const e=this._focusedItemIdx>=0?this._focusedItemIdx:this._items.length-1;e>=0&&e<this._items.length?this._focus(e,void 0):this._domNode.focus()}isDOMFocused(){return Qv(this._domNode)}getFocused(){return this._items[this._focusedItemIdx]}setFocused(e,t){this._focus(this._items.indexOf(e),t)}focusPrev(e){this._focusedItemIdx>0&&this._focus(this._focusedItemIdx-1,e)}focusNext(e){this._focusedItemIdx+1<this._nodes.length&&this._focus(this._focusedItemIdx+1,e)}_focus(e,t){this._focusedItemIdx=-1;for(let i=0;i<this._nodes.length;i++){const o=this._nodes[i];i!==e?o.classList.remove("focused"):(this._focusedItemIdx=i,o.classList.add("focused"),o.focus())}this._reveal(this._focusedItemIdx,!0),this._onDidFocusItem.fire({type:"focus",item:this._items[this._focusedItemIdx],node:this._nodes[this._focusedItemIdx],payload:t})}reveal(e){const t=this._items.indexOf(e);t>=0&&this._reveal(t,!1)}revealLast(){this._reveal(this._items.length-1,!1)}_reveal(e,t){if(e<0||e>=this._nodes.length)return;const i=this._nodes[e];if(!i)return;const{width:o}=this._scrollable.getScrollDimensions(),{scrollLeft:n}=this._scrollable.getScrollPosition();(!t||i.offsetLeft>n+o||i.offsetLeft<n)&&(this._scrollable.setRevealOnScroll(!1),this._scrollable.setScrollPosition({scrollLeft:i.offsetLeft}),this._scrollable.setRevealOnScroll(!0))}getSelection(){return this._items[this._selectedItemIdx]}setSelection(e,t){this._select(this._items.indexOf(e),t)}_select(e,t){this._selectedItemIdx=-1;for(let i=0;i<this._nodes.length;i++){const o=this._nodes[i];i!==e?o.classList.remove("selected"):(this._selectedItemIdx=i,o.classList.add("selected"))}this._onDidSelectItem.fire({type:"select",item:this._items[this._selectedItemIdx],node:this._nodes[this._selectedItemIdx],payload:t})}getItems(){return this._items}setItems(e){let t,i=[];try{t=Ok(this._items,e,(o,n)=>o.equals(n)),i=this._items.splice(t,this._items.length-t,...e.slice(t)),this._render(t),Re(i),this._focus(-1,void 0)}catch(o){const n=new Error(`BreadcrumbsItem#setItems: newItems: ${e.length}, prefix: ${t}, removed: ${i.length}`);throw n.name=o.name,n.stack=o.stack,n}}_render(e){let t=!1;for(;e<this._items.length&&e<this._nodes.length;e++){const i=this._items[e],o=this._nodes[e];this._renderItem(i,o),t=!0}for(;e<this._nodes.length;){const i=this._nodes.pop();i&&(this._freeNodes.push(i),i.remove(),t=!0)}for(;e<this._items.length;e++){const i=this._items[e],o=this._freeNodes.length>0?this._freeNodes.pop():document.createElement("div");o&&(this._renderItem(i,o),this._domNode.appendChild(o),this._nodes.push(o),t=!0)}t&&this.layout(void 0)}_renderItem(e,t){Zt(t),t.className="";try{e.render(t)}catch(o){t.innerText="<<RENDER ERROR>>",console.error(o)}t.tabIndex=-1,t.setAttribute("role","listitem"),t.classList.add("monaco-breadcrumb-item");const i=H(oe.asCSSSelector(this._separatorIcon));t.appendChild(i)}_onClick(e){if(this._enabled)for(let t=e.target;t;t=t.parentElement){const i=this._nodes.indexOf(t);if(i>=0){this._focus(i,e),this._select(i,e);break}}}}var _1=".monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control.hidden{display:none}.monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control .monaco-breadcrumb-item.focused .hint-more,.monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control .monaco-breadcrumb-item.focused .monaco-icon-label,.monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control .monaco-breadcrumb-item.selected .hint-more,.monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control .monaco-breadcrumb-item.selected .monaco-icon-label{text-decoration-line:underline}.monaco-workbench .monaco-breadcrumb-item.shows-symbol-icon .codicon[class*=codicon-symbol-]{padding-right:6px}.monaco-workbench .monaco-breadcrumbs-picker .arrow{border-style:solid;position:absolute;width:0}.monaco-workbench .monaco-breadcrumbs-picker .picker-item{flex:1;line-height:22px}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree{display:flex;flex-direction:column;height:100%;overflow:hidden}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree>.input{box-sizing:border-box;height:36px;padding:5px 9px;position:relative}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree>.tree{height:calc(100% - 36px)}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree.inactive>.input{display:none}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree.inactive>.tree{height:100%}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree .monaco-highlighted-label .highlight{font-weight:700}";we(_1,{});class x1{constructor(){this._map=new Map}register(e,t){if(this._map.has(e))throw new Error(`group (${e}) has already a widget`);return this._map.set(e,t),{dispose:()=>this._map.delete(e)}}getWidget(e){return this._map.get(e)}}const ht=class ht{constructor(){}static _stub(e){return{bindTo(t){const i=new I,o=t.onDidChangeConfiguration(n=>{n.affectsConfiguration(e)&&i.fire(void 0)});return new class{constructor(){this.name=e,this.onDidChange=i.event}getValue(n){return n?t.getValue(e,n):t.getValue(e)}updateValue(n,s){return s?t.updateValue(e,n,s):t.updateValue(e,n)}dispose(){o.dispose(),i.dispose()}}}}}};ht.IsEnabled=ht._stub("breadcrumbs.enabled"),ht.UseQuickPick=ht._stub("breadcrumbs.useQuickPick"),ht.FilePath=ht._stub("breadcrumbs.filePath"),ht.SymbolPath=ht._stub("breadcrumbs.symbolPath"),ht.SymbolSortOrder=ht._stub("breadcrumbs.symbolSortOrder"),ht.Icons=ht._stub("breadcrumbs.icons"),ht.TitleScrollbarSizing=ht._stub("workbench.editor.titleScrollbarSizing"),ht.FileExcludes=ht._stub("files.exclude");let li=ht;$.as(ks.Configuration).registerConfiguration({id:"breadcrumbs",title:d(4160,"Breadcrumb Navigation"),order:101,type:"object",properties:{"breadcrumbs.enabled":{description:d(4161,"Enable/disable navigation breadcrumbs."),type:"boolean",default:!0},"breadcrumbs.filePath":{description:d(4162,"Controls whether and how file paths are shown in the breadcrumbs view."),type:"string",default:"on",enum:["on","off","last"],enumDescriptions:[d(4163,"Show the file path in the breadcrumbs view."),d(4164,"Do not show the file path in the breadcrumbs view."),d(4165,"Only show the last element of the file path in the breadcrumbs view.")]},"breadcrumbs.symbolPath":{description:d(4166,"Controls whether and how symbols are shown in the breadcrumbs view."),type:"string",default:"on",enum:["on","off","last"],enumDescriptions:[d(4167,"Show all symbols in the breadcrumbs view."),d(4168,"Do not show symbols in the breadcrumbs view."),d(4169,"Only show the current symbol in the breadcrumbs view.")]},"breadcrumbs.symbolSortOrder":{description:d(4170,"Controls how symbols are sorted in the breadcrumbs outline view."),type:"string",default:"position",scope:5,enum:["position","name","type"],enumDescriptions:[d(4171,"Show symbol outline in file position order."),d(4172,"Show symbol outline in alphabetical order."),d(4173,"Show symbol outline in symbol type order.")]},"breadcrumbs.icons":{description:d(4174,"Render breadcrumb items with icons."),type:"boolean",default:!0},"breadcrumbs.showFiles":{type:"boolean",default:!0,scope:5,markdownDescription:d(4175,"When enabled breadcrumbs show `file`-symbols.")},"breadcrumbs.showModules":{type:"boolean",default:!0,scope:5,markdownDescription:d(4176,"When enabled breadcrumbs show `module`-symbols.")},"breadcrumbs.showNamespaces":{type:"boolean",default:!0,scope:5,markdownDescription:d(4177,"When enabled breadcrumbs show `namespace`-symbols.")},"breadcrumbs.showPackages":{type:"boolean",default:!0,scope:5,markdownDescription:d(4178,"When enabled breadcrumbs show `package`-symbols.")},"breadcrumbs.showClasses":{type:"boolean",default:!0,scope:5,markdownDescription:d(4179,"When enabled breadcrumbs show `class`-symbols.")},"breadcrumbs.showMethods":{type:"boolean",default:!0,scope:5,markdownDescription:d(4180,"When enabled breadcrumbs show `method`-symbols.")},"breadcrumbs.showProperties":{type:"boolean",default:!0,scope:5,markdownDescription:d(4181,"When enabled breadcrumbs show `property`-symbols.")},"breadcrumbs.showFields":{type:"boolean",default:!0,scope:5,markdownDescription:d(4182,"When enabled breadcrumbs show `field`-symbols.")},"breadcrumbs.showConstructors":{type:"boolean",default:!0,scope:5,markdownDescription:d(4183,"When enabled breadcrumbs show `constructor`-symbols.")},"breadcrumbs.showEnums":{type:"boolean",default:!0,scope:5,markdownDescription:d(4184,"When enabled breadcrumbs show `enum`-symbols.")},"breadcrumbs.showInterfaces":{type:"boolean",default:!0,scope:5,markdownDescription:d(4185,"When enabled breadcrumbs show `interface`-symbols.")},"breadcrumbs.showFunctions":{type:"boolean",default:!0,scope:5,markdownDescription:d(4186,"When enabled breadcrumbs show `function`-symbols.")},"breadcrumbs.showVariables":{type:"boolean",default:!0,scope:5,markdownDescription:d(4187,"When enabled breadcrumbs show `variable`-symbols.")},"breadcrumbs.showConstants":{type:"boolean",default:!0,scope:5,markdownDescription:d(4188,"When enabled breadcrumbs show `constant`-symbols.")},"breadcrumbs.showStrings":{type:"boolean",default:!0,scope:5,markdownDescription:d(4189,"When enabled breadcrumbs show `string`-symbols.")},"breadcrumbs.showNumbers":{type:"boolean",default:!0,scope:5,markdownDescription:d(4190,"When enabled breadcrumbs show `number`-symbols.")},"breadcrumbs.showBooleans":{type:"boolean",default:!0,scope:5,markdownDescription:d(4191,"When enabled breadcrumbs show `boolean`-symbols.")},"breadcrumbs.showArrays":{type:"boolean",default:!0,scope:5,markdownDescription:d(4192,"When enabled breadcrumbs show `array`-symbols.")},"breadcrumbs.showObjects":{type:"boolean",default:!0,scope:5,markdownDescription:d(4193,"When enabled breadcrumbs show `object`-symbols.")},"breadcrumbs.showKeys":{type:"boolean",default:!0,scope:5,markdownDescription:d(4194,"When enabled breadcrumbs show `key`-symbols.")},"breadcrumbs.showNull":{type:"boolean",default:!0,scope:5,markdownDescription:d(4195,"When enabled breadcrumbs show `null`-symbols.")},"breadcrumbs.showEnumMembers":{type:"boolean",default:!0,scope:5,markdownDescription:d(4196,"When enabled breadcrumbs show `enumMember`-symbols.")},"breadcrumbs.showStructs":{type:"boolean",default:!0,scope:5,markdownDescription:d(4197,"When enabled breadcrumbs show `struct`-symbols.")},"breadcrumbs.showEvents":{type:"boolean",default:!0,scope:5,markdownDescription:d(4198,"When enabled breadcrumbs show `event`-symbols.")},"breadcrumbs.showOperators":{type:"boolean",default:!0,scope:5,markdownDescription:d(4199,"When enabled breadcrumbs show `operator`-symbols.")},"breadcrumbs.showTypeParameters":{type:"boolean",default:!0,scope:5,markdownDescription:d(4200,"When enabled breadcrumbs show `typeParameter`-symbols.")}}});let rl=class{constructor(e,t){this.uri=e,this.kind=t}};class hg{constructor(e,t){this.element=e,this.outline=t}}let ug=class{constructor(e,t,i,o,n){this.resource=e,this._workspaceService=o,this._outlineService=n,this._disposables=new P,this._currentOutline=new Se,this._outlineDisposables=new P,this._onDidUpdate=new I,this.onDidUpdate=this._onDidUpdate.event,this._cfgFilePath=li.FilePath.bindTo(i),this._cfgSymbolPath=li.SymbolPath.bindTo(i),this._disposables.add(this._cfgFilePath.onDidChange(s=>this._onDidUpdate.fire(this))),this._disposables.add(this._cfgSymbolPath.onDidChange(s=>this._onDidUpdate.fire(this))),this._workspaceService.onDidChangeWorkspaceFolders(this._onDidChangeWorkspaceFolders,this,this._disposables),this._fileInfo=this._initFilePathInfo(e),t&&(this._bindToEditor(t),this._disposables.add(n.onDidChange(()=>this._bindToEditor(t))),this._disposables.add(t.onDidChangeControl(()=>this._bindToEditor(t)))),this._onDidUpdate.fire(this)}dispose(){this._disposables.dispose(),this._cfgFilePath.dispose(),this._cfgSymbolPath.dispose(),this._currentOutline.dispose(),this._outlineDisposables.dispose(),this._onDidUpdate.dispose()}isRelative(){return!!this._fileInfo.folder}getElements(){let e=[];if(this._cfgFilePath.getValue()==="on"?e=e.concat(this._fileInfo.path):this._cfgFilePath.getValue()==="last"&&this._fileInfo.path.length>0&&(e=e.concat(this._fileInfo.path.slice(-1))),this._cfgSymbolPath.getValue()==="off"||!this._currentOutline.value)return e;const t=this._currentOutline.value.config.breadcrumbsDataSource.getBreadcrumbElements();for(let i=this._cfgSymbolPath.getValue()==="last"&&t.length>0?t.length-1:0;i<t.length;i++)e.push(new hg(t[i],this._currentOutline.value));return t.length===0&&!this._currentOutline.value.isEmpty&&e.push(new hg(this._currentOutline.value,this._currentOutline.value)),e}_initFilePathInfo(e){if(Fk(e,pe.untitled,pe.data))return{folder:void 0,path:[]};const t={folder:this._workspaceService.getWorkspaceFolder(e)??void 0,path:[]};let i=e;for(;i&&i.path!=="/"&&!(t.folder&&ot(t.folder.uri,i));){t.path.unshift(new rl(i,t.path.length===0?ft.FILE:ft.FOLDER));const o=i.path.length;if(i=xf(i),i.path.length===o)break}return t.folder&&this._workspaceService.getWorkbenchState()===3&&t.path.unshift(new rl(t.folder.uri,ft.ROOT_FOLDER)),t}_onDidChangeWorkspaceFolders(){this._fileInfo=this._initFilePathInfo(this.resource),this._onDidUpdate.fire(this)}_bindToEditor(e){const t=new ko;this._currentOutline.clear(),this._outlineDisposables.clear(),this._outlineDisposables.add(ne(()=>t.dispose(!0))),this._outlineService.createOutline(e,2,t.token).then(i=>{t.token.isCancellationRequested&&(i==null||i.dispose(),i=void 0),this._currentOutline.value=i,this._onDidUpdate.fire(this),i&&this._outlineDisposables.add(i.onDidChange(()=>this._onDidUpdate.fire(this)))}).catch(i=>{this._onDidUpdate.fire(this),gn(i)})}};ug=x([u(2,F),u(3,ei),u(4,Nk)],ug);let al=class{constructor(e,t,i,o,n){this.resource=t,this._instantiationService=i,this._themeService=o,this._configurationService=n,this._disposables=new P,this._fakeEvent=new UIEvent("fakeEvent"),this._onWillPickElement=new I,this.onWillPickElement=this._onWillPickElement.event,this._previewDispoables=new Se,this._domNode=document.createElement("div"),this._domNode.className="monaco-breadcrumbs-picker show-file-icons",e.appendChild(this._domNode)}dispose(){this._disposables.dispose(),this._previewDispoables.dispose(),this._onWillPickElement.dispose(),this._domNode.remove(),setTimeout(()=>this._tree.dispose(),0)}async show(e,t,i,o,n){const r=this._themeService.getColorTheme().getColor(ey);this._arrow=document.createElement("div"),this._arrow.className="arrow",this._arrow.style.borderColor=`transparent transparent ${r?r.toString():""}`,this._domNode.appendChild(this._arrow),this._treeContainer=document.createElement("div"),this._treeContainer.style.background=r?r.toString():"",this._treeContainer.style.paddingTop="2px",this._treeContainer.style.borderRadius="3px",this._treeContainer.style.boxShadow=`0 0 8px 2px ${this._themeService.getColorTheme().getColor(Gk)}`,this._treeContainer.style.border=`1px solid ${this._themeService.getColorTheme().getColor(Wk)}`,this._domNode.appendChild(this._treeContainer),this._layoutInfo={maxHeight:t,width:i,arrowSize:o,arrowOffset:n,inputHeight:0},this._tree=this._createTree(this._treeContainer,e),this._disposables.add(this._tree.onDidOpen(async a=>{const{element:l,editorOptions:h,sideBySide:p}=a;await this._revealElement(l,{...h,preserveFocus:!1},p)})),this._disposables.add(this._tree.onDidChangeFocus(a=>{this._previewDispoables.value=this._previewElement(a.elements[0])})),this._disposables.add(this._tree.onDidChangeContentHeight(()=>{this._layout()})),this._domNode.focus();try{await this._setInput(e),this._layout()}catch(a){gn(a)}}_layout(){const e=2*this._layoutInfo.arrowSize,t=Math.min(this._layoutInfo.maxHeight-e,this._tree.contentHeight),i=t+e;this._domNode.style.height=`${i}px`,this._domNode.style.width=`${this._layoutInfo.width}px`,this._arrow.style.top=`-${2*this._layoutInfo.arrowSize}px`,this._arrow.style.borderWidth=`${this._layoutInfo.arrowSize}px`,this._arrow.style.marginLeft=`${this._layoutInfo.arrowOffset}px`,this._treeContainer.style.height=`${t}px`,this._treeContainer.style.width=`${this._layoutInfo.width}px`,this._tree.layout(t,this._layoutInfo.width)}restoreViewState(){}};al=x([u(2,O),u(3,te),u(4,F)],al);class I1{getHeight(e){return 22}getTemplateId(e){return"FileStat"}}class D1{getId(e){return z.isUri(e)?e.toString():up(e)?e.id:_o(e)?e.uri.toString():e.resource.toString()}}let pg=class{constructor(e){this._fileService=e}hasChildren(e){return z.isUri(e)||up(e)||_o(e)||e.isDirectory}async getChildren(e){if(up(e))return e.folders;let t;return _o(e)?t=e.uri:z.isUri(e)?t=e:t=e.resource,(await this._fileService.resolve(t)).children??[]}};pg=x([u(0,Oe)],pg);let gg=class{constructor(e,t){this._labels=e,this._configService=t,this.templateId="FileStat"}renderTemplate(e){return this._labels.create(e,{supportHighlights:!0})}renderElement(e,t,i){const o=this._configService.getValue("explorer.decorations"),{element:n}=e;let s,r;_o(n)?(s=n.uri,r=ft.ROOT_FOLDER):(s=n.resource,r=n.isDirectory?ft.FOLDER:ft.FILE),i.setFile(s,{fileKind:r,hidePath:!0,fileDecorations:o,matches:bs(e.filterData),extraClasses:["picker-item"]})}disposeTemplate(e){e.dispose()}};gg=x([u(1,F)],gg);class A1{getKeyboardNavigationLabel(e){return e.name}}class T1{getWidgetAriaLabel(){return d(11899,"Breadcrumbs")}getAriaLabel(e){return e.name}}let mg=class{constructor(e,t){this._workspaceService=e,this._cachedExpressions=new Map,this._disposables=new P;const i=li.FileExcludes.bindTo(t),o=()=>{e.getWorkspace().folders.forEach(n=>{const s=i.getValue({resource:n.uri});if(!s)return;const r={};for(const a in s){if(typeof s[a]!="boolean")continue;const l=a.indexOf("**/")!==0?iy.join(n.uri.path,a):a;r[l]=s[a]}this._cachedExpressions.set(n.uri.toString(),zk(r))})};o(),this._disposables.add(i),this._disposables.add(i.onDidChange(o)),this._disposables.add(e.onDidChangeWorkspaceFolders(o))}dispose(){this._disposables.dispose()}filter(e,t){if(_o(e))return!0;const i=this._workspaceService.getWorkspaceFolder(e.resource);return!i||!this._cachedExpressions.has(i.uri.toString())?!0:!this._cachedExpressions.get(i.uri.toString())(Hk(i.uri.path,e.resource.path),mt(e.resource))}};mg=x([u(0,ei),u(1,F)],mg);class V1{compare(e,t){return _o(e)&&_o(t)?e.index-t.index:e.isDirectory===t.isDirectory?Uk(e.name,t.name):e.isDirectory?-1:1}}let fg=class extends al{constructor(e,t,i,o,n,s,r){super(e,t,i,o,n),this._workspaceService=s,this._editorService=r}_createTree(e){this._treeContainer.classList.add("file-icon-themable-tree"),this._treeContainer.classList.add("show-file-icons");const t=o=>{this._treeContainer.classList.toggle("align-icons-and-twisties",o.hasFileIcons&&!o.hasFolderIcons),this._treeContainer.classList.toggle("hide-arrows",o.hidesExplorerArrows===!0)};this._disposables.add(this._themeService.onDidFileIconThemeChange(t)),t(this._themeService.getFileIconTheme());const i=this._instantiationService.createInstance(Sc,If);return this._disposables.add(i),this._instantiationService.createInstance(Xr,"BreadcrumbsFilePicker",e,new I1,[this._instantiationService.createInstance(gg,i)],this._instantiationService.createInstance(pg),{multipleSelectionSupport:!1,sorter:new V1,filter:this._instantiationService.createInstance(mg),identityProvider:new D1,keyboardNavigationLabelProvider:new A1,accessibilityProvider:this._instantiationService.createInstance(T1),showNotFoundMessage:!1,overrideStyles:{listBackground:ey}})}async _setInput(e){const{uri:t,kind:i}=e;let o;i===ft.ROOT_FOLDER?o=this._workspaceService.getWorkspace():o=xf(t);const n=this._tree;await n.setInput(o);let s;for(const{element:r}of n.getNode().children)if(_o(r)&&ot(r.uri,t)){s=r;break}else if(ot(r.resource,t)){s=r;break}s&&(n.reveal(s,.5),n.setFocus([s],this._fakeEvent)),n.domFocus()}_previewElement(e){return R.None}async _revealElement(e,t,i){return!_o(e)&&e.isFile?(this._onWillPickElement.fire(),await this._editorService.openEditor({resource:e.resource,options:t},i?Mr:void 0),!0):!1}};fg=x([u(2,O),u(3,te),u(4,F),u(5,ei),u(6,U)],fg);let bg=class{constructor(e,t,i){this.comparator=e,this._order=i.getValue(t,"breadcrumbs.symbolSortOrder")}compare(e,t){return this._order==="name"?this.comparator.compareByName(e,t):this._order==="type"?this.comparator.compareByType(e,t):this.comparator.compareByPosition(e,t)}};bg=x([u(2,_s)],bg);class M1 extends al{_createTree(e,t){const{config:i}=t.outline;return this._instantiationService.createInstance(ty,"BreadcrumbsOutlinePicker",e,i.delegate,i.renderers,i.treeDataSource,{...i.options,sorter:this._instantiationService.createInstance(bg,i.comparator,void 0),collapseByDefault:!0,expandOnlyOnTwistieClick:!0,multipleSelectionSupport:!1,showNotFoundMessage:!1})}_setInput(e){const t=e.outline.captureViewState();this.restoreViewState=()=>{t.dispose()};const i=this._tree;return i.setInput(e.outline),e.element!==e.outline&&(i.reveal(e.element,.5),i.setFocus([e.element],this._fakeEvent)),i.domFocus(),Promise.resolve()}_previewElement(e){return this._tree.getInput().preview(e)}async _revealElement(e,t,i){return this._onWillPickElement.fire(),await this._tree.getInput().reveal(e,t,i,!1),!0}}var Ri;class cl extends db{constructor(e,t,i){super(),this.model=e,this.element=t,this.options=i,this._disposables=new P}dispose(){this._disposables.dispose()}equals(e){return e instanceof cl?this.element.element===e.element.element&&this.options.showFileIcons===e.options.showFileIcons&&this.options.showSymbolIcons===e.options.showSymbolIcons:!1}render(e){const{element:t,outline:i}=this.element;if(t===i){const r=H("span",void 0,"");e.appendChild(r);return}const o=i.config.delegate.getTemplateId(t),n=i.config.renderers.find(r=>r.templateId===o);if(!n){e.innerText="<<NO RENDERER>>";return}const s=n.renderTemplate(e);n.renderElement({element:t,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:0,collapsible:!1,collapsed:!1,visible:!0,filterData:void 0},0,s,void 0),this._disposables.add(ne(()=>{n.disposeTemplate(s)}))}}class dl extends db{constructor(e,t,i,o,n){super(),this.model=e,this.element=t,this.options=i,this._labels=o,this._hoverDelegate=n,this._disposables=new P}dispose(){this._disposables.dispose()}equals(e){return e instanceof dl?gp.isEqual(this.element.uri,e.element.uri)&&this.options.showFileIcons===e.options.showFileIcons&&this.options.showSymbolIcons===e.options.showSymbolIcons:!1}render(e){const t=this._labels.create(e,{hoverDelegate:this._hoverDelegate});t.setFile(this.element.uri,{hidePath:!0,hideIcon:this.element.kind===ft.FOLDER||!this.options.showFileIcons,fileKind:this.element.kind,fileDecorations:{colors:this.options.showDecorationColors,badges:!1}}),e.classList.add(ft[this.element.kind].toLowerCase()),this._disposables.add(t)}}const L1=X("breadcrumb-separator",T.chevronRight,d(11859,"Icon for the separator in the breadcrumbs."));var Rt;let De=(Rt=class{get onDidVisibilityChange(){return this._onDidVisibilityChange.event}constructor(e,t,i,o,n,s,r,a,l,h,p,g){this._options=t,this._editorGroup=i,this._contextKeyService=o,this._contextViewService=n,this._instantiationService=s,this._quickInputService=r,this._fileService=a,this._editorService=l,this._labelService=h,this._disposables=new P,this._breadcrumbsDisposables=new P,this._model=new Se,this._breadcrumbsPickerShowing=!1,this._onDidVisibilityChange=this._disposables.add(new I),this.domNode=document.createElement("div"),this.domNode.classList.add("breadcrumbs-control"),ve(e,this.domNode),this._cfUseQuickPick=li.UseQuickPick.bindTo(p),this._cfShowIcons=li.Icons.bindTo(p),this._cfTitleScrollbarSizing=li.TitleScrollbarSizing.bindTo(p),this._labels=this._instantiationService.createInstance(Sc,If);const m=this._cfTitleScrollbarSizing.getValue()??"default",f=t.widgetStyles??oy;this._widget=new k1(this.domNode,Ri.SCROLLBAR_SIZES[m],L1,f),this._widget.onDidSelectItem(this._onSelectEvent,this,this._disposables),this._widget.onDidFocusItem(this._onFocusEvent,this,this._disposables),this._widget.onDidChangeFocus(this._updateCkBreadcrumbsActive,this,this._disposables),this._ckBreadcrumbsPossible=Ri.CK_BreadcrumbsPossible.bindTo(this._contextKeyService),this._ckBreadcrumbsVisible=Ri.CK_BreadcrumbsVisible.bindTo(this._contextKeyService),this._ckBreadcrumbsActive=Ri.CK_BreadcrumbsActive.bindTo(this._contextKeyService),this._hoverDelegate=Jh("mouse"),this._disposables.add(g.register(this._editorGroup.id,this._widget)),this.hide()}dispose(){this._disposables.dispose(),this._breadcrumbsDisposables.dispose(),this._ckBreadcrumbsPossible.reset(),this._ckBreadcrumbsVisible.reset(),this._ckBreadcrumbsActive.reset(),this._cfUseQuickPick.dispose(),this._cfShowIcons.dispose(),this._widget.dispose(),this._labels.dispose(),this.domNode.remove()}get model(){return this._model.value}layout(e){this._widget.layout(e)}isHidden(){return this.domNode.classList.contains("hidden")}hide(){const e=this.isHidden();this._breadcrumbsDisposables.clear(),this._ckBreadcrumbsVisible.set(!1),this.domNode.classList.toggle("hidden",!0),e||this._onDidVisibilityChange.fire()}show(){const e=this.isHidden();this._ckBreadcrumbsVisible.set(!0),this.domNode.classList.toggle("hidden",!1),e&&this._onDidVisibilityChange.fire()}revealLast(){this._widget.revealLast()}update(){this._breadcrumbsDisposables.clear();const e=Ie.getCanonicalUri(this._editorGroup.activeEditor,{supportSideBySide:Ce.PRIMARY}),t=this.isHidden();if(!e||!this._fileService.hasProvider(e))return this._ckBreadcrumbsPossible.set(!1),t?!1:(this.hide(),!0);const i=Ie.getOriginalUri(this._editorGroup.activeEditor,{supportSideBySide:Ce.PRIMARY});this.show(),this._ckBreadcrumbsPossible.set(!0);const o=this._instantiationService.createInstance(ug,i??e,this._editorGroup.activeEditorPane);this._model.value=o,this.domNode.classList.toggle("backslash-path",this._labelService.getSeparator(e.scheme,e.authority)==="\\");const n=()=>{this.domNode.classList.toggle("relative-path",o.isRelative());const h=this._cfShowIcons.getValue(),p={...this._options,showFileIcons:this._options.showFileIcons&&h,showSymbolIcons:this._options.showSymbolIcons&&h},g=o.getElements().map(m=>m instanceof rl?new dl(o,m,p,this._labels,this._hoverDelegate):new cl(o,m,p));g.length===0?(this._widget.setEnabled(!1),this._widget.setItems([new class extends db{render(m){m.innerText=d(11863,"no elements")}equals(m){return m===this}dispose(){}}])):(this._widget.setEnabled(!0),this._widget.setItems(g),this._widget.reveal(g[g.length-1]))},s=o.onDidUpdate(n),r=this._cfShowIcons.onDidChange(n);n(),this._breadcrumbsDisposables.clear(),this._breadcrumbsDisposables.add(s),this._breadcrumbsDisposables.add(ne(()=>this._model.clear())),this._breadcrumbsDisposables.add(r),this._breadcrumbsDisposables.add(ne(()=>this._widget.setItems([])));const a=()=>{const h=this._cfTitleScrollbarSizing.getValue()??"default";this._widget.setHorizontalScrollbarSize(Ri.SCROLLBAR_SIZES[h])};a();const l=this._cfTitleScrollbarSizing.onDidChange(a);return this._breadcrumbsDisposables.add(l),this._breadcrumbsDisposables.add({dispose:()=>{this._breadcrumbsPickerShowing&&this._contextViewService.hideContextView({source:this})}}),t!==this.isHidden()}_onFocusEvent(e){e.item&&this._breadcrumbsPickerShowing&&(this._breadcrumbsPickerIgnoreOnceItem=void 0,this._widget.setSelection(e.item))}_onSelectEvent(e){if(!e.item)return;if(e.item===this._breadcrumbsPickerIgnoreOnceItem){this._breadcrumbsPickerIgnoreOnceItem=void 0,this._widget.setFocused(void 0),this._widget.setSelection(void 0);return}const{element:t}=e.item;this._editorGroup.focus();const i=this._getEditorGroup(e.payload);if(i!==void 0){this._widget.setFocused(void 0),this._widget.setSelection(void 0),this._revealInEditor(e,t,i);return}if(this._cfUseQuickPick.getValue()){this._widget.setFocused(void 0),this._widget.setSelection(void 0),this._quickInputService.quickAccess.show(t instanceof hg?"@":"");return}let o,n;this._contextViewService.showContextView({render:s=>{e.item instanceof dl?o=this._instantiationService.createInstance(fg,s,e.item.model.resource):e.item instanceof cl&&(o=this._instantiationService.createInstance(M1,s,e.item.model.resource));const r=o.onWillPickElement(()=>this._contextViewService.hideContextView({source:this,didPick:!0})),a=Kk.getInstance(fe(this.domNode)).onDidChange(()=>this._contextViewService.hideContextView({source:this})),l=ms(s),h=l.onDidBlur(()=>{this._breadcrumbsPickerIgnoreOnceItem=this._widget.isDOMFocused()?e.item:void 0,this._contextViewService.hideContextView({source:this})});return this._breadcrumbsPickerShowing=!0,this._updateCkBreadcrumbsActive(),pp(o,r,a,l,h)},getAnchor:()=>{if(!n){const s=fe(this.domNode),r=s.innerWidth-8;let a=Math.min(s.innerHeight*.7,300);const l=Math.min(r,Math.max(240,r/4.17)),h=8;let p;const g=Sv(e.node.firstChild),m=g.top+g.height+h;m+a>=s.innerHeight&&(a=s.innerHeight-m-30);let f=g.left;if(f+l>=r&&(f=r-l),e.payload instanceof ai){const v=l-2*h;p=e.payload.posx-f,p>v&&(f=Math.min(r-l,f+p-v),p=v)}else p=g.left+g.width*.3-f;o.show(t,a,l,h,Math.max(0,p)),n={x:f,y:m}}return n},onHide:s=>{s!=null&&s.didPick||o.restoreViewState(),this._breadcrumbsPickerShowing=!1,this._updateCkBreadcrumbsActive(),(s==null?void 0:s.source)===this&&(this._widget.setFocused(void 0),this._widget.setSelection(void 0)),o.dispose()}})}_updateCkBreadcrumbsActive(){const e=this._widget.isDOMFocused()||this._breadcrumbsPickerShowing;this._ckBreadcrumbsActive.set(e)}async _revealInEditor(e,t,i,o=!1){if(t instanceof rl)if(t.kind===ft.FILE)await this._editorService.openEditor({resource:t.uri,options:{pinned:o}},i);else{const n=this._widget.getItems(),s=n.indexOf(e.item);this._widget.setFocused(n[s+1]),this._widget.setSelection(n[s+1],Ri.Payload_Pick)}else t.outline.reveal(t,{pinned:o},i===Mr,!1)}_getEditorGroup(e){return e===Ri.Payload_RevealAside?Mr:e===Ri.Payload_Reveal?ny:void 0}},Ri=Rt,Rt.HEIGHT=22,Rt.SCROLLBAR_SIZES={default:3,large:8},Rt.Payload_Reveal={},Rt.Payload_RevealAside={},Rt.Payload_Pick={},Rt.CK_BreadcrumbsPossible=new j("breadcrumbsPossible",!1,d(11860,"Whether the editor can show breadcrumbs")),Rt.CK_BreadcrumbsVisible=new j("breadcrumbsVisible",!1,d(11861,"Whether breadcrumbs are currently visible")),Rt.CK_BreadcrumbsActive=new j("breadcrumbsActive",!1,d(11862,"Whether breadcrumbs have focus")),Rt);De=Ri=x([u(3,K),u(4,Ec),u(5,O),u(6,Fe),u(7,Oe),u(8,U),u(9,mi),u(10,F),u(11,Qi)],De);let ll=class{get control(){return this._control}get onDidEnablementChange(){return this._onDidEnablementChange.event}get onDidVisibilityChange(){return this._onDidVisibilityChange.event}constructor(e,t,i,o,n,s){this._container=e,this._editorGroup=t,this._options=i,this._instantiationService=n,this._disposables=new P,this._controlDisposables=new P,this._onDidEnablementChange=this._disposables.add(new I),this._onDidVisibilityChange=this._disposables.add(new I);const r=this._disposables.add(li.IsEnabled.bindTo(o));this._disposables.add(r.onDidChange(()=>{const a=r.getValue();!a&&this._control?(this._controlDisposables.clear(),this._control=void 0,this._onDidEnablementChange.fire()):a&&!this._control&&(this._control=this.createControl(),this._control.update(),this._onDidEnablementChange.fire())})),r.getValue()&&(this._control=this.createControl()),this._disposables.add(s.onDidChangeFileSystemProviderRegistrations(a=>{var l,h;(l=this._control)!=null&&l.model&&this._control.model.resource.scheme!==a.scheme||(h=this._control)!=null&&h.update()&&this._onDidEnablementChange.fire()}))}createControl(){const e=this._controlDisposables.add(this._instantiationService.createInstance(De,this._container,this._options,this._editorGroup));return this._controlDisposables.add(e.onDidVisibilityChange(()=>this._onDidVisibilityChange.fire())),e}dispose(){this._disposables.dispose(),this._controlDisposables.dispose()}};ll=x([u(3,F),u(4,O),u(5,Oe)],ll);C(class extends A{constructor(){super({id:"breadcrumbs.toggle",title:{...w(11864,"Toggle Breadcrumbs"),mnemonicTitle:d(11865,"Toggle &&Breadcrumbs")},category:_.View,toggled:{condition:y.equals("config.breadcrumbs.enabled",!0),title:d(11866,"Toggle Breadcrumbs"),mnemonicTitle:d(11867,"Toggle &&Breadcrumbs")},menu:[{id:b.CommandPalette},{id:b.MenubarAppearanceMenu,group:"4_editor",order:2},{id:b.NotebookToolbar,group:"notebookLayout",order:2},{id:b.StickyScrollContext},{id:b.NotebookStickyScrollContext,group:"notebookView",order:2}]})}run(e){const t=e.get(F),i=li.IsEnabled.bindTo(t).getValue();li.IsEnabled.bindTo(t).updateValue(!i)}});function lb(c,e){const t=c.get(Z),o=c.get(Qi).getWidget(t.activeGroup.id);if(o){const n=sy(o.getItems());o.setFocused(n),e&&o.setSelection(n,De.Payload_Pick)}}C(class extends A{constructor(){super({id:"breadcrumbs.focusAndSelect",title:w(11868,"Focus and Select Breadcrumbs"),precondition:De.CK_BreadcrumbsVisible,keybinding:{weight:200,primary:3161,when:De.CK_BreadcrumbsPossible},f1:!0})}run(e,...t){lb(e,!0)}});C(class extends A{constructor(){super({id:"breadcrumbs.focus",title:w(11869,"Focus Breadcrumbs"),precondition:De.CK_BreadcrumbsVisible,keybinding:{weight:200,primary:3157,when:De.CK_BreadcrumbsPossible},f1:!0})}run(e,...t){lb(e,!1)}});ee.registerCommandAndKeybindingRule({id:"breadcrumbs.toggleToOn",weight:200,primary:3161,when:y.not("config.breadcrumbs.enabled"),handler:async c=>{const e=c.get(O),t=c.get(F),i=li.IsEnabled.bindTo(t);return i.getValue()||(await i.updateValue(!0),await Lr(50)),e.invokeFunction(lb,!0)}});ee.registerCommandAndKeybindingRule({id:"breadcrumbs.focusNext",weight:200,primary:17,secondary:[2065],mac:{primary:17,secondary:[529]},when:y.and(De.CK_BreadcrumbsVisible,De.CK_BreadcrumbsActive),handler(c){const e=c.get(Z),i=c.get(Qi).getWidget(e.activeGroup.id);i&&i.focusNext()}});ee.registerCommandAndKeybindingRule({id:"breadcrumbs.focusPrevious",weight:200,primary:15,secondary:[2063],mac:{primary:15,secondary:[527]},when:y.and(De.CK_BreadcrumbsVisible,De.CK_BreadcrumbsActive),handler(c){const e=c.get(Z),i=c.get(Qi).getWidget(e.activeGroup.id);i&&i.focusPrev()}});ee.registerCommandAndKeybindingRule({id:"breadcrumbs.focusNextWithPicker",weight:201,primary:2065,mac:{primary:529},when:y.and(De.CK_BreadcrumbsVisible,De.CK_BreadcrumbsActive,ye),handler(c){const e=c.get(Z),i=c.get(Qi).getWidget(e.activeGroup.id);i&&i.focusNext()}});ee.registerCommandAndKeybindingRule({id:"breadcrumbs.focusPreviousWithPicker",weight:201,primary:2063,mac:{primary:527},when:y.and(De.CK_BreadcrumbsVisible,De.CK_BreadcrumbsActive,ye),handler(c){const e=c.get(Z),i=c.get(Qi).getWidget(e.activeGroup.id);i&&i.focusPrev()}});ee.registerCommandAndKeybindingRule({id:"breadcrumbs.selectFocused",weight:200,primary:3,secondary:[18],when:y.and(De.CK_BreadcrumbsVisible,De.CK_BreadcrumbsActive),handler(c){const e=c.get(Z),i=c.get(Qi).getWidget(e.activeGroup.id);i&&i.setSelection(i.getFocused(),De.Payload_Pick)}});ee.registerCommandAndKeybindingRule({id:"breadcrumbs.revealFocused",weight:200,primary:10,secondary:[2051],when:y.and(De.CK_BreadcrumbsVisible,De.CK_BreadcrumbsActive),handler(c){const e=c.get(Z),i=c.get(Qi).getWidget(e.activeGroup.id);i&&i.setSelection(i.getFocused(),De.Payload_Reveal)}});ee.registerCommandAndKeybindingRule({id:"breadcrumbs.selectEditor",weight:201,primary:9,when:y.and(De.CK_BreadcrumbsVisible,De.CK_BreadcrumbsActive),handler(c){var o;const e=c.get(Z),i=c.get(Qi).getWidget(e.activeGroup.id);i&&(i.setFocused(void 0),i.setSelection(void 0),(o=e.activeGroup.activeEditorPane)==null||o.focus())}});ee.registerCommandAndKeybindingRule({id:"breadcrumbs.revealFocusedFromTreeAside",weight:200,primary:2051,when:y.and(De.CK_BreadcrumbsVisible,De.CK_BreadcrumbsActive,ye),handler(c){const e=c.get(U),i=c.get(ue).lastFocusedList;if(!(i instanceof ty)&&!(i instanceof Xr))return;const o=i.getFocus()[0];if(z.isUri(o==null?void 0:o.resource))return e.openEditor({resource:o.resource,options:{pinned:!0}},Mr);const n=i.getInput();if(n&&typeof n.outlineKind=="string")return n.reveal(o,{pinned:!0,preserveFocus:!1},!0,!1)}});var P1='.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container{display:flex;position:relative}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.empty{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.tabs-border-bottom:after{background-color:var(--tabs-border-bottom-color);bottom:0;content:"";height:1px;left:0;pointer-events:none;position:absolute;width:100%;z-index:9}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container>.monaco-scrollable-element{flex:1}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container>.monaco-scrollable-element .scrollbar{cursor:default;z-index:11}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container{display:flex;height:var(--editor-group-tab-height);scrollbar-width:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.scroll{overflow:scroll!important}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .tabs-container{flex-wrap:wrap;height:auto}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container::-webkit-scrollbar{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab{background-color:var(--vscode-tab-unfocusedInactiveBackground);box-sizing:border-box;cursor:pointer;display:flex;height:var(--editor-group-tab-height);padding-left:10px;position:relative;white-space:nowrap}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab{background-color:var(--vscode-tab-inactiveBackground)}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active{background-color:var(--vscode-tab-unfocusedActiveBackground)}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.active{background-color:var(--vscode-tab-activeBackground)}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab{color:var(--vscode-tab-unfocusedInactiveForeground)}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab{color:var(--vscode-tab-inactiveForeground)}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active{color:var(--vscode-tab-unfocusedActiveForeground)}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.active{color:var(--vscode-tab-activeForeground)}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.selected:not(.active){background-color:var(--vscode-tab-selectedBackground);color:var(--vscode-tab-selectedForeground)}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab:not(.active){box-shadow:none}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .tabs-container>.tab:last-child{margin-right:var(--last-tab-margin-right)}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .tabs-container>.tab.last-in-row:not(:last-child){border-right:0!important}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.has-icon.close-action-off:not(.sticky-compact),.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.has-icon.tab-actions-right,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.has-icon.close-action-off:not(.sticky-compact),.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.has-icon.tab-actions-right{padding-left:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit{flex-shrink:0;min-width:fit-content;width:120px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed{flex:1 0 0;max-width:var(--tab-sizing-current-width,var(--tab-sizing-fixed-max-width,160px));min-width:var(--tab-sizing-current-width,var(--tab-sizing-fixed-min-width,50px))}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.last-in-row{min-width:calc(var(--tab-sizing-current-width, var(--tab-sizing-fixed-min-width, 50px)) - 1px)}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .tabs-container>.tab.sizing-fit.last-in-row:not(:last-child){flex-grow:1}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink{flex-basis:0;flex-grow:1;max-width:fit-content;min-width:80px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.sticky-shrink{flex-basis:0;flex-grow:0;position:sticky;z-index:8}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.sticky-compact{max-width:38px;min-width:38px;width:38px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.sticky-shrink{max-width:80px;min-width:80px;width:80px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-fit.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-fit.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-fixed.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-fixed.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-shrink.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-shrink.sticky-shrink{left:unset!important;position:relative;z-index:unset}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-fade-hider{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.close-action-off .tab-fade-hider,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.tab-actions-left .tab-fade-hider,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.close-action-off .tab-fade-hider,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.tab-actions-left .tab-fade-hider{display:flex;flex:0;width:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.tab-actions-left,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.tab-actions-left{min-width:80px;padding-right:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-left:not(.sticky-compact){flex-direction:row-reverse;padding-left:0;padding-right:10px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-border-bottom-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-border-top-container{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active.tab-border-top>.tab-border-top-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty-border-top>.tab-border-top-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.selected.tab-border-top>.tab-border-top-container,.monaco-workbench .part.editor>.content .editor-group-container>.title.two-tab-bars .tabs-and-actions-container:not(:first-child) .tabs-container>.tab.active.tab-border-bottom>.tab-border-bottom-container,.monaco-workbench .part.editor>.content .editor-group-container>.title:not(.two-tab-bars) .tabs-container>.tab.active.tab-border-bottom>.tab-border-bottom-container{display:block;left:0;pointer-events:none;position:absolute;width:100%}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active.tab-border-top>.tab-border-top-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.selected.tab-border-top>.tab-border-top-container{background-color:var(--tab-border-top-color);height:1px;top:0;z-index:6}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active.tab-border-bottom>.tab-border-bottom-container{background-color:var(--tab-border-bottom-color);bottom:0;height:1px;z-index:10}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty-border-top>.tab-border-top-container{background-color:var(--tab-dirty-border-top-color);height:2px;top:0;z-index:6}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label{line-height:var(--editor-group-tab-height);margin-bottom:auto;margin-top:auto}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed .tab-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink .tab-label{position:relative}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.tab-label>.monaco-icon-label-container:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.tab-label>.monaco-icon-label-container:after{bottom:1px;content:"";height:calc(100% - 2px);opacity:1;padding:0;position:absolute;right:0;top:1px;width:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed:focus>.tab-label>.monaco-icon-label-container:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink:focus>.tab-label>.monaco-icon-label-container:after{opacity:0}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.tab-label.tab-label-has-badge:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink:not(.tab-actions-left):not(.close-action-off) .tab-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.tab-label.tab-label-has-badge:after{padding-right:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky-compact:not(.has-icon) .monaco-icon-label{text-align:center}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit .monaco-icon-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit .monaco-icon-label>.monaco-icon-label-container{overflow-x:visible}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.monaco-icon-label>.monaco-icon-label-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.monaco-icon-label>.monaco-icon-label-container{flex:none;text-overflow:clip}.monaco-workbench.hc-black .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.monaco-icon-label>.monaco-icon-label-container,.monaco-workbench.hc-black .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.monaco-icon-label>.monaco-icon-label-container,.monaco-workbench.hc-light .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.monaco-icon-label>.monaco-icon-label-container,.monaco-workbench.hc-light .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.monaco-icon-label>.monaco-icon-label-container{text-overflow:ellipsis}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-actions{margin-bottom:auto;margin-top:auto;width:28px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-actions>.monaco-action-bar{width:28px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-fixed>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-shrink>.tab-actions{flex:0;overflow:hidden}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty.tab-actions-right.sizing-fixed>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty.tab-actions-right.sizing-shrink>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky.tab-actions-right.sizing-fixed>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky.tab-actions-right.sizing-shrink>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-fixed:hover>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-fixed>.tab-actions:focus-within,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-shrink:hover>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-shrink>.tab-actions:focus-within{overflow:visible}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.close-action-off:not(.dirty)>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky-compact>.tab-actions{display:none}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.active:hover>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.active>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.dirty>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.sticky:not(.pinned-action-off)>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab:hover>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab>.tab-actions .action-label:focus{opacity:1}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-actions .actions-container{justify-content:center}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab>.tab-actions .action-label.codicon{color:inherit;font-size:16px;height:16px;padding:2px;width:16px}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.sticky.dirty>.tab-actions .action-label:not(:hover):before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky.dirty>.tab-actions .action-label:not(:hover):before{content:var(--vscode-icon-pinned-dirty-content);font-family:var(--vscode-icon-pinned-dirty-font-family)}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.dirty>.tab-actions .action-label:not(:hover):before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty>.tab-actions .action-label:not(:hover):before{content:var(--vscode-icon-circle-filled-content);font-family:var(--vscode-icon-circle-filled-font-family)}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active:hover>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky:not(.pinned-action-off)>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab:hover>.tab-actions .action-label{opacity:.5}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-actions .action-label{opacity:0}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.close-action-off{padding-right:10px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.close-action-off:not(.sticky-compact),.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.close-action-off:not(.sticky-compact){padding-right:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.close-action-off.dirty-border-top>.tab-actions{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.close-action-off.dirty:not(.dirty-border-top):not(.sticky-compact){padding-right:0}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.close-action-off>.tab-actions{pointer-events:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .editor-actions{cursor:default;flex:initial;height:var(--editor-group-tab-height);padding:0 8px 0 4px}.monaco-workbench .part.editor>.content .editor-group-container>.title .editor-actions.hidden{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .editor-actions .action-item{margin-right:4px}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .editor-actions{bottom:0;position:absolute;right:0}.monaco-workbench .part.editor>.content .editor-group-container>.title.two-tab-bars>.tabs-and-actions-container:first-child .editor-actions{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.drop-target-left:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.drop-target-right:before{background-color:var(--vscode-tab-dragAndDropBorder);content:"";height:100%;pointer-events:none;position:absolute;top:0;width:1px;z-index:11}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.drop-target-right:before{left:0}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.drop-target-left:after{right:-1px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.last-in-row.drop-target-left:not(:last-child):after{right:0}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.last-in-row+.tab.drop-target-right:before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.last-in-row.drop-target-left:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab:first-child.drop-target-right:before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab:last-child.drop-target-left:after{width:2px}';we(P1,{});var R1=".monaco-workbench .part.editor>.content .editor-group-container>.title{cursor:pointer}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .title-label{flex:1;white-space:nowrap!important}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label a,.monaco-workbench .part.editor>.content .editor-group-container>.title .title-label a{font-size:13px}.monaco-workbench .part.editor>.content .editor-group-container>.title .monaco-icon-label:before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .monaco-icon-label:before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label a,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label span,.monaco-workbench .part.editor>.content .editor-group-container>.title .title-label a,.monaco-workbench .part.editor>.content .editor-group-container>.title .title-label h2{cursor:pointer}.monaco-workbench .part.editor>.content .editor-group-container>.title .monaco-icon-label:before{height:var(--editor-group-tab-height)}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .monaco-icon-label:after,.monaco-workbench .part.editor>.content .editor-group-container>.title.tabs .monaco-icon-label:after{margin-right:0}.monaco-editor-group-drag-image{border-radius:10px;display:inline-block;font-size:12px;max-width:120px;overflow:hidden;padding:1px 7px;position:absolute;text-overflow:ellipsis;white-space:nowrap}";we(R1,{});var gd;class BS extends bc{constructor(e){super(),this.context=e}run(e,t){let i=this.context;return t!=null&&t.preserveFocus&&(i={...this.context,preserveFocus:!0}),super.run(e,i)}}var Yn;let oc=(Yn=class extends kc{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f){super(g),this.parent=e,this.editorPartsView=t,this.groupsView=i,this.groupView=o,this.tabsModel=n,this.contextMenuService=s,this.instantiationService=r,this.contextKeyService=a,this.keybindingService=l,this.notificationService=h,this.quickInputService=p,this.editorResolverService=m,this.hostService=f,this.editorTransfer=wo.getInstance(),this.groupTransfer=wo.getInstance(),this.treeItemsTransfer=wo.getInstance(),this.editorActionsToolbarDisposables=this._register(new P),this.editorActionsDisposables=this._register(new P),this.renderDropdownAsChildElement=!1;const v=this.create(e);this.contextMenuContextKeyService=this._register(this.contextKeyService.createScoped(v));const S=this._register(this.instantiationService.createChild(new $r([K,this.contextMenuContextKeyService])));this.resourceContext=this._register(S.createInstance(ry)),this.editorPinnedContext=Df.bindTo(this.contextMenuContextKeyService),this.editorIsFirstContext=ay.bindTo(this.contextMenuContextKeyService),this.editorIsLastContext=ru.bindTo(this.contextMenuContextKeyService),this.editorStickyContext=vn.bindTo(this.contextMenuContextKeyService),this.editorAvailableEditorIds=Jr.bindTo(this.contextMenuContextKeyService),this.editorCanSplitInGroupContext=au.bindTo(this.contextMenuContextKeyService),this.sideBySideEditorContext=xs.bindTo(this.contextMenuContextKeyService),this.groupLockedContext=yn.bindTo(this.contextMenuContextKeyService)}create(e){return this.updateTabHeight(),e}get editorActionsEnabled(){return this.groupsView.partOptions.editorActionsLocation==="default"&&this.groupsView.partOptions.showTabs!=="none"}createEditorActionsToolBar(e,t){this.editorActionsToolbarContainer=document.createElement("div"),this.editorActionsToolbarContainer.classList.add(...t),e.appendChild(this.editorActionsToolbarContainer),this.handleEditorActionToolBarVisibility(this.editorActionsToolbarContainer)}handleEditorActionToolBarVisibility(e){var o;const t=this.editorActionsEnabled,i=!!this.editorActionsToolbar;t&&!i?this.doCreateEditorActionsToolBar(e):!t&&i&&((o=this.editorActionsToolbar)==null||o.getElement().remove(),this.editorActionsToolbar=void 0,this.editorActionsToolbarDisposables.clear(),this.editorActionsDisposables.clear()),e.classList.toggle("hidden",!t)}doCreateEditorActionsToolBar(e){const t={groupId:this.groupView.id};this.editorActionsToolbar=this.editorActionsToolbarDisposables.add(this.instantiationService.createInstance(Xh,e,{actionViewItemProvider:(i,o)=>this.actionViewItemProvider(i,o),orientation:0,ariaLabel:d(7058,"Editor actions"),getKeyBinding:i=>this.getKeybinding(i),actionRunner:this.editorActionsToolbarDisposables.add(new BS(t)),anchorAlignmentProvider:()=>1,renderDropdownAsChildElement:this.renderDropdownAsChildElement,telemetrySource:"editorPart",resetMenu:b.EditorTitle,overflowBehavior:{maxItems:9,exempted:qk},highlightToggledItems:!0})),this.editorActionsToolbar.context=t,this.editorActionsToolbarDisposables.add(this.editorActionsToolbar.actionRunner.onDidRun(i=>{i.error&&!jr(i.error)&&this.notificationService.error(i.error)}))}actionViewItemProvider(e,t){const i=this.groupView.activeEditorPane;if(i instanceof kf){const o=i.getActionViewItem(e,t);if(o)return o}return Qh(this.instantiationService,e,{...t,menuAsChild:this.renderDropdownAsChildElement})}updateEditorActionsToolbar(){if(!this.editorActionsEnabled)return;this.editorActionsDisposables.clear();const e=this.groupView.createEditorActions(this.editorActionsDisposables);this.editorActionsDisposables.add(e.onDidChange(()=>this.updateEditorActionsToolbar()));const t=ae(this.editorActionsToolbar),{primary:i,secondary:o}=this.prepareEditorActions(e.actions);t.setActions(cn(i),cn(o))}getEditorPaneAwareContextKeyService(){var e;return((e=this.groupView.activeEditorPane)==null?void 0:e.scopedContextKeyService)??this.contextKeyService}clearEditorActionsToolbar(){if(!this.editorActionsEnabled)return;ae(this.editorActionsToolbar).setActions([],[])}onGroupDragStart(e,t){var n;if(e.target!==t)return!1;const i=this.isNewWindowOperation(e);this.groupTransfer.setData([new Et(this.groupView.id)],Et.prototype),e.dataTransfer&&(e.dataTransfer.effectAllowed="copyMove");let o=!1;if(this.groupsView.partOptions.showTabs==="multiple"?o=this.doFillResourceDataTransfers(this.groupView.getEditors(1),e,i):this.groupView.activeEditor&&(o=this.doFillResourceDataTransfers([this.groupView.activeEditor],e,i)),!o&&mp&&((n=e.dataTransfer)==null||n.setData(sr.TEXT,String(this.groupView.label))),this.groupView.activeEditor){let s=this.groupView.activeEditor.getName();this.groupsView.partOptions.showTabs==="multiple"&&this.groupView.count>1&&(s=d(7059,"{0} (+{1})",s,this.groupView.count-1)),cy(e,s,"monaco-editor-group-drag-image",this.getColor(ly),this.getColor(dy))}return i}async onGroupDragEnd(e,t,i,o){if(this.groupTransfer.clearData(Et.prototype),e.target!==i||!o||hy())return;const n=await this.maybeCreateAuxiliaryEditorPartAt(e,i);if(!n)return;const s=n.activeGroup;this.groupsView.mergeGroup(this.groupView,s.id,{mode:this.isMoveOperation(t??e,s.id)?1:0}),s.focus()}async maybeCreateAuxiliaryEditorPartAt(e,t){const{point:i,display:o}=await this.hostService.getCursorScreenPoint()??{point:{x:e.screenX,y:e.screenY}},n=Ar();if(n.document.visibilityState==="visible"&&n.document.hasFocus()&&i.x>=n.screenX&&i.x<=n.screenX+n.outerWidth&&i.y>=n.screenY&&i.y<=n.screenY+n.outerHeight)return;const s=t.offsetWidth/2,r=30+t.offsetHeight/2,a={x:i.x-s,y:i.y-r};return o&&(a.x<o.x&&(a.x=o.x),a.y<o.y&&(a.y=o.y)),this.editorPartsView.createAuxiliaryEditorPart({bounds:a})}isNewWindowOperation(e){return this.groupsView.partOptions.dragToOpenWindow?!e.altKey:e.altKey}isMoveOperation(e,t,i){return i!=null&&i.hasCapability(8)?!0:!(e.ctrlKey&&!be||e.altKey&&be)||t===this.groupView.id}doFillResourceDataTransfers(e,t,i){return e.length?(this.instantiationService.invokeFunction(uy,e.map(o=>({editor:o,groupId:this.groupView.id})),t,{disableStandardTransfer:i}),!0):!1}onTabContextMenu(e,t,i){this.resourceContext.set(Ie.getOriginalUri(e,{supportSideBySide:Ce.PRIMARY})),this.editorPinnedContext.set(this.tabsModel.isPinned(e)),this.editorIsFirstContext.set(this.tabsModel.isFirst(e)),this.editorIsLastContext.set(this.tabsModel.isLast(e)),this.editorStickyContext.set(this.tabsModel.isSticky(e)),this.groupLockedContext.set(this.tabsModel.isLocked),this.editorCanSplitInGroupContext.set(e.hasCapability(32)),this.sideBySideEditorContext.set(e.typeId===ri.ID),py(this.editorAvailableEditorIds,e,this.editorResolverService);let o=i;Pn(t)&&(o=new ai(fe(i),t)),this.contextMenuService.showContextMenu({getAnchor:()=>o,menuId:b.EditorTitleContext,menuActionOptions:{shouldForwardArgs:!0,arg:this.resourceContext.get()},contextKeyService:this.contextMenuContextKeyService,getActionsContext:()=>({groupId:this.groupView.id,editorIndex:this.groupView.getIndexOfEditor(e)}),getKeyBinding:n=>this.keybindingService.lookupKeybinding(n.id,this.contextMenuContextKeyService),onHide:()=>this.groupsView.activeGroup.focus()})}getKeybinding(e){return this.keybindingService.lookupKeybinding(e.id,this.getEditorPaneAwareContextKeyService())}getKeybindingLabel(e){const t=this.getKeybinding(e);return t?t.getLabel()??void 0:void 0}get tabHeight(){return this.groupsView.partOptions.tabHeight!=="compact"?gd.EDITOR_TAB_HEIGHT.normal:gd.EDITOR_TAB_HEIGHT.compact}getHoverTitle(e){const t=e.getTitle(2);return this.tabsModel.isPinned(e)?t:{markdown:new _c("",{supportThemeIcons:!0,isTrusted:!0}).appendText(t).appendMarkdown(' (_preview_ [$(gear)](command:workbench.action.openSettings?%5B%22workbench.editor.enablePreview%22%5D "Configure Preview Mode"))'),markdownNotSupportedFallback:t+" (preview)"}}updateTabHeight(){this.parent.style.setProperty("--editor-group-tab-height",`${this.tabHeight}px`)}updateOptions(e,t){e.tabHeight!==t.tabHeight&&this.updateTabHeight(),(e.editorActionsLocation!==t.editorActionsLocation||e.showTabs!==t.showTabs)&&this.editorActionsToolbarContainer&&(this.handleEditorActionToolBarVisibility(this.editorActionsToolbarContainer),this.updateEditorActionsToolbar())}},gd=Yn,Yn.EDITOR_TAB_HEIGHT={normal:35,compact:22},Yn);oc=gd=x([u(5,Ve),u(6,O),u(7,K),u(8,xe),u(9,He),u(10,Fe),u(11,te),u(12,Mo),u(13,st)],oc);class ke extends A{constructor(e,t,i){super(e),this.commandId=t,this.commandArgs=i}run(e){return e.get(lt).executeCommand(this.commandId,this.commandArgs)}}class OS extends A{getDirection(e){return my(e)}async run(e,...t){const i=e.get(Z),o=e.get(F),n=this.getDirection(o),s=Tf(t,e.get(U),i,e.get(ue));$k(i,n,s)}}const Th=class Th extends OS{constructor(){super({id:Th.ID,title:w(9784,"Split Editor"),f1:!0,keybinding:{weight:200,primary:2141},category:_.View})}};Th.ID=Af;let wg=Th;class B1 extends OS{constructor(){super({id:"workbench.action.splitEditorOrthogonal",title:w(9785,"Split Editor Orthogonal"),f1:!0,keybinding:{weight:200,primary:Ee(2089,2141)},category:_.View})}getDirection(e){return my(e)===3?1:3}}class O1 extends ke{constructor(){super({id:Rr,title:w(9786,"Split Editor Left"),f1:!0,keybinding:{weight:200,primary:Ee(2089,2141)},category:_.View},Rr)}}class N1 extends ke{constructor(){super({id:vs,title:w(9787,"Split Editor Right"),f1:!0,keybinding:{weight:200,primary:Ee(2089,2141)},category:_.View},vs)}}const Db=class Db extends ke{constructor(){super({id:Pr,title:w(9788,"Split Editor Up"),f1:!0,keybinding:{weight:200,primary:Ee(2089,2141)},category:_.View},Pr)}};Db.LABEL=d(9788,"Split Editor Up");let vg=Db;const Ab=class Ab extends ke{constructor(){super({id:ws,title:w(9789,"Split Editor Down"),f1:!0,keybinding:{weight:200,primary:Ee(2089,2141)},category:_.View},ws)}};Ab.LABEL=d(9789,"Split Editor Down");let yg=Ab;class F1 extends A{constructor(){super({id:"workbench.action.joinTwoGroups",title:w(9790,"Join Editor Group with Next Group"),f1:!0,category:_.View})}async run(e,t){const i=e.get(Z);let o;if(t&&typeof t.groupId=="number"?o=i.getGroup(t.groupId):o=i.activeGroup,o){const n=[3,1,2,0];for(const s of n){const r=i.findGroup({direction:s},o);if(r&&o!==r){i.mergeGroup(o,r);break}}}}}class G1 extends A{constructor(){super({id:"workbench.action.joinAllGroups",title:w(9791,"Join All Editor Groups"),f1:!0,category:_.View})}async run(e){const t=e.get(Z);t.mergeAllGroups(t.activeGroup)}}class W1 extends A{constructor(){super({id:"workbench.action.navigateEditorGroups",title:w(9792,"Navigate Between Editor Groups"),f1:!0,category:_.View})}async run(e){const t=e.get(Z),i=t.findGroup({location:2},t.activeGroup,!0);i==null||i.focus()}}class H1 extends A{constructor(){super({id:"workbench.action.focusActiveEditorGroup",title:w(9793,"Focus Active Editor Group"),f1:!0,category:_.View})}async run(e){e.get(Z).activeGroup.focus()}}class _n extends A{constructor(e,t){super(e),this.scope=t}async run(e){const t=e.get(Z),i=t.findGroup(this.scope,t.activeGroup,!0);i==null||i.focus()}}class z1 extends _n{constructor(){super({id:"workbench.action.focusFirstEditorGroup",title:w(9794,"Focus First Editor Group"),f1:!0,keybinding:{weight:200,primary:2070},category:_.View},{location:0})}}class U1 extends _n{constructor(){super({id:"workbench.action.focusLastEditorGroup",title:w(9795,"Focus Last Editor Group"),f1:!0,category:_.View},{location:1})}}class K1 extends _n{constructor(){super({id:"workbench.action.focusNextGroup",title:w(9796,"Focus Next Editor Group"),f1:!0,category:_.View},{location:2})}}class q1 extends _n{constructor(){super({id:"workbench.action.focusPreviousGroup",title:w(9797,"Focus Previous Editor Group"),f1:!0,category:_.View},{location:3})}}class $1 extends _n{constructor(){super({id:"workbench.action.focusLeftGroup",title:w(9798,"Focus Left Editor Group"),f1:!0,keybinding:{weight:200,primary:Ee(2089,2063)},category:_.View},{direction:2})}}class j1 extends _n{constructor(){super({id:"workbench.action.focusRightGroup",title:w(9799,"Focus Right Editor Group"),f1:!0,keybinding:{weight:200,primary:Ee(2089,2065)},category:_.View},{direction:3})}}class Y1 extends _n{constructor(){super({id:"workbench.action.focusAboveGroup",title:w(9800,"Focus Editor Group Above"),f1:!0,keybinding:{weight:200,primary:Ee(2089,2064)},category:_.View},{direction:0})}}class Z1 extends _n{constructor(){super({id:"workbench.action.focusBelowGroup",title:w(9801,"Focus Editor Group Below"),f1:!0,keybinding:{weight:200,primary:Ee(2089,2066)},category:_.View},{direction:1})}}var Zn;let Hw=(Zn=class extends de{constructor(e,t,i){super(e,t,oe.asClassName(T.close)),this.commandService=i}run(e){return this.commandService.executeCommand(Cn,void 0,e)}},Zn.ID="workbench.action.closeActiveEditor",Zn.LABEL=d(9802,"Close Editor"),Zn);Hw=x([u(2,lt)],Hw);var Xn;let La=(Xn=class extends de{constructor(e,t,i){super(e,t,oe.asClassName(T.pinned)),this.commandService=i}run(e){return this.commandService.executeCommand(xc,void 0,e)}},Xn.ID="workbench.action.unpinActiveEditor",Xn.LABEL=d(9803,"Unpin Editor"),Xn);La=x([u(2,lt)],La);var Jn;let Pa=(Jn=class extends de{constructor(e,t,i){super(e,t,oe.asClassName(T.close)),this.editorGroupService=i}async run(e){const t=e?this.editorGroupService.getGroup(e.groupId):this.editorGroupService.activeGroup;if(!t)return;const i=(e==null?void 0:e.editorIndex)!==void 0?t.getEditorByIndex(e.editorIndex):t.activeEditor;if(!i)return;const o=[];t.isSelected(i)?o.push(...t.selectedEditors):o.push(i);for(const n of o)await t.closeEditor(n,{preserveFocus:e==null?void 0:e.preserveFocus})}},Jn.ID="workbench.action.closeActiveEditor",Jn.LABEL=d(9804,"Close"),Jn);Pa=x([u(2,Z)],Pa);class X1 extends A{constructor(){super({id:"workbench.action.revertAndCloseActiveEditor",title:w(9805,"Revert and Close Editor"),f1:!0,category:_.View})}async run(e){const t=e.get(U),i=e.get(Je),o=t.activeEditorPane;if(o){const n=o.input,s=o.group;try{await t.revert({editor:n,groupId:s.id})}catch(r){i.error(r),await t.revert({editor:n,groupId:s.id},{soft:!0})}await s.closeEditor(n)}}}class J1 extends A{constructor(){super({id:"workbench.action.closeEditorsToTheLeft",title:w(9806,"Close Editors to the Left in Group"),f1:!0,category:_.View})}async run(e,t){const i=e.get(Z),{group:o,editor:n}=this.getTarget(i,t);o&&n&&await o.closeEditors({direction:0,except:n,excludeSticky:!0})}getTarget(e,t){return t?{editor:t.editor,group:e.getGroup(t.groupId)}:{group:e.activeGroup,editor:e.activeGroup.activeEditor}}}class NS extends A{groupsToClose(e){const t=[],i=e.getGroups(2);for(let o=i.length-1;o>=0;o--)t.push(i[o]);return t}async run(e){var g,m,f,v;const t=e.get(U),i=e.get(Je),o=e.get(Ic),n=e.get(Z),s=e.get(Qr),r=e.get(cu),a=new Set,l=new Set,h=new Set,p=new Map;for(const{editor:S,groupId:E}of t.getEditors(1,{excludeSticky:this.excludeSticky})){let D=!1;if(S.closeHandler?D=S.closeHandler.showConfirm():D=S.isDirty()&&!S.isSaving(),!!D)if(typeof((g=S.closeHandler)==null?void 0:g.confirm)=="function"){let V=p.get(S.typeId);V||(V=new Set,p.set(S.typeId,V)),V.add({editor:S,groupId:E})}else!S.hasCapability(4)&&s.getAutoSaveMode(S).mode===3?l.add({editor:S,groupId:E}):Es&&(Xt||fc)&&!S.hasCapability(4)&&s.getAutoSaveMode(S).mode===4?h.add({editor:S,groupId:E}):a.add({editor:S,groupId:E})}if(a.size>0){const S=Array.from(a.values());switch(await this.revealEditorsToConfirm(S,n),await r.showSaveConfirm(S.map(({editor:D})=>D instanceof ri?D.primary.getName():D.getName()))){case 2:return;case 1:await this.revertEditors(t,i,o,S);break;case 0:await t.save(S,{reason:1});break}}for(const[,S]of p){const E=Array.from(S.values());await this.revealEditorsToConfirm(E,n);const D=await((v=(f=(m=E.at(0))==null?void 0:m.editor.closeHandler)==null?void 0:f.confirm)==null?void 0:v.call(f,E));if(typeof D=="number")switch(D){case 2:return;case 1:await this.revertEditors(t,i,o,E);break;case 0:await t.save(E,{reason:1});break}}if(l.size>0){const S=Array.from(l.values());await t.save(S,{reason:3})}if(h.size>0){const S=Array.from(h.values());await t.save(S,{reason:4})}return this.doCloseAll(n)}revertEditors(e,t,i,o){return i.withProgress({location:10,delay:800,title:d(9807,"Reverting Editors...")},()=>this.doRevertEditors(e,t,o))}async doRevertEditors(e,t,i){try{await e.revert(i)}catch(o){t.error(o),await e.revert(i,{soft:!0})}}async revealEditorsToConfirm(e,t){try{const i=new Set;for(const{editor:o,groupId:n}of e){if(i.has(n))continue;i.add(n);const s=t.getGroup(n);await(s==null?void 0:s.openEditor(o))}}catch{}}async doCloseAll(e){await Promise.all(this.groupsToClose(e).map(t=>t.closeAllEditors({excludeSticky:this.excludeSticky})))}}const Js=class Js extends NS{constructor(){super({id:Js.ID,title:Js.LABEL,f1:!0,keybinding:{weight:200,primary:Ee(2089,2101)},icon:T.closeAll,category:_.View})}get excludeSticky(){return!0}};Js.ID="workbench.action.closeAllEditors",Js.LABEL=w(9808,"Close All Editors");let Cg=Js;class Q1 extends NS{constructor(){super({id:"workbench.action.closeAllGroups",title:w(9809,"Close All Editor Groups"),f1:!0,keybinding:{weight:200,primary:Ee(2089,3125)},category:_.View})}get excludeSticky(){return!1}async doCloseAll(e){await super.doCloseAll(e);for(const t of this.groupsToClose(e))e.removeGroup(t)}}class eV extends A{constructor(){super({id:"workbench.action.closeEditorsInOtherGroups",title:w(9810,"Close Editors in Other Groups"),f1:!0,category:_.View})}async run(e,t){const i=e.get(Z),o=t?i.getGroup(t.groupId):i.activeGroup;await Promise.all(i.getGroups(1).map(async n=>{if(!(o&&n.id===o.id))return n.closeAllEditors({excludeSticky:!0})}))}}class tV extends A{constructor(){super({id:"workbench.action.closeEditorInAllGroups",title:w(9811,"Close Editor in All Groups"),f1:!0,category:_.View})}async run(e){const t=e.get(U),i=e.get(Z),o=t.activeEditor;o&&await Promise.all(i.getGroups(1).map(n=>n.closeEditor(o)))}}class FS extends A{constructor(e,t,i){super(e),this.direction=t,this.isMove=i}async run(e,t){const i=e.get(Z);let o;if(t&&typeof t.groupId=="number"?o=i.getGroup(t.groupId):o=i.activeGroup,o){let n;if(this.isMove){const s=this.findTargetGroup(i,o);s&&(n=i.moveGroup(o,s,this.direction))}else n=i.copyGroup(o,o,this.direction);n&&i.activateGroup(n)}}findTargetGroup(e,t){const i=[this.direction];switch(this.direction){case 2:case 3:i.push(0,1);break;case 0:case 1:i.push(2,3);break}for(const o of i){const n=e.findGroup({direction:o},t);if(n)return n}}}class ku extends FS{constructor(e,t){super(e,t,!0)}}class iV extends ku{constructor(){super({id:"workbench.action.moveActiveEditorGroupLeft",title:w(9812,"Move Editor Group Left"),f1:!0,keybinding:{weight:200,primary:Ee(2089,15)},category:_.View},2)}}class oV extends ku{constructor(){super({id:"workbench.action.moveActiveEditorGroupRight",title:w(9813,"Move Editor Group Right"),f1:!0,keybinding:{weight:200,primary:Ee(2089,17)},category:_.View},3)}}class nV extends ku{constructor(){super({id:"workbench.action.moveActiveEditorGroupUp",title:w(9814,"Move Editor Group Up"),f1:!0,keybinding:{weight:200,primary:Ee(2089,16)},category:_.View},0)}}class sV extends ku{constructor(){super({id:"workbench.action.moveActiveEditorGroupDown",title:w(9815,"Move Editor Group Down"),f1:!0,keybinding:{weight:200,primary:Ee(2089,18)},category:_.View},1)}}class _u extends FS{constructor(e,t){super(e,t,!1)}}class rV extends _u{constructor(){super({id:"workbench.action.duplicateActiveEditorGroupLeft",title:w(9816,"Duplicate Editor Group Left"),f1:!0,category:_.View},2)}}class aV extends _u{constructor(){super({id:"workbench.action.duplicateActiveEditorGroupRight",title:w(9817,"Duplicate Editor Group Right"),f1:!0,category:_.View},3)}}class cV extends _u{constructor(){super({id:"workbench.action.duplicateActiveEditorGroupUp",title:w(9818,"Duplicate Editor Group Up"),f1:!0,category:_.View},0)}}class dV extends _u{constructor(){super({id:"workbench.action.duplicateActiveEditorGroupDown",title:w(9819,"Duplicate Editor Group Down"),f1:!0,category:_.View},1)}}class lV extends A{constructor(){super({id:"workbench.action.minimizeOtherEditors",title:w(9820,"Expand Editor Group"),f1:!0,category:_.View,precondition:ti})}async run(e){e.get(Z).arrangeGroups(1)}}class hV extends A{constructor(){super({id:"workbench.action.minimizeOtherEditorsHideSidebar",title:w(9821,"Expand Editor Group and Hide Side Bars"),f1:!0,category:_.View,precondition:y.or(ti,Wo,$o)})}async run(e){const t=e.get(Z),i=e.get(Y);i.setPartHidden(!0,"workbench.parts.sidebar"),i.setPartHidden(!0,"workbench.parts.auxiliarybar"),t.arrangeGroups(1)}}class uV extends A{constructor(){super({id:"workbench.action.evenEditorWidths",title:w(9822,"Reset Editor Group Sizes"),f1:!0,category:_.View})}async run(e){e.get(Z).arrangeGroups(2)}}class pV extends A{constructor(){super({id:"workbench.action.toggleEditorWidths",title:w(9823,"Toggle Editor Group Sizes"),f1:!0,category:_.View})}async run(e){e.get(Z).toggleExpandGroup()}}class gV extends A{constructor(){super({id:"workbench.action.maximizeEditorHideSidebar",title:w(9824,"Maximize Editor Group and Hide Side Bars"),f1:!0,category:_.View,precondition:y.or(y.and(zo.negate(),Dc),Wo,$o)})}async run(e){const t=e.get(Y),i=e.get(Z);e.get(U).activeEditor&&(t.setPartHidden(!0,"workbench.parts.sidebar"),t.setPartHidden(!0,"workbench.parts.auxiliarybar"),i.arrangeGroups(0))}}class mV extends A{constructor(){super({id:Vf,title:w(9825,"Toggle Maximize Editor Group"),f1:!0,category:_.View,precondition:y.or(Dc,zo),keybinding:{weight:200,primary:Ee(2089,2091)},menu:[{id:b.EditorTitle,order:-1e4,group:"navigation",when:zo},{id:b.EmptyEditorGroup,order:-1e4,group:"navigation",when:zo}],icon:T.screenFull,toggled:zo})}async run(e,...t){const i=e.get(Z),o=Tf(t,e.get(U),i,e.get(ue));o.groupedEditors.length&&i.toggleMaximizeGroup(o.groupedEditors[0].group)}}class sa extends A{async run(e){const t=e.get(Z),i=this.navigate(t);if(!i)return;const{groupId:o,editor:n}=i;if(!n)return;const s=t.getGroup(o);s&&await s.openEditor(n)}}class fV extends sa{constructor(){super({id:"workbench.action.nextEditor",title:w(9826,"Open Next Editor"),f1:!0,keybinding:{weight:200,primary:2060,mac:{primary:2577,secondary:[3166]}},category:_.View})}navigate(e){const t=e.activeGroup,i=t.getEditors(1),o=t.activeEditor?i.indexOf(t.activeEditor):-1;if(o+1<i.length)return{editor:i[o+1],groupId:t.id};const n=new Set;let s=e.activeGroup;for(;s&&!n.has(s.id);)if(s=e.findGroup({location:2},s,!0),s){n.add(s.id);const r=s.getEditors(1);if(r.length>0)return{editor:r[0],groupId:s.id}}}}class bV extends sa{constructor(){super({id:"workbench.action.previousEditor",title:w(9827,"Open Previous Editor"),f1:!0,keybinding:{weight:200,primary:2059,mac:{primary:2575,secondary:[3164]}},category:_.View})}navigate(e){const t=e.activeGroup,i=t.getEditors(1),o=t.activeEditor?i.indexOf(t.activeEditor):-1;if(o>0)return{editor:i[o-1],groupId:t.id};const n=new Set;let s=e.activeGroup;for(;s&&!n.has(s.id);)if(s=e.findGroup({location:3},s,!0),s){n.add(s.id);const r=s.getEditors(1);if(r.length>0)return{editor:r[r.length-1],groupId:s.id}}}}class wV extends sa{constructor(){super({id:"workbench.action.nextEditorInGroup",title:w(9828,"Open Next Editor in Group"),f1:!0,keybinding:{weight:200,primary:Ee(2089,2060),mac:{primary:Ee(2089,2577)}},category:_.View})}navigate(e){const t=e.activeGroup,i=t.getEditors(1),o=t.activeEditor?i.indexOf(t.activeEditor):-1;return{editor:o+1<i.length?i[o+1]:i[0],groupId:t.id}}}class vV extends sa{constructor(){super({id:"workbench.action.previousEditorInGroup",title:w(9829,"Open Previous Editor in Group"),f1:!0,keybinding:{weight:200,primary:Ee(2089,2059),mac:{primary:Ee(2089,2575)}},category:_.View})}navigate(e){const t=e.activeGroup,i=t.getEditors(1),o=t.activeEditor?i.indexOf(t.activeEditor):-1;return{editor:o>0?i[o-1]:i[i.length-1],groupId:t.id}}}class yV extends sa{constructor(){super({id:"workbench.action.firstEditorInGroup",title:w(9830,"Open First Editor in Group"),f1:!0,category:_.View})}navigate(e){const t=e.activeGroup;return{editor:t.getEditors(1)[0],groupId:t.id}}}class CV extends sa{constructor(){super({id:"workbench.action.lastEditorInGroup",title:w(9831,"Open Last Editor in Group"),f1:!0,keybinding:{weight:200,primary:533,secondary:[2078],mac:{primary:277,secondary:[2078]}},category:_.View})}navigate(e){const t=e.activeGroup,i=t.getEditors(1);return{editor:i[i.length-1],groupId:t.id}}}const Fa=class Fa extends A{constructor(){super({id:Fa.ID,title:{...w(9832,"Go Forward"),mnemonicTitle:d(9833,"&&Forward")},f1:!0,icon:T.arrowRight,precondition:y.has("canNavigateForward"),keybinding:{weight:200,win:{primary:529},mac:{primary:1368},linux:{primary:3160}},menu:[{id:b.MenubarGoMenu,group:"1_history_nav",order:2},{id:b.CommandCenter,order:2}]})}async run(e){await e.get(tt).goForward(0)}};Fa.ID="workbench.action.navigateForward",Fa.LABEL=d(9832,"Go Forward");let nc=Fa;const Ga=class Ga extends A{constructor(){super({id:Ga.ID,title:{...w(9834,"Go Back"),mnemonicTitle:d(9835,"&&Back")},f1:!0,precondition:y.has("canNavigateBack"),icon:T.arrowLeft,keybinding:{weight:200,win:{primary:527},mac:{primary:344},linux:{primary:2648}},menu:[{id:b.MenubarGoMenu,group:"1_history_nav",order:1},{id:b.CommandCenter,order:1}]})}async run(e){await e.get(tt).goBack(0)}};Ga.ID="workbench.action.navigateBack",Ga.LABEL=d(9834,"Go Back");let sc=Ga;class SV extends A{constructor(){super({id:"workbench.action.navigateLast",title:w(9836,"Go Previous"),f1:!0})}async run(e){await e.get(tt).goPrevious(0)}}class EV extends A{constructor(){super({id:"workbench.action.navigateForwardInEditLocations",title:w(9837,"Go Forward in Edit Locations"),f1:!0})}async run(e){await e.get(tt).goForward(1)}}class kV extends A{constructor(){super({id:"workbench.action.navigateBackInEditLocations",title:w(9838,"Go Back in Edit Locations"),f1:!0})}async run(e){await e.get(tt).goBack(1)}}class _V extends A{constructor(){super({id:"workbench.action.navigatePreviousInEditLocations",title:w(9839,"Go Previous in Edit Locations"),f1:!0})}async run(e){await e.get(tt).goPrevious(1)}}class xV extends A{constructor(){super({id:"workbench.action.navigateToLastEditLocation",title:w(9840,"Go to Last Edit Location"),f1:!0,keybinding:{weight:200,primary:Ee(2089,2095)}})}async run(e){await e.get(tt).goLast(1)}}class IV extends A{constructor(){super({id:"workbench.action.navigateForwardInNavigationLocations",title:w(9841,"Go Forward in Navigation Locations"),f1:!0})}async run(e){await e.get(tt).goForward(2)}}class DV extends A{constructor(){super({id:"workbench.action.navigateBackInNavigationLocations",title:w(9842,"Go Back in Navigation Locations"),f1:!0})}async run(e){await e.get(tt).goBack(2)}}class AV extends A{constructor(){super({id:"workbench.action.navigatePreviousInNavigationLocations",title:w(9843,"Go Previous in Navigation Locations"),f1:!0})}async run(e){await e.get(tt).goPrevious(2)}}class TV extends A{constructor(){super({id:"workbench.action.navigateToLastNavigationLocation",title:w(9844,"Go to Last Navigation Location"),f1:!0})}async run(e){await e.get(tt).goLast(2)}}const Vh=class Vh extends A{constructor(){super({id:Vh.ID,title:w(9845,"Reopen Closed Editor"),f1:!0,keybinding:{weight:200,primary:3122},category:_.View})}async run(e){await e.get(tt).reopenLastClosedEditor()}};Vh.ID="workbench.action.reopenClosedEditor";let hl=Vh;const Mh=class Mh extends A{constructor(){super({id:Mh.ID,title:w(9846,"Clear Recently Opened..."),f1:!0,category:_.File})}async run(e){const t=e.get(xt),i=e.get(tu),o=e.get(tt),{confirmed:n}=await t.confirm({type:"warning",message:d(9847,"Do you want to clear all recently opened files and workspaces?"),detail:d(9848,"This action is irreversible!"),primaryButton:d(9849,"&&Clear")});n&&(i.clearRecentlyOpened(),o.clearRecentlyOpened())}};Mh.ID="workbench.action.clearRecentFiles";let ul=Mh;const Lh=class Lh extends A{constructor(){super({id:Lh.ID,title:w(9850,"Show Editors in Active Group By Most Recently Used"),f1:!0,category:_.View})}async run(e){e.get(Fe).quickAccess.show(Ya.PREFIX)}};Lh.ID="workbench.action.showEditorsInActiveGroup";let pl=Lh;const Ph=class Ph extends A{constructor(){super({id:Ph.ID,title:w(9851,"Show All Editors By Appearance"),f1:!0,keybinding:{weight:200,primary:Ee(2089,2094),mac:{primary:2562}},category:_.File})}async run(e){e.get(Fe).quickAccess.show(fp.PREFIX)}};Ph.ID="workbench.action.showAllEditors";let gl=Ph;const Rh=class Rh extends A{constructor(){super({id:Rh.ID,title:w(9852,"Show All Editors By Most Recently Used"),f1:!0,category:_.View})}async run(e){e.get(Fe).quickAccess.show(Za.PREFIX)}};Rh.ID="workbench.action.showAllEditorsByMostRecentlyUsed";let ml=Rh;class xu extends A{constructor(e,t,i){super(e),this.prefix=t,this.itemActivation=i}async run(e){const t=e.get(xe),i=e.get(Fe),o=t.lookupKeybindings(this.desc.id);i.quickAccess.show(this.prefix,{quickNavigateConfiguration:{keybindings:o},itemActivation:this.itemActivation})}}class VV extends xu{constructor(){super({id:"workbench.action.quickOpenPreviousRecentlyUsedEditor",title:w(9853,"Quick Open Previous Recently Used Editor"),f1:!0,category:_.View},Za.PREFIX,void 0)}}class MV extends xu{constructor(){super({id:"workbench.action.quickOpenLeastRecentlyUsedEditor",title:w(9854,"Quick Open Least Recently Used Editor"),f1:!0,category:_.View},Za.PREFIX,void 0)}}class LV extends xu{constructor(){super({id:"workbench.action.quickOpenPreviousRecentlyUsedEditorInGroup",title:w(9855,"Quick Open Previous Recently Used Editor in Group"),f1:!0,keybinding:{weight:200,primary:2050,mac:{primary:258}},precondition:fy.toNegated(),category:_.View},Ya.PREFIX,void 0)}}class PV extends xu{constructor(){super({id:"workbench.action.quickOpenLeastRecentlyUsedEditorInGroup",title:w(9856,"Quick Open Least Recently Used Editor in Group"),f1:!0,keybinding:{weight:200,primary:3074,mac:{primary:1282}},precondition:fy.toNegated(),category:_.View},Ya.PREFIX,gy.LAST)}}const Wa=class Wa extends A{constructor(){super({id:Wa.ID,title:w(9857,"Quick Open Previous Editor from History"),f1:!0})}async run(e){const t=e.get(xe),i=e.get(Fe),o=e.get(Z),n=t.lookupKeybindings(Wa.ID);let s;o.activeGroup.count===0&&(s=gy.FIRST),i.quickAccess.show("",{quickNavigateConfiguration:{keybindings:n},itemActivation:s})}};Wa.ID="workbench.action.openPreviousEditorFromHistory";let Sg=Wa;class RV extends A{constructor(){super({id:"workbench.action.openNextRecentlyUsedEditor",title:w(9858,"Open Next Recently Used Editor"),f1:!0,category:_.View})}async run(e){e.get(tt).openNextRecentlyUsedEditor()}}class BV extends A{constructor(){super({id:"workbench.action.openPreviousRecentlyUsedEditor",title:w(9859,"Open Previous Recently Used Editor"),f1:!0,category:_.View})}async run(e){e.get(tt).openPreviouslyUsedEditor()}}class OV extends A{constructor(){super({id:"workbench.action.openNextRecentlyUsedEditorInGroup",title:w(9860,"Open Next Recently Used Editor In Group"),f1:!0,category:_.View})}async run(e){const t=e.get(tt),i=e.get(Z);t.openNextRecentlyUsedEditor(i.activeGroup.id)}}class NV extends A{constructor(){super({id:"workbench.action.openPreviousRecentlyUsedEditorInGroup",title:w(9861,"Open Previous Recently Used Editor In Group"),f1:!0,category:_.View})}async run(e){const t=e.get(tt),i=e.get(Z);t.openPreviouslyUsedEditor(i.activeGroup.id)}}class FV extends A{constructor(){super({id:"workbench.action.clearEditorHistory",title:w(9862,"Clear Editor History"),f1:!0})}async run(e){const t=e.get(xt),i=e.get(tt),{confirmed:o}=await t.confirm({type:"warning",message:d(9863,"Do you want to clear the history of recently opened editors?"),detail:d(9848,"This action is irreversible!"),primaryButton:d(9849,"&&Clear")});o&&i.clear()}}class GV extends ke{constructor(){super({id:"workbench.action.moveEditorLeftInGroup",title:w(9864,"Move Editor Left"),keybinding:{weight:200,primary:3083,mac:{primary:Ee(2089,3087)}},f1:!0,category:_.View},eo,{to:"left"})}}class WV extends ke{constructor(){super({id:"workbench.action.moveEditorRightInGroup",title:w(9865,"Move Editor Right"),keybinding:{weight:200,primary:3084,mac:{primary:Ee(2089,3089)}},f1:!0,category:_.View},eo,{to:"right"})}}class HV extends ke{constructor(){super({id:"workbench.action.moveEditorToPreviousGroup",title:w(9866,"Move Editor into Previous Group"),keybinding:{weight:200,primary:2575,mac:{primary:2319}},f1:!0,category:_.View},eo,{to:"previous",by:"group"})}}class zV extends ke{constructor(){super({id:"workbench.action.moveEditorToNextGroup",title:w(9867,"Move Editor into Next Group"),f1:!0,keybinding:{weight:200,primary:2577,mac:{primary:2321}},category:_.View},eo,{to:"next",by:"group"})}}class UV extends ke{constructor(){super({id:"workbench.action.moveEditorToAboveGroup",title:w(9868,"Move Editor into Group Above"),f1:!0,category:_.View},eo,{to:"up",by:"group"})}}class KV extends ke{constructor(){super({id:"workbench.action.moveEditorToBelowGroup",title:w(9869,"Move Editor into Group Below"),f1:!0,category:_.View},eo,{to:"down",by:"group"})}}class qV extends ke{constructor(){super({id:"workbench.action.moveEditorToLeftGroup",title:w(9870,"Move Editor into Left Group"),f1:!0,category:_.View},eo,{to:"left",by:"group"})}}class $V extends ke{constructor(){super({id:"workbench.action.moveEditorToRightGroup",title:w(9871,"Move Editor into Right Group"),f1:!0,category:_.View},eo,{to:"right",by:"group"})}}class jV extends ke{constructor(){super({id:"workbench.action.moveEditorToFirstGroup",title:w(9872,"Move Editor into First Group"),f1:!0,keybinding:{weight:200,primary:1558,mac:{primary:2326}},category:_.View},eo,{to:"first",by:"group"})}}class YV extends ke{constructor(){super({id:"workbench.action.moveEditorToLastGroup",title:w(9873,"Move Editor into Last Group"),f1:!0,keybinding:{weight:200,primary:1566,mac:{primary:2334}},category:_.View},eo,{to:"last",by:"group"})}}class ZV extends ke{constructor(){super({id:"workbench.action.splitEditorToPreviousGroup",title:w(9874,"Split Editor into Previous Group"),f1:!0,category:_.View},Sn,{to:"previous",by:"group"})}}class XV extends ke{constructor(){super({id:"workbench.action.splitEditorToNextGroup",title:w(9875,"Split Editor into Next Group"),f1:!0,category:_.View},Sn,{to:"next",by:"group"})}}class JV extends ke{constructor(){super({id:"workbench.action.splitEditorToAboveGroup",title:w(9876,"Split Editor into Group Above"),f1:!0,category:_.View},Sn,{to:"up",by:"group"})}}class QV extends ke{constructor(){super({id:"workbench.action.splitEditorToBelowGroup",title:w(9877,"Split Editor into Group Below"),f1:!0,category:_.View},Sn,{to:"down",by:"group"})}}const Bh=class Bh extends ke{constructor(){super({id:"workbench.action.splitEditorToLeftGroup",title:w(9878,"Split Editor into Left Group"),f1:!0,category:_.View},Sn,{to:"left",by:"group"})}};Bh.ID="workbench.action.splitEditorToLeftGroup",Bh.LABEL=d(9878,"Split Editor into Left Group");let Eg=Bh;class e0 extends ke{constructor(){super({id:"workbench.action.splitEditorToRightGroup",title:w(9879,"Split Editor into Right Group"),f1:!0,category:_.View},Sn,{to:"right",by:"group"})}}class t0 extends ke{constructor(){super({id:"workbench.action.splitEditorToFirstGroup",title:w(9880,"Split Editor into First Group"),f1:!0,category:_.View},Sn,{to:"first",by:"group"})}}class i0 extends ke{constructor(){super({id:"workbench.action.splitEditorToLastGroup",title:w(9881,"Split Editor into Last Group"),f1:!0,category:_.View},Sn,{to:"last",by:"group"})}}const Oh=class Oh extends ke{constructor(){super({id:Oh.ID,title:w(9882,"Single Column Editor Layout"),f1:!0,category:_.View},En,{groups:[{}],orientation:0})}};Oh.ID="workbench.action.editorLayoutSingle";let fl=Oh;const Nh=class Nh extends ke{constructor(){super({id:Nh.ID,title:w(9883,"Two Columns Editor Layout"),f1:!0,category:_.View},En,{groups:[{},{}],orientation:0})}};Nh.ID="workbench.action.editorLayoutTwoColumns";let bl=Nh;const Fh=class Fh extends ke{constructor(){super({id:Fh.ID,title:w(9884,"Three Columns Editor Layout"),f1:!0,category:_.View},En,{groups:[{},{},{}],orientation:0})}};Fh.ID="workbench.action.editorLayoutThreeColumns";let wl=Fh;const Gh=class Gh extends ke{constructor(){super({id:Gh.ID,title:w(9885,"Two Rows Editor Layout"),f1:!0,category:_.View},En,{groups:[{},{}],orientation:1})}};Gh.ID="workbench.action.editorLayoutTwoRows";let vl=Gh;const Wh=class Wh extends ke{constructor(){super({id:Wh.ID,title:w(9886,"Three Rows Editor Layout"),f1:!0,category:_.View},En,{groups:[{},{},{}],orientation:1})}};Wh.ID="workbench.action.editorLayoutThreeRows";let yl=Wh;const Hh=class Hh extends ke{constructor(){super({id:Hh.ID,title:w(9887,"Grid Editor Layout (2x2)"),f1:!0,category:_.View},En,{groups:[{groups:[{},{}]},{groups:[{},{}]}],orientation:0})}};Hh.ID="workbench.action.editorLayoutTwoByTwoGrid";let Cl=Hh;const zh=class zh extends ke{constructor(){super({id:zh.ID,title:w(9888,"Two Columns Bottom Editor Layout"),f1:!0,category:_.View},En,{groups:[{},{groups:[{},{}]}],orientation:1})}};zh.ID="workbench.action.editorLayoutTwoColumnsBottom";let Sl=zh;const Uh=class Uh extends ke{constructor(){super({id:Uh.ID,title:w(9889,"Two Rows Right Editor Layout"),f1:!0,category:_.View},En,{groups:[{},{groups:[{},{}]}],orientation:0})}};Uh.ID="workbench.action.editorLayoutTwoRowsRight";let El=Uh;class Iu extends A{constructor(e,t){super(e),this.direction=t}async run(e){const t=e.get(Z),i=e.get(Y),o=bv(),n=i.hasFocus("workbench.parts.editor")||o.activeElement===o.body,s=t.addGroup(t.activeGroup,this.direction);t.activateGroup(s),n&&s.focus()}}class o0 extends Iu{constructor(){super({id:"workbench.action.newGroupLeft",title:w(9890,"New Editor Group to the Left"),f1:!0,category:_.View},2)}}class n0 extends Iu{constructor(){super({id:"workbench.action.newGroupRight",title:w(9891,"New Editor Group to the Right"),f1:!0,category:_.View},3)}}class s0 extends Iu{constructor(){super({id:"workbench.action.newGroupAbove",title:w(9892,"New Editor Group Above"),f1:!0,category:_.View},0)}}class r0 extends Iu{constructor(){super({id:"workbench.action.newGroupBelow",title:w(9893,"New Editor Group Below"),f1:!0,category:_.View},1)}}class a0 extends A{constructor(){super({id:"workbench.action.toggleEditorType",title:w(9894,"Toggle Editor Type"),f1:!0,category:_.View,precondition:Jr})}async run(e){const t=e.get(U),i=e.get(Mo),o=t.activeEditorPane;if(!o)return;const n=Ie.getCanonicalUri(o.input);if(!n)return;const s=i.getEditors(n).map(r=>r.id).filter(r=>r!==o.input.editorId);s.length!==0&&await t.replaceEditors([{editor:o.input,replacement:{resource:n,options:{override:s[0]}}}],o.group)}}class c0 extends A{constructor(){super({id:"workbench.action.reopenTextEditor",title:w(9895,"Reopen Editor With Text Editor"),f1:!0,category:_.View,precondition:Jr})}async run(e){const t=e.get(U),i=t.activeEditorPane;if(!i)return;const o=Ie.getCanonicalUri(i.input);o&&await t.replaceEditors([{editor:i.input,replacement:{resource:o,options:{override:pt.id}}}],i.group)}}class GS extends A{constructor(e,t,i,o){super({id:e,title:t,category:_.View,precondition:yy,keybinding:i,f1:!0}),this.move=o}async run(e,...t){const i=e.get(Z),o=Tf(t,e.get(U),i,e.get(ue));if(!o.groupedEditors.length)return;const n=await i.createAuxiliaryEditorPart(),{group:s,editors:r}=o.groupedEditors[0],a={preserveFocus:o.preserveFocus},l=r.map(h=>({editor:h,options:a}));this.move?s.moveEditors(l,n.activeGroup):s.copyEditors(l,n.activeGroup),n.activeGroup.focus()}}class d0 extends GS{constructor(){super(Mf,{...w(9896,"Move Editor into New Window"),mnemonicTitle:d(9897,"&&Move Editor into New Window")},void 0,!0)}}class l0 extends GS{constructor(){super(Lf,{...w(9898,"Copy Editor into New Window"),mnemonicTitle:d(9899,"&&Copy Editor into New Window")},{primary:Ee(2089,45),weight:200},!1)}}class WS extends A{constructor(e,t,i){super({id:e,title:t,category:_.View,f1:!0}),this.move=i}async run(e){const t=e.get(Z),i=t.activeGroup,o=await t.createAuxiliaryEditorPart();t.mergeGroup(i,o.activeGroup,{mode:this.move?1:0}),o.activeGroup.focus()}}class h0 extends WS{constructor(){super(by,{...w(9900,"Move Editor Group into New Window"),mnemonicTitle:d(9901,"&&Move Editor Group into New Window")},!0)}}class u0 extends WS{constructor(){super(wy,{...w(9902,"Copy Editor Group into New Window"),mnemonicTitle:d(9903,"&&Copy Editor Group into New Window")},!1)}}class p0 extends A{constructor(){super({id:"workbench.action.restoreEditorsToMainWindow",title:{...w(9904,"Restore Editors into Main Window"),mnemonicTitle:d(9905,"&&Restore Editors into Main Window")},f1:!0,precondition:Vi,category:_.View})}async run(e){const t=e.get(Z);t.mergeAllGroups(t.mainPart.activeGroup)}}class g0 extends A{constructor(){super({id:vy,title:{...w(9906,"New Empty Editor Window"),mnemonicTitle:d(9907,"&&New Empty Editor Window")},f1:!0,category:_.View})}async run(e){(await e.get(Z).createAuxiliaryEditorPart()).activeGroup.focus()}}class HS extends R{constructor(e){super(),this.model=e,this._onDidModelChange=this._register(new I),this.onDidModelChange=this._onDidModelChange.event,this._register(this.model.onDidModelChange(t=>{const i=t.editorIndex??t.editor;i!==void 0&&!this.filter(i)||this._onDidModelChange.fire(t)}))}get id(){return this.model.id}get isLocked(){return this.model.isLocked}get stickyCount(){return this.model.stickyCount}get activeEditor(){return this.model.activeEditor&&this.filter(this.model.activeEditor)?this.model.activeEditor:null}get previewEditor(){return this.model.previewEditor&&this.filter(this.model.previewEditor)?this.model.previewEditor:null}get selectedEditors(){return this.model.selectedEditors.filter(e=>this.filter(e))}isPinned(e){return this.model.isPinned(e)}isTransient(e){return this.model.isTransient(e)}isSticky(e){return this.model.isSticky(e)}isActive(e){return this.model.isActive(e)}isSelected(e){return this.model.isSelected(e)}isFirst(e){return this.model.isFirst(e,this.getEditors(1))}isLast(e){return this.model.isLast(e,this.getEditors(1))}getEditors(e,t){return this.model.getEditors(e,t).filter(o=>this.filter(o))}findEditor(e,t){const i=this.model.findEditor(e,t);if(i)return this.filter(i[1])?i:void 0}}class zS extends HS{get count(){return this.model.stickyCount}getEditors(e,t){return t!=null&&t.excludeSticky?[]:e===1?this.model.getEditors(1).slice(0,this.model.stickyCount):super.getEditors(e,t)}isSticky(e){return!0}getEditorByIndex(e){return e<this.count?this.model.getEditorByIndex(e):void 0}indexOf(e,t,i){const o=this.model.indexOf(e,t,i);return o<0||o>=this.model.stickyCount?-1:o}contains(e,t){const i=this.model.indexOf(e,void 0,t);return i>=0&&i<this.model.stickyCount}filter(e){return this.model.isSticky(e)}}class US extends HS{get count(){return this.model.count-this.model.stickyCount}get stickyCount(){return 0}isSticky(e){return!1}getEditors(e,t){return e===1?this.model.getEditors(1).slice(this.model.stickyCount):super.getEditors(e,t)}getEditorByIndex(e){return e>=0?this.model.getEditorByIndex(e+this.model.stickyCount):void 0}indexOf(e,t,i){const o=this.model.indexOf(e,t,i);return o<this.model.stickyCount||o>=this.model.count?-1:o-this.model.stickyCount}contains(e,t){const i=this.model.indexOf(e,void 0,t);return i>=this.model.stickyCount&&i<this.model.count}filter(e){return!this.model.isSticky(e)}}var Ht,Ei;let rc=(Ei=class extends oc{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f,v,S,E){super(e,t,i,o,n,s,r,a,l,h,p,g,S,E),this.editorService=m,this.pathService=f,this.treeViewsDragAndDropService=v,this.closeEditorAction=this._register(this.instantiationService.createInstance(Pa,Pa.ID,Pa.LABEL)),this.unpinEditorAction=this._register(this.instantiationService.createInstance(La,La.ID,La.LABEL)),this.tabResourceLabels=this._register(this.instantiationService.createInstance(Sc,If)),this.tabLabels=[],this.tabActionBars=[],this.tabDisposables=[],this.dimensions={container:he.None,available:he.None},this.layoutScheduler=this._register(new Se),this.path=Xt?jk:iy,this.lastMouseWheelEventTime=0,this.isMouseOverTabs=!1,this.updateEditorLabelScheduler=this._register(new Yr(()=>this.doUpdateEditorLabels(),0)),(async()=>this.path=await this.pathService.path)(),this._register(this.tabResourceLabels.onDidChangeDecorations(()=>this.doHandleDecorationsChange()))}create(e){return super.create(e),this.titleContainer=e,this.tabsAndActionsContainer=document.createElement("div"),this.tabsAndActionsContainer.classList.add("tabs-and-actions-container"),this.titleContainer.appendChild(this.tabsAndActionsContainer),this.tabsContainer=document.createElement("div"),this.tabsContainer.setAttribute("role","tablist"),this.tabsContainer.draggable=!0,this.tabsContainer.classList.add("tabs-container"),this._register(dn.addTarget(this.tabsContainer)),this.tabSizingFixedDisposables=this._register(new P),this.updateTabSizing(!1),this.tabsScrollbar=this.createTabsScrollbar(this.tabsContainer),this.tabsAndActionsContainer.appendChild(this.tabsScrollbar.getDomNode()),this.registerTabsContainerListeners(this.tabsContainer,this.tabsScrollbar),this.createEditorActionsToolBar(this.tabsAndActionsContainer,["editor-actions"]),this.updateTabsControlVisibility(),this.tabsAndActionsContainer}createTabsScrollbar(e){const t=this._register(new Yk(e,{horizontal:1,horizontalScrollbarSize:this.getTabsScrollbarSizing(),vertical:2,scrollYToX:!0,useShadows:!1}));return this._register(t.onScroll(i=>{i.scrollLeftChanged&&(e.scrollLeft=i.scrollLeft)})),t}updateTabsScrollbarSizing(){var e;(e=this.tabsScrollbar)==null||e.updateOptions({horizontalScrollbarSize:this.getTabsScrollbarSizing()})}updateTabSizing(e){const[t,i]=Ho(this.tabsContainer,this.tabSizingFixedDisposables);i.clear();const o=this.groupsView.partOptions;o.tabSizing==="fixed"?(t.style.setProperty("--tab-sizing-fixed-min-width",`${o.tabSizingFixedMinWidth}px`),t.style.setProperty("--tab-sizing-fixed-max-width",`${o.tabSizingFixedMaxWidth}px`),i.add(L(t,B.MOUSE_ENTER,()=>{this.isMouseOverTabs=!0})),i.add(L(t,B.MOUSE_LEAVE,()=>{this.isMouseOverTabs=!1,this.updateTabsFixedWidth(!1)}))):e&&(t.style.removeProperty("--tab-sizing-fixed-min-width"),t.style.removeProperty("--tab-sizing-fixed-max-width"),this.updateTabsFixedWidth(!1))}updateTabsFixedWidth(e){this.forEachTab((t,i,o)=>{if(e){const{width:n}=o.getBoundingClientRect();o.style.setProperty("--tab-sizing-current-width",`${n}px`)}else o.style.removeProperty("--tab-sizing-current-width")})}getTabsScrollbarSizing(){return this.groupsView.partOptions.titleScrollbarSizing!=="large"?Ht.SCROLLBAR_SIZES.default:Ht.SCROLLBAR_SIZES.large}registerTabsContainerListeners(e,t){this._register(L(e,B.SCROLL,()=>{e.classList.contains("scroll")&&t.setScrollPosition({scrollLeft:e.scrollLeft})}));for(const s of[St.Tap,B.DBLCLICK])this._register(L(e,s,r=>{if(s===B.DBLCLICK){if(r.target!==e)return}else if(r.tapCount!==2||r.initialTarget!==e)return;re.stop(r),this.editorService.openEditor({resource:void 0,options:{pinned:!0,index:this.groupView.count,override:pt.id}},this.groupView.id)}));this._register(L(e,B.MOUSE_DOWN,s=>{s.button===1&&s.preventDefault()})),fc&&this._register(L(e,B.MOUSE_UP,s=>{s.button===1&&s.preventDefault()}));let i,o=!1;this._register(new xd(e,{onDragStart:s=>{o=this.onGroupDragStart(s,e)},onDrag:s=>{i=s},onDragEnter:s=>{if(e.classList.add("scroll"),s.target===e){if(!this.isSupportedDropTransfer(s)){s.dataTransfer&&(s.dataTransfer.dropEffect="none");return}this.editorTransfer.hasData(ut.prototype)||s.dataTransfer&&(s.dataTransfer.dropEffect="copy"),this.updateDropFeedback(e,!0,s)}},onDragLeave:s=>{this.updateDropFeedback(e,!1,s),e.classList.remove("scroll")},onDragEnd:s=>{this.updateDropFeedback(e,!1,s),e.classList.remove("scroll"),this.onGroupDragEnd(s,i,e,o)},onDrop:s=>{if(this.updateDropFeedback(e,!1,s),e.classList.remove("scroll"),s.target===e){const r=this.groupTransfer.hasData(Et.prototype);this.onDrop(s,r?this.groupView.count:this.tabsModel.count,e)}}})),this._register(L(e,B.MOUSE_WHEEL,s=>{const r=this.groupView.activeEditor;if(!r||this.groupView.count<2)return;if(this.groupsView.partOptions.scrollToSwitchTabs===!0){if(s.shiftKey)return}else if(!s.shiftKey)return;const a=Date.now();if(a-this.lastMouseWheelEventTime<Ht.MOUSE_WHEEL_EVENT_THRESHOLD-2*(Math.abs(s.deltaX)+Math.abs(s.deltaY)))return;this.lastMouseWheelEventTime=a;let l;if(s.deltaX+s.deltaY<-Ht.MOUSE_WHEEL_DISTANCE_THRESHOLD)l=-1;else if(s.deltaX+s.deltaY>Ht.MOUSE_WHEEL_DISTANCE_THRESHOLD)l=1;else return;const h=this.groupView.getEditorByIndex(this.groupView.getIndexOfEditor(r)+l);h&&(this.groupView.openEditor(h),re.stop(s,!0))}));const n=s=>{re.stop(s);let r=e;Pn(s)&&(r=new ai(fe(this.parent),s)),this.contextMenuService.showContextMenu({getAnchor:()=>r,menuId:b.EditorTabsBarContext,contextKeyService:this.contextKeyService,menuActionOptions:{shouldForwardArgs:!0},getActionsContext:()=>({groupId:this.groupView.id}),getKeyBinding:a=>this.getKeybinding(a),onHide:()=>this.groupView.focus()})};this._register(L(e,St.Contextmenu,s=>n(s))),this._register(L(e,B.CONTEXT_MENU,s=>n(s)))}doHandleDecorationsChange(){this.layout(this.dimensions)}updateEditorActionsToolbar(){super.updateEditorActionsToolbar(),this.layout(this.dimensions)}openEditor(e,t){const i=this.handleOpenedEditors();return t!=null&&t.focusTabControl&&this.withTab(e,(o,n,s)=>s.focus()),i}openEditors(e){return this.handleOpenedEditors()}handleOpenedEditors(){this.updateTabsControlVisibility();const[e,t]=Ho(this.tabsContainer,this.tabsScrollbar);for(let r=e.children.length;r<this.tabsModel.count;r++)e.appendChild(this.createTab(r,e,t));const i=this.didActiveEditorChange(),o=this.activeTabLabel,n=this.tabLabels.length;this.computeTabLabels();let s=!1;return i||n!==this.tabLabels.length||!this.equalsEditorInputLabel(o,this.activeTabLabel)?(this.redraw({forceRevealActiveTab:!0}),s=!0):this.layout(this.dimensions,{forceRevealActiveTab:!0}),s}didActiveEditorChange(){var e,t,i;return!!(!((e=this.activeTabLabel)!=null&&e.editor)&&this.tabsModel.activeEditor||(t=this.activeTabLabel)!=null&&t.editor&&!this.tabsModel.activeEditor||!((i=this.activeTabLabel)!=null&&i.editor)||!this.tabsModel.isActive(this.activeTabLabel.editor))}equalsEditorInputLabel(e,t){return e===t?!0:!e||!t?!1:e.name===t.name&&e.description===t.description&&e.forceDescription===t.forceDescription&&e.title===t.title&&e.ariaLabel===t.ariaLabel}beforeCloseEditor(e){if(this.isMouseOverTabs&&this.groupsView.partOptions.tabSizing==="fixed"){const t=this.tabsModel.isLast(e);this.updateTabsFixedWidth(!t)}}closeEditor(e){this.handleClosedEditors()}closeEditors(e){this.handleClosedEditors()}handleClosedEditors(){var e;if(this.tabsModel.count){const t=ae(this.tabsContainer);for(;t.children.length>this.tabsModel.count;)(e=t.lastChild)==null||e.remove(),Re(this.tabDisposables.pop());this.computeTabLabels(),this.redraw({forceRevealActiveTab:!0})}else this.tabsContainer&&Zt(this.tabsContainer),this.tabDisposables=Re(this.tabDisposables),this.tabResourceLabels.clear(),this.tabLabels=[],this.activeTabLabel=void 0,this.tabActionBars=[],this.clearEditorActionsToolbar(),this.updateTabsControlVisibility()}moveEditor(e,t,i){const o=this.tabLabels[t];this.tabLabels.splice(t,1),this.tabLabels.splice(i,0,o),this.forEachTab((n,s,r,a,l,h)=>{this.redrawTab(n,s,r,a,l,h)},Math.min(t,i),Math.max(t,i)),this.layout(this.dimensions,{forceRevealActiveTab:!0})}pinEditor(e){this.withTab(e,(t,i,o,n,s)=>this.redrawTabLabel(t,i,o,n,s))}stickEditor(e){this.doHandleStickyEditorChange(e)}unstickEditor(e){this.doHandleStickyEditorChange(e)}doHandleStickyEditorChange(e){this.withTab(e,(t,i,o,n,s,r)=>this.redrawTab(t,i,o,n,s,r)),this.forEachTab((t,i,o,n,s)=>{this.redrawTabBorders(i,o)}),this.layout(this.dimensions,{forceRevealActiveTab:!0})}setActive(e){this.forEachTab((t,i,o,n,s,r)=>{this.redrawTabSelectedActiveAndDirty(e,t,o,r)}),this.updateEditorActionsToolbar(),this.layout(this.dimensions,{forceRevealActiveTab:!0})}updateEditorSelections(){this.forEachTab((e,t,i,o,n,s)=>{this.redrawTabSelectedActiveAndDirty(this.groupsView.activeGroup===this.groupView,e,i,s)})}updateEditorLabel(e){this.updateEditorLabelScheduler.schedule()}doUpdateEditorLabels(){this.computeTabLabels(),this.forEachTab((e,t,i,o,n)=>{this.redrawTabLabel(e,t,i,o,n)}),this.layout(this.dimensions)}updateEditorDirty(e){this.withTab(e,(t,i,o,n,s,r)=>this.redrawTabSelectedActiveAndDirty(this.groupsView.activeGroup===this.groupView,t,o,r))}updateOptions(e,t){super.updateOptions(e,t),e.labelFormat!==t.labelFormat&&this.computeTabLabels(),e.titleScrollbarSizing!==t.titleScrollbarSizing&&this.updateTabsScrollbarSizing(),e.alwaysShowEditorActions!==t.alwaysShowEditorActions&&this.updateEditorActionsToolbar(),(e.tabSizingFixedMinWidth!==t.tabSizingFixedMinWidth||e.tabSizingFixedMaxWidth!==t.tabSizingFixedMaxWidth||e.tabSizing!==t.tabSizing)&&this.updateTabSizing(!0),(e.labelFormat!==t.labelFormat||e.tabActionLocation!==t.tabActionLocation||e.tabActionCloseVisibility!==t.tabActionCloseVisibility||e.tabActionUnpinVisibility!==t.tabActionUnpinVisibility||e.tabSizing!==t.tabSizing||e.pinnedTabSizing!==t.pinnedTabSizing||e.showIcons!==t.showIcons||e.hasIcons!==t.hasIcons||e.highlightModifiedTabs!==t.highlightModifiedTabs||e.wrapTabs!==t.wrapTabs||!Cy(e.decorations,t.decorations))&&this.redraw()}updateStyles(){this.redraw()}forEachTab(e,t,i){this.tabsModel.getEditors(1).forEach((o,n)=>{typeof t=="number"&&t>n||typeof i=="number"&&i<n||this.doWithTab(n,o,e)})}withTab(e,t){this.doWithTab(this.tabsModel.indexOf(e),e,t)}doWithTab(e,t,i){const n=ae(this.tabsContainer).children[e],s=this.tabResourceLabels.get(e),r=this.tabLabels[e],a=this.tabActionBars[e];n&&s&&r&&i(t,e,n,s,r,a)}createTab(e,t,i){const o=document.createElement("div");o.draggable=!0,o.setAttribute("role","tab"),o.classList.add("tab"),this._register(dn.addTarget(o));const n=document.createElement("div");n.classList.add("tab-border-top-container"),o.appendChild(n);const s=this.tabResourceLabels.create(o,{hoverTargetOverrride:o}),r=document.createElement("div");r.classList.add("tab-actions"),o.appendChild(r);const a=this,l=new BS({groupId:this.groupView.id,get editorIndex(){return a.toEditorIndex(e)}}),h=new Vo(r,{ariaLabel:d(11870,"Tab actions"),actionRunner:l}),p=h.onWillRun(S=>{S.action.id===this.closeEditorAction.id&&this.blockRevealActiveTabOnce()}),g=pp(h,p,ne(Sy(this.tabActionBars,h))),m=document.createElement("div");m.classList.add("tab-fade-hider"),o.appendChild(m);const f=document.createElement("div");f.classList.add("tab-border-bottom-container"),o.appendChild(f);const v=this.registerTabListeners(o,e,t,i);return this.tabDisposables.push(pp(v,g,l,s)),o}toEditorIndex(e){const t=ae(this.tabsModel.getEditorByIndex(e));return this.groupView.getIndexOfEditor(t)}registerTabListeners(e,t,i,o){const n=new P,s=async(h,p)=>{if(e.blur(),Pn(h)&&(h.button!==0||be&&h.ctrlKey)){h.button===1&&h.preventDefault();return}if(this.originatesFromTabActionBar(h))return;const g=this.tabsModel.getEditorByIndex(t);if(g)if(h.shiftKey){let m;if(this.lastSingleSelectSelectedEditor&&this.tabsModel.isSelected(this.lastSingleSelectSelectedEditor))m=this.lastSingleSelectSelectedEditor;else{const f=ae(this.groupView.activeEditor);this.lastSingleSelectSelectedEditor=f,m=f}await this.selectEditorsBetween(g,m)}else if(h.ctrlKey&&!be||h.metaKey&&be)this.tabsModel.isSelected(g)?await this.unselectEditor(g):(await this.selectEditor(g),this.lastSingleSelectSelectedEditor=g);else{const m=this.tabsModel.isSelected(g)?this.groupView.selectedEditors.filter(f=>!f.matches(g)):[];await this.groupView.openEditor(g,{preserveFocus:p,activation:Fo.ACTIVATE},{inactiveSelection:m,focusTabControl:!0})}},r=h=>{re.stop(h);const p=this.tabsModel.getEditorByIndex(t);p&&this.onTabContextMenu(p,h,e)};n.add(L(e,B.MOUSE_DOWN,h=>s(h,!1))),n.add(L(e,St.Tap,h=>s(h,!0))),n.add(L(e,St.Change,h=>{o.setScrollPosition({scrollLeft:o.getScrollPosition().scrollLeft-h.translationX})})),n.add(L(e,B.MOUSE_UP,async h=>{if(re.stop(h),e.blur(),Pn(h)&&(h.button!==0||be&&h.ctrlKey)||this.originatesFromTabActionBar(h))return;!(h.ctrlKey&&!be||h.metaKey&&be)&&!h.shiftKey&&this.groupView.selectedEditors.length>1&&await this.unselectAllEditors()})),n.add(L(e,B.AUXCLICK,h=>{if(h.button===1){re.stop(h,!0);const p=this.tabsModel.getEditorByIndex(t);if(p){if(Ey(this.tabsModel,p,ky.MOUSE,this.groupsView.partOptions))return;this.blockRevealActiveTabOnce(),this.closeEditorAction.run({groupId:this.groupView.id,editorIndex:this.groupView.getIndexOfEditor(p)})}}})),n.add(L(e,B.KEY_DOWN,h=>{const p=new xi(h);p.shiftKey&&p.keyCode===68&&r(h)})),n.add(L(e,St.Contextmenu,h=>{r(h)})),n.add(L(e,B.KEY_UP,h=>{const p=new xi(h);let g=!1;if(p.equals(3)||p.equals(10)){g=!0;const m=this.tabsModel.getEditorByIndex(t);m&&this.groupView.openEditor(m)}else if([15,17,16,18,14,13].some(m=>p.equals(m))){let m=this.toEditorIndex(t);p.equals(15)||p.equals(16)?m=m-1:p.equals(17)||p.equals(18)?m=m+1:p.equals(14)?m=0:m=this.groupView.count-1;const f=this.groupView.getEditorByIndex(m);f&&(g=!0,this.groupView.openEditor(f,{preserveFocus:!0},{focusTabControl:!0}))}g&&re.stop(h,!0),o.setScrollPosition({scrollLeft:i.scrollLeft})}));for(const h of[St.Tap,B.DBLCLICK])n.add(L(e,h,p=>{if(h===B.DBLCLICK)re.stop(p);else if(p.tapCount!==2)return;const g=this.tabsModel.getEditorByIndex(t);if(g&&this.tabsModel.isPinned(g))switch(this.groupsView.partOptions.doubleClickTabToToggleEditorGroupSizes){case"maximize":this.groupsView.toggleMaximizeGroup(this.groupView);break;case"expand":this.groupsView.toggleExpandGroup(this.groupView);break}else this.groupView.pinEditor(g)}));n.add(L(e,B.CONTEXT_MENU,h=>{re.stop(h,!0);const p=this.tabsModel.getEditorByIndex(t);p&&this.onTabContextMenu(p,h,e)},!0));let a,l=!1;return n.add(new xd(e,{onDragStart:h=>{const p=this.tabsModel.getEditorByIndex(t);if(!p)return;l=this.isNewWindowOperation(h);const g=this.groupView.selectedEditors;if(this.editorTransfer.setData(g.map(m=>new ut({editor:m,groupId:this.groupView.id})),ut.prototype),h.dataTransfer)if(h.dataTransfer.effectAllowed="copyMove",g.length>1){const m=`${p.getName()} + ${g.length-1}`;cy(h,m,"monaco-editor-group-drag-image",this.getColor(ly),this.getColor(dy))}else h.dataTransfer.setDragImage(e,0,0);this.doFillResourceDataTransfers(g,h,l),lp(fe(this.parent),()=>this.updateDropFeedback(e,!1,h,t))},onDrag:h=>{a=h},onDragEnter:h=>{if(!this.isSupportedDropTransfer(h)){h.dataTransfer&&(h.dataTransfer.dropEffect="none");return}this.editorTransfer.hasData(ut.prototype)||h.dataTransfer&&(h.dataTransfer.dropEffect="copy"),this.updateDropFeedback(e,!0,h,t)},onDragOver:(h,p)=>{if(p>=Ht.DRAG_OVER_OPEN_TAB_THRESHOLD){const g=this.tabsModel.getEditorByIndex(t);g&&this.tabsModel.activeEditor!==g&&this.groupView.openEditor(g,{preserveFocus:!0})}this.updateDropFeedback(e,!0,h,t)},onDragEnd:async h=>{this.updateDropFeedback(e,!1,h,t);const p=this.editorTransfer.getData(ut.prototype);if(this.editorTransfer.clearData(ut.prototype),!l||hy()||!p||p.length===0)return;const g=await this.maybeCreateAuxiliaryEditorPartAt(h,e);if(!g)return;const m=g.activeGroup,f=p.map(v=>({editor:v.identifier.editor}));this.isMoveOperation(a??h,m.id,p[0].identifier.editor)?this.groupView.moveEditors(f,m):this.groupView.copyEditors(f,m),m.focus()},onDrop:h=>{this.updateDropFeedback(e,!1,h,t);let p=t;this.getTabDragOverLocation(h,e)==="right"&&p++,this.onDrop(h,p,i)}})),n}isSupportedDropTransfer(e){if(this.groupTransfer.hasData(Et.prototype)){const t=this.groupTransfer.getData(Et.prototype);return!(Array.isArray(t)&&t.length>0&&t[0].identifier===this.groupView.id)}return!!(this.editorTransfer.hasData(ut.prototype)||e.dataTransfer&&e.dataTransfer.types.length>0)}updateDropFeedback(e,t,i,o){const n=typeof o=="number";let s;t?n?s=this.computeDropTarget(i,o,e):s={leftElement:e.lastElementChild,rightElement:void 0}:s=void 0,this.updateDropTarget(s)}updateDropTarget(e){var n,s,r,a;const t=this.dropTarget;if(t===e||t&&e&&t.leftElement===e.leftElement&&t.rightElement===e.rightElement)return;const i="drop-target-left",o="drop-target-right";t&&((n=t.leftElement)==null||n.classList.remove(i),(s=t.rightElement)==null||s.classList.remove(o)),e&&((r=e.leftElement)==null||r.classList.add(i),(a=e.rightElement)==null||a.classList.add(o)),this.dropTarget=e}getTabDragOverLocation(e,t){const i=t.getBoundingClientRect();return e.clientX-i.left<=i.width/2?"left":"right"}computeDropTarget(e,t,i){const o=this.getTabDragOverLocation(e,i)==="left",n=t===this.tabsModel.count-1;if(o&&t===0)return{leftElement:void 0,rightElement:i};if(!o&&n)return{leftElement:i,rightElement:void 0};const r=o?i.previousElementSibling:i,a=o?i:i.nextElementSibling;return{leftElement:r,rightElement:a}}async selectEditor(e){this.groupView.isActive(e)||await this.groupView.setSelection(e,this.groupView.selectedEditors)}async selectEditorsBetween(e,t){const i=this.groupView.getIndexOfEditor(e);if(i===-1)throw new Xa;const o=this.groupView.getIndexOfEditor(t);if(o===-1)throw new Xa;let n=this.groupView.selectedEditors,s=o;for(;s>=0&&s<=this.groupView.count-1;){s=o<i?s-1:s+1;const p=this.groupView.getEditorByIndex(s);if(!p||!this.groupView.isSelected(p))break;n=n.filter(g=>!g.matches(p))}const r=o<i?o:i,a=o<i?i:o,l=this.groupView.getEditors(1).slice(r,a+1);for(const p of l)this.groupView.isSelected(p)||n.push(p);const h=n.filter(p=>!p.matches(e));await this.groupView.setSelection(e,h)}async unselectEditor(e){const t=this.groupView.isActive(e);if(t&&this.groupView.selectedEditors.length===1)return;let i=ae(this.groupView.activeEditor);if(t){const n=this.groupView.getEditors(0);for(let s=1;s<n.length;s++){const r=n[s];if(this.groupView.isSelected(r)){i=r;break}}}const o=this.groupView.selectedEditors.filter(n=>!n.matches(e)&&!n.matches(i));await this.groupView.setSelection(i,o)}async unselectAllEditors(){if(this.groupView.selectedEditors.length>1){const e=ae(this.groupView.activeEditor);await this.groupView.setSelection(e,[])}}computeTabLabels(){const{labelFormat:e}=this.groupsView.partOptions,{verbosity:t,shortenDuplicates:i}=this.getLabelConfigFlags(e),o=[];let n=-1;this.tabsModel.getEditors(1).forEach((s,r)=>{o.push({editor:s,name:s.getName(),description:s.getDescription(t),forceDescription:s.hasCapability(64),title:s.getTitle(2),ariaLabel:Yv(s,r,this.groupView,this.editorPartsView.count)}),s===this.tabsModel.activeEditor&&(n=r)}),i&&this.shortenTabLabels(o),this.tabLabels=o,this.activeTabLabel=o[n]}shortenTabLabels(e){const t=new Map;for(const i of e)typeof i.description=="string"?Ou(t,i.name,[]).push(i):i.description="";for(const[,i]of t){if(i.length===1&&!i[0].forceDescription){i[0].description="";continue}const o=new Map;for(const a of i)Ou(o,a.description,[]).push(a);let n=!1;for(const[,a]of o)if(!n&&a.length>1){const[l,...h]=a.map(({editor:p})=>p.getDescription(2));n=h.some(p=>p!==l)}if(n){o.clear();for(const a of i)a.description=a.editor.getDescription(2),Ou(o,a.description,[]).push(a)}const s=[];for(const[a]of o)s.push(a);if(s.length===1){for(const a of o.get(s[0])||[])a.forceDescription||(a.description="");continue}const r=Zk(s,this.path.sep);s.forEach((a,l)=>{for(const h of o.get(a)||[])h.description=r[l]})}}getLabelConfigFlags(e){switch(e){case"short":return{verbosity:0,shortenDuplicates:!1};case"medium":return{verbosity:1,shortenDuplicates:!1};case"long":return{verbosity:2,shortenDuplicates:!1};default:return{verbosity:1,shortenDuplicates:!0}}}redraw(e){if(this.tabsAndActionsContainer){let t=this.getColor(Xk);!t&&_y(this.theme.type)&&(t=this.getColor(bp)||this.getColor(Yt)),t?(this.tabsAndActionsContainer.classList.add("tabs-border-bottom"),this.tabsAndActionsContainer.style.setProperty("--tabs-border-bottom-color",t.toString())):(this.tabsAndActionsContainer.classList.remove("tabs-border-bottom"),this.tabsAndActionsContainer.style.removeProperty("--tabs-border-bottom-color"))}this.forEachTab((t,i,o,n,s,r)=>{this.redrawTab(t,i,o,n,s,r)}),this.updateEditorActionsToolbar(),this.layout(this.dimensions,e)}redrawTab(e,t,i,o,n,s){const r=this.tabsModel.isSticky(t),a=this.groupsView.partOptions;this.redrawTabLabel(e,t,i,o,n);const l=r&&a.tabActionUnpinVisibility,h=!l&&a.tabActionCloseVisibility,p=l||h;let g;p?g=l?this.unpinEditorAction:this.closeEditorAction:g=r?this.unpinEditorAction:this.closeEditorAction,s.hasAction(g)||(s.isEmpty()||s.clear(),s.push(g,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(g)})),i.classList.toggle("pinned-action-off",r&&!l),i.classList.toggle("close-action-off",!l&&!h);for(const f of["left","right"])i.classList.toggle(`tab-actions-${f}`,p&&a.tabActionLocation===f);const m=r&&a.pinnedTabSizing==="shrink"?"shrink":a.tabSizing;for(const f of["fit","shrink","fixed"])i.classList.toggle(`sizing-${f}`,m===f);i.classList.toggle("has-icon",a.showIcons&&a.hasIcons),i.classList.toggle("sticky",r);for(const f of["normal","compact","shrink"])i.classList.toggle(`sticky-${f}`,r&&a.pinnedTabSizing===f);if(!a.wrapTabs&&r&&a.pinnedTabSizing!=="normal"){let f=0;switch(a.pinnedTabSizing){case"compact":f=Ht.TAB_WIDTH.compact;break;case"shrink":f=Ht.TAB_WIDTH.shrink;break}i.style.left=`${t*f}px`}else i.style.left="auto";this.redrawTabBorders(t,i),this.redrawTabSelectedActiveAndDirty(this.groupsView.activeGroup===this.groupView,e,i,s)}redrawTabLabel(e,t,i,o,n){var m,f,v;const s=this.groupsView.partOptions;let r,a=!1,l=!!((m=s.decorations)!=null&&m.badges);const h=!!((f=s.decorations)!=null&&f.colors);let p;s.pinnedTabSizing==="compact"&&this.tabsModel.isSticky(t)?(r=s.showIcons&&s.hasIcons?"":(v=n.name)==null?void 0:v.charAt(0).toUpperCase(),p="",a=!0,l=!1):(r=n.name,p=n.description||""),n.ariaLabel&&(i.setAttribute("aria-label",n.ariaLabel),i.setAttribute("aria-description","")),o.setResource({name:r,description:p,resource:Ie.getOriginalUri(e,{supportSideBySide:Ce.BOTH})},{title:this.getHoverTitle(e),extraClasses:hi(["tab-label",l?"tab-label-has-badge":void 0].concat(e.getLabelExtraClasses())),italic:!this.tabsModel.isPinned(e),forceLabel:a,fileDecorations:{colors:h,badges:l},icon:e.getIcon(),hideIcon:s.showIcons===!1});const g=Ie.getOriginalUri(e,{supportSideBySide:Ce.PRIMARY});g?i.setAttribute("data-resource-name",Jk(g)):i.removeAttribute("data-resource-name")}redrawTabSelectedActiveAndDirty(e,t,i,o){const n=this.tabsModel.isActive(t),s=this.doRedrawTabDirty(e,n,t,i);this.doRedrawTabActive(e,!s,t,i,o)}doRedrawTabActive(e,t,i,o,n){const s=this.tabsModel.isActive(i),r=this.tabsModel.isSelected(i);if(o.classList.toggle("active",s),o.classList.toggle("selected",r),o.setAttribute("aria-selected",s?"true":"false"),o.tabIndex=s?0:-1,n.setFocusable(s),s){const l=this.getColor(e?Qk:e_);o.classList.toggle("tab-border-bottom",!!l),o.style.setProperty("--tab-border-bottom-color",l??"")}let a=null;t&&(s&&(a=this.getColor(e?t_:i_)),a===null&&r&&(a=this.getColor(o_))),o.classList.toggle("tab-border-top",!!a),o.style.setProperty("--tab-border-top-color",a??"")}doRedrawTabDirty(e,t,i,o){let n=!1;if(i.isDirty()&&!i.isSaving())if(o.classList.add("dirty"),this.groupsView.partOptions.highlightModifiedTabs){let s;e&&t?s=this.getColor(n_):e&&!t?s=this.getColor(s_):!e&&t?s=this.getColor(r_):s=this.getColor(a_),s&&(n=!0,o.classList.add("dirty-border-top"),o.style.setProperty("--tab-dirty-border-top-color",s))}else o.classList.remove("dirty-border-top"),o.style.removeProperty("--tab-dirty-border-top-color");else o.classList.remove("dirty","dirty-border-top"),o.style.removeProperty("--tab-dirty-border-top-color");return n}redrawTabBorders(e,t){const o=this.tabsModel.isSticky(e)&&this.tabsModel.stickyCount===e+1,n=this.tabsModel.stickyCount!==this.tabsModel.count,s=(o&&n?this.getColor(c_):void 0)||this.getColor(bp)||this.getColor(Yt);t.style.borderRight=s?`1px solid ${s}`:"",t.style.outlineColor=this.getColor(su)||""}prepareEditorActions(e){return this.groupsView.activeGroup===this.groupView?e:{primary:this.groupsView.partOptions.alwaysShowEditorActions?e.primary:e.primary.filter(i=>i.id===du),secondary:e.secondary}}getHeight(){return this.dimensions.used?this.dimensions.used.height:this.computeHeight()}computeHeight(){var t;let e;return this.visible?this.groupsView.partOptions.wrapTabs&&((t=this.tabsAndActionsContainer)!=null&&t.classList.contains("wrapping"))?e=this.tabsAndActionsContainer.offsetHeight:e=this.tabHeight:e=0,e}layout(e,t){if(Object.assign(this.dimensions,e),this.visible){if(!this.layoutScheduler.value){const i=lp(fe(this.parent),()=>{var o;this.doLayout(this.dimensions,(o=this.layoutScheduler.value)==null?void 0:o.options),this.layoutScheduler.clear()});this.layoutScheduler.value={options:t,dispose:()=>i.dispose()}}t!=null&&t.forceRevealActiveTab&&(this.layoutScheduler.value.options={...this.layoutScheduler.value.options,forceRevealActiveTab:!0})}return this.dimensions.used||(this.dimensions.used=new he(e.container.width,this.computeHeight())),this.dimensions.used}doLayout(e,t){e.container!==he.None&&e.available!==he.None&&this.doLayoutTabs(e,t);const i=this.dimensions.used,o=this.dimensions.used=new he(e.container.width,this.computeHeight());i&&i.height!==o.height&&this.groupView.relayout()}doLayoutTabs(e,t){this.doLayoutTabsWrapping(e)||this.doLayoutTabsNonWrapping(t)}doLayoutTabsWrapping(e){const[t,i,o,n]=Ho(this.tabsAndActionsContainer,this.tabsContainer,this.editorActionsToolbarContainer,this.tabsScrollbar),s=t.classList.contains("wrapping");let r=s;function a(l){r=l,t.classList.toggle("wrapping",r),i.style.setProperty("--last-tab-margin-right",r?`${o.offsetWidth}px`:"0");for(const h of i.children)h.classList.remove("last-in-row")}if(this.groupsView.partOptions.wrapTabs){const l=i.offsetWidth,h=i.scrollWidth,p=()=>{const g=this.getLastTab();return g?!(g.offsetWidth+o.offsetWidth-e.available.width>1):!0};(r||h>l&&p())&&a(!0),r&&(i.offsetHeight>e.available.height||h===l&&i.offsetHeight===this.tabHeight||!p())&&a(!1)}else s&&a(!1);if(r&&!s){const l=i.offsetWidth;n.setScrollDimensions({width:l,scrollWidth:l})}if(r){const l=new Map;let h,p;for(const g of i.children){const m=g,f=m.offsetTop;f!==h&&(h=f,p&&l.set(p,!0)),p=m,l.set(m,!1)}p&&l.set(p,!0);for(const[g,m]of l)g.classList.toggle("last-in-row",m)}return r}doLayoutTabsNonWrapping(e){const[t,i]=Ho(this.tabsContainer,this.tabsScrollbar),o=t.offsetWidth,n=t.scrollWidth;let s=0;if(this.tabsModel.stickyCount>0){let M=0;switch(this.groupsView.partOptions.pinnedTabSizing){case"compact":M=Ht.TAB_WIDTH.compact;break;case"shrink":M=Ht.TAB_WIDTH.shrink;break}s=this.tabsModel.stickyCount*M}const r=this.tabsModel.activeEditor?this.getTabAndIndex(this.tabsModel.activeEditor):void 0,[a,l]=r??[void 0,void 0];let h=this.groupsView.partOptions.pinnedTabSizing!=="normal"&&typeof l=="number"&&this.tabsModel.isSticky(l),p=o-s;this.tabsModel.stickyCount>0&&p<Ht.TAB_WIDTH.fit?(t.classList.add("disable-sticky-tabs"),p=o,s=0,h=!1):t.classList.remove("disable-sticky-tabs");let g,m;!this.blockRevealActiveTab&&a&&(g=a.offsetLeft,m=a.offsetWidth);const{width:f,scrollWidth:v}=i.getScrollDimensions();i.setScrollDimensions({width:o,scrollWidth:n});const S=f!==o||v!==n;if(this.blockRevealActiveTab||typeof g!="number"||typeof m!="number"||h||!S&&!(e!=null&&e.forceRevealActiveTab)){this.blockRevealActiveTab=!1;return}const E=i.getScrollPosition().scrollLeft,D=m<=p,V=g-s;D&&E+p<V+m?i.setScrollPosition({scrollLeft:E+(V+m-(E+p))}):(E>V||!D)&&i.setScrollPosition({scrollLeft:V})}updateTabsControlVisibility(){ae(this.tabsAndActionsContainer).classList.toggle("empty",!this.visible),!this.visible&&this.dimensions&&(this.dimensions.used=void 0)}get visible(){return this.tabsModel.count>0}getTabAndIndex(e){const t=this.tabsModel.indexOf(e),i=this.getTabAtIndex(t);if(i)return[i,t]}getTabAtIndex(e){if(e>=0)return ae(this.tabsContainer).children[e]}getLastTab(){return this.getTabAtIndex(this.tabsModel.count-1)}blockRevealActiveTabOnce(){this.blockRevealActiveTab=!0}originatesFromTabActionBar(e){let t;return Pn(e)?t=e.target||e.srcElement:t=e.initialTarget,!!Id(t,"action-item","tab")}async onDrop(e,t,i){re.stop(e,!0),this.updateDropFeedback(i,!1,e,t),i.classList.remove("scroll");let o=this.tabsModel instanceof US?t+this.groupView.stickyCount:t;const n={sticky:this.tabsModel instanceof zS&&this.tabsModel.stickyCount===o,index:o};if(this.groupTransfer.hasData(Et.prototype)){const s=this.groupTransfer.getData(Et.prototype);if(Array.isArray(s)&&s.length>0){const r=this.editorPartsView.getGroup(s[0].identifier);if(r){const a={index:o};this.isMoveOperation(e,r.id)||(a.mode=0),this.groupsView.mergeGroup(r,this.groupView,a)}this.groupView.focus(),this.groupTransfer.clearData(Et.prototype)}}else if(this.editorTransfer.hasData(ut.prototype)){const s=this.editorTransfer.getData(ut.prototype);if(Array.isArray(s)&&s.length>0){const r=this.editorPartsView.getGroup(s[0].identifier.groupId);if(r)for(const a of s){const l=a.identifier.editor;if(r.id!==a.identifier.groupId)continue;const h=r.getIndexOfEditor(l);r===this.groupView&&h<o&&o--,this.isMoveOperation(e,a.identifier.groupId,l)?r.moveEditor(l,this.groupView,{...n,index:o}):r.copyEditor(l,this.groupView,{...n,index:o}),o++}}this.groupView.focus(),this.editorTransfer.clearData(ut.prototype)}else if(this.treeItemsTransfer.hasData(zi.prototype)){const s=this.treeItemsTransfer.getData(zi.prototype);if(Array.isArray(s)&&s.length>0){const r=[];for(const a of s){const l=await this.treeViewsDragAndDropService.removeDragOperationTransfer(a.identifier);if(l){const h=await xy(l);r.push(...h.map(p=>({...p,options:{...p.options,pinned:!0,index:o}})))}}this.editorService.openEditors(r,this.groupView,{validateTrust:!0})}this.treeItemsTransfer.clearData(zi.prototype)}else this.instantiationService.createInstance(Iy,{allowWorkspaceOpen:!1}).handleDrop(e,fe(this.parent),()=>this.groupView,()=>this.groupView.focus(),n)}dispose(){super.dispose(),this.tabDisposables=Re(this.tabDisposables)}},Ht=Ei,Ei.SCROLLBAR_SIZES={default:3,large:10},Ei.TAB_WIDTH={compact:38,shrink:80,fit:120},Ei.DRAG_OVER_OPEN_TAB_THRESHOLD=1500,Ei.MOUSE_WHEEL_EVENT_THRESHOLD=150,Ei.MOUSE_WHEEL_DISTANCE_THRESHOLD=1.5,Ei);rc=Ht=x([u(5,Ve),u(6,O),u(7,K),u(8,xe),u(9,He),u(10,Fe),u(11,te),u(12,U),u(13,Ac),u(14,Pf),u(15,Mo),u(16,st)],rc);nu((c,e)=>{const t=c.getColor(bp);t&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container > .title > .tabs-and-actions-container.wrapping .tabs-container > .tab {
				border-bottom: 1px solid ${t};
			}
		`);const i=c.getColor(su);i&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active,
			.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active:hover  {
				outline: 1px solid;
				outline-offset: -5px;
			}

			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.selected:not(.active):not(:hover)  {
				outline: 1px dotted;
				outline-offset: -5px;
			}

			.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active:focus {
				outline-style: dashed;
			}

			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active {
				outline: 1px dotted;
				outline-offset: -5px;
			}

			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover  {
				outline: 1px dashed;
				outline-offset: -5px;
			}

			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active > .tab-actions .action-label,
			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active:hover > .tab-actions .action-label,
			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.dirty > .tab-actions .action-label,
			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.sticky > .tab-actions .action-label,
			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover > .tab-actions .action-label {
				opacity: 1 !important;
			}
		`);const o=c.getColor(Yt);o&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container > .title .editor-actions {
				outline: 1px solid ${o}
			}
		`);const n=c.getColor(d_);n&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:not(.selected):hover {
				background-color: ${n} !important;
			}
		`);const s=c.getColor(l_);s&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:not(.selected):hover  {
				background-color: ${s} !important;
			}
		`);const r=c.getColor(h_);r&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:not(.selected):hover  {
				color: ${r} !important;
			}
		`);const a=c.getColor(u_);a&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:not(.selected):hover  {
				color: ${a} !important;
			}
		`);const l=c.getColor(p_);l&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:hover > .tab-border-bottom-container {
				display: block;
				position: absolute;
				left: 0;
				pointer-events: none;
				width: 100%;
				z-index: 10;
				bottom: 0;
				height: 1px;
				background-color: ${l};
			}
		`);const h=c.getColor(g_);if(h&&e.addRule(`
			.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover > .tab-border-bottom-container  {
				display: block;
				position: absolute;
				left: 0;
				pointer-events: none;
				width: 100%;
				z-index: 10;
				bottom: 0;
				height: 1px;
				background-color: ${h};
			}
		`),!_y(c.type)&&!Rf&&!i){const p=Dy(c),g=c.getColor(Bf),m=c.getColor(Ay),f=c.getColor(Cf);let v;m&&g&&(v=m.flatten(g,g,p));let S;m&&g&&f&&g&&(S=m.flatten(g,f,g,p));const E=(W,G,se=!1)=>`
			.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${se?".active":""} > .title .tabs-container > .tab.sizing-shrink:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after,
			.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${se?".active":""} > .title .tabs-container > .tab.sizing-fixed:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after {
				background: linear-gradient(to left, ${W}, transparent) !important;
			}

			.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${se?".active":""} > .title .tabs-container > .tab.sizing-shrink:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after,
			.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${se?".active":""} > .title .tabs-container > .tab.sizing-fixed:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after {
				background: linear-gradient(to left, ${G}, transparent) !important;
			}
		`;if(n&&v&&S){const W=n.flatten(v),G=n.flatten(S);e.addRule(E(W,G,!0))}if(s&&v&&S){const W=s.flatten(v),G=s.flatten(S);e.addRule(E(W,G))}if(f&&S){const W=f.flatten(S);e.addRule(`
				.monaco-workbench .part.editor > .content.dragged-over .editor-group-container.active > .title .tabs-container > .tab.sizing-shrink.dragged-over:not(.active):not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,
				.monaco-workbench .part.editor > .content.dragged-over .editor-group-container:not(.active) > .title .tabs-container > .tab.sizing-shrink.dragged-over:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,
				.monaco-workbench .part.editor > .content.dragged-over .editor-group-container.active > .title .tabs-container > .tab.sizing-fixed.dragged-over:not(.active):not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,
				.monaco-workbench .part.editor > .content.dragged-over .editor-group-container:not(.active) > .title .tabs-container > .tab.sizing-fixed.dragged-over:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {
					background: linear-gradient(to left, ${W}, transparent) !important;
				}
		`)}const D=(W,G,se,Le)=>`
				.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${se?".active":":not(.active)"} > .title .tabs-container > .tab.sizing-shrink${Le?".active":""}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,
				.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${se?".active":":not(.active)"} > .title .tabs-container > .tab.sizing-fixed${Le?".active":""}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {
					background: linear-gradient(to left, ${W}, transparent);
				}

				.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${se?".active":":not(.active)"} > .title .tabs-container > .tab.sizing-shrink${Le?".active":""}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,
				.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${se?".active":":not(.active)"} > .title .tabs-container > .tab.sizing-fixed${Le?".active":""}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {
					background: linear-gradient(to left, ${G}, transparent);
				}
		`,V=c.getColor(m_);if(V&&v&&S){const W=V.flatten(v),G=V.flatten(S);e.addRule(D(W,G,!0,!0))}const M=c.getColor(f_);if(M&&v&&S){const W=M.flatten(v),G=M.flatten(S);e.addRule(D(W,G,!1,!0))}const J=c.getColor(b_);if(J&&v&&S){const W=J.flatten(v),G=J.flatten(S);e.addRule(D(W,G,!0,!1))}const q=c.getColor(w_);if(q&&v&&S){const W=q.flatten(v),G=q.flatten(S);e.addRule(D(W,G,!1,!1))}}});var m0='.monaco-workbench .part.editor>.content .editor-group-container>.title>.label-container{align-items:center;display:flex;flex:auto;height:var(--editor-group-tab-height);justify-content:flex-start;overflow:hidden}.monaco-workbench .part.editor>.content .editor-group-container>.title>.label-container>.title-label{line-height:var(--editor-group-tab-height);overflow:hidden;padding-left:20px;position:relative;text-overflow:ellipsis}.monaco-workbench .part.editor>.content .editor-group-container>.title>.label-container>.title-label>.monaco-icon-label-container{flex:initial}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .single-tab.title-label{flex:none}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control{flex:1 50%;line-height:var(--editor-group-tab-height);margin-left:.45em;overflow:hidden}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control.preview .monaco-breadcrumb-item{font-style:italic}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:before{background-image:none;content:"/";font-size:.9em;height:inherit;opacity:1;width:inherit}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control.backslash-path .monaco-breadcrumb-item:before{content:"\\\\";font-size:.9em}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item .outline-element-icon:before{font-size:.9em}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item.root_folder+.monaco-breadcrumb-item:before,.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item.root_folder:before,.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control.relative-path .monaco-breadcrumb-item:nth-child(2):before,.monaco-workbench.windows .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:nth-child(2):before{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item.root_folder:after{content:"\\00a0\\00a0";font-size:.9em;padding:0}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:last-child{padding-right:4px}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item .codicon[class*=codicon-symbol-]{padding:0 1px}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item .codicon:last-child{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-icon-label:before{height:18px;padding-right:2px}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-icon-label .label-name{font-size:.9em}.monaco-workbench .part.editor>.content .editor-group-container>.title>.title-actions{display:flex;flex:initial;height:var(--editor-group-tab-height);opacity:.5;padding-right:8px}.monaco-workbench .part.editor>.content .editor-group-container>.title>.title-actions.hidden{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title>.title-actions .action-item{margin-right:4px}.monaco-workbench .part.editor>.content .editor-group-container.active>.title>.title-actions{opacity:1}';we(m0,{});class f0 extends oc{constructor(){super(...arguments),this.activeLabel=Object.create(null)}get breadcrumbsControl(){var e;return(e=this.breadcrumbsControlFactory)==null?void 0:e.control}create(e){super.create(e);const t=this.titleContainer=e;t.draggable=!0,this.registerContainerListeners(t),this._register(dn.addTarget(t));const i=document.createElement("div");return i.classList.add("label-container"),t.appendChild(i),this.editorLabel=this._register(this.instantiationService.createInstance(v_,i,{})).element,this._register(L(this.editorLabel.element,B.CLICK,o=>this.onTitleLabelClick(o))),this.breadcrumbsControlFactory=this._register(this.instantiationService.createInstance(ll,i,this.groupView,{showFileIcons:!1,showSymbolIcons:!0,showDecorationColors:!1,widgetStyles:{...oy,breadcrumbsBackground:at.transparent.toString()},showPlaceholder:!1})),this._register(this.breadcrumbsControlFactory.onDidEnablementChange(()=>this.handleBreadcrumbsEnablementChange())),t.classList.toggle("breadcrumbs",!!this.breadcrumbsControl),this._register(ne(()=>t.classList.remove("breadcrumbs"))),this.createEditorActionsToolBar(t,["title-actions"]),t}registerContainerListeners(e){let t,i=!1;this._register(new xd(e,{onDragStart:o=>{i=this.onGroupDragStart(o,e)},onDrag:o=>{t=o},onDragEnd:o=>{this.onGroupDragEnd(o,t,e,i)}})),this._register(L(e,B.DBLCLICK,o=>this.onTitleDoubleClick(o))),this._register(L(e,B.AUXCLICK,o=>this.onTitleAuxClick(o))),this._register(L(e,St.Tap,o=>this.onTitleTap(o)));for(const o of[B.CONTEXT_MENU,St.Contextmenu])this._register(L(e,o,n=>{this.tabsModel.activeEditor&&this.onTabContextMenu(this.tabsModel.activeEditor,n,e)}))}onTitleLabelClick(e){re.stop(e,!1),setTimeout(()=>this.quickInputService.quickAccess.show())}onTitleDoubleClick(e){re.stop(e),this.groupView.pinEditor()}onTitleAuxClick(e){e.button===1&&this.tabsModel.activeEditor&&(re.stop(e,!0),Ey(this.tabsModel,this.tabsModel.activeEditor,ky.MOUSE,this.groupsView.partOptions)||this.groupView.closeEditor(this.tabsModel.activeEditor))}onTitleTap(e){const t=e.initialTarget;!pn(t)||!this.editorLabel||!Yi(t,this.editorLabel.element)||setTimeout(()=>this.quickInputService.quickAccess.show(),50)}openEditor(e){return this.doHandleOpenEditor()}openEditors(e){return this.doHandleOpenEditor()}doHandleOpenEditor(){const e=this.ifActiveEditorChanged(()=>this.redraw());return e||this.ifActiveEditorPropertiesChanged(()=>this.redraw()),e}beforeCloseEditor(e){}closeEditor(e){this.ifActiveEditorChanged(()=>this.redraw())}closeEditors(e){this.ifActiveEditorChanged(()=>this.redraw())}moveEditor(e,t,i){this.ifActiveEditorChanged(()=>this.redraw())}pinEditor(e){this.ifEditorIsActive(e,()=>this.redraw())}stickEditor(e){}unstickEditor(e){}setActive(e){this.redraw()}updateEditorSelections(){}updateEditorLabel(e){this.ifEditorIsActive(e,()=>this.redraw())}updateEditorDirty(e){this.ifEditorIsActive(e,()=>{const t=ae(this.titleContainer);e.isDirty()&&!e.isSaving()?t.classList.add("dirty"):t.classList.remove("dirty")})}updateOptions(e,t){super.updateOptions(e,t),(e.labelFormat!==t.labelFormat||!Cy(e.decorations,t.decorations))&&this.redraw()}updateStyles(){this.redraw()}handleBreadcrumbsEnablementChange(){ae(this.titleContainer).classList.toggle("breadcrumbs",!!this.breadcrumbsControl),this.redraw()}ifActiveEditorChanged(e){return!this.activeLabel.editor&&this.tabsModel.activeEditor||this.activeLabel.editor&&!this.tabsModel.activeEditor||!this.activeLabel.editor||!this.tabsModel.isActive(this.activeLabel.editor)?(e(),!0):!1}ifActiveEditorPropertiesChanged(e){!this.activeLabel.editor||!this.tabsModel.activeEditor||this.activeLabel.pinned!==this.tabsModel.isPinned(this.tabsModel.activeEditor)&&e()}ifEditorIsActive(e,t){this.tabsModel.isActive(e)&&t()}redraw(){var r,a;const e=this.tabsModel.activeEditor??void 0,t=this.groupsView.partOptions,i=e?this.tabsModel.isPinned(e):!1,o=this.groupsView.activeGroup===this.groupView;this.activeLabel={editor:e,pinned:i},this.breadcrumbsControl&&(o?(this.breadcrumbsControl.update(),this.breadcrumbsControl.domNode.classList.toggle("preview",!i)):this.breadcrumbsControl.hide());const[n,s]=Ho(this.titleContainer,this.editorLabel);if(!e)n.classList.remove("dirty"),s.clear(),this.clearEditorActionsToolbar();else{this.updateEditorDirty(e);const{labelFormat:l}=this.groupsView.partOptions;let h;this.breadcrumbsControl&&!this.breadcrumbsControl.isHidden()||l==="default"&&!o?h="":h=e.getDescription(this.getVerbosity(l))||"",s.setResource({resource:Ie.getOriginalUri(e,{supportSideBySide:Ce.BOTH}),name:e.getName(),description:h},{title:this.getHoverTitle(e),italic:!i,extraClasses:["single-tab","title-label"].concat(e.getLabelExtraClasses()),fileDecorations:{colors:!!((r=t.decorations)!=null&&r.colors),badges:!!((a=t.decorations)!=null&&a.badges)},icon:e.getIcon(),hideIcon:t.showIcons===!1}),o?n.style.color=this.getColor(y_)||"":n.style.color=this.getColor(C_)||"",this.updateEditorActionsToolbar()}}getVerbosity(e){switch(e){case"short":return 0;case"long":return 2;default:return 1}}prepareEditorActions(e){return this.groupsView.activeGroup===this.groupView?e:{primary:this.groupsView.partOptions.alwaysShowEditorActions?e.primary:e.primary.filter(i=>i.id===Cn||i.id===du),secondary:e.secondary}}getHeight(){return this.tabHeight}layout(e){var t;return(t=this.breadcrumbsControl)==null||t.layout(void 0),new he(e.container.width,this.getHeight())}}let kg=class extends R{constructor(e,t,i,o,n,s){super(),this.parent=e,this.groupsView=i,this.groupView=o,this.model=n,this.instantiationService=s;const r=this._register(new zS(this.model)),a=this._register(new US(this.model));this.stickyEditorTabsControl=this._register(this.instantiationService.createInstance(rc,this.parent,t,this.groupsView,this.groupView,r)),this.unstickyEditorTabsControl=this._register(this.instantiationService.createInstance(rc,this.parent,t,this.groupsView,this.groupView,a)),this.handleTabBarsStateChange()}handleTabBarsStateChange(){this.activeControl=this.model.activeEditor?this.getEditorTabsController(this.model.activeEditor):void 0,this.handleTabBarsLayoutChange()}handleTabBarsLayoutChange(){if(this.groupView.count===0)return;const e=this.parent.classList.contains("two-tab-bars"),t=this.groupView.count!==this.groupView.stickyCount&&this.groupView.stickyCount>0;this.parent.classList.toggle("two-tab-bars",t),e!==t&&this.groupView.relayout()}didActiveControlChange(){return this.activeControl!==(this.model.activeEditor?this.getEditorTabsController(this.model.activeEditor):void 0)}getEditorTabsController(e){return this.model.isSticky(e)?this.stickyEditorTabsControl:this.unstickyEditorTabsControl}openEditor(e,t){const i=this.didActiveControlChange(),n=this.getEditorTabsController(e).openEditor(e,t)||i;return n&&this.handleOpenedEditors(),n}openEditors(e){const t=e.filter(a=>this.model.isSticky(a)),i=e.filter(a=>!this.model.isSticky(a)),o=this.didActiveControlChange(),n=this.stickyEditorTabsControl.openEditors(t),s=this.unstickyEditorTabsControl.openEditors(i),r=n||s||o;return r&&this.handleOpenedEditors(),r}handleOpenedEditors(){this.handleTabBarsStateChange()}beforeCloseEditor(e){this.getEditorTabsController(e).beforeCloseEditor(e)}closeEditor(e){this.stickyEditorTabsControl.closeEditor(e),this.unstickyEditorTabsControl.closeEditor(e),this.handleClosedEditors()}closeEditors(e){const t=e.filter(o=>this.model.isSticky(o)),i=e.filter(o=>!this.model.isSticky(o));this.stickyEditorTabsControl.closeEditors(t),this.unstickyEditorTabsControl.closeEditors(i),this.handleClosedEditors()}handleClosedEditors(){this.handleTabBarsStateChange()}moveEditor(e,t,i,o){o?(this.model.isSticky(e)?(this.stickyEditorTabsControl.openEditor(e),this.unstickyEditorTabsControl.closeEditor(e)):(this.stickyEditorTabsControl.closeEditor(e),this.unstickyEditorTabsControl.openEditor(e)),this.handleTabBarsStateChange()):this.model.isSticky(e)?this.stickyEditorTabsControl.moveEditor(e,t,i,o):this.unstickyEditorTabsControl.moveEditor(e,t-this.model.stickyCount,i-this.model.stickyCount,o)}pinEditor(e){this.getEditorTabsController(e).pinEditor(e)}stickEditor(e){this.unstickyEditorTabsControl.closeEditor(e),this.stickyEditorTabsControl.openEditor(e),this.handleTabBarsStateChange()}unstickEditor(e){this.stickyEditorTabsControl.closeEditor(e),this.unstickyEditorTabsControl.openEditor(e),this.handleTabBarsStateChange()}setActive(e){this.stickyEditorTabsControl.setActive(e),this.unstickyEditorTabsControl.setActive(e)}updateEditorSelections(){this.stickyEditorTabsControl.updateEditorSelections(),this.unstickyEditorTabsControl.updateEditorSelections()}updateEditorLabel(e){this.getEditorTabsController(e).updateEditorLabel(e)}updateEditorDirty(e){this.getEditorTabsController(e).updateEditorDirty(e)}updateOptions(e,t){this.stickyEditorTabsControl.updateOptions(e,t),this.unstickyEditorTabsControl.updateOptions(e,t)}layout(e){const t=this.stickyEditorTabsControl.layout(e),i={container:e.container,available:new he(e.available.width,e.available.height-t.height)},o=this.unstickyEditorTabsControl.layout(i);return new he(e.container.width,t.height+o.height)}getHeight(){return this.stickyEditorTabsControl.getHeight()+this.unstickyEditorTabsControl.getHeight()}dispose(){this.parent.classList.toggle("two-tab-bars",!1),super.dispose()}};kg=x([u(5,O)],kg);class b0 extends oc{constructor(){super(...arguments),this.activeEditor=null}prepareEditorActions(e){return{primary:[],secondary:[]}}openEditor(e){return this.handleOpenedEditors()}openEditors(e){return this.handleOpenedEditors()}handleOpenedEditors(){const e=this.activeEditorChanged();return this.activeEditor=this.tabsModel.activeEditor,e}activeEditorChanged(){return!!(!this.activeEditor&&this.tabsModel.activeEditor||this.activeEditor&&!this.tabsModel.activeEditor||!this.activeEditor||!this.tabsModel.isActive(this.activeEditor))}beforeCloseEditor(e){}closeEditor(e){this.handleClosedEditors()}closeEditors(e){this.handleClosedEditors()}handleClosedEditors(){this.activeEditor=this.tabsModel.activeEditor}moveEditor(e,t,i){}pinEditor(e){}stickEditor(e){}unstickEditor(e){}setActive(e){}updateEditorSelections(){}updateEditorLabel(e){}updateEditorDirty(e){}getHeight(){return 0}layout(e){return new he(e.container.width,this.getHeight())}}let _g=class extends kc{get breadcrumbsControl(){var e;return(e=this.breadcrumbsControlFactory)==null?void 0:e.control}constructor(e,t,i,o,n,s,r){super(r),this.parent=e,this.editorPartsView=t,this.groupsView=i,this.groupView=o,this.model=n,this.instantiationService=s,this.editorTabsControlDisposable=this._register(new P),this.breadcrumbsControlDisposables=this._register(new P),this.editorTabsControl=this.createEditorTabsControl(),this.breadcrumbsControlFactory=this.createBreadcrumbsControl()}createEditorTabsControl(){let e;switch(this.groupsView.partOptions.showTabs){case"none":e=b0;break;case"single":e=f0;break;case"multiple":default:e=this.groupsView.partOptions.pinnedTabsOnSeparateRow?kg:rc;break}const t=this.instantiationService.createInstance(e,this.parent,this.editorPartsView,this.groupsView,this.groupView,this.model);return this.editorTabsControlDisposable.add(t)}createBreadcrumbsControl(){if(this.groupsView.partOptions.showTabs==="single")return;const e=document.createElement("div");e.classList.add("breadcrumbs-below-tabs"),this.parent.appendChild(e);const t=this.breadcrumbsControlDisposables.add(this.instantiationService.createInstance(ll,e,this.groupView,{showFileIcons:!0,showSymbolIcons:!0,showDecorationColors:!1,showPlaceholder:!0}));return this.breadcrumbsControlDisposables.add(t.onDidEnablementChange(()=>this.groupView.relayout())),this.breadcrumbsControlDisposables.add(t.onDidVisibilityChange(()=>this.groupView.relayout())),t}openEditor(e,t){const i=this.editorTabsControl.openEditor(e,t);this.handleOpenedEditors(i)}openEditors(e){const t=this.editorTabsControl.openEditors(e);this.handleOpenedEditors(t)}handleOpenedEditors(e){var t,i;e?(t=this.breadcrumbsControl)==null||t.update():(i=this.breadcrumbsControl)==null||i.revealLast()}beforeCloseEditor(e){return this.editorTabsControl.beforeCloseEditor(e)}closeEditor(e){this.editorTabsControl.closeEditor(e),this.handleClosedEditors()}closeEditors(e){this.editorTabsControl.closeEditors(e),this.handleClosedEditors()}handleClosedEditors(){var e;this.groupView.activeEditor||(e=this.breadcrumbsControl)==null||e.update()}moveEditor(e,t,i,o){return this.editorTabsControl.moveEditor(e,t,i,o)}pinEditor(e){return this.editorTabsControl.pinEditor(e)}stickEditor(e){return this.editorTabsControl.stickEditor(e)}unstickEditor(e){return this.editorTabsControl.unstickEditor(e)}setActive(e){return this.editorTabsControl.setActive(e)}updateEditorSelections(){this.editorTabsControl.updateEditorSelections()}updateEditorLabel(e){return this.editorTabsControl.updateEditorLabel(e)}updateEditorDirty(e){return this.editorTabsControl.updateEditorDirty(e)}updateOptions(e,t){e.showTabs!==t.showTabs||t.showTabs!=="single"&&e.pinnedTabsOnSeparateRow!==t.pinnedTabsOnSeparateRow?(this.editorTabsControlDisposable.clear(),this.breadcrumbsControlDisposables.clear(),Zt(this.parent),this.editorTabsControl=this.createEditorTabsControl(),this.breadcrumbsControlFactory=this.createBreadcrumbsControl()):this.editorTabsControl.updateOptions(e,t)}layout(e){var o;const t=this.editorTabsControl.layout(e);let i;return((o=this.breadcrumbsControl)==null?void 0:o.isHidden())===!1&&(i=new he(e.container.width,De.HEIGHT),this.breadcrumbsControl.layout(i)),new he(e.container.width,t.height+(i?i.height:0))}getHeight(){var i;const e=this.editorTabsControl.getHeight(),t=((i=this.breadcrumbsControl)==null?void 0:i.isHidden())===!1?De.HEIGHT:0;return{total:e+t,offset:e}}};_g=x([u(5,O),u(6,te)],_g);var Ro;let $s=Ro=class extends kc{static createNew(e,t,i,o,n,s){return n.createInstance(Ro,null,e,t,i,o,s)}static createFromSerialized(e,t,i,o,n,s,r){return s.createInstance(Ro,e,t,i,o,n,r)}static createCopy(e,t,i,o,n,s,r){return s.createInstance(Ro,e,t,i,o,n,r)}constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f,v,S,E,D,V,M,J,q){super(l),this.editorPartsView=t,this.groupsView=i,this.groupsLabel=o,this._index=n,this.instantiationService=r,this.contextKeyService=a,this.telemetryService=h,this.keybindingService=p,this.menuService=g,this.contextMenuService=m,this.fileDialogService=f,this.editorService=v,this.filesConfigurationService=S,this.uriIdentityService=E,this.logService=D,this.editorResolverService=V,this.hostService=M,this.dialogService=J,this.fileService=q,this._onDidFocus=this._register(new I),this.onDidFocus=this._onDidFocus.event,this._onWillDispose=this._register(new I),this.onWillDispose=this._onWillDispose.event,this._onDidModelChange=this._register(new I),this.onDidModelChange=this._onDidModelChange.event,this._onDidActiveEditorChange=this._register(new I),this.onDidActiveEditorChange=this._onDidActiveEditorChange.event,this._onDidOpenEditorFail=this._register(new I),this.onDidOpenEditorFail=this._onDidOpenEditorFail.event,this._onWillCloseEditor=this._register(new I),this.onWillCloseEditor=this._onWillCloseEditor.event,this._onDidCloseEditor=this._register(new I),this.onDidCloseEditor=this._onDidCloseEditor.event,this._onWillMoveEditor=this._register(new I),this.onWillMoveEditor=this._onWillMoveEditor.event,this._onWillOpenEditor=this._register(new I),this.onWillOpenEditor=this._onWillOpenEditor.event,this.disposedEditorsWorker=this._register(new Ty(G=>this.handleDisposedEditors(G),0)),this.mapEditorToPendingConfirmation=new Map,this.containerToolBarMenuDisposable=this._register(new Se),this.whenRestoredPromise=new Br,this.whenRestored=this.whenRestoredPromise.p,this._disposed=!1,this.element=document.createElement("div"),this._onDidChange=this._register(new bo),this.onDidChange=this._onDidChange.event,e instanceof Ro?this.model=this._register(e.model.clone()):Vy(e)?this.model=this._register(r.createInstance(Pb,e)):this.model=this._register(r.createInstance(Pb,void 0)),this.scopedContextKeyService=this._register(this.contextKeyService.createScoped(this.element)),this.element.classList.add(...hi(["editor-group-container",this.model.isLocked?"locked":void 0])),this.registerContainerListeners(),this.createContainerToolbar(),this.createContainerContextMenu(),this._register(this.instantiationService.createInstance(lg,this.element)),this.progressBar=this._register(new wv(this.element,vv)),this.progressBar.hide(),this.scopedInstantiationService=this._register(this.instantiationService.createChild(new $r([K,this.scopedContextKeyService],[vf,this._register(new S_(this.progressBar,this))]))),this.resourceContext=this._register(this.scopedInstantiationService.createInstance(ry)),this.handleGroupContextKeys(),this.titleContainer=document.createElement("div"),this.titleContainer.classList.add("title"),this.element.appendChild(this.titleContainer),this.titleControl=this._register(this.scopedInstantiationService.createInstance(_g,this.titleContainer,this.editorPartsView,this.groupsView,this,this.model)),this.editorContainer=document.createElement("div"),this.editorContainer.classList.add("editor-container"),this.element.appendChild(this.editorContainer),this.editorPane=this._register(this.scopedInstantiationService.createInstance(dg,this.element,this.editorContainer,this)),this._onDidChange.input=this.editorPane.onDidChangeSizeConstraints,this.doTrackFocus(),this.updateTitleContainer(),this.updateContainer(),this.updateStyles(),(this.restoreEditors(e,s)??Promise.resolve()).finally(()=>{this.whenRestoredPromise.complete()}),this.registerListeners()}handleGroupContextKeys(){const e=this.editorPartsView.bind(Vc,this),t=this.editorPartsView.bind(Df,this),i=this.editorPartsView.bind(ay,this),o=this.editorPartsView.bind(ru,this),n=this.editorPartsView.bind(vn,this),s=this.editorPartsView.bind(My,this),r=this.editorPartsView.bind(yn,this),a=Mc.bindTo(this.scopedContextKeyService),l=E_.bindTo(this.scopedContextKeyService),h=k_.bindTo(this.scopedContextKeyService),p=this.editorPartsView.bind(yy,this),g=this.editorPartsView.bind(__,this),m=this.editorPartsView.bind(x_,this),f=this.editorPartsView.bind(I_,this),v=this.editorPartsView.bind(Ly,this),S=this.editorPartsView.bind(D_,this),E=this.editorPartsView.bind(mn,this),D=this.editorPartsView.bind(Jr,this),V=this.editorPartsView.bind(au,this),M=this.editorPartsView.bind(xs,this),J=this._register(new Se),q=()=>{J.clear(),this.scopedContextKeyService.bufferChangeEvents(()=>{const G=this.activeEditor,se=this.activeEditorPane;if(this.resourceContext.set(Ie.getOriginalUri(G,{supportSideBySide:Ce.PRIMARY})),py(D,G,this.editorResolverService),G?(V.set(G.hasCapability(32)),M.set(G.typeId===ri.ID),e.set(G.isDirty()&&!G.isSaving()),J.value=G.onDidChangeDirty(()=>{e.set(G.isDirty()&&!G.isSaving())})):(V.set(!1),M.set(!1),e.set(!1)),se){p.set(se.getId()),m.set(!se.input.hasCapability(4)),g.set(!!se.input.isReadonly());const Le=Ie.getOriginalUri(se.input,{supportSideBySide:Ce.PRIMARY}),Q=Ie.getOriginalUri(se.input,{supportSideBySide:Ce.SECONDARY});v.set(se.input instanceof Is&&!se.input.original.isReadonly()&&!!Le&&(this.fileService.hasProvider(Le)||Le.scheme===pe.untitled)&&!!Q&&(this.fileService.hasProvider(Q)||Q.scheme===pe.untitled)),f.set(!!Le&&this.fileService.hasProvider(Le)&&!this.fileService.hasCapability(Le,2048));const $e=(se==null?void 0:se.getId())===R_;E.set($e),S.set($e)}else p.reset(),m.reset(),g.reset(),v.reset(),f.reset()})},W=G=>{switch(G.kind){case 3:r.set(this.isLocked);break;case 8:i.set(this.model.isFirst(this.model.activeEditor)),o.set(this.model.isLast(this.model.activeEditor)),t.set(this.model.activeEditor?this.model.isPinned(this.model.activeEditor):!1),n.set(this.model.activeEditor?this.model.isSticky(this.model.activeEditor):!1);break;case 6:t.set(this.model.activeEditor?this.model.isPinned(this.model.activeEditor):!1),n.set(this.model.activeEditor?this.model.isSticky(this.model.activeEditor):!1);case 5:case 7:i.set(this.model.isFirst(this.model.activeEditor)),o.set(this.model.isLast(this.model.activeEditor));break;case 11:G.editor&&G.editor===this.model.activeEditor&&t.set(this.model.isPinned(this.model.activeEditor));break;case 13:G.editor&&G.editor===this.model.activeEditor&&n.set(this.model.isSticky(this.model.activeEditor));break;case 4:a.set(this.model.selectedEditors.length>1),l.set(this.model.selectedEditors.length===2),h.set(this.model.selectedEditors.every(se=>se.resource&&(this.fileService.hasProvider(se.resource)||se.resource.scheme===pe.untitled)));break}s.set(this.count)};this._register(this.onDidModelChange(G=>W(G))),this._register(this.onDidActiveEditorChange(()=>q())),q(),W({kind:8}),W({kind:3})}registerContainerListeners(){this._register(L(this.element,B.DBLCLICK,e=>{this.isEmpty&&(re.stop(e),this.editorService.openEditor({resource:void 0,options:{pinned:!0,override:pt.id}},this.id))})),this._register(L(this.element,B.AUXCLICK,e=>{this.isEmpty&&e.button===1&&(re.stop(e,!0),this.groupsView.removeGroup(this))}))}createContainerToolbar(){const e=document.createElement("div");e.classList.add("editor-group-container-toolbar"),this.element.appendChild(e);const t=this._register(new Vo(e,{ariaLabel:d(10228,"Empty editor group actions"),highlightToggledItems:!0})),i=this._register(this.menuService.createMenu(b.EmptyEditorGroup,this.scopedContextKeyService)),o=()=>{const n={primary:[],secondary:[]};this.containerToolBarMenuDisposable.value=ne(()=>t.clear()),hn(i,{arg:{groupId:this.id},shouldForwardArgs:!0},n,"navigation");for(const s of[...n.primary,...n.secondary]){const r=this.keybindingService.lookupKeybinding(s.id);t.push(s,{icon:!0,label:!1,keybinding:r==null?void 0:r.getLabel()})}};o(),this._register(i.onDidChange(o))}createContainerContextMenu(){this._register(L(this.element,B.CONTEXT_MENU,e=>this.onShowContainerContextMenu(e))),this._register(L(this.element,St.Contextmenu,()=>this.onShowContainerContextMenu()))}onShowContainerContextMenu(e){if(!this.isEmpty)return;let t=this.element;e&&(t=new ai(fe(this.element),e)),this.contextMenuService.showContextMenu({menuId:b.EmptyEditorGroupContext,contextKeyService:this.contextKeyService,getAnchor:()=>t,onHide:()=>{this.focus()}})}doTrackFocus(){const e=this._register(ms(this.element));this._register(e.onDidFocus(()=>{this.isEmpty&&this._onDidFocus.fire()}));const t=i=>{let o;if(Pn(i)){if(i.button!==0||be&&i.ctrlKey)return;o=i.target}else o=i.initialTarget;Id(o,"monaco-action-bar",this.titleContainer)||Id(o,"monaco-breadcrumb-item",this.titleContainer)||setTimeout(()=>{this.focus()})};this._register(L(this.titleContainer,B.MOUSE_DOWN,i=>t(i))),this._register(L(this.titleContainer,St.Tap,i=>t(i))),this._register(this.editorPane.onDidFocus(()=>{this._onDidFocus.fire()}))}updateContainer(){this.isEmpty?(this.element.classList.add("empty"),this.element.tabIndex=0,this.element.setAttribute("aria-label",d(10229,"{0} (empty)",this.ariaLabel))):(this.element.classList.remove("empty"),this.element.removeAttribute("tabIndex"),this.element.removeAttribute("aria-label")),this.updateStyles()}updateTitleContainer(){this.titleContainer.classList.toggle("tabs",this.groupsView.partOptions.showTabs==="multiple"),this.titleContainer.classList.toggle("show-file-icons",this.groupsView.partOptions.showIcons)}restoreEditors(e,t){if(this.count===0)return;let i;e instanceof Ro?i=wp(e):i=Object.create(null);const o=this.model.activeEditor;if(!o)return;i.pinned=this.model.isPinned(o),i.sticky=this.model.isSticky(o),i.preserveFocus=!0;const n={preserveWindowOrder:!0,skipTitleUpdate:!0},s=un(),r=this.doShowEditor(o,{active:!0,isNew:!1},i,n).then(()=>{this.groupsView.activeGroup===this&&s&&Of(s)&&!(t!=null&&t.preserveFocus)&&this.focus()});return this.titleControl.openEditors(this.editors),r}registerListeners(){this._register(this.model.onDidModelChange(e=>this.onDidGroupModelChange(e))),this._register(this.groupsView.onDidChangeEditorPartOptions(e=>this.onDidChangeEditorPartOptions(e))),this._register(this.groupsView.onDidVisibilityChange(e=>this.onDidVisibilityChange(e))),this._register(this.onDidFocus(()=>this.onDidGainFocus()))}onDidGroupModelChange(e){switch(this._onDidModelChange.fire(e),e.kind){case 3:this.element.classList.toggle("locked",this.isLocked);break;case 4:this.onDidChangeEditorSelection();break}if(e.editor)switch(e.kind){case 5:T_(e)&&this.onDidOpenEditor(e.editor,e.editorIndex);break;case 6:A_(e)&&this.handleOnDidCloseEditor(e.editor,e.editorIndex,e.context,e.sticky);break;case 15:this.onWillDisposeEditor(e.editor);break;case 14:this.onDidChangeEditorDirty(e.editor);break;case 12:this.onDidChangeEditorTransient(e.editor);break;case 9:this.onDidChangeEditorLabel(e.editor);break}}onDidOpenEditor(e,t){this.telemetryService.publicLog("editorOpened",this.toEditorTelemetryDescriptor(e)),this.updateContainer()}handleOnDidCloseEditor(e,t,i,o){this._onWillCloseEditor.fire({groupId:this.id,editor:e,context:i,index:t,sticky:o});const n=[e];e instanceof ri&&n.push(e.primary,e.secondary);for(const s of n)this.canDispose(s)&&s.dispose();this.telemetryService.publicLog("editorClosed",this.toEditorTelemetryDescriptor(e)),this.updateContainer(),this._onDidCloseEditor.fire({groupId:this.id,editor:e,context:i,index:t,sticky:o})}canDispose(e){for(const t of this.editorPartsView.groups)if(t instanceof Ro&&t.model.contains(e,{strictEquals:!0,supportSideBySide:Ce.ANY}))return!1;return!0}toResourceTelemetryDescriptor(e){if(!e)return;const t=e?e.scheme===pe.file?e.fsPath:e.path:void 0;if(!t)return;let i=yi(e);const o=i.indexOf("?");return i=o!==-1?i.substr(0,o):i,{mimeType:new Py(V_(e).join(", ")),scheme:e.scheme,ext:i,path:lu(t)}}toEditorTelemetryDescriptor(e){const t=e.getTelemetryDescriptor(),i=Ie.getOriginalUri(e,{supportSideBySide:Ce.BOTH});return z.isUri(i)?(t.resource=this.toResourceTelemetryDescriptor(i),t):(i&&(i.primary&&(t.resource=this.toResourceTelemetryDescriptor(i.primary)),i.secondary&&(t.resourceSecondary=this.toResourceTelemetryDescriptor(i.secondary))),t)}onWillDisposeEditor(e){this.disposedEditorsWorker.work(e)}handleDisposedEditors(e){let t;const i=[];for(const o of e){const n=this.model.findEditor(o);if(!n)continue;const s=n[0];s.isDisposed()&&(this.model.isActive(s)?t=s:i.push(s))}for(const o of i)this.doCloseEditor(o,!0);t&&this.doCloseEditor(t,!0)}onDidChangeEditorPartOptions(e){this.updateTitleContainer(),this.titleControl.updateOptions(e.oldPartOptions,e.newPartOptions),(e.oldPartOptions.showTabs!==e.newPartOptions.showTabs||e.oldPartOptions.tabHeight!==e.newPartOptions.tabHeight||e.oldPartOptions.showTabs==="multiple"&&e.oldPartOptions.pinnedTabsOnSeparateRow!==e.newPartOptions.pinnedTabsOnSeparateRow)&&(this.relayout(),this.model.activeEditor&&this.titleControl.openEditors(this.model.getEditors(1))),this.updateStyles(),e.oldPartOptions.enablePreview&&!e.newPartOptions.enablePreview&&this.model.previewEditor&&this.pinEditor(this.model.previewEditor)}onDidChangeEditorDirty(e){this.pinEditor(e),this.titleControl.updateEditorDirty(e)}onDidChangeEditorTransient(e){!this.model.isTransient(e)&&!this.groupsView.partOptions.enablePreview&&this.pinEditor(e)}onDidChangeEditorLabel(e){this.titleControl.updateEditorLabel(e)}onDidChangeEditorSelection(){this.titleControl.updateEditorSelections()}onDidVisibilityChange(e){this.editorPane.setVisible(e)}onDidGainFocus(){this.activeEditor&&this.model.setTransient(this.activeEditor,!1)}get index(){return this._index}get label(){return this.groupsLabel?d(10230,"{0}: Group {1}",this.groupsLabel,this._index+1):d(10231,"Group {0}",this._index+1)}get ariaLabel(){return this.groupsLabel?d(10232,"{0}: Editor Group {1}",this.groupsLabel,this._index+1):d(10233,"Editor Group {0}",this._index+1)}get disposed(){return this._disposed}get isEmpty(){return this.count===0}get titleHeight(){return this.titleControl.getHeight()}notifyIndexChanged(e){this._index!==e&&(this._index=e,this.model.setIndex(e))}notifyLabelChanged(e){this.groupsLabel!==e&&(this.groupsLabel=e,this.model.setLabel(e))}setActive(e){this.active=e,!e&&this.activeEditor&&this.selectedEditors.length>1&&this.setSelection(this.activeEditor,[]),this.element.classList.toggle("active",e),this.element.classList.toggle("inactive",!e),this.titleControl.setActive(e),this.updateStyles(),this.model.setActive(void 0)}get id(){return this.model.id}get windowId(){return this.groupsView.windowId}get editors(){return this.model.getEditors(1)}get count(){return this.model.count}get stickyCount(){return this.model.stickyCount}get activeEditorPane(){return this.editorPane?this.editorPane.activeEditorPane??void 0:void 0}get activeEditor(){return this.model.activeEditor}get selectedEditors(){return this.model.selectedEditors}get previewEditor(){return this.model.previewEditor}isPinned(e){return this.model.isPinned(e)}isSticky(e){return this.model.isSticky(e)}isSelected(e){return this.model.isSelected(e)}isTransient(e){return this.model.isTransient(e)}isActive(e){return this.model.isActive(e)}async setSelection(e,t){this.isActive(e)?this.model.setSelection(e,t):await this.openEditor(e,{activation:Fo.ACTIVATE},{inactiveSelection:t})}contains(e,t){return this.model.contains(e,t)}getEditors(e,t){return this.model.getEditors(e,t)}findEditors(e,t){const i=this.uriIdentityService.asCanonicalUri(e);return this.getEditors(1).filter(o=>{if(o.resource&&ot(o.resource,i))return!0;if((t==null?void 0:t.supportSideBySide)===Ce.PRIMARY||(t==null?void 0:t.supportSideBySide)===Ce.ANY){const n=Ie.getCanonicalUri(o,{supportSideBySide:Ce.PRIMARY});if(n&&ot(n,i))return!0}if((t==null?void 0:t.supportSideBySide)===Ce.SECONDARY||(t==null?void 0:t.supportSideBySide)===Ce.ANY){const n=Ie.getCanonicalUri(o,{supportSideBySide:Ce.SECONDARY});if(n&&ot(n,i))return!0}return!1})}getEditorByIndex(e){return this.model.getEditorByIndex(e)}getIndexOfEditor(e){return this.model.indexOf(e)}isFirst(e){return this.model.isFirst(e)}isLast(e){return this.model.isLast(e)}focus(){this.activeEditorPane?this.activeEditorPane.focus():this.element.focus(),this._onDidFocus.fire()}pinEditor(e=this.activeEditor||void 0){if(e&&!this.model.isPinned(e)){const t=this.model.pin(e);t&&this.titleControl.pinEditor(t)}}stickEditor(e=this.activeEditor||void 0){this.doStickEditor(e,!0)}unstickEditor(e=this.activeEditor||void 0){this.doStickEditor(e,!1)}doStickEditor(e,t){if(e&&this.model.isSticky(e)!==t){const i=this.getIndexOfEditor(e),o=t?this.model.stick(e):this.model.unstick(e);if(!o)return;const n=this.getIndexOfEditor(o);n!==i&&this.titleControl.moveEditor(o,i,n,!0),t?this.titleControl.stickEditor(o):this.titleControl.unstickEditor(o)}}async openEditor(e,t,i){return this.doOpenEditor(e,t,{...i,supportSideBySide:Ce.BOTH})}async doOpenEditor(e,t,i){var p;if(!e||e.isDisposed())return;this._onWillOpenEditor.fire({editor:e,groupId:this.id});const o=(t==null?void 0:t.sticky)||!this.groupsView.partOptions.enablePreview&&!(t!=null&&t.transient)||e.isDirty()||((t==null?void 0:t.pinned)??typeof(t==null?void 0:t.index)=="number")||typeof(t==null?void 0:t.index)=="number"&&this.model.isSticky(t.index)||e.hasCapability(512),n={index:t?t.index:void 0,pinned:o,sticky:(t==null?void 0:t.sticky)||typeof(t==null?void 0:t.index)=="number"&&this.model.isSticky(t.index),transient:!!(t!=null&&t.transient),inactiveSelection:i==null?void 0:i.inactiveSelection,active:this.count===0||!t||!t.inactive,supportSideBySide:i==null?void 0:i.supportSideBySide};!n.active&&!n.pinned&&this.model.activeEditor&&!this.model.isPinned(this.model.activeEditor)&&(n.active=!0);let s=!1,r=!1;if((t==null?void 0:t.activation)===Fo.ACTIVATE?s=!0:(t==null?void 0:t.activation)===Fo.RESTORE?r=!0:(t==null?void 0:t.activation)===Fo.PRESERVE?(s=!1,r=!1):n.active&&(s=!t||!t.preserveFocus,r=!s),typeof n.index=="number"){const g=this.model.indexOf(e);g!==-1&&g!==n.index&&this.doMoveEditorInsideGroup(e,n)}const{editor:a,isNew:l}=this.model.openEditor(e,n);l&&this.count===1&&this.editorPartsView.groups.length>1&&a.editorId&&(p=this.groupsView.partOptions.autoLockGroups)!=null&&p.has(a.editorId)&&this.lock(!0);const h=this.doShowEditor(a,{active:!!n.active,isNew:l},t,i);return s?this.groupsView.activateGroup(this):r&&this.groupsView.restoreGroup(this),h}doShowEditor(e,t,i,o){let n;return t.active?n=(async()=>{const{pane:s,changed:r,cancelled:a,error:l}=await this.editorPane.openEditor(e,i,o,{newInGroup:t.isNew});if(!a)return r&&this._onDidActiveEditorChange.fire({editor:e}),l&&this._onDidOpenEditorFail.fire(e),!s&&this.activeEditor===e&&this.doCloseEditor(e,i==null?void 0:i.preserveFocus,{fromError:!0}),s})():n=Promise.resolve(void 0),o!=null&&o.skipTitleUpdate||this.titleControl.openEditor(e,o),n}async openEditors(e){const t=hi(e).filter(({editor:r})=>!r.isDisposed()),i=t.at(0);if(!i)return;const o={supportSideBySide:Ce.BOTH};await this.doOpenEditor(i.editor,i.options,o);const n=t.slice(1),s=this.getIndexOfEditor(i.editor)+1;return await Nf.settled(n.map(({editor:r,options:a},l)=>this.doOpenEditor(r,{...a,inactive:!0,pinned:!0,index:s+l},{...o,skipTitleUpdate:!0}))),this.titleControl.openEditors(n.map(({editor:r})=>r)),this.editorPane.activeEditorPane??void 0}moveEditors(e,t){const i={skipTitleUpdate:this!==t};let o=!1;const n=new Set;for(const{editor:s,options:r}of e)this.moveEditor(s,t,r,i)?n.add(s):o=!0;return i.skipTitleUpdate&&(t.titleControl.openEditors(Array.from(n)),this.titleControl.closeEditors(Array.from(n))),!o}moveEditor(e,t,i,o){return this===t?(this.doMoveEditorInsideGroup(e,i),!0):this.doMoveOrCopyEditorAcrossGroups(e,t,i,{...o,keepCopy:!1})}doMoveEditorInsideGroup(e,t){const i=t?t.index:void 0;if(typeof i!="number")return;const o=this.model.indexOf(e),n=this.model.getEditorByIndex(o);if(n){if(o!==i){const s=this.model.stickyCount;this.model.moveEditor(n,i),this.model.pin(n),this.titleControl.moveEditor(n,o,i,s!==this.model.stickyCount),this.titleControl.pinEditor(n)}t!=null&&t.sticky&&this.stickEditor(n)}}doMoveOrCopyEditorAcrossGroups(e,t,i,o){const n=o==null?void 0:o.keepCopy;if(!n||e.hasCapability(8)){const r=e.canMove(this.id,t.id);if(typeof r=="string")return this.dialogService.error(r,d(10234,"Try saving or reverting the editor first and then try again.")),!1}const s=wp(this,e,{...i,pinned:!0,sticky:(i==null?void 0:i.sticky)??(!n&&this.model.isSticky(e))});return n||this._onWillMoveEditor.fire({groupId:this.id,editor:e,target:t.id}),t.doOpenEditor(n?e.copy():e,s,o),n||this.doCloseEditor(e,!0,{...o,context:Mn.MOVE}),!0}copyEditors(e,t){const i={skipTitleUpdate:this!==t};for(const{editor:o,options:n}of e)this.copyEditor(o,t,n,i);if(i.skipTitleUpdate){const o=e.map(({editor:n})=>n);t.titleControl.openEditors(o)}}copyEditor(e,t,i,o){this===t?this.doMoveEditorInsideGroup(e,i):this.doMoveOrCopyEditorAcrossGroups(e,t,i,{...o,keepCopy:!0})}async closeEditor(e=this.activeEditor||void 0,t){return this.doCloseEditorWithConfirmationHandling(e,t)}async doCloseEditorWithConfirmationHandling(e=this.activeEditor||void 0,t,i){return!e||await this.handleCloseConfirmation([e])?!1:(this.doCloseEditor(e,t==null?void 0:t.preserveFocus,i),!0)}doCloseEditor(e,t=this.groupsView.activeGroup!==this,i){i!=null&&i.skipTitleUpdate||this.titleControl.beforeCloseEditor(e),this.model.isActive(e)?this.doCloseActiveEditor(t,i):this.doCloseInactiveEditor(e,i),i!=null&&i.skipTitleUpdate||this.titleControl.closeEditor(e)}doCloseActiveEditor(e=this.groupsView.activeGroup!==this,t){const i=this.activeEditor,o=!e&&this.shouldRestoreFocus(this.element),n=this.groupsView.partOptions.closeEmptyGroups;if(n&&this.active&&this.count===1){const a=this.groupsView.getGroups(1)[1];a&&(o?a.focus():this.groupsView.activateGroup(a,!0))}i&&this.model.closeEditor(i,t==null?void 0:t.context);const s=this.model.activeEditor;if(s){let r;e&&this.groupsView.activeGroup!==this&&(r=Fo.PRESERVE);const a={preserveFocus:e,activation:r,ignoreError:t==null?void 0:t.fromError},l={preserveWindowOrder:!0};this.doOpenEditor(s,a,l)}else i&&this.editorPane.closeEditor(i),o&&!n&&this.focus(),this._onDidActiveEditorChange.fire({editor:void 0}),n&&this.groupsView.removeGroup(this,e)}shouldRestoreFocus(e){const t=un();return t===e.ownerDocument.body?!0:Yi(t,e)}doCloseInactiveEditor(e,t){this.model.closeEditor(e,t==null?void 0:t.context)}async handleCloseConfirmation(e){if(!e.length)return!1;const t=e.shift();let i=this.mapEditorToPendingConfirmation.get(t);i||(i=this.doHandleCloseConfirmation(t),this.mapEditorToPendingConfirmation.set(t,i));let o;try{o=await i}finally{this.mapEditorToPendingConfirmation.delete(t)}return o||this.handleCloseConfirmation(e)}async doHandleCloseConfirmation(e,t){var s;if(!this.shouldConfirmClose(e)||e instanceof ri&&this.model.contains(e.primary)||this.editorPartsView.groups.some(r=>{if(r===this)return!1;const a=r;return!!(a.contains(e,{supportSideBySide:Ce.BOTH})||e instanceof ri&&a.contains(e.primary))}))return!1;let i=2,o=1,n=!1;if(!e.hasCapability(4)&&!(t!=null&&t.skipAutoSave)&&!e.closeHandler&&(this.filesConfigurationService.getAutoSaveMode(e).mode===3?(n=!0,i=0,o=3):Es&&(Xt||fc)&&this.filesConfigurationService.getAutoSaveMode(e).mode===4&&(n=!0,i=0,o=4)),!n)if((!this.activeEditor||!this.activeEditor.matches(e))&&await this.doOpenEditor(e),await this.hostService.focus(fe(this.element)),typeof((s=e.closeHandler)==null?void 0:s.confirm)=="function")i=await e.closeHandler.confirm([{editor:e,groupId:this.id}]);else{let r;e instanceof ri?r=e.primary.getName():r=e.getName(),i=await this.fileDialogService.showSaveConfirm([r])}if(!e.closeHandler&&!this.shouldConfirmClose(e))return i===2;switch(i){case 0:return!await e.save(this.id,{reason:o})&&n?this.doHandleCloseConfirmation(e,{skipAutoSave:!0}):e.isDirty();case 1:try{return await e.revert(this.id),e.isDirty()}catch(r){return this.logService.error(r),await e.revert(this.id,{soft:!0}),e.isDirty()}case 2:return!0}}shouldConfirmClose(e){return e.closeHandler?e.closeHandler.showConfirm():e.isDirty()&&!e.isSaving()}async closeEditors(e,t){if(this.isEmpty)return!0;const i=this.doGetEditorsToClose(e);return await this.handleCloseConfirmation(i.slice(0))?!1:(this.doCloseEditors(i,t),!0)}doGetEditorsToClose(e){if(Array.isArray(e))return e;const t=e,i=typeof t.direction=="number";let o=this.model.getEditors(i?1:0,t);return t.savedOnly?o=o.filter(n=>!n.isDirty()||n.isSaving()):i&&t.except?o=t.direction===0?o.slice(0,this.model.indexOf(t.except,o)):o.slice(this.model.indexOf(t.except,o)+1):t.except&&(o=o.filter(n=>t.except&&!n.matches(t.except))),o}doCloseEditors(e,t){let i=!1;for(const o of e)this.isActive(o)?i=!0:this.doCloseInactiveEditor(o);i&&this.doCloseActiveEditor(t==null?void 0:t.preserveFocus),e.length&&this.titleControl.closeEditors(e)}async closeAllEditors(e){if(this.isEmpty)return this.groupsView.partOptions.closeEmptyGroups&&this.groupsView.removeGroup(this),!0;let t=this.model.getEditors(0,e);return e!=null&&e.excludeConfirming&&(t=t.filter(o=>!this.shouldConfirmClose(o))),await this.handleCloseConfirmation(t)?!1:(this.doCloseAllEditors(e),!0)}doCloseAllEditors(e){let t=this.model.getEditors(1,e);e!=null&&e.excludeConfirming&&(t=t.filter(o=>!this.shouldConfirmClose(o)));const i=[];for(const o of t)this.isActive(o)||this.doCloseInactiveEditor(o),i.push(o);this.activeEditor&&i.includes(this.activeEditor)&&this.doCloseActiveEditor(),i.length&&this.titleControl.closeEditors(i)}async replaceEditors(e){let t;const i=[];for(let{editor:o,replacement:n,forceReplaceDirty:s,options:r}of e){const a=this.getIndexOfEditor(o);if(a>=0){const l=this.isActive(o);r?r.index=a:r={index:a},r.inactive=!l,r.pinned=r.pinned??!0;const h={editor:o,replacement:n,forceReplaceDirty:s,options:r};l?t=h:i.push(h)}}for(const{editor:o,replacement:n,forceReplaceDirty:s,options:r}of i)if(await this.doOpenEditor(n,r),!o.matches(n)){let a=!1;if(s?(this.doCloseEditor(o,!0,{context:Mn.REPLACE}),a=!0):a=await this.doCloseEditorWithConfirmationHandling(o,{preserveFocus:!0},{context:Mn.REPLACE}),!a)return}if(t){const o=this.doOpenEditor(t.replacement,t.options);t.editor.matches(t.replacement)||(t.forceReplaceDirty?this.doCloseEditor(t.editor,!0,{context:Mn.REPLACE}):await this.doCloseEditorWithConfirmationHandling(t.editor,{preserveFocus:!0},{context:Mn.REPLACE})),await o}}get isLocked(){return this.model.isLocked}lock(e){this.model.lock(e)}createEditorActions(e){const t=[],i=[];let o;const n=this.activeEditorPane;if(n instanceof kf){const s=n.scopedContextKeyService??this.scopedContextKeyService,r=e.add(this.menuService.createMenu(b.EditorTitle,s,{emitEventsForSubmenuChanges:!0,eventDebounceDelay:0}));o=r.onDidChange;const a=(l,h)=>h==="navigation"&&l.actions.length<=1;hn(r,{arg:this.resourceContext.get(),shouldForwardArgs:!0},{primary:t,secondary:i},"navigation",a)}else{const s=e.add(new I);o=s.event,e.add(this.onDidActiveEditorChange(()=>s.fire()))}return{actions:{primary:t,secondary:i},onDidChange:o}}updateStyles(){const e=this.isEmpty;e?this.element.style.backgroundColor=this.getColor(M_)||"":this.element.style.backgroundColor="";const t=this.getColor(L_)||this.getColor(Yt);!e&&t?(this.titleContainer.classList.add("title-border-bottom"),this.titleContainer.style.setProperty("--title-border-bottom-color",t)):(this.titleContainer.classList.remove("title-border-bottom"),this.titleContainer.style.removeProperty("--title-border-bottom-color"));const{showTabs:i}=this.groupsView.partOptions;this.titleContainer.style.backgroundColor=this.getColor(i==="multiple"?Ay:P_)||"",this.editorContainer.style.backgroundColor=this.getColor(Bf)||""}get minimumWidth(){return this.editorPane.minimumWidth}get minimumHeight(){return this.editorPane.minimumHeight}get maximumWidth(){return this.editorPane.maximumWidth}get maximumHeight(){return this.editorPane.maximumHeight}get proportionalLayout(){return this.lastLayout?!(this.lastLayout.width===this.minimumWidth||this.lastLayout.height===this.minimumHeight):!0}layout(e,t,i,o){this.lastLayout={width:e,height:t,top:i,left:o},this.element.classList.toggle("max-height-478px",t<=478);const n=this.titleControl.layout({container:new he(e,t),available:new he(e,t-this.editorPane.minimumHeight)});this.progressBar.getContainer().style.top=`${Math.max(this.titleHeight.offset-2,0)}px`;const s=Math.max(0,t-n.height);this.editorContainer.style.height=`${s}px`,this.editorPane.layout({width:e,height:s,top:i+n.height,left:o})}relayout(){if(this.lastLayout){const{width:e,height:t,top:i,left:o}=this.lastLayout;this.layout(e,t,i,o)}}setBoundarySashes(e){this.editorPane.setBoundarySashes(e)}toJSON(){return this.model.serialize()}dispose(){this._disposed=!0,this._onWillDispose.fire(),super.dispose()}};$s=Ro=x([u(6,O),u(7,K),u(8,te),u(9,Be),u(10,xe),u(11,yt),u(12,Ve),u(13,cu),u(14,U),u(15,Qr),u(16,Tc),u(17,Je),u(18,Mo),u(19,st),u(20,xt),u(21,Oe)],$s);var w0="#monaco-workbench-editor-drop-overlay{height:100%;left:0;position:absolute;width:100%;z-index:10000}#monaco-workbench-editor-drop-overlay>.editor-group-overlay-indicator{align-items:center;display:flex;height:100%;justify-content:center;left:0;opacity:0;pointer-events:none;position:absolute;top:0;width:100%}.monaco-workbench:not(.reduce-motion) #monaco-workbench-editor-drop-overlay>.editor-group-overlay-indicator{transition:opacity .15s ease-out}#monaco-workbench-editor-drop-overlay .editor-group-overlay-drop-into-prompt{line-height:normal;margin:.2em;opacity:0;padding:.6em;text-align:center}.monaco-workbench:not(.reduce-motion) #monaco-workbench-editor-drop-overlay .editor-group-overlay-drop-into-prompt{transition:opacity .15s ease-out}#monaco-workbench-editor-drop-overlay .editor-group-overlay-drop-into-prompt i{background-color:hsla(0,0%,100%,.05);border:1px solid hsla(0,0%,80%,.4);border-radius:5px;font-style:normal;margin:0 1px;padding:0 8px}.monaco-workbench:not(.reduce-motion) #monaco-workbench-editor-drop-overlay>.editor-group-overlay-indicator.overlay-move-transition{transition:top 70ms ease-out,left 70ms ease-out,width 70ms ease-out,height 70ms ease-out,opacity .15s ease-out}";we(w0,{});var xg;function KS(c){return c.getValue("editor.dropIntoEditor.enabled")}function qS(c){return c.shiftKey}var Qn;let Ig=(Qn=class extends kc{get disposed(){return!!this._disposed}constructor(e,t,i,o,n,s,r,a){super(t),this.groupView=e,this.configurationService=i,this.instantiationService=o,this.editorService=n,this.editorGroupService=s,this.treeViewsDragAndDropService=r,this.contextService=a,this.editorTransfer=wo.getInstance(),this.groupTransfer=wo.getInstance(),this.treeItemsTransfer=wo.getInstance(),this.cleanupOverlayScheduler=this._register(new Yr(()=>this.dispose(),300)),this.enableDropIntoEditor=KS(this.configurationService)&&this.isDropIntoActiveEditorEnabled(),this.create()}create(){const e=this.getOverlayOffsetHeight(),t=this.container=document.createElement("div");t.id=xg.OVERLAY_ID,t.style.top=`${e}px`,this.groupView.element.appendChild(t),this.groupView.element.classList.add("dragged-over"),this._register(ne(()=>{t.remove(),this.groupView.element.classList.remove("dragged-over")})),this.overlay=document.createElement("div"),this.overlay.classList.add("editor-group-overlay-indicator"),t.appendChild(this.overlay),this.enableDropIntoEditor&&(this.dropIntoPromptElement=B_(d(11109,"Hold __{0}__ to drop into editor",be?"":"Shift"),{}),this.dropIntoPromptElement.classList.add("editor-group-overlay-drop-into-prompt"),this.overlay.appendChild(this.dropIntoPromptElement)),this.registerListeners(t),this.updateStyles()}updateStyles(){const e=ae(this.overlay);e.style.backgroundColor=this.getColor(Cf)||"";const t=this.getColor(su);if(e.style.outlineColor=t||"",e.style.outlineOffset=t?"-2px":"",e.style.outlineStyle=t?"dashed":"",e.style.outlineWidth=t?"2px":"",this.dropIntoPromptElement){this.dropIntoPromptElement.style.backgroundColor=this.getColor(O_)??"",this.dropIntoPromptElement.style.color=this.getColor(N_)??"";const i=this.getColor(F_);i?(this.dropIntoPromptElement.style.borderWidth="1px",this.dropIntoPromptElement.style.borderStyle="solid",this.dropIntoPromptElement.style.borderColor=i):this.dropIntoPromptElement.style.borderWidth="0"}}registerListeners(e){this._register(new xd(e,{onDragOver:t=>{if(this.enableDropIntoEditor&&qS(t)){this.dispose();return}const i=this.groupTransfer.hasData(Et.prototype),o=this.editorTransfer.hasData(ut.prototype);!o&&!i&&t.dataTransfer&&(t.dataTransfer.dropEffect="copy");let n=!0;if(i)n=this.isCopyOperation(t);else if(o){const r=this.editorTransfer.getData(ut.prototype);Array.isArray(r)&&r.length>0&&(n=this.isCopyOperation(t,r[0].identifier))}if(!n){const r=this.findSourceGroupView();if(r===this.groupView&&(i||o&&r.count<2)){this.hideOverlay();return}}let s=!!this.editorGroupService.partOptions.splitOnDragAndDrop;this.isToggleSplitOperation(t)&&(s=!s),this.positionOverlay(t.offsetX,t.offsetY,i,s),this.cleanupOverlayScheduler.isScheduled()&&this.cleanupOverlayScheduler.cancel()},onDragLeave:t=>this.dispose(),onDragEnd:t=>this.dispose(),onDrop:t=>{re.stop(t,!0),this.dispose(),this.currentDropOperation&&this.handleDrop(t,this.currentDropOperation.splitDirection)}})),this._register(L(e,B.MOUSE_OVER,()=>{this.cleanupOverlayScheduler.isScheduled()||this.cleanupOverlayScheduler.schedule()}))}isDropIntoActiveEditorEnabled(){var e;return!!((e=this.groupView.activeEditor)!=null&&e.hasCapability(128))}findSourceGroupView(){if(this.groupTransfer.hasData(Et.prototype)){const e=this.groupTransfer.getData(Et.prototype);if(Array.isArray(e)&&e.length>0)return this.editorGroupService.getGroup(e[0].identifier)}else if(this.editorTransfer.hasData(ut.prototype)){const e=this.editorTransfer.getData(ut.prototype);if(Array.isArray(e)&&e.length>0)return this.editorGroupService.getGroup(e[0].identifier.groupId)}}async handleDrop(e,t){const i=()=>{let o;return typeof t=="number"?o=this.editorGroupService.addGroup(this.groupView,t):o=this.groupView,o};if(this.groupTransfer.hasData(Et.prototype)){const o=this.groupTransfer.getData(Et.prototype);if(Array.isArray(o)&&o.length>0){const n=this.editorGroupService.getGroup(o[0].identifier);if(n){if(typeof t!="number"&&n===this.groupView)return;let s;if(typeof t=="number")this.isCopyOperation(e)?s=this.editorGroupService.copyGroup(n,this.groupView,t):s=this.editorGroupService.moveGroup(n,this.groupView,t);else{let r;this.isCopyOperation(e)&&(r={mode:0}),this.editorGroupService.mergeGroup(n,this.groupView,r)}s&&this.editorGroupService.activateGroup(s)}this.groupTransfer.clearData(Et.prototype)}}else if(this.editorTransfer.hasData(ut.prototype)){const o=this.editorTransfer.getData(ut.prototype);if(Array.isArray(o)&&o.length>0){const n=o,s=o[0].identifier,r=this.editorGroupService.getGroup(s.groupId);if(r){const a=this.isCopyOperation(e,s);let l;if(this.editorGroupService.partOptions.closeEmptyGroups&&r.count===1&&typeof t=="number"&&!a)l=this.editorGroupService.moveGroup(r,this.groupView,t);else{if(l=i(),r===l)return;const h=n.map(p=>({editor:p.identifier.editor,options:wp(r,p.identifier.editor,{pinned:!0,sticky:r.isSticky(p.identifier.editor)})}));a?r.copyEditors(h,l):r.moveEditors(h,l)}l.focus()}this.editorTransfer.clearData(ut.prototype)}}else if(this.treeItemsTransfer.hasData(zi.prototype)){const o=this.treeItemsTransfer.getData(zi.prototype);if(Array.isArray(o)&&o.length>0){const n=[];for(const s of o){const r=await this.treeViewsDragAndDropService.removeDragOperationTransfer(s.identifier);if(r){const a=await xy(r);n.push(...a.map(l=>({...l,options:{...l.options,pinned:!0}})))}}n.length&&this.editorService.openEditors(n,i(),{validateTrust:!0})}this.treeItemsTransfer.clearData(zi.prototype)}else this.instantiationService.createInstance(Iy,{allowWorkspaceOpen:!vt||G_(this.contextService.getWorkspace())}).handleDrop(e,fe(this.groupView.element),()=>i(),n=>n==null?void 0:n.focus())}isCopyOperation(e,t){return t!=null&&t.editor.hasCapability(8)?!1:e.ctrlKey&&!be||e.altKey&&be}isToggleSplitOperation(e){return e.altKey&&!be||e.shiftKey&&be}positionOverlay(e,t,i,o){const n=this.editorGroupService.partOptions.openSideBySideDirection==="right",s=this.groupView.element.clientWidth,r=this.groupView.element.clientHeight-this.getOverlayOffsetHeight();let a,l;o?(i?a=n?.3:.1:a=.1,i?l=n?.1:.3:l=.1):(a=0,l=0);const h=s*a,p=r*l,g=s/3,m=r/3;let f;switch(e>h&&e<s-h&&t>p&&t<r-p?f=void 0:n?e<g?f=2:e>g*2?f=3:t<r/2?f=0:f=1:t<m?f=0:t>m*2?f=1:e<s/2?f=2:f=3,f){case 0:this.doPositionOverlay({top:"0",left:"0",width:"100%",height:"50%"}),this.toggleDropIntoPrompt(!1);break;case 1:this.doPositionOverlay({top:"50%",left:"0",width:"100%",height:"50%"}),this.toggleDropIntoPrompt(!1);break;case 2:this.doPositionOverlay({top:"0",left:"0",width:"50%",height:"100%"}),this.toggleDropIntoPrompt(!1);break;case 3:this.doPositionOverlay({top:"0",left:"50%",width:"50%",height:"100%"}),this.toggleDropIntoPrompt(!1);break;default:this.doPositionOverlay({top:"0",left:"0",width:"100%",height:"100%"}),this.toggleDropIntoPrompt(!0)}const v=ae(this.overlay);v.style.opacity="1",setTimeout(()=>v.classList.add("overlay-move-transition"),0),this.currentDropOperation={splitDirection:f}}doPositionOverlay(e){const[t,i]=Ho(this.container,this.overlay),o=this.getOverlayOffsetHeight();o?t.style.height=`calc(100% - ${o}px)`:t.style.height="100%",i.style.top=e.top,i.style.left=e.left,i.style.width=e.width,i.style.height=e.height}getOverlayOffsetHeight(){return!this.groupView.isEmpty&&this.editorGroupService.partOptions.showTabs==="multiple"?this.groupView.titleHeight.offset:0}hideOverlay(){const e=ae(this.overlay);this.doPositionOverlay({top:"0",left:"0",width:"100%",height:"100%"}),e.style.opacity="0",e.classList.remove("overlay-move-transition"),this.currentDropOperation=void 0}toggleDropIntoPrompt(e){this.dropIntoPromptElement&&(this.dropIntoPromptElement.style.opacity=e?"1":"0")}contains(e){return e===this.container||e===this.overlay}dispose(){super.dispose(),this._disposed=!0}},xg=Qn,Qn.OVERLAY_ID="monaco-workbench-editor-drop-overlay",Qn);Ig=xg=x([u(1,te),u(2,F),u(3,O),u(4,U),u(5,Z),u(6,Pf),u(7,ei)],Ig);let Dg=class extends kc{constructor(e,t,i,o,n,s){super(o),this.container=e,this.delegate=t,this.editorGroupService=i,this.configurationService=n,this.instantiationService=s,this.counter=0,this.editorTransfer=wo.getInstance(),this.groupTransfer=wo.getInstance(),this.registerListeners()}get overlay(){if(this._overlay&&!this._overlay.disposed)return this._overlay}registerListeners(){this._register(L(this.container,B.DRAG_ENTER,e=>this.onDragEnter(e))),this._register(L(this.container,B.DRAG_LEAVE,()=>this.onDragLeave()));for(const e of[this.container,fe(this.container)])this._register(L(e,B.DRAG_END,()=>this.onDragEnd()))}onDragEnter(e){if(KS(this.configurationService)&&qS(e))return;if(this.counter++,!this.editorTransfer.hasData(ut.prototype)&&!this.groupTransfer.hasData(Et.prototype)&&e.dataTransfer){const i=$.as(W_.DragAndDropContribution).getAll(),o=Array.from(i).map(n=>n.dataFormatKey);if(!H_(e,sr.FILES,vp.FILES,sr.RESOURCES,vp.EDITORS,...o)){e.dataTransfer.dropEffect="none";return}}this.updateContainer(!0);const t=e.target;if(t&&(this.overlay&&!this.overlay.contains(t)&&this.disposeOverlay(),!this.overlay)){const i=this.findTargetGroupView(t);i&&(this._overlay=this.instantiationService.createInstance(Ig,i))}}onDragLeave(){this.counter--,this.counter===0&&this.updateContainer(!1)}onDragEnd(){this.counter=0,this.updateContainer(!1),this.disposeOverlay()}findTargetGroupView(e){return this.editorGroupService.groups.find(i=>{var o,n;return Yi(e,i.element)||((n=(o=this.delegate).containsGroup)==null?void 0:n.call(o,i))})}updateContainer(e){this.container.classList.toggle("dragged-over",e)}dispose(){super.dispose(),this.disposeOverlay()}disposeOverlay(){this.overlay&&(this.overlay.dispose(),this._overlay=void 0)}};Dg=x([u(2,Z),u(3,te),u(4,F),u(5,O)],Dg);const la={targetWidth:900,leftMarginRatio:.1909,rightMarginRatio:.1909},Qu={type:"distribute"};function zw(c){const e=H(".centered-layout-margin");return e.style.height="100%",c&&(e.style.backgroundColor=c.toString()),{element:e,layout:()=>{},minimumSize:60,maximumSize:Number.POSITIVE_INFINITY,onDidChange:N.None}}function v0(c,e){return{element:c.element,get maximumSize(){return c.maximumWidth},get minimumSize(){return c.minimumWidth},onDidChange:N.map(c.onDidChange,t=>t&&t.width),layout:(t,i,o)=>c.layout(t,e(),(o==null?void 0:o.top)??0,((o==null?void 0:o.left)??0)+i)}}class y0{constructor(e,t,i={...la},o=!1){this.container=e,this.view=t,this.state=i,this.centeredLayoutFixedWidth=o,this.lastLayoutPosition={width:0,height:0,left:0,top:0},this.didLayout=!1,this.splitViewDisposables=new P,this._boundarySashes={},this.container.appendChild(this.view.element),this.container.style.overflow="hidden"}get minimumWidth(){return this.splitView?this.splitView.minimumSize:this.view.minimumWidth}get maximumWidth(){return this.splitView?this.splitView.maximumSize:this.view.maximumWidth}get minimumHeight(){return this.view.minimumHeight}get maximumHeight(){return this.view.maximumHeight}get onDidChange(){return this.view.onDidChange}get boundarySashes(){return this._boundarySashes}set boundarySashes(e){this._boundarySashes=e,this.splitView&&(this.splitView.orthogonalStartSash=e.top,this.splitView.orthogonalEndSash=e.bottom)}layout(e,t,i,o){this.lastLayoutPosition={width:e,height:t,top:i,left:o},this.splitView?(this.splitView.layout(e,this.lastLayoutPosition),(!this.didLayout||this.centeredLayoutFixedWidth)&&this.resizeSplitViews()):this.view.layout(e,t,i,o),this.didLayout=!0}resizeSplitViews(){if(this.splitView)if(this.centeredLayoutFixedWidth){const e=Math.min(this.lastLayoutPosition.width,this.state.targetWidth),t=(this.lastLayoutPosition.width-e)/2;this.splitView.resizeView(0,Math.floor(t)),this.splitView.resizeView(1,e),this.splitView.resizeView(2,Math.ceil(t))}else{const e=this.state.leftMarginRatio*this.lastLayoutPosition.width,t=this.state.rightMarginRatio*this.lastLayoutPosition.width,i=this.lastLayoutPosition.width-e-t;this.splitView.resizeView(0,e),this.splitView.resizeView(1,i),this.splitView.resizeView(2,t)}}setFixedWidth(e){this.centeredLayoutFixedWidth=e,this.splitView&&(this.updateState(),this.resizeSplitViews())}updateState(){this.splitView&&(this.state.targetWidth=this.splitView.getViewSize(1),this.state.leftMarginRatio=this.splitView.getViewSize(0)/this.lastLayoutPosition.width,this.state.rightMarginRatio=this.splitView.getViewSize(2)/this.lastLayoutPosition.width)}isActive(){return!!this.splitView}styles(e){this.style=e,this.splitView&&this.emptyViews&&(this.splitView.style(this.style),this.emptyViews[0].element.style.backgroundColor=this.style.background.toString(),this.emptyViews[1].element.style.backgroundColor=this.style.background.toString())}activate(e){var t,i;if(e!==this.isActive())if(e){this.view.element.remove(),this.splitView=new $a(this.container,{inverseAltBehavior:!0,orientation:1,styles:this.style}),this.splitView.orthogonalStartSash=this.boundarySashes.top,this.splitView.orthogonalEndSash=this.boundarySashes.bottom,this.splitViewDisposables.add(this.splitView.onDidSashChange(()=>{this.splitView&&this.updateState()})),this.splitViewDisposables.add(this.splitView.onDidSashReset(()=>{this.state={...la},this.resizeSplitViews()})),this.splitView.layout(this.lastLayoutPosition.width,this.lastLayoutPosition);const o=this.style?this.style.background:void 0;this.emptyViews=[zw(o),zw(o)],this.splitView.addView(this.emptyViews[0],Qu,0),this.splitView.addView(v0(this.view,()=>this.lastLayoutPosition.height),Qu,1),this.splitView.addView(this.emptyViews[1],Qu,2),this.resizeSplitViews()}else(t=this.splitView)==null||t.el.remove(),this.splitViewDisposables.clear(),(i=this.splitView)==null||i.dispose(),this.splitView=void 0,this.emptyViews=void 0,this.container.appendChild(this.view.element),this.view.layout(this.lastLayoutPosition.width,this.lastLayoutPosition.height,this.lastLayoutPosition.top,this.lastLayoutPosition.left)}isDefault(e){return this.centeredLayoutFixedWidth?e.targetWidth===la.targetWidth:e.leftMarginRatio===la.leftMarginRatio&&e.rightMarginRatio===la.rightMarginRatio}dispose(){this.splitViewDisposables.dispose(),this.splitView&&(this.splitView.dispose(),this.splitView=void 0)}}var ro;class C0{constructor(){this.element=H(".grid-view-container"),this._onDidChange=new bo,this.onDidChange=this._onDidChange.event}get minimumWidth(){return this.gridWidget?this.gridWidget.minimumWidth:0}get maximumWidth(){return this.gridWidget?this.gridWidget.maximumWidth:Number.POSITIVE_INFINITY}get minimumHeight(){return this.gridWidget?this.gridWidget.minimumHeight:0}get maximumHeight(){return this.gridWidget?this.gridWidget.maximumHeight:Number.POSITIVE_INFINITY}get gridWidget(){return this._gridWidget}set gridWidget(e){this.element.innerText="",e?(this.element.appendChild(e.element),this._onDidChange.input=e.onDidChange):this._onDidChange.input=N.None,this._gridWidget=e}layout(e,t,i,o){var n;(n=this.gridWidget)==null||n.layout(e,t,i,o)}dispose(){this._onDidChange.dispose()}}var Zo;let kl=(Zo=class extends rb{constructor(e,t,i,o,n,s,r,a,l,h,p){super(t,{hasTitle:!1},s,a,l),this.editorPartsView=e,this.groupsLabel=i,this.windowId=o,this.instantiationService=n,this.configurationService=r,this.hostService=h,this.contextKeyService=p,this._onDidFocus=this._register(new I),this.onDidFocus=this._onDidFocus.event,this._onDidLayout=this._register(new I),this.onDidLayout=this._onDidLayout.event,this._onDidChangeActiveGroup=this._register(new I),this.onDidChangeActiveGroup=this._onDidChangeActiveGroup.event,this._onDidChangeGroupIndex=this._register(new I),this.onDidChangeGroupIndex=this._onDidChangeGroupIndex.event,this._onDidChangeGroupLabel=this._register(new I),this.onDidChangeGroupLabel=this._onDidChangeGroupLabel.event,this._onDidChangeGroupLocked=this._register(new I),this.onDidChangeGroupLocked=this._onDidChangeGroupLocked.event,this._onDidChangeGroupMaximized=this._register(new I),this.onDidChangeGroupMaximized=this._onDidChangeGroupMaximized.event,this._onDidActivateGroup=this._register(new I),this.onDidActivateGroup=this._onDidActivateGroup.event,this._onDidAddGroup=this._register(new yp),this.onDidAddGroup=this._onDidAddGroup.event,this._onDidRemoveGroup=this._register(new yp),this.onDidRemoveGroup=this._onDidRemoveGroup.event,this._onDidMoveGroup=this._register(new I),this.onDidMoveGroup=this._onDidMoveGroup.event,this.onDidSetGridWidget=this._register(new I),this._onDidChangeSizeConstraints=this._register(new bo),this.onDidChangeSizeConstraints=N.any(this.onDidSetGridWidget.event,this._onDidChangeSizeConstraints.event),this._onDidScroll=this._register(new bo),this.onDidScroll=N.any(this.onDidSetGridWidget.event,this._onDidScroll.event),this._onDidChangeEditorPartOptions=this._register(new I),this.onDidChangeEditorPartOptions=this._onDidChangeEditorPartOptions.event,this._onWillDispose=this._register(new I),this.onWillDispose=this._onWillDispose.event,this.workspaceMemento=this.getMemento(1,0),this.profileMemento=this.getMemento(0,1),this.groupViews=new Map,this.mostRecentActiveGroups=[],this.gridWidgetDisposables=this._register(new P),this.gridWidgetView=this._register(new C0),this.enforcedPartOptions=[],this._partOptions=Rb(this.configurationService,this.themeService),this.top=0,this.left=0,this.sideGroup={openEditor:(g,m)=>{const[f]=this.scopedInstantiationService.invokeFunction(v=>nS(v,{editor:g,options:m},Mr));return f.openEditor(g,m)}},this._isReady=!1,this.whenReadyPromise=new Br,this.whenReady=this.whenReadyPromise.p,this.whenRestoredPromise=new Br,this.whenRestored=this.whenRestoredPromise.p,this._willRestoreState=!1,this.priority=2,this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>this.onConfigurationUpdated(e))),this._register(this.themeService.onDidFileIconThemeChange(()=>this.handleChangedPartOptions())),this._register(this.onDidChangeMementoValue(1,this._store)(e=>this.onDidChangeMementoState(e)))}onConfigurationUpdated(e){z_(e)&&this.handleChangedPartOptions()}handleChangedPartOptions(){const e=this._partOptions,t=Rb(this.configurationService,this.themeService);for(const i of this.enforcedPartOptions)Object.assign(t,i);this._partOptions=t,this._onDidChangeEditorPartOptions.fire({oldPartOptions:e,newPartOptions:t})}get partOptions(){return this._partOptions}enforcePartOptions(e){return this.enforcedPartOptions.push(e),this.handleChangedPartOptions(),ne(()=>{this.enforcedPartOptions.splice(this.enforcedPartOptions.indexOf(e),1),this.handleChangedPartOptions()})}get contentDimension(){return this._contentDimension}get activeGroup(){return this._activeGroup}get groups(){return Array.from(this.groupViews.values())}get count(){return this.groupViews.size}get orientation(){return this.gridWidget&&this.gridWidget.orientation===0?1:0}get isReady(){return this._isReady}get hasRestorableState(){return!!this.workspaceMemento[ro.EDITOR_PART_UI_STATE_STORAGE_KEY]}get willRestoreState(){return this._willRestoreState}getGroups(e=0){switch(e){case 0:return this.groups;case 1:{const t=hi(this.mostRecentActiveGroups.map(i=>this.getGroup(i)));return jo([...t,...this.groups])}case 2:{const t=[];return this.gridWidget&&this.fillGridNodes(t,this.gridWidget.getViews()),t}}}fillGridNodes(e,t){Fn(t)?t.children.forEach(i=>this.fillGridNodes(e,i)):e.push(t.view)}hasGroup(e){return this.groupViews.has(e)}getGroup(e){return this.groupViews.get(e)}findGroup(e,t=this.activeGroup,i){if(typeof e.direction=="number")return this.doFindGroupByDirection(e.direction,t,i);if(typeof e.location=="number")return this.doFindGroupByLocation(e.location,t,i);throw new Error("invalid arguments")}doFindGroupByDirection(e,t,i){const o=this.assertGroupView(t),n=this.gridWidget.getNeighborViews(o,this.toGridViewDirection(e),i);return n.sort((s,r)=>this.mostRecentActiveGroups.indexOf(s.id)-this.mostRecentActiveGroups.indexOf(r.id)),n[0]}doFindGroupByLocation(e,t,i){const o=this.assertGroupView(t),n=this.getGroups(2),s=n.indexOf(o);switch(e){case 0:return n[0];case 1:return n[n.length-1];case 2:{let r=n[s+1];return!r&&i&&(r=this.doFindGroupByLocation(0,t)),r}case 3:{let r=n[s-1];return!r&&i&&(r=this.doFindGroupByLocation(1,t)),r}}}activateGroup(e,t){const i=this.assertGroupView(e);return this.doSetGroupActive(i),t||this.hostService.moveTop(fe(this.element)),i}restoreGroup(e){const t=this.assertGroupView(e);return this.doRestoreGroup(t),t}getSize(e){const t=this.assertGroupView(e);return this.gridWidget.getViewSize(t)}setSize(e,t){const i=this.assertGroupView(e);this.gridWidget.resizeView(i,t)}arrangeGroups(e,t=this.activeGroup){if(this.count<2||!this.gridWidget)return;const i=this.assertGroupView(t);switch(e){case 2:this.gridWidget.distributeViewSizes();break;case 0:if(this.groups.length<2)return;this.gridWidget.maximizeView(i),i.focus();break;case 1:this.gridWidget.expandView(i);break}}toggleMaximizeGroup(e=this.activeGroup){this.hasMaximizedGroup()?this.unmaximizeGroup():this.arrangeGroups(0,e)}toggleExpandGroup(e=this.activeGroup){this.isGroupExpanded(this.activeGroup)?this.arrangeGroups(2):this.arrangeGroups(1,e)}unmaximizeGroup(){this.gridWidget.exitMaximizedView(),this._activeGroup.focus()}hasMaximizedGroup(){return this.gridWidget.hasMaximizedView()}isGroupMaximized(e){return this.gridWidget.isViewMaximized(e)}isGroupExpanded(e){return this.gridWidget.isViewExpanded(e)}setGroupOrientation(e){if(!this.gridWidget)return;const t=e===0?1:0;this.gridWidget.orientation!==t&&(this.gridWidget.orientation=t)}applyLayout(e){const t=this.shouldRestoreFocus(this.container);let i=0;function o(a){for(const l of a)Array.isArray(l.groups)?o(l.groups):i++}o(e.groups);let n=this.getGroups(2);if(i<n.length){const a=n[i-1];n.forEach((l,h)=>{h>=i&&this.mergeGroup(l,a)}),n=this.getGroups(2)}const s=this.activeGroup,r=PS({orientation:this.toGridViewOrientation(e.orientation,this.isTwoDimensionalGrid()?this.gridWidget.orientation:Ki(this.gridWidget.orientation)),groups:e.groups});this.doApplyGridState(r,s.id,n),t&&this._activeGroup.focus()}getLayout(){const e=this.gridWidget.serialize(),t=e.orientation===1?0:1,i=this.serializedNodeToGroupLayoutArgument(e.root);return{orientation:t,groups:i.groups}}serializedNodeToGroupLayoutArgument(e){return e.type==="branch"?{size:e.size,groups:e.data.map(t=>this.serializedNodeToGroupLayoutArgument(t))}:{size:e.size}}shouldRestoreFocus(e){return e?un()===e.ownerDocument.body?!0:Qv(e):!1}isTwoDimensionalGrid(){const e=this.gridWidget.getViews();return Fn(e)?e.children.some(t=>Fn(t)):!1}addGroup(e,t,i){const o=this.assertGroupView(e);let n;if(o.groupsView===this){const s=this.shouldRestoreFocus(o.element),r=this.groupViews.size>1&&this.isGroupExpanded(o);n=this.doCreateGroupView(i),this.gridWidget.addView(n,this.getSplitSizingStyle(),o,this.toGridViewDirection(t)),this.updateContainer(),this._onDidAddGroup.fire(n),this.notifyGroupIndexChange(),r&&this.arrangeGroups(1,n),s&&o.focus()}else n=o.groupsView.addGroup(o,t,i);return n}getSplitSizingStyle(){switch(this._partOptions.splitSizing){case"distribute":return cr.Distribute;case"split":return cr.Split;default:return cr.Auto}}doCreateGroupView(e,t){let i;e instanceof $s?i=$s.createCopy(e,this.editorPartsView,this,this.groupsLabel,this.count,this.scopedInstantiationService,t):Vy(e)?i=$s.createFromSerialized(e,this.editorPartsView,this,this.groupsLabel,this.count,this.scopedInstantiationService,t):i=$s.createNew(this.editorPartsView,this,this.groupsLabel,this.count,this.scopedInstantiationService,t),this.groupViews.set(i.id,i);const o=new P;return o.add(i.onDidFocus(()=>{this.doSetGroupActive(i),this._onDidFocus.fire()})),o.add(i.onDidModelChange(n=>{switch(n.kind){case 3:this._onDidChangeGroupLocked.fire(i);break;case 1:this._onDidChangeGroupIndex.fire(i);break;case 2:this._onDidChangeGroupLabel.fire(i);break}})),o.add(i.onDidActiveEditorChange(()=>{this.updateContainer()})),N.once(i.onWillDispose)(()=>{Re(o),this.groupViews.delete(i.id),this.doUpdateMostRecentActive(i)}),i}doSetGroupActive(e){if(this._activeGroup!==e){const t=this._activeGroup;this._activeGroup=e,this.doUpdateMostRecentActive(e,!0),t&&!t.disposed&&t.setActive(!1),e.setActive(!0),this.doRestoreGroup(e),this._onDidChangeActiveGroup.fire(e)}this._onDidActivateGroup.fire(e)}doRestoreGroup(e){if(this.gridWidget){this.hasMaximizedGroup()&&!this.isGroupMaximized(e)&&this.unmaximizeGroup();try{const t=this.gridWidget.getViewSize(e);(t.width===e.minimumWidth||t.height===e.minimumHeight)&&this.arrangeGroups(1,e)}catch{}}}doUpdateMostRecentActive(e,t){const i=this.mostRecentActiveGroups.indexOf(e.id);i!==-1&&this.mostRecentActiveGroups.splice(i,1),t&&this.mostRecentActiveGroups.unshift(e.id)}toGridViewDirection(e){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3}}toGridViewOrientation(e,t){return typeof e=="number"?e===0?1:0:t}removeGroup(e,t){const i=this.assertGroupView(e);this.count!==1&&(i.isEmpty?this.doRemoveEmptyGroup(i,t):this.doRemoveGroupWithEditors(i))}doRemoveGroupWithEditors(e){const t=this.getGroups(1);let i;this._activeGroup===e?i=t[1]:i=t[0],this.mergeGroup(e,i)}doRemoveEmptyGroup(e,t){const i=!t&&this.shouldRestoreFocus(this.container);if(this._activeGroup===e){const n=this.getGroups(1)[1];this.doSetGroupActive(n)}this.gridWidget.removeView(e,this.getSplitSizingStyle()),e.dispose(),i&&this._activeGroup.focus(),this.notifyGroupIndexChange(),this.updateContainer(),this._onDidRemoveGroup.fire(e)}moveGroup(e,t,i){const o=this.assertGroupView(e),n=this.assertGroupView(t);if(o.id===n.id)throw new Error("Cannot move group into its own");const s=this.shouldRestoreFocus(o.element);let r;return o.groupsView===n.groupsView?(this.gridWidget.moveView(o,this.getSplitSizingStyle(),n,this.toGridViewDirection(i)),r=o):(r=n.groupsView.addGroup(n,i,o),o.closeAllEditors(),this.removeGroup(o,s)),s&&r.focus(),this._onDidMoveGroup.fire(r),this.notifyGroupIndexChange(),r}copyGroup(e,t,i){const o=this.assertGroupView(e),n=this.assertGroupView(t),s=this.shouldRestoreFocus(o.element),r=this.addGroup(n,i,o);return s&&r.focus(),r}mergeGroup(e,t,i){const o=this.assertGroupView(e),n=this.assertGroupView(t),s=[];let r=i&&typeof i.index=="number"?i.index:n.count;for(const l of o.editors){const h=!o.isActive(l)||this._activeGroup!==o,g={index:o.isSticky(l)?void 0:r,inactive:h,preserveFocus:h};s.push({editor:l,options:g}),r++}let a=!0;return(i==null?void 0:i.mode)===0?o.copyEditors(s,n):a=o.moveEditors(s,n),o.isEmpty&&!o.disposed&&this.removeGroup(o,!0),a}mergeAllGroups(e){const t=this.assertGroupView(e);let i=!0;for(const o of this.getGroups(1)){if(o===t)continue;this.mergeGroup(o,t)||(i=!1)}return i}assertGroupView(e){let t;if(typeof e=="number"?t=this.editorPartsView.getGroup(e):t=e,!t)throw new Error("Invalid editor group provided!");return t}createEditorDropTarget(e,t){return U_(pn(e)),this.scopedInstantiationService.createInstance(Dg,e,t)}get minimumWidth(){return Math.min(this.centeredLayoutWidget.minimumWidth,this.layoutService.getMaximumEditorDimensions(this.layoutService.getContainer(fe(this.container))).width)}get maximumWidth(){return this.centeredLayoutWidget.maximumWidth}get minimumHeight(){return Math.min(this.centeredLayoutWidget.minimumHeight,this.layoutService.getMaximumEditorDimensions(this.layoutService.getContainer(fe(this.container))).height)}get maximumHeight(){return this.centeredLayoutWidget.maximumHeight}get snap(){return this.layoutService.getPanelAlignment()==="center"}get onDidChange(){return N.any(this.centeredLayoutWidget.onDidChange,this.onDidSetGridWidget.event)}get gridSeparatorBorder(){return this.theme.getColor(K_)||this.theme.getColor(Yt)||at.transparent}updateStyles(){const e=ae(this.container);e.style.backgroundColor=this.getColor(Bf)||"";const t={separatorBorder:this.gridSeparatorBorder,background:this.theme.getColor(q_)||at.transparent};this.gridWidget.style(t),this.centeredLayoutWidget.styles(t)}createContentArea(e,t){this.element=e,this.container=document.createElement("div"),this.container.classList.add("content"),this.windowId!==ge.vscodeWindowId&&this.container.classList.add("auxiliary"),e.appendChild(this.container);const i=this._register(this.contextKeyService.createScoped(this.container));return this.scopedInstantiationService=this._register(this.instantiationService.createChild(new $r([K,i]))),this._willRestoreState=!t||t.restorePreviousState,this.doCreateGridControl(),this.centeredLayoutWidget=this._register(new y0(this.container,this.gridWidgetView,this.profileMemento[ro.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY],this._partOptions.centeredLayoutFixedWidth)),this._register(this.onDidChangeEditorPartOptions(o=>this.centeredLayoutWidget.setFixedWidth(o.newPartOptions.centeredLayoutFixedWidth??!1))),this.setupDragAndDropSupport(e,this.container),this.handleContextKeys(i),this.whenReadyPromise.complete(),this._isReady=!0,Nf.settled(this.groups.map(o=>o.whenRestored)).finally(()=>{this.whenRestoredPromise.complete()}),this.container}handleContextKeys(e){ea.bindTo(e).set(this.windowId!==ge.vscodeWindowId);const i=Dc.bindTo(e),o=zo.bindTo(e),n=()=>{this.count>1?i.set(!0):i.reset(),this.hasMaximizedGroup()?o.set(!0):o.reset()};n(),this._register(this.onDidAddGroup(()=>n())),this._register(this.onDidRemoveGroup(()=>n())),this._register(this.onDidChangeGroupMaximized(()=>n()))}setupDragAndDropSupport(e,t){this._register(this.createEditorDropTarget(t,Object.create(null)));const i=document.createElement("div");i.classList.add("drop-block-overlay"),e.appendChild(i),this._register($_(i,()=>i.classList.remove("visible"))),this._register(Dr.INSTANCE.registerTarget(this.element,{onDragStart:h=>i.classList.add("visible"),onDragEnd:h=>i.classList.remove("visible")}));let o,n,s,r;const a=h=>{!this.layoutService.isVisible("workbench.parts.panel")&&h===this.layoutService.getPanelPosition()?this.layoutService.setPartHidden(!1,"workbench.parts.panel"):!this.layoutService.isVisible("workbench.parts.auxiliarybar")&&h===(this.layoutService.getSideBarPosition()===1?0:1)&&this.layoutService.setPartHidden(!1,"workbench.parts.auxiliarybar")},l=()=>{o&&(clearTimeout(o),o=void 0),n&&(clearTimeout(n),n=void 0)};this._register(Dr.INSTANCE.registerTarget(i,{onDragOver:h=>{re.stop(h.eventData,!0),h.eventData.dataTransfer&&(h.eventData.dataTransfer.dropEffect="none");const p=i.getBoundingClientRect();let g,m;const f=100;h.eventData.clientX<p.left+f&&(g=0),h.eventData.clientX>p.right-f&&(g=1),h.eventData.clientY>p.bottom-f&&(m=2),h.eventData.clientY<p.top+f&&(m=3),o&&g!==s&&(clearTimeout(o),o=void 0),n&&m!==r&&(clearTimeout(n),n=void 0),!o&&g!==void 0&&(s=g,o=setTimeout(()=>a(g),200)),!n&&m!==void 0&&(r=m,n=setTimeout(()=>a(m),200))},onDragLeave:()=>l(),onDragEnd:()=>l(),onDrop:()=>l()}))}centerLayout(e){this.centeredLayoutWidget.activate(e),this._activeGroup.focus()}isLayoutCentered(){return this.centeredLayoutWidget?this.centeredLayoutWidget.isActive():!1}doCreateGridControl(){let e=!1;if(this._willRestoreState&&(e=!this.doCreateGridControlWithPreviousState()),!this.gridWidget||e){const t=this.doCreateGroupView();this.doSetGridWidget(new qo(t)),this.doSetGroupActive(t)}this.updateContainer(),this.notifyGroupIndexChange()}doCreateGridControlWithPreviousState(){const e=this.loadState();if(e!=null&&e.serializedGrid)try{this.mostRecentActiveGroups=e.mostRecentActiveGroups,this.doCreateGridControlWithState(e.serializedGrid,e.activeGroup)}catch(t){return gn(new Error(`Error restoring editor grid widget: ${t} (with state: ${JSON.stringify(e)})`)),this.disposeGroups(),!1}return!0}doCreateGridControlWithState(e,t,i,o){let n;i?n=i.slice(0):n=[];const s=[],r=qo.deserialize(e,{fromJSON:a=>{let l;return n.length>0?l=n.shift():l=this.doCreateGroupView(a,o),s.push(l),l.id===t&&this.doSetGroupActive(l),l}},{styles:{separatorBorder:this.gridSeparatorBorder}});this._activeGroup||this.doSetGroupActive(s[0]),this.mostRecentActiveGroups.some(a=>!this.getGroup(a))&&(this.mostRecentActiveGroups=s.map(a=>a.id)),this.doSetGridWidget(r)}doSetGridWidget(e){let t={};this.gridWidget&&(t=this.gridWidget.boundarySashes,this.gridWidget.dispose()),this.gridWidget=e,this.gridWidget.boundarySashes=t,this.gridWidgetView.gridWidget=e,this._onDidChangeSizeConstraints.input=e.onDidChange,this._onDidScroll.input=e.onDidScroll,this.gridWidgetDisposables.clear(),this.gridWidgetDisposables.add(e.onDidChangeViewMaximized(i=>this._onDidChangeGroupMaximized.fire(i))),this.onDidSetGridWidget.fire(void 0)}updateContainer(){ae(this.container).classList.toggle("empty",this.isEmpty)}notifyGroupIndexChange(){this.getGroups(2).forEach((e,t)=>e.notifyIndexChanged(t))}notifyGroupsLabelChange(e){for(const t of this.groups)t.notifyLabelChanged(e)}get isEmpty(){return this.count===1&&this._activeGroup.isEmpty}setBoundarySashes(e){this.gridWidget.boundarySashes=e,this.centeredLayoutWidget.boundarySashes=e}layout(e,t,i,o){this.top=i,this.left=o;const n=super.layoutContents(e,t).contentSize;this.doLayout(he.lift(n),i,o)}doLayout(e,t=this.top,i=this.left){this._contentDimension=e,this.centeredLayoutWidget.layout(this._contentDimension.width,this._contentDimension.height,t,i),this._onDidLayout.fire(e)}saveState(){if(this.gridWidget&&(this.isEmpty?delete this.workspaceMemento[ro.EDITOR_PART_UI_STATE_STORAGE_KEY]:this.workspaceMemento[ro.EDITOR_PART_UI_STATE_STORAGE_KEY]=this.createState()),this.centeredLayoutWidget){const e=this.centeredLayoutWidget.state;this.centeredLayoutWidget.isDefault(e)?delete this.profileMemento[ro.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY]:this.profileMemento[ro.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY]=e}super.saveState()}loadState(){return this.workspaceMemento[ro.EDITOR_PART_UI_STATE_STORAGE_KEY]}createState(){return{serializedGrid:this.gridWidget.serialize(),activeGroup:this._activeGroup.id,mostRecentActiveGroups:this.mostRecentActiveGroups}}applyState(e,t){return e==="empty"?this.doApplyEmptyState():this.doApplyState(e,t)}async doApplyState(e,t){const i=await this.doPrepareApplyState();this._onDidAddGroup.pause(),this._onDidRemoveGroup.pause(),this.disposeGroups(),this.mostRecentActiveGroups=e.mostRecentActiveGroups;try{this.doApplyGridState(e.serializedGrid,e.activeGroup,void 0,t)}finally{this._onDidRemoveGroup.resume(),this._onDidAddGroup.resume()}await this.activeGroup.openEditors(i.flatMap(o=>o.editors).filter(o=>this.editorPartsView.groups.every(n=>!n.contains(o))).map(o=>({editor:o,options:{pinned:!0,preserveFocus:!0,inactive:!0}})))}async doApplyEmptyState(){await this.doPrepareApplyState(),this.mergeAllGroups(this.activeGroup)}async doPrepareApplyState(){const e=this.getGroups(1);for(const t of e)await t.closeAllEditors({excludeConfirming:!0});return e}doApplyGridState(e,t,i,o){this.doCreateGridControlWithState(e,t,i,o),this.doLayout(this._contentDimension),this.updateContainer();for(const n of this.getGroups(2))i!=null&&i.includes(n)||this._onDidAddGroup.fire(n);this.notifyGroupIndexChange()}onDidChangeMementoState(e){if(e.external&&e.scope===1){this.reloadMemento(e.scope);const t=this.loadState();t&&this.applyState(t)}}toJSON(){return{type:"workbench.parts.editor"}}disposeGroups(){for(const e of this.groups)e.dispose(),this._onDidRemoveGroup.fire(e);this.groupViews.clear(),this.mostRecentActiveGroups=[]}dispose(){var e;this._onWillDispose.fire(),this.disposeGroups(),(e=this.gridWidget)==null||e.dispose(),super.dispose()}},ro=Zo,Zo.EDITOR_PART_UI_STATE_STORAGE_KEY="editorpart.state",Zo.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY="editorpart.centeredview",Zo);kl=ro=x([u(4,O),u(5,te),u(6,F),u(7,ie),u(8,Y),u(9,st),u(10,K)],kl);let Ag=class extends kl{constructor(e,t,i,o,n,s,r,a){super(e,"workbench.parts.editor","",ge.vscodeWindowId,t,i,o,n,s,r,a)}};Ag=x([u(1,O),u(2,te),u(3,F),u(4,ie),u(5,Y),u(6,st),u(7,K)],Ag);var ba,Tg,es;let Vg=(es=class{constructor(e,t,i,o,n,s,r,a,l){this.editorPartsView=e,this.instantiationService=t,this.auxiliaryWindowService=i,this.lifecycleService=o,this.configurationService=n,this.statusbarService=s,this.titleService=r,this.editorService=a,this.layoutService=l}async create(e,t){function i(){let E=0;return f&&(E+=m.height),h&&p&&(E+=h.height),E}function o(E){f?qi(m.container):Co(m.container),E&&r.layout()}function n(E){h&&(p?qi(h.container):Co(h.container),E&&r.layout())}const s=new P,r=s.add(await this.auxiliaryWindowService.open(t)),a=document.createElement("div");a.classList.add("part","editor"),a.setAttribute("role","main"),a.style.position="relative",r.container.appendChild(a);const l=s.add(this.instantiationService.createInstance(Mg,r.window.vscodeWindowId,this.editorPartsView,t==null?void 0:t.state,e));s.add(this.editorPartsView.registerPart(l)),l.create(a);let h,p=!1;if(Es&&Z_()){h=s.add(this.titleService.createAuxiliaryTitlebarPart(r.container,l)),p=Bb(this.configurationService,r.window,void 0);const E=()=>{const D=p;p=Bb(this.configurationService,r.window,void 0),D!==p&&n(!0)};s.add(h.onDidChange(()=>r.layout())),s.add(this.layoutService.onDidChangePartVisibility(()=>E())),s.add(Mv(D=>{D===r.window.vscodeWindowId&&E()})),n(!1)}else s.add(this.instantiationService.createInstance(j_,r.window,l));const m=s.add(this.statusbarService.createAuxiliaryStatusbarPart(r.container));let f=this.configurationService.getValue(ba.STATUS_BAR_VISIBILITY)!==!1;s.add(this.configurationService.onDidChangeConfiguration(E=>{E.affectsConfiguration(ba.STATUS_BAR_VISIBILITY)&&(f=this.configurationService.getValue(ba.STATUS_BAR_VISIBILITY)!==!1,o(!0))})),o(!1);const v=s.add(N.once(l.onWillClose)(()=>r.window.close()));s.add(N.once(r.onUnload)(()=>{s.isDisposed||(v.dispose(),l.close(),s.dispose())})),s.add(N.once(this.lifecycleService.onDidShutdown)(()=>s.dispose())),s.add(r.onBeforeUnload(E=>{for(const D of l.groups)for(const V of D.editors){const M=V.canMove(D.id,this.editorPartsView.mainPart.activeGroup.id);if(typeof M=="string"){D.openEditor(V),E.veto(M);break}}})),s.add(r.onWillLayout(E=>{const D=(h==null?void 0:h.height)??0;h==null||h.layout(E.width,D,0,0);const V=E.height-i();l.layout(E.width,V,D,0),m.layout(E.width,m.height,E.height-m.height,0)})),r.layout();const S=s.add(this.instantiationService.createChild(new $r([kn,this.statusbarService.createScoped(m,s)],[U,this.editorService.createScoped(l,s)])));return{part:l,instantiationService:S,disposables:s}}},ba=es,es.STATUS_BAR_VISIBILITY="workbench.statusBar.visible",es);Vg=ba=x([u(1,O),u(2,Ff),u(3,wn),u(4,F),u(5,kn),u(6,Y_),u(7,U),u(8,Y)],Vg);var ts;let Mg=(ts=class extends kl{constructor(e,t,i,o,n,s,r,a,l,h,p){const g=Tg.COUNTER++;super(t,`workbench.parts.auxiliaryEditor.${g}`,o,e,n,s,r,a,l,h,p),this.state=i,this._onWillClose=this._register(new I),this.onWillClose=this._onWillClose.event}removeGroup(e,t){const i=this.assertGroupView(e);this.count===1&&this.activeGroup===i?this.doRemoveLastGroup(t):super.removeGroup(e,t)}doRemoveLastGroup(e){const t=!e&&this.shouldRestoreFocus(this.container),o=this.editorPartsView.getGroups(1)[1];o&&(o.groupsView.activateGroup(o),t&&o.focus()),this.doClose(!1)}loadState(){return this.state}saveState(){}close(){return this.doClose(!0)}doClose(e){let t=!0;return e&&(t=this.mergeGroupsToMainPart()),this._onWillClose.fire(),t}mergeGroupsToMainPart(){if(!this.groups.some(i=>i.count>0))return!0;let e;for(const i of this.editorPartsView.mainPart.getGroups(1))if(!i.isLocked){e=i;break}e||(e=this.editorPartsView.mainPart.addGroup(this.editorPartsView.mainPart.activeGroup,this.partOptions.openSideBySideDirection==="right"?3:1));const t=this.mergeAllGroups(e);return e.focus(),t}},Tg=ts,ts.COUNTER=1,ts);Mg=Tg=x([u(4,O),u(5,te),u(6,F),u(7,ie),u(8,Y),u(9,st),u(10,K)],Mg);var An,Xo;let Uw=(Xo=class extends JA{constructor(e,t,i,o,n){super("workbench.editorParts",i,t),this.instantiationService=e,this.storageService=t,this.auxiliaryWindowService=o,this.contextKeyService=n,this.mainPart=this._register(this.createMainEditorPart()),this.mostRecentActiveParts=[this.mainPart],this.mapPartToInstantiationService=new Map,this._onDidCreateAuxiliaryEditorPart=this._register(new I),this.onDidCreateAuxiliaryEditorPart=this._onDidCreateAuxiliaryEditorPart.event,this.workspaceMemento=this.getMemento(1,0),this._isReady=!1,this.whenReadyPromise=new Br,this.whenReady=this.whenReadyPromise.p,this.whenRestoredPromise=new Br,this.whenRestored=this.whenRestoredPromise.p,this.editorWorkingSets=(()=>{const s=this.storageService.get(An.EDITOR_WORKING_SETS_STORAGE_KEY,1);return s?JSON.parse(s):[]})(),this._onDidActiveGroupChange=this._register(new I),this.onDidChangeActiveGroup=this._onDidActiveGroupChange.event,this._onDidAddGroup=this._register(new I),this.onDidAddGroup=this._onDidAddGroup.event,this._onDidRemoveGroup=this._register(new I),this.onDidRemoveGroup=this._onDidRemoveGroup.event,this._onDidMoveGroup=this._register(new I),this.onDidMoveGroup=this._onDidMoveGroup.event,this._onDidActivateGroup=this._register(new I),this.onDidActivateGroup=this._onDidActivateGroup.event,this._onDidChangeGroupIndex=this._register(new I),this.onDidChangeGroupIndex=this._onDidChangeGroupIndex.event,this._onDidChangeGroupLocked=this._register(new I),this.onDidChangeGroupLocked=this._onDidChangeGroupLocked.event,this._onDidChangeGroupMaximized=this._register(new I),this.onDidChangeGroupMaximized=this._onDidChangeGroupMaximized.event,this.globalContextKeys=new Map,this.scopedContextKeys=new Map,this.contextKeyProviders=new Map,this.registeredContextKeys=new Map,this.contextKeyProviderDisposables=this._register(new za),this._register(this.registerPart(this.mainPart)),this.restoreParts(),this.registerListeners()}registerListeners(){this._register(this.onDidChangeMementoValue(1,this._store)(e=>this.onDidChangeMementoState(e))),this.whenReady.then(()=>this.registerGroupsContextKeyListeners())}createMainEditorPart(){return this.instantiationService.createInstance(Ag,this)}getScopedInstantiationService(e){return e===this.mainPart&&(this.mapPartToInstantiationService.has(e.windowId)||this.instantiationService.invokeFunction(t=>{const i=t.get(U);this.mapPartToInstantiationService.set(e.windowId,this._register(this.instantiationService.createChild(new $r([U,i.createScoped("main",this._store)]))))})),this.mapPartToInstantiationService.get(e.windowId)??this.instantiationService}async createAuxiliaryEditorPart(e){const{part:t,instantiationService:i,disposables:o}=await this.instantiationService.createInstance(Vg,this).create(this.getGroupsLabel(this._parts.size),e);return this.mapPartToInstantiationService.set(t.windowId,i),o.add(ne(()=>this.mapPartToInstantiationService.delete(t.windowId))),this._onDidAddGroup.fire(t.activeGroup),this._onDidCreateAuxiliaryEditorPart.fire(t),t}registerPart(e){const t=this._register(new P);return t.add(super.registerPart(e)),this.registerEditorPartListeners(e,t),t}unregisterPart(e){super.unregisterPart(e),this.parts.forEach((t,i)=>{t!==this.mainPart&&t.notifyGroupsLabelChange(this.getGroupsLabel(i))})}registerEditorPartListeners(e,t){t.add(e.onDidFocus(()=>{this.doUpdateMostRecentActive(e,!0),this._parts.size>1&&this._onDidActiveGroupChange.fire(this.activeGroup)})),t.add(ne(()=>this.doUpdateMostRecentActive(e))),t.add(e.onDidChangeActiveGroup(i=>this._onDidActiveGroupChange.fire(i))),t.add(e.onDidAddGroup(i=>this._onDidAddGroup.fire(i))),t.add(e.onDidRemoveGroup(i=>this._onDidRemoveGroup.fire(i))),t.add(e.onDidMoveGroup(i=>this._onDidMoveGroup.fire(i))),t.add(e.onDidActivateGroup(i=>this._onDidActivateGroup.fire(i))),t.add(e.onDidChangeGroupMaximized(i=>this._onDidChangeGroupMaximized.fire(i))),t.add(e.onDidChangeGroupIndex(i=>this._onDidChangeGroupIndex.fire(i))),t.add(e.onDidChangeGroupLocked(i=>this._onDidChangeGroupLocked.fire(i)))}doUpdateMostRecentActive(e,t){const i=this.mostRecentActiveParts.indexOf(e);i!==-1&&this.mostRecentActiveParts.splice(i,1),t&&this.mostRecentActiveParts.unshift(e)}getGroupsLabel(e){return d(3567,"Window {0}",e+1)}getPart(e){if(this._parts.size>1)if(pn(e)){const t=e;return this.getPartByDocument(t.ownerDocument)}else{const t=e;let i;typeof t=="number"?i=t:i=t.id;for(const o of this._parts)if(o.hasGroup(i))return o}return this.mainPart}get isReady(){return this._isReady}async restoreParts(){if(await this.mainPart.whenReady,this.mainPart.willRestoreState){const t=this.loadState();t&&await this.restoreState(t)}const e=this.mostRecentActiveParts.at(0);e==null||e.activeGroup.focus(),this._isReady=!0,this.whenReadyPromise.complete(),await Promise.allSettled(this.parts.map(t=>t.whenRestored)),this.whenRestoredPromise.complete()}loadState(){return this.workspaceMemento[An.EDITOR_PARTS_UI_STATE_STORAGE_KEY]}saveState(){const e=this.createState();e.auxiliary.length===0?delete this.workspaceMemento[An.EDITOR_PARTS_UI_STATE_STORAGE_KEY]:this.workspaceMemento[An.EDITOR_PARTS_UI_STATE_STORAGE_KEY]=e}createState(){return{auxiliary:this.parts.filter(e=>e!==this.mainPart).map(e=>{const t=this.auxiliaryWindowService.getWindow(e.windowId);return{state:e.createState(),...t==null?void 0:t.createState()}}),mru:this.mostRecentActiveParts.map(e=>this.parts.indexOf(e))}}async restoreState(e){if(e.auxiliary.length){const t=[];for(const i of e.auxiliary)t.push(this.createAuxiliaryEditorPart(i));await Promise.allSettled(t),e.mru.length===this.parts.length?this.mostRecentActiveParts=e.mru.map(i=>this.parts[i]):this.mostRecentActiveParts=[...this.parts],await Promise.allSettled(this.parts.map(i=>i.whenReady))}}get hasRestorableState(){return this.parts.some(e=>e.hasRestorableState)}onDidChangeMementoState(e){if(e.external&&e.scope===1){this.reloadMemento(e.scope);const t=this.loadState();t&&this.applyState(t)}}async applyState(e){for(const t of this.parts){if(t===this.mainPart)continue;for(const o of t.getGroups(1))await o.closeAllEditors({excludeConfirming:!0});if(!t.close())return!1}return e!=="empty"&&await this.restoreState(e),!0}saveWorkingSet(e){const t={id:ta(),name:e,main:this.mainPart.createState(),auxiliary:this.createState()};return this.editorWorkingSets.push(t),this.saveWorkingSets(),{id:t.id,name:t.name}}getWorkingSets(){return this.editorWorkingSets.map(e=>({id:e.id,name:e.name}))}deleteWorkingSet(e){const t=this.indexOfWorkingSet(e);typeof t=="number"&&(this.editorWorkingSets.splice(t,1),this.saveWorkingSets())}async applyWorkingSet(e,t){let i;if(e==="empty"?i="empty":i=this.editorWorkingSets[this.indexOfWorkingSet(e)??-1],!i||!await this.applyState(i==="empty"?i:i.auxiliary))return!1;if(await this.mainPart.applyState(i==="empty"?i:i.main,t),!(t!=null&&t.preserveFocus)){const n=this.mostRecentActiveParts.at(0);n&&(await n.whenReady,n.activeGroup.focus())}return!0}indexOfWorkingSet(e){for(let t=0;t<this.editorWorkingSets.length;t++)if(this.editorWorkingSets[t].id===e.id)return t}saveWorkingSets(){this.storageService.store(An.EDITOR_WORKING_SETS_STORAGE_KEY,JSON.stringify(this.editorWorkingSets),1,1)}get activeGroup(){return this.activePart.activeGroup}get sideGroup(){return this.activePart.sideGroup}get groups(){return this.getGroups()}get count(){return this.groups.length}getGroups(e=0){if(this._parts.size>1){let t;switch(e){case 2:case 0:t=this.parts;break;case 1:t=jo([...this.mostRecentActiveParts,...this.parts]);break}return t.map(i=>i.getGroups(e)).flat()}return this.mainPart.getGroups(e)}getGroup(e){if(this._parts.size>1)for(const t of this._parts){const i=t.getGroup(e);if(i)return i}return this.mainPart.getGroup(e)}assertGroupView(e){let t;if(typeof e=="number"?t=this.getGroup(e):t=e,!t)throw new Error("Invalid editor group provided!");return t}activateGroup(e){return this.getPart(e).activateGroup(e)}getSize(e){return this.getPart(e).getSize(e)}setSize(e,t){this.getPart(e).setSize(e,t)}arrangeGroups(e,t=this.activePart.activeGroup){this.getPart(t).arrangeGroups(e,t)}toggleMaximizeGroup(e=this.activePart.activeGroup){this.getPart(e).toggleMaximizeGroup(e)}toggleExpandGroup(e=this.activePart.activeGroup){this.getPart(e).toggleExpandGroup(e)}restoreGroup(e){return this.getPart(e).restoreGroup(e)}applyLayout(e){this.activePart.applyLayout(e)}getLayout(){return this.activePart.getLayout()}get orientation(){return this.activePart.orientation}setGroupOrientation(e){this.activePart.setGroupOrientation(e)}findGroup(e,t=this.activeGroup,i){const o=this.getPart(t);if(this._parts.size>1){const n=this.getGroups(2);if(e.location===0||e.location===1)return e.location===0?n[0]:n[n.length-1];const s=o.findGroup(e,t,!1);if(s)return s;if(e.location===2||e.location===3){const r=this.assertGroupView(t),a=n.indexOf(r);if(e.location===2){let l=n[a+1];return!l&&i&&(l=n[0]),l}else{let l=n[a-1];return!l&&i&&(l=n[n.length-1]),l}}}return o.findGroup(e,t,i)}addGroup(e,t){return this.getPart(e).addGroup(e,t)}removeGroup(e){this.getPart(e).removeGroup(e)}moveGroup(e,t,i){return this.getPart(e).moveGroup(e,t,i)}mergeGroup(e,t,i){return this.getPart(e).mergeGroup(e,t,i)}mergeAllGroups(e){return this.activePart.mergeAllGroups(e)}copyGroup(e,t,i){return this.getPart(e).copyGroup(e,t,i)}createEditorDropTarget(e,t){return this.getPart(e).createEditorDropTarget(e,t)}registerGroupsContextKeyListeners(){this._register(this.onDidChangeActiveGroup(()=>this.updateGlobalContextKeys())),this.groups.forEach(e=>this.registerGroupContextKeyProvidersListeners(e)),this._register(this.onDidAddGroup(e=>this.registerGroupContextKeyProvidersListeners(e))),this._register(this.onDidRemoveGroup(e=>{this.scopedContextKeys.delete(e.id),this.registeredContextKeys.delete(e.id),this.contextKeyProviderDisposables.deleteAndDispose(e.id)}))}updateGlobalContextKeys(){const e=this.scopedContextKeys.get(this.activeGroup.id);if(e)for(const[t,i]of this.globalContextKeys){const o=e.get(t);o?i.set(o.get()):i.reset()}}bind(e,t){let i=this.globalContextKeys.get(e.key);i||(i=e.bindTo(this.contextKeyService),this.globalContextKeys.set(e.key,i));let o=this.scopedContextKeys.get(t.id);o||(o=new Map,this.scopedContextKeys.set(t.id,o));let n=o.get(e.key);n||(n=e.bindTo(t.scopedContextKeyService),o.set(e.key,n));const s=this;return{get(){return n.get()},set(r){s.activeGroup===t&&i.set(r),n.set(r)},reset(){s.activeGroup===t&&i.reset(),n.reset()}}}registerContextKeyProvider(e){var o;if(this.contextKeyProviders.has(e.contextKey.key)||this.globalContextKeys.has(e.contextKey.key))throw new Error(`A context key provider for key ${e.contextKey.key} already exists.`);this.contextKeyProviders.set(e.contextKey.key,e);const t=()=>{for(const n of this.groups)this.updateRegisteredContextKey(n,e)};t();const i=(o=e.onDidChange)==null?void 0:o.call(e,()=>t());return ne(()=>{i==null||i.dispose(),this.globalContextKeys.delete(e.contextKey.key),this.scopedContextKeys.forEach(n=>n.delete(e.contextKey.key)),this.contextKeyProviders.delete(e.contextKey.key),this.registeredContextKeys.forEach(n=>n.delete(e.contextKey.key))})}registerGroupContextKeyProvidersListeners(e){const t=e.onDidActiveEditorChange(()=>{for(const i of this.contextKeyProviders.values())this.updateRegisteredContextKey(e,i)});this.contextKeyProviderDisposables.set(e.id,t)}updateRegisteredContextKey(e,t){let i=this.registeredContextKeys.get(e.id);i||(i=new Map,this.registeredContextKeys.set(e.id,i));let o=i.get(t.contextKey.key);o||(o=this.bind(t.contextKey,e),i.set(t.contextKey.key,o)),o.set(t.getGroupContextKeyValue(e))}get partOptions(){return this.mainPart.partOptions}get onDidChangeEditorPartOptions(){return this.mainPart.onDidChangeEditorPartOptions}},An=Xo,Xo.EDITOR_PARTS_UI_STATE_STORAGE_KEY="editorparts.state",Xo.EDITOR_WORKING_SETS_STORAGE_KEY="editor.workingSets",Xo);Uw=An=x([u(0,O),u(1,ie),u(2,te),u(3,Ff),u(4,K)],Uw);C(class extends A{constructor(){super({id:"_workbench.output.showViewsLog",title:w(9694,"Show Views Log"),category:_.Developer,f1:!0})}async run(c){const e=c.get(hu),t=c.get(X_);e.setVisibility(Ja,!0),t.showChannel(Ja)}});function $S(c){return`${c}.hidden`}let Lg=class extends R{constructor(e,t,i,o){super(),this.viewContainerName=t,this.storageService=i,this._onDidChangeStoredState=this._register(new I),this.onDidChangeStoredState=this._onDidChangeStoredState.event,this.logger=new iu(()=>o.createLogger(Ja,{name:Gf,hidden:!0})),this.globalViewsStateStorageId=$S(e),this.workspaceViewsStateStorageId=e,this._register(this.storageService.onDidChangeValue(0,this.globalViewsStateStorageId,this._register(new P))(()=>this.onDidStorageChange())),this.state=this.initialize()}set(e,t){this.state.set(e,t)}get(e){return this.state.get(e)}updateState(e){this.updateWorkspaceState(e),this.updateGlobalState(e)}updateWorkspaceState(e){const t=this.getStoredWorkspaceState();for(const i of e){const o=this.get(i.id);o&&(t[i.id]={collapsed:!!o.collapsed,isHidden:!o.visibleWorkspace,size:o.size,order:i.workspace&&o?o.order:void 0})}Object.keys(t).length>0?this.storageService.store(this.workspaceViewsStateStorageId,JSON.stringify(t),1,1):this.storageService.remove(this.workspaceViewsStateStorageId,1)}updateGlobalState(e){const t=this.getStoredGlobalState();for(const i of e){const o=this.get(i.id);t.set(i.id,{id:i.id,isHidden:o&&i.canToggleVisibility?!o.visibleGlobal:!1,order:!i.workspace&&o?o.order:void 0})}this.setStoredGlobalState(t)}onDidStorageChange(){if(this.globalViewsStatesValue!==this.getStoredGlobalViewsStatesValue()){this._globalViewsStatesValue=void 0;const e=this.getStoredGlobalState(),t=this.getStoredWorkspaceState(),i=[];for(const[o,n]of e){const s=this.get(o);if(s)s.visibleGlobal!==!n.isHidden&&(n.isHidden||this.logger.value.info(`View visibility state changed: ${o} is now visible`,this.viewContainerName),i.push({id:o,visible:!n.isHidden}));else{const r=t[o];this.set(o,{active:!1,visibleGlobal:!n.isHidden,visibleWorkspace:Rn(r==null?void 0:r.isHidden)?void 0:!(r!=null&&r.isHidden),collapsed:r==null?void 0:r.collapsed,order:r==null?void 0:r.order,size:r==null?void 0:r.size})}}if(i.length){this._onDidChangeStoredState.fire(i);for(const o of i){const n=this.get(o.id);n&&(n.visibleGlobal=o.visible)}}}}initialize(){const e=new Map,t=this.getStoredWorkspaceState();for(const r of Object.keys(t)){const a=t[r];e.set(r,{active:!1,visibleGlobal:void 0,visibleWorkspace:Rn(a.isHidden)?void 0:!a.isHidden,collapsed:a.collapsed,order:a.order,size:a.size})}const i=this.storageService.get(this.globalViewsStateStorageId,1,"[]"),{state:o}=this.parseStoredGlobalState(i);if(o.size>0){for(const{id:r,isHidden:a}of o.values()){const l=e.get(r);l?Rn(l.visibleWorkspace)&&(l.visibleWorkspace=!a):e.set(r,{active:!1,collapsed:void 0,visibleGlobal:void 0,visibleWorkspace:!a})}this.storageService.remove(this.globalViewsStateStorageId,1)}const{state:n,hasDuplicates:s}=this.parseStoredGlobalState(this.globalViewsStatesValue);s&&this.setStoredGlobalState(n);for(const{id:r,isHidden:a,order:l}of n.values()){const h=e.get(r);h?(h.visibleGlobal=!a,Rn(l)||(h.order=l)):e.set(r,{active:!1,visibleGlobal:!a,order:l,collapsed:void 0,visibleWorkspace:void 0})}return e}getStoredWorkspaceState(){return JSON.parse(this.storageService.get(this.workspaceViewsStateStorageId,1,"{}"))}getStoredGlobalState(){return this.parseStoredGlobalState(this.globalViewsStatesValue).state}setStoredGlobalState(e){this.globalViewsStatesValue=JSON.stringify([...e.values()])}parseStoredGlobalState(e){const t=JSON.parse(e);let i=!1;return{state:t.reduce((n,s)=>(typeof s=="string"?(i=i||n.has(s),n.set(s,{id:s,isHidden:!0})):(i=i||n.has(s.id),n.set(s.id,s)),n),new Map),hasDuplicates:i}}get globalViewsStatesValue(){return this._globalViewsStatesValue||(this._globalViewsStatesValue=this.getStoredGlobalViewsStatesValue()),this._globalViewsStatesValue}set globalViewsStatesValue(e){this.globalViewsStatesValue!==e&&(this._globalViewsStatesValue=e,this.setStoredGlobalViewsStatesValue(e))}getStoredGlobalViewsStatesValue(){return this.storageService.get(this.globalViewsStateStorageId,0,"[]")}setStoredGlobalViewsStatesValue(e){this.storageService.store(this.globalViewsStateStorageId,e,0,0)}};Lg=x([u(2,ie),u(3,hu)],Lg);let Pg=class extends R{get title(){return this._title}get icon(){return this._icon}get keybindingId(){return this._keybindingId}get allViewDescriptors(){return this.viewDescriptorItems.map(e=>e.viewDescriptor)}get activeViewDescriptors(){return this.viewDescriptorItems.filter(e=>e.state.active).map(e=>e.viewDescriptor)}get visibleViewDescriptors(){return this.viewDescriptorItems.filter(e=>this.isViewDescriptorVisible(e)).map(e=>e.viewDescriptor)}constructor(e,t,i,o){super(),this.viewContainer=e,this.contextKeyService=i,this.contextKeys=new J_,this.viewDescriptorItems=[],this._onDidChangeContainerInfo=this._register(new I),this.onDidChangeContainerInfo=this._onDidChangeContainerInfo.event,this._onDidChangeAllViewDescriptors=this._register(new I),this.onDidChangeAllViewDescriptors=this._onDidChangeAllViewDescriptors.event,this._onDidChangeActiveViewDescriptors=this._register(new I),this.onDidChangeActiveViewDescriptors=this._onDidChangeActiveViewDescriptors.event,this._onDidAddVisibleViewDescriptors=this._register(new I),this.onDidAddVisibleViewDescriptors=this._onDidAddVisibleViewDescriptors.event,this._onDidRemoveVisibleViewDescriptors=this._register(new I),this.onDidRemoveVisibleViewDescriptors=this._onDidRemoveVisibleViewDescriptors.event,this._onDidMoveVisibleViewDescriptors=this._register(new I),this.onDidMoveVisibleViewDescriptors=this._onDidMoveVisibleViewDescriptors.event,this.logger=new iu(()=>o.createLogger(Ja,{name:Gf,hidden:!0})),this._register(N.filter(i.onDidChangeContext,n=>n.affectsSome(this.contextKeys))(()=>this.onDidChangeContext())),this.viewDescriptorsState=this._register(t.createInstance(Lg,e.storageId||`${e.id}.state`,typeof e.title=="string"?e.title:e.title.original)),this._register(this.viewDescriptorsState.onDidChangeStoredState(n=>this.updateVisibility(n))),this.updateContainerInfo()}updateContainerInfo(){var a,l,h,p,g,m,f;const e=this.viewContainer.alwaysUseContainerInfo||this.visibleViewDescriptors.length===0||this.visibleViewDescriptors.some(v=>$.as(Ot.ViewsRegistry).getViewContainer(v.id)===this.viewContainer),t=e?typeof this.viewContainer.title=="string"?this.viewContainer.title:this.viewContainer.title.value:((a=this.visibleViewDescriptors[0])==null?void 0:a.containerTitle)||((h=(l=this.visibleViewDescriptors[0])==null?void 0:l.name)==null?void 0:h.value)||"";let i=!1;this._title!==t&&(this._title=t,i=!0);const o=e?this.viewContainer.icon:((p=this.visibleViewDescriptors[0])==null?void 0:p.containerIcon)||Ry;let n=!1;this.isEqualIcon(o)||(this._icon=o,n=!0);const s=((g=this.viewContainer.openCommandActionDescriptor)==null?void 0:g.id)??((f=(m=this.activeViewDescriptors.find(v=>v.openCommandActionDescriptor))==null?void 0:m.openCommandActionDescriptor)==null?void 0:f.id);let r=!1;this._keybindingId!==s&&(this._keybindingId=s,r=!0),(i||n||r)&&this._onDidChangeContainerInfo.fire({title:i,icon:n,keybindingId:r})}isEqualIcon(e){return z.isUri(e)?z.isUri(this._icon)&&ot(e,this._icon):oe.isThemeIcon(e)?oe.isThemeIcon(this._icon)&&oe.isEqual(e,this._icon):e===this._icon}isVisible(e){const t=this.viewDescriptorItems.find(i=>i.viewDescriptor.id===e);if(!t)throw new Error(`Unknown view ${e}`);return this.isViewDescriptorVisible(t)}setVisible(e,t){this.updateVisibility([{id:e,visible:t}])}updateVisibility(e){const t=hi(e.filter(({visible:n})=>!n).map(({id:n})=>this.findAndIgnoreIfNotFound(n))),i=[];for(const{viewDescriptorItem:n,visibleIndex:s}of t)this.updateViewDescriptorItemVisibility(n,!1)&&i.push({viewDescriptor:n.viewDescriptor,index:s});i.length&&this.broadCastRemovedVisibleViewDescriptors(i);const o=[];for(const{id:n,visible:s}of e){if(!s)continue;const r=this.findAndIgnoreIfNotFound(n);if(!r)continue;const{viewDescriptorItem:a,visibleIndex:l}=r;this.updateViewDescriptorItemVisibility(a,!0)&&o.push({index:l,viewDescriptor:a.viewDescriptor,size:a.state.size,collapsed:!!a.state.collapsed})}o.length&&this.broadCastAddedVisibleViewDescriptors(o)}updateViewDescriptorItemVisibility(e,t){return!e.viewDescriptor.canToggleVisibility||this.isViewDescriptorVisibleWhenActive(e)===t?!1:(e.viewDescriptor.workspace?e.state.visibleWorkspace=t:(e.state.visibleGlobal=t,t&&this.logger.value.info(`Showing view ${e.viewDescriptor.id} in the container ${this.viewContainer.id}`)),this.isViewDescriptorVisible(e)===t)}isCollapsed(e){return!!this.find(e).viewDescriptorItem.state.collapsed}setCollapsed(e,t){const{viewDescriptorItem:i}=this.find(e);i.state.collapsed!==t&&(i.state.collapsed=t),this.viewDescriptorsState.updateState(this.allViewDescriptors)}getSize(e){return this.find(e).viewDescriptorItem.state.size}setSizes(e){for(const{id:t,size:i}of e){const{viewDescriptorItem:o}=this.find(t);o.state.size!==i&&(o.state.size=i)}this.viewDescriptorsState.updateState(this.allViewDescriptors)}move(e,t){const i=this.viewDescriptorItems.findIndex(r=>r.viewDescriptor.id===e),o=this.viewDescriptorItems.findIndex(r=>r.viewDescriptor.id===t),n=this.viewDescriptorItems[i],s=this.viewDescriptorItems[o];Q_(this.viewDescriptorItems,i,o);for(let r=0;r<this.viewDescriptorItems.length;r++)this.viewDescriptorItems[r].state.order=r;this.broadCastMovedViewDescriptors({index:i,viewDescriptor:n.viewDescriptor},{index:o,viewDescriptor:s.viewDescriptor})}add(e){const t=[];for(const n of e){const s=n.viewDescriptor;if(s.when)for(const a of s.when.keys())this.contextKeys.add(a);let r=this.viewDescriptorsState.get(s.id);if(r){if(s.workspace)r.visibleWorkspace=ni(n.visible)?ni(r.visibleWorkspace)?!s.hideByDefault:r.visibleWorkspace:n.visible;else{const a=r.visibleGlobal;r.visibleGlobal=ni(n.visible)?ni(r.visibleGlobal)?!s.hideByDefault:r.visibleGlobal:n.visible,r.visibleGlobal&&!a&&this.logger.value.info(`Added view ${s.id} in the container ${this.viewContainer.id} and showing it.`,`${a}`,`${s.hideByDefault}`,`${n.visible}`)}r.collapsed=ni(n.collapsed)?ni(r.collapsed)?!!s.collapsed:r.collapsed:n.collapsed}else r={active:!1,visibleGlobal:ni(n.visible)?!s.hideByDefault:n.visible,visibleWorkspace:ni(n.visible)?!s.hideByDefault:n.visible,collapsed:ni(n.collapsed)?!!s.collapsed:n.collapsed};this.viewDescriptorsState.set(s.id,r),r.active=this.contextKeyService.contextMatchesRules(s.when),t.push({viewDescriptor:s,state:r})}this.viewDescriptorItems.push(...t),this.viewDescriptorItems.sort(this.compareViewDescriptors.bind(this)),this._onDidChangeAllViewDescriptors.fire({added:t.map(({viewDescriptor:n})=>n),removed:[]});const i=[];for(const n of t)n.state.active&&i.push({viewDescriptorItem:n,visible:this.isViewDescriptorVisible(n)});i.length&&this._onDidChangeActiveViewDescriptors.fire({added:i.map(({viewDescriptorItem:n})=>n.viewDescriptor),removed:[]});const o=[];for(const{viewDescriptorItem:n,visible:s}of i)if(s&&this.isViewDescriptorVisible(n)){const{visibleIndex:r}=this.find(n.viewDescriptor.id);o.push({index:r,viewDescriptor:n.viewDescriptor,size:n.state.size,collapsed:!!n.state.collapsed})}this.broadCastAddedVisibleViewDescriptors(o)}remove(e){const t=[],i=[],o=[],n=[];for(const s of e){if(s.when)for(const a of s.when.keys())this.contextKeys.delete(a);const r=this.viewDescriptorItems.findIndex(a=>a.viewDescriptor.id===s.id);if(r!==-1){t.push(s);const a=this.viewDescriptorItems[r];if(a.state.active&&o.push(a.viewDescriptor),this.isViewDescriptorVisible(a)){const{visibleIndex:l}=this.find(a.viewDescriptor.id);n.push({index:l,viewDescriptor:a.viewDescriptor})}i.push(a)}}i.forEach(s=>this.viewDescriptorItems.splice(this.viewDescriptorItems.indexOf(s),1)),this.broadCastRemovedVisibleViewDescriptors(n),o.length&&this._onDidChangeActiveViewDescriptors.fire({added:[],removed:o}),t.length&&this._onDidChangeAllViewDescriptors.fire({added:[],removed:t})}onDidChangeContext(){const e=[],t=[];for(const n of this.viewDescriptorItems){const s=n.state.active,r=this.contextKeyService.contextMatchesRules(n.viewDescriptor.when);s!==r&&(r?e.push({item:n,visibleWhenActive:this.isViewDescriptorVisibleWhenActive(n)}):t.push(n))}const i=[];for(const n of t)if(this.isViewDescriptorVisible(n)){const{visibleIndex:s}=this.find(n.viewDescriptor.id);i.push({index:s,viewDescriptor:n.viewDescriptor})}t.forEach(n=>n.state.active=!1),e.forEach(({item:n})=>n.state.active=!0),this.broadCastRemovedVisibleViewDescriptors(i),(e.length||t.length)&&this._onDidChangeActiveViewDescriptors.fire({added:e.map(({item:n})=>n.viewDescriptor),removed:t.map(n=>n.viewDescriptor)});const o=[];for(const{item:n,visibleWhenActive:s}of e)if(s&&this.isViewDescriptorVisible(n)){const{visibleIndex:r}=this.find(n.viewDescriptor.id);o.push({index:r,viewDescriptor:n.viewDescriptor,size:n.state.size,collapsed:!!n.state.collapsed})}this.broadCastAddedVisibleViewDescriptors(o)}broadCastAddedVisibleViewDescriptors(e){e.length&&(this._onDidAddVisibleViewDescriptors.fire(e.sort((t,i)=>t.index-i.index)),this.updateState(`Added views:${e.map(t=>t.viewDescriptor.id).join(",")} in ${this.viewContainer.id}`))}broadCastRemovedVisibleViewDescriptors(e){e.length&&(this._onDidRemoveVisibleViewDescriptors.fire(e.sort((t,i)=>i.index-t.index)),this.updateState(`Removed views:${e.map(t=>t.viewDescriptor.id).join(",")} from ${this.viewContainer.id}`))}broadCastMovedViewDescriptors(e,t){this._onDidMoveVisibleViewDescriptors.fire({from:e,to:t}),this.updateState(`Moved view ${e.viewDescriptor.id} to ${t.viewDescriptor.id} in ${this.viewContainer.id}`)}updateState(e){this.logger.value.info(e),this.viewDescriptorsState.updateState(this.allViewDescriptors),this.updateContainerInfo()}isViewDescriptorVisible(e){return e.state.active?this.isViewDescriptorVisibleWhenActive(e):!1}isViewDescriptorVisibleWhenActive(e){return e.viewDescriptor.workspace?!!e.state.visibleWorkspace:!!e.state.visibleGlobal}find(e){const t=this.findAndIgnoreIfNotFound(e);if(t)return t;throw new Error(`view descriptor ${e} not found`)}findAndIgnoreIfNotFound(e){for(let t=0,i=0;t<this.viewDescriptorItems.length;t++){const o=this.viewDescriptorItems[t];if(o.viewDescriptor.id===e)return{index:t,visibleIndex:i,viewDescriptorItem:o};this.isViewDescriptorVisible(o)&&i++}}compareViewDescriptors(e,t){return e.viewDescriptor.id===t.viewDescriptor.id?0:this.getViewOrder(e)-this.getViewOrder(t)||this.getGroupOrderResult(e.viewDescriptor,t.viewDescriptor)}getViewOrder(e){const t=typeof e.state.order=="number"?e.state.order:e.viewDescriptor.order;return typeof t=="number"?t:Number.MAX_VALUE}getGroupOrderResult(e,t){return!e.group||!t.group||e.group===t.group?0:e.group<t.group?-1:1}};Pg=x([u(1,O),u(2,K),u(3,hu)],Pg);var Bi;function Kw(c){return`${c}.state`}var Jo;let Rg=(Jo=class extends R{get viewContainers(){return this.viewContainersRegistry.all}constructor(e,t,i,o,n,s){super(),this.instantiationService=e,this.contextKeyService=t,this.storageService=i,this.extensionService=o,this.telemetryService=n,this._onDidChangeContainer=this._register(new I),this.onDidChangeContainer=this._onDidChangeContainer.event,this._onDidChangeLocation=this._register(new I),this.onDidChangeLocation=this._onDidChangeLocation.event,this._onDidChangeContainerLocation=this._register(new I),this.onDidChangeContainerLocation=this._onDidChangeContainerLocation.event,this.viewContainerModels=this._register(new za),this.viewsVisibilityActionDisposables=this._register(new za),this.canRegisterViewsVisibilityActions=!1,this._onDidChangeViewContainers=this._register(new I),this.onDidChangeViewContainers=this._onDidChangeViewContainers.event,this.logger=new iu(()=>s.createLogger(Ja,{name:Gf,hidden:!0})),this.activeViewContextKeys=new Map,this.movableViewContextKeys=new Map,this.defaultViewLocationContextKeys=new Map,this.defaultViewContainerLocationContextKeys=new Map,this.viewContainersRegistry=$.as(Ot.ViewContainersRegistry),this.viewsRegistry=$.as(Ot.ViewsRegistry),this.migrateToViewsCustomizationsStorage(),this.viewContainersCustomLocations=new Map(Object.entries(this.viewCustomizations.viewContainerLocations)),this.viewDescriptorsCustomLocations=new Map(Object.entries(this.viewCustomizations.viewLocations)),this.viewContainerBadgeEnablementStates=new Map(Object.entries(this.viewCustomizations.viewContainerBadgeEnablementStates)),this.viewContainers.forEach(r=>this.onDidRegisterViewContainer(r)),this._register(this.viewsRegistry.onViewsRegistered(r=>this.onDidRegisterViews(r))),this._register(this.viewsRegistry.onViewsDeregistered(({views:r,viewContainer:a})=>this.onDidDeregisterViews(r,a))),this._register(this.viewsRegistry.onDidChangeContainer(({views:r,from:a,to:l})=>this.onDidChangeDefaultContainer(r,a,l))),this._register(this.viewContainersRegistry.onDidRegister(({viewContainer:r})=>{this.onDidRegisterViewContainer(r),this._onDidChangeViewContainers.fire({added:[{container:r,location:this.getViewContainerLocation(r)}],removed:[]})})),this._register(this.viewContainersRegistry.onDidDeregister(({viewContainer:r,viewContainerLocation:a})=>{this.onDidDeregisterViewContainer(r),this._onDidChangeViewContainers.fire({removed:[{container:r,location:a}],added:[]})})),this._register(this.storageService.onDidChangeValue(0,Bi.VIEWS_CUSTOMIZATIONS,this._register(new P))(()=>this.onDidStorageChange())),this.extensionService.whenInstalledExtensionsRegistered().then(()=>this.whenExtensionsRegistered())}migrateToViewsCustomizationsStorage(){if(this.storageService.get(Bi.VIEWS_CUSTOMIZATIONS,0))return;const e=this.storageService.get("views.cachedViewContainerLocations",0),t=this.storageService.get("views.cachedViewPositions",0);if(!e&&!t)return;const i=e?JSON.parse(e):[],o=t?JSON.parse(t):[],n={viewContainerLocations:i.reduce((s,[r,a])=>(s[r]=a,s),{}),viewLocations:o.reduce((s,[r,{containerId:a}])=>(s[r]=a,s),{}),viewContainerBadgeEnablementStates:{}};this.storageService.store(Bi.VIEWS_CUSTOMIZATIONS,JSON.stringify(n),0,0),this.storageService.remove("views.cachedViewContainerLocations",0),this.storageService.remove("views.cachedViewPositions",0)}registerGroupedViews(e){for(const[t,i]of e.entries()){const o=this.viewContainersRegistry.get(t);if(!o||!this.viewContainerModels.has(o)){if(this.isGeneratedContainerId(t)){const s=this.viewContainersCustomLocations.get(t);s!==void 0&&this.registerGeneratedViewContainer(s,t)}continue}const n=i.filter(s=>this.getViewContainerModel(o).allViewDescriptors.filter(r=>r.id===s.id).length===0);this.addViews(o,n)}}deregisterGroupedViews(e){for(const[t,i]of e.entries()){const o=this.viewContainersRegistry.get(t);!o||!this.viewContainerModels.has(o)||this.removeViews(o,i)}}moveOrphanViewsToDefaultLocation(){for(const[e,t]of this.viewDescriptorsCustomLocations.entries()){if(this.viewContainersRegistry.get(t))continue;const i=this.viewsRegistry.getViewContainer(e),o=this.getViewDescriptorById(e);i&&o&&this.addViews(i,[o])}}whenExtensionsRegistered(){this.moveOrphanViewsToDefaultLocation();for(const e of[...this.viewContainersCustomLocations.keys()])this.cleanUpGeneratedViewContainer(e);this.saveViewCustomizations();for(const[e,t]of this.viewContainerModels)this.registerViewsVisibilityActions(e,t);this.canRegisterViewsVisibilityActions=!0}onDidRegisterViews(e){this.contextKeyService.bufferChangeEvents(()=>{e.forEach(({views:t,viewContainer:i})=>{const o=this.regroupViews(i.id,t);this.registerGroupedViews(o),t.forEach(n=>this.getOrCreateMovableViewContextKey(n).set(!!n.canMoveView))})})}isGeneratedContainerId(e){return e.startsWith(Bi.COMMON_CONTAINER_ID_PREFIX)}onDidDeregisterViews(e,t){const i=this.regroupViews(t.id,e);this.deregisterGroupedViews(i),this.contextKeyService.bufferChangeEvents(()=>{e.forEach(o=>this.getOrCreateMovableViewContextKey(o).set(!1))})}regroupViews(e,t){const i=new Map;for(const o of t){const n=this.viewDescriptorsCustomLocations.get(o.id)??e;let s=i.get(n);s||i.set(n,s=[]),s.push(o)}return i}getViewDescriptorById(e){return this.viewsRegistry.getView(e)}getViewLocationById(e){const t=this.getViewContainerByViewId(e);return t===null?null:this.getViewContainerLocation(t)}getViewContainerByViewId(e){const t=this.viewDescriptorsCustomLocations.get(e);return t?this.viewContainersRegistry.get(t)??null:this.getDefaultContainerById(e)}getViewContainerLocation(e){return this.viewContainersCustomLocations.get(e.id)??this.getDefaultViewContainerLocation(e)}getDefaultViewContainerLocation(e){return this.viewContainersRegistry.getViewContainerLocation(e)}getDefaultContainerById(e){return this.viewsRegistry.getViewContainer(e)??null}getViewContainerModel(e){return this.getOrRegisterViewContainerModel(e)}getViewContainerById(e){return this.viewContainersRegistry.get(e)||null}getViewContainersByLocation(e){return this.viewContainers.filter(t=>this.getViewContainerLocation(t)===e)}getDefaultViewContainer(e){return this.viewContainersRegistry.getDefaultViewContainer(e)}moveViewContainerToLocation(e,t,i,o){this.logger.value.info(`moveViewContainerToLocation: viewContainer:${e.id} location:${t} reason:${o}`),this.moveViewContainerToLocationWithoutSaving(e,t,i),this.saveViewCustomizations()}getViewContainerBadgeEnablementState(e){return this.viewContainerBadgeEnablementStates.get(e)??!0}setViewContainerBadgeEnablementState(e,t){this.viewContainerBadgeEnablementStates.set(e,t),this.saveViewCustomizations()}moveViewToLocation(e,t,i){this.logger.value.info(`moveViewToLocation: view:${e.id} location:${t} reason:${i}`);const o=this.registerGeneratedViewContainer(t);this.moveViewsToContainer([e],o)}moveViewsToContainer(e,t,i,o){if(!e.length)return;this.logger.value.info(`moveViewsToContainer: views:${e.map(r=>r.id).join(",")} viewContainer:${t.id} reason:${o}`);const n=this.getViewContainerByViewId(e[0].id),s=t;n&&s&&n!==s&&(this.moveViewsWithoutSaving(e,n,s,i),this.cleanUpGeneratedViewContainer(n.id),this.saveViewCustomizations(),this.reportMovedViews(e,n,s))}reset(){for(const e of this.viewContainers){const t=this.getViewContainerModel(e);for(const n of t.allViewDescriptors){const s=this.getDefaultContainerById(n.id),r=this.getViewContainerByViewId(n.id);r&&s&&r!==s&&this.moveViewsWithoutSaving([n],r,s)}const i=this.getDefaultViewContainerLocation(e),o=this.getViewContainerLocation(e);i!==null&&o!==i&&this.moveViewContainerToLocationWithoutSaving(e,i),this.cleanUpGeneratedViewContainer(e.id)}this.viewContainersCustomLocations.clear(),this.viewDescriptorsCustomLocations.clear(),this.saveViewCustomizations()}isViewContainerRemovedPermanently(e){return this.isGeneratedContainerId(e)&&!this.viewContainersCustomLocations.has(e)}onDidChangeDefaultContainer(e,t,i){const o=e.filter(n=>!this.viewDescriptorsCustomLocations.has(n.id)||!this.viewContainers.includes(t)&&this.viewDescriptorsCustomLocations.get(n.id)===t.id);o.length&&this.moveViewsWithoutSaving(o,t,i)}reportMovedViews(e,t,i){const o=g=>g.id.startsWith(Bi.COMMON_CONTAINER_ID_PREFIX)?"custom":g.extensionId?"extension":g.id,n=this.getViewContainerLocation(t),s=this.getViewContainerLocation(i),r=e.length,a=o(t),l=o(i),h=n===1?"panel":"sidebar",p=s===1?"panel":"sidebar";this.telemetryService.publicLog2("viewDescriptorService.moveViews",{viewCount:r,fromContainer:a,toContainer:l,fromLocation:h,toLocation:p})}moveViewsWithoutSaving(e,t,i,o=ca.Expand){this.removeViews(t,e),this.addViews(i,e,o);const n=this.getViewContainerLocation(t),s=this.getViewContainerLocation(i);n!==s&&this._onDidChangeLocation.fire({views:e,from:n,to:s}),this._onDidChangeContainer.fire({views:e,from:t,to:i})}moveViewContainerToLocationWithoutSaving(e,t,i){const o=this.getViewContainerLocation(e),n=t;if(o!==n){const s=this.isGeneratedContainerId(e.id),r=n===this.getDefaultViewContainerLocation(e);s||!r?this.viewContainersCustomLocations.set(e.id,n):this.viewContainersCustomLocations.delete(e.id),this.getOrCreateDefaultViewContainerLocationContextKey(e).set(s||r),e.requestedIndex=i,this._onDidChangeContainerLocation.fire({viewContainer:e,from:o,to:n});const a=this.getViewsByContainer(e);this._onDidChangeLocation.fire({views:a,from:o,to:n})}}cleanUpGeneratedViewContainer(e){var i;if(!this.isGeneratedContainerId(e))return;const t=this.getViewContainerById(e);t&&((i=this.getViewContainerModel(t))!=null&&i.allViewDescriptors.length)||[...this.viewDescriptorsCustomLocations.values()].includes(e)||(t&&this.viewContainersRegistry.deregisterViewContainer(t),this.viewContainersCustomLocations.delete(e),this.viewContainerBadgeEnablementStates.delete(e),this.storageService.remove($S((t==null?void 0:t.storageId)||Kw(e)),0))}registerGeneratedViewContainer(e,t){const i=t||this.generateContainerId(e),o=this.viewContainersRegistry.registerViewContainer({id:i,ctorDescriptor:new ce(Lc,[i,{mergeViewWithContainerWhenSingleView:!0}]),title:{value:i,original:i},icon:e===0?Ry:void 0,storageId:Kw(i),hideIfEmpty:!0},e,{doNotRegisterOpenCommand:!0});return this.viewContainersCustomLocations.get(o.id)!==e&&this.viewContainersCustomLocations.set(o.id,e),this.getOrCreateDefaultViewContainerLocationContextKey(o).set(!0),o}onDidStorageChange(){JSON.stringify(this.viewCustomizations)!==this.getStoredViewCustomizationsValue()&&this.onDidViewCustomizationsStorageChange()}onDidViewCustomizationsStorageChange(){this._viewCustomizations=void 0;const e=new Map(Object.entries(this.viewCustomizations.viewContainerLocations)),t=new Map(Object.entries(this.viewCustomizations.viewLocations)),i=[],o=[];for(const[n,s]of e.entries()){const r=this.getViewContainerById(n);r?s!==this.getViewContainerLocation(r)&&i.push([r,s]):this.isGeneratedContainerId(n)&&this.registerGeneratedViewContainer(s,n)}for(const n of this.viewContainers)if(!e.has(n.id)){const s=this.getViewContainerLocation(n),r=this.getDefaultViewContainerLocation(n);s!==r&&i.push([n,r])}for(const[n,s]of t.entries()){const r=this.getViewDescriptorById(n);if(r){const a=this.getViewContainerByViewId(n),l=this.viewContainersRegistry.get(s);a&&l&&l!==a&&o.push({views:[r],from:a,to:l})}}for(const n of this.viewContainers){const s=this.getViewContainerModel(n);for(const r of s.allViewDescriptors)if(!t.has(r.id)){const a=this.getViewContainerByViewId(r.id),l=this.getDefaultContainerById(r.id);a&&l&&a!==l&&o.push({views:[r],from:a,to:l})}}for(const[n,s]of i)this.moveViewContainerToLocationWithoutSaving(n,s);for(const{views:n,from:s,to:r}of o)this.moveViewsWithoutSaving(n,s,r,ca.Default);this.viewContainersCustomLocations=e,this.viewDescriptorsCustomLocations=t}generateContainerId(e){return`${Bi.COMMON_CONTAINER_ID_PREFIX}.${Ut(e)}.${ta()}`}saveViewCustomizations(){const e={viewContainerLocations:{},viewLocations:{},viewContainerBadgeEnablementStates:{}};for(const[t,i]of this.viewContainersCustomLocations){const o=this.getViewContainerById(t);o&&!this.isGeneratedContainerId(t)&&i===this.getDefaultViewContainerLocation(o)||(e.viewContainerLocations[t]=i)}for(const[t,i]of this.viewDescriptorsCustomLocations){const o=this.getViewContainerById(i);if(o){const n=this.getDefaultContainerById(t);if((n==null?void 0:n.id)===o.id)continue}e.viewLocations[t]=i}for(const[t,i]of this.viewContainerBadgeEnablementStates)i===!1&&(e.viewContainerBadgeEnablementStates[t]=i);this.viewCustomizations=e}get viewCustomizations(){return this._viewCustomizations||(this._viewCustomizations=JSON.parse(this.getStoredViewCustomizationsValue()),this._viewCustomizations.viewContainerLocations=this._viewCustomizations.viewContainerLocations??{},this._viewCustomizations.viewLocations=this._viewCustomizations.viewLocations??{},this._viewCustomizations.viewContainerBadgeEnablementStates=this._viewCustomizations.viewContainerBadgeEnablementStates??{}),this._viewCustomizations}set viewCustomizations(e){const t=JSON.stringify(e);JSON.stringify(this.viewCustomizations)!==t&&(this._viewCustomizations=e,this.setStoredViewCustomizationsValue(t))}getStoredViewCustomizationsValue(){return this.storageService.get(Bi.VIEWS_CUSTOMIZATIONS,0,"{}")}setStoredViewCustomizationsValue(e){this.storageService.store(Bi.VIEWS_CUSTOMIZATIONS,e,0,0)}getViewsByContainer(e){const t=this.viewsRegistry.getViews(e).filter(i=>(this.viewDescriptorsCustomLocations.get(i.id)??e.id)===e.id);for(const[i,o]of this.viewDescriptorsCustomLocations.entries()){if(o!==e.id||this.viewsRegistry.getViewContainer(i)===e)continue;const n=this.getViewDescriptorById(i);n&&t.push(n)}return t}onDidRegisterViewContainer(e){const t=this.isGeneratedContainerId(e.id)?!0:this.getViewContainerLocation(e)===this.getDefaultViewContainerLocation(e);this.getOrCreateDefaultViewContainerLocationContextKey(e).set(t),this.getOrRegisterViewContainerModel(e)}getOrRegisterViewContainerModel(e){var i;let t=(i=this.viewContainerModels.get(e))==null?void 0:i.viewContainerModel;if(!t){const o=new P;t=o.add(this.instantiationService.createInstance(Pg,e)),this.onDidChangeActiveViews({added:t.activeViewDescriptors,removed:[]}),t.onDidChangeActiveViewDescriptors(r=>this.onDidChangeActiveViews(r),this,o),this.onDidChangeVisibleViews({added:[...t.visibleViewDescriptors],removed:[]}),t.onDidAddVisibleViewDescriptors(r=>this.onDidChangeVisibleViews({added:r.map(({viewDescriptor:a})=>a),removed:[]}),this,o),t.onDidRemoveVisibleViewDescriptors(r=>this.onDidChangeVisibleViews({added:[],removed:r.map(({viewDescriptor:a})=>a)}),this,o),o.add(ne(()=>this.viewsVisibilityActionDisposables.deleteAndDispose(e))),o.add(this.registerResetViewContainerAction(e));const n={viewContainerModel:t,disposables:o,dispose:()=>o.dispose()};this.viewContainerModels.set(e,n),this.onDidRegisterViews([{views:this.viewsRegistry.getViews(e),viewContainer:e}]);const s=this.getViewsByContainer(e).filter(r=>this.getDefaultContainerById(r.id)!==e);s.length&&(this.addViews(e,s),this.contextKeyService.bufferChangeEvents(()=>{s.forEach(r=>this.getOrCreateMovableViewContextKey(r).set(!!r.canMoveView))})),this.canRegisterViewsVisibilityActions&&this.registerViewsVisibilityActions(e,n)}return t}onDidDeregisterViewContainer(e){this.viewContainerModels.deleteAndDispose(e),this.viewsVisibilityActionDisposables.deleteAndDispose(e)}onDidChangeActiveViews({added:e,removed:t}){this.contextKeyService.bufferChangeEvents(()=>{e.forEach(i=>this.getOrCreateActiveViewContextKey(i).set(!0)),t.forEach(i=>this.getOrCreateActiveViewContextKey(i).set(!1))})}onDidChangeVisibleViews({added:e,removed:t}){this.contextKeyService.bufferChangeEvents(()=>{e.forEach(i=>this.getOrCreateVisibleViewContextKey(i).set(!0)),t.forEach(i=>this.getOrCreateVisibleViewContextKey(i).set(!1))})}registerViewsVisibilityActions(e,{viewContainerModel:t,disposables:i}){this.viewsVisibilityActionDisposables.deleteAndDispose(e),this.viewsVisibilityActionDisposables.set(e,this.registerViewsVisibilityActionsForContainer(t)),i.add(N.any(t.onDidChangeActiveViewDescriptors,t.onDidAddVisibleViewDescriptors,t.onDidRemoveVisibleViewDescriptors,t.onDidMoveVisibleViewDescriptors)(o=>{this.viewsVisibilityActionDisposables.deleteAndDispose(e),this.viewsVisibilityActionDisposables.set(e,this.registerViewsVisibilityActionsForContainer(t))}))}registerViewsVisibilityActionsForContainer(e){const t=new P;return e.activeViewDescriptors.forEach((i,o)=>{i.remoteAuthority||(t.add(C(class extends Ob{constructor(){super({id:`${i.id}.toggleVisibility`,viewPaneContainerId:e.viewContainer.id,precondition:i.canToggleVisibility&&(!e.isVisible(i.id)||e.visibleViewDescriptors.length>1)?y.true():y.false(),toggled:y.has(`${i.id}.visible`),title:i.name,metadata:{description:w(4147,"Toggles the visibility of the {0} view if the view container it is located in is visible",i.name.value)},menu:[{id:bf,when:y.equals("viewContainer",e.viewContainer.id),order:o},{id:b.ViewContainerTitleContext,when:y.and(y.equals("viewContainer",e.viewContainer.id)),order:o,group:"1_toggleVisibility"},{id:b.ViewTitleContext,when:y.and(y.or(...e.visibleViewDescriptors.map(n=>y.equals("view",n.id)))),order:o,group:"2_toggleVisibility"}]})}async runInViewPaneContainer(n,s){s.toggleViewVisibility(i.id)}})),t.add(C(class extends Ob{constructor(){super({id:`${i.id}.removeView`,viewPaneContainerId:e.viewContainer.id,title:d(4148,"Hide '{0}'",i.name.value),metadata:{description:w(4149,"Hides the {0} view if it is visible and the view container it is located in is visible",i.name.value)},precondition:i.canToggleVisibility&&(!e.isVisible(i.id)||e.visibleViewDescriptors.length>1)?y.true():y.false(),menu:[{id:b.ViewTitleContext,when:y.and(y.equals("view",i.id),y.has(`${i.id}.visible`)),group:"1_hide",order:1}]})}async runInViewPaneContainer(n,s){var r;(r=s.getView(i.id))!=null&&r.isVisible()&&s.toggleViewVisibility(i.id)}})))}),t}registerResetViewContainerAction(e){const t=this;return C(class extends A{constructor(){super({id:`${e.id}.resetViewContainerLocation`,title:w(4150,"Reset Location"),menu:[{id:b.ViewContainerTitleContext,when:y.or(y.and(y.equals("viewContainer",e.id),y.equals(`${e.id}.defaultViewContainerLocation`,!1)))}]})}run(){t.moveViewContainerToLocation(e,t.getDefaultViewContainerLocation(e),void 0,this.desc.id)}})}addViews(e,t,i=ca.Default){this.contextKeyService.bufferChangeEvents(()=>{t.forEach(o=>{const n=this.getDefaultContainerById(o.id)===e;this.getOrCreateDefaultViewLocationContextKey(o).set(n),n?this.viewDescriptorsCustomLocations.delete(o.id):this.viewDescriptorsCustomLocations.set(o.id,e.id)})}),this.getViewContainerModel(e).add(t.map(o=>({viewDescriptor:o,collapsed:i===ca.Default?void 0:!1,visible:i===ca.Default?void 0:!0})))}removeViews(e,t){this.contextKeyService.bufferChangeEvents(()=>{t.forEach(i=>{this.viewDescriptorsCustomLocations.get(i.id)===e.id&&this.viewDescriptorsCustomLocations.delete(i.id),this.getOrCreateDefaultViewLocationContextKey(i).set(!1)})}),this.getViewContainerModel(e).remove(t)}getOrCreateActiveViewContextKey(e){const t=`${e.id}.active`;let i=this.activeViewContextKeys.get(t);return i||(i=new j(t,!1).bindTo(this.contextKeyService),this.activeViewContextKeys.set(t,i)),i}getOrCreateVisibleViewContextKey(e){const t=`${e.id}.visible`;let i=this.activeViewContextKeys.get(t);return i||(i=new j(t,!1).bindTo(this.contextKeyService),this.activeViewContextKeys.set(t,i)),i}getOrCreateMovableViewContextKey(e){const t=`${e.id}.canMove`;let i=this.movableViewContextKeys.get(t);return i||(i=new j(t,!1).bindTo(this.contextKeyService),this.movableViewContextKeys.set(t,i)),i}getOrCreateDefaultViewLocationContextKey(e){const t=`${e.id}.defaultViewLocation`;let i=this.defaultViewLocationContextKeys.get(t);return i||(i=new j(t,!1).bindTo(this.contextKeyService),this.defaultViewLocationContextKeys.set(t,i)),i}getOrCreateDefaultViewContainerLocationContextKey(e){const t=`${e.id}.defaultViewContainerLocation`;let i=this.defaultViewContainerLocationContextKeys.get(t);return i||(i=new j(t,!1).bindTo(this.contextKeyService),this.defaultViewContainerLocationContextKeys.set(t,i)),i}},Bi=Jo,Jo.VIEWS_CUSTOMIZATIONS="views.customizations",Jo.COMMON_CONTAINER_ID_PREFIX="workbench.views.service",Jo);Rg=Bi=x([u(0,O),u(1,K),u(2,ie),u(3,Vt),u(4,Be),u(5,hu)],Rg);var ao,go;let Bg=(go=class extends R{constructor(e,t,i,o,n,s,r,a,l){super(),this.editorGroupService=e,this.instantiationService=t,this.configurationService=i,this.quickInputService=o,this.notificationService=n,this.telemetryService=s,this.storageService=r,this.extensionService=a,this.logService=l,this._onDidChangeEditorRegistrations=this._register(new yp),this.onDidChangeEditorRegistrations=this._onDidChangeEditorRegistrations.event,this._editors=new Map,this._flattenedEditors=new Map,this._shouldReFlattenEditors=!0,this.cache=new Set(JSON.parse(this.storageService.get(ao.cacheStorageID,0,JSON.stringify([])))),this.storageService.remove(ao.cacheStorageID,0),this._register(this.storageService.onWillSaveState(()=>{this.cacheEditors()})),this._register(this.extensionService.onDidRegisterExtensions(()=>{this.cache=void 0}))}resolveUntypedInputAndGroup(e,t){const i=e,o=this.instantiationService.invokeFunction(nS,i,t);if(o instanceof Promise)return o.then(([n,s])=>[i,n,s]);{const[n,s]=o;return[i,n,s]}}async resolveEditor(e,t){var g,m,f,v;if(this._flattenedEditors=this._flattenEditorsMap(),Nb(e))return this.doResolveSideBySideEditor(e,t);let i;const o=this.resolveUntypedInputAndGroup(e,t);if(o instanceof Promise?i=await o:i=o,!i)return 2;const[n,s,r]=i;r&&(n.options={...n.options,activation:r});let a=Ie.getCanonicalUri(n,{supportSideBySide:Ce.PRIMARY});if(this.cache&&a&&this.resourceMatchesCache(a)&&await this.extensionService.whenInstalledExtensionsRegistered(),a===void 0)a=z.from({scheme:pe.untitled});else if(a.scheme===void 0||a===null)return 2;if(((g=n.options)==null?void 0:g.override)===dd.PICK){const S=await this.doPickEditor(n);if(!S)return 1;n.options=S}let{editor:l,conflictingDefault:h}=this.getEditor(a,(m=n.options)==null?void 0:m.override);if(!l&&((f=n.options)!=null&&f.override||By(e)))return 2;if(!l){const S=this.getEditor(a,pt.id);if(l=S==null?void 0:S.editor,h=S==null?void 0:S.conflictingDefault,!l)return 2}if(Nu(n)&&((v=n.options)==null?void 0:v.override)===void 0){let S=Ie.getCanonicalUri(n,{supportSideBySide:Ce.SECONDARY});S||(S=z.from({scheme:pe.untitled}));const{editor:E}=this.getEditor(S,void 0);if(!E||l.editorInfo.id!==E.editorInfo.id){const{editor:D,conflictingDefault:V}=this.getEditor(a,pt.id);l=D,h=V}if(!l)return 2}if(n.options={override:l.editorInfo.id,...n.options},l.editorFactoryObject.createDiffEditorInput===void 0&&Nu(n))return 2;const p=await this.doResolveEditor(n,s,l);return h&&p&&await this.doHandleConflictingDefaults(a,l.editorInfo.label,n,p.editor,s),p?(this.sendEditorResolutionTelemetry(p.editor),p.editor.editorId!==l.editorInfo.id&&this.logService.warn(`Editor ID Mismatch: ${p.editor.editorId} !== ${l.editorInfo.id}. This will cause bugs. Please ensure editorInput.editorId matches the registered id`),{...p,group:s}):1}async doResolveSideBySideEditor(e,t){const i=await this.resolveEditor(e.primary,t);if(!Fb(i))return 2;const o=await this.resolveEditor(e.secondary,i.group??t);return Fb(o)?{group:i.group??o.group,editor:this.instantiationService.createInstance(ri,e.label,e.description,o.editor,i.editor),options:e.options}:2}bufferChangeEvents(e){this._onDidChangeEditorRegistrations.pause();try{e()}finally{this._onDidChangeEditorRegistrations.resume()}}registerEditor(e,t,i,o){let n=this._editors.get(e);n===void 0&&(n=new Map,this._editors.set(e,n));let s=n.get(t.id);s===void 0&&(s=[]);const r=Sy(s,{globPattern:e,editorInfo:t,options:i,editorFactoryObject:o});return n.set(t.id,s),this._shouldReFlattenEditors=!0,this._onDidChangeEditorRegistrations.fire(),ne(()=>{r(),s&&s.length===0&&(n==null||n.delete(t.id)),this._shouldReFlattenEditors=!0,this._onDidChangeEditorRegistrations.fire()})}getAssociationsForResource(e){let i=this.getAllUserAssociations().filter(n=>n.filenamePattern&&ld(n.filenamePattern,e));i=i.sort((n,s)=>{var r,a;return(((r=s.filenamePattern)==null?void 0:r.length)??0)-(((a=n.filenamePattern)==null?void 0:a.length)??0)});const o=this._registeredEditors;return i.filter(n=>o.find(s=>s.editorInfo.id===n.viewType))}getAllUserAssociations(){const e=this.configurationService.inspect(Gb)||{},t=e.defaultValue??{},i=e.workspaceValue??{},o=e.userValue??{},n={...i};for(const[r,a]of Object.entries({...t,...o}))n[r]===void 0&&(n[r]=a);const s=[];for(const[r,a]of Object.entries(n)){const l={filenamePattern:r,viewType:a};s.push(l)}return s}_flattenEditorsMap(){if(!this._shouldReFlattenEditors)return this._flattenedEditors;this._shouldReFlattenEditors=!1;const e=new Map;for(const[t,i]of this._editors){const o=[];for(const n of i.values()){let s;for(const r of n)s||(s={editorInfo:r.editorInfo,globPattern:r.globPattern,options:{},editorFactoryObject:{}}),s.options={...s.options,...r.options},s.editorFactoryObject={...s.editorFactoryObject,...r.editorFactoryObject};s&&o.push(s)}e.set(t,o)}return e}get _registeredEditors(){return Array.from(this._flattenedEditors.values()).flat()}updateUserAssociations(e,t){const i={viewType:t,filenamePattern:e},o=this.getAllUserAssociations(),n=Object.create(null);for(const s of[...o,i])s.filenamePattern&&(n[s.filenamePattern]=s.viewType);this.configurationService.updateValue(Gb,n)}findMatchingEditors(e){const t=this.getAssociationsForResource(e),i=[];for(const[o,n]of this._flattenedEditors)for(const s of n)(t.find(a=>a.viewType===s.editorInfo.id)&&s.editorInfo.priority!==Ne.exclusive||ld(o,e))&&i.push(s);return i.sort((o,n)=>si(n.editorInfo.priority)===si(o.editorInfo.priority)&&typeof n.globPattern=="string"&&typeof o.globPattern=="string"?n.globPattern.length-o.globPattern.length:si(n.editorInfo.priority)-si(o.editorInfo.priority))}getEditors(e){if(this._flattenedEditors=this._flattenEditorsMap(),z.isUri(e)){const t=this.findMatchingEditors(e);return t.find(i=>i.editorInfo.priority===Ne.exclusive)?[]:t.map(i=>i.editorInfo)}return jo(this._registeredEditors.map(t=>t.editorInfo),t=>t.id)}getEditor(e,t){var h;const i=(p,g)=>p.find(m=>m.options&&m.options.canSupportResource!==void 0?m.editorInfo.id===g&&m.options.canSupportResource(e):m.editorInfo.id===g);if(t&&t!==dd.EXCLUSIVE_ONLY){const p=this._registeredEditors;return{editor:i(p,t),conflictingDefault:!1}}const o=this.findMatchingEditors(e),n=this.getAssociationsForResource(e),s=t===dd.EXCLUSIVE_ONLY?Ne.exclusive:Ne.builtin;let r=o.filter(p=>si(p.editorInfo.priority)>=si(s)&&p.editorInfo.id!==pt.id);if(r.length===0)return{editor:n[0]&&s!==Ne.exclusive?i(o,n[0].viewType):void 0,conflictingDefault:!1};const a=r[0].editorInfo.priority===Ne.exclusive?r[0].editorInfo.id:((h=n[0])==null?void 0:h.viewType)||r[0].editorInfo.id;let l=!1;return r=r.filter(p=>p.editorInfo.priority!==Ne.exclusive),n.length===0&&r.length>1&&(l=!0),{editor:i(o,a),conflictingDefault:l}}async doResolveEditor(e,t,i){var l,h;let o=e.options;const n=Ie.getCanonicalUri(e,{supportSideBySide:Ce.PRIMARY});if(o&&typeof o.activation>"u"&&(o={...o,activation:o.preserveFocus?Fo.RESTORE:void 0}),ex(e)){if(!i.editorFactoryObject.createMergeEditorInput)return;const p=await i.editorFactoryObject.createMergeEditorInput(e,t);return{editor:p.editor,options:p.options??o}}if(Nu(e)){if(!i.editorFactoryObject.createDiffEditorInput)return;const p=await i.editorFactoryObject.createDiffEditorInput(e,t);return{editor:p.editor,options:p.options??o}}if(tx(e)){if(!i.editorFactoryObject.createMultiDiffEditorInput)return;const p=await i.editorFactoryObject.createMultiDiffEditorInput(e,t);return{editor:p.editor,options:p.options??o}}if(Nb(e))throw new Error("Untyped side by side editor input not supported here.");if(ix(e)){if(!i.editorFactoryObject.createUntitledEditorInput)return;const p=await i.editorFactoryObject.createUntitledEditorInput(e,t);return{editor:p.editor,options:p.options??o}}if(n===void 0)throw new Error("Undefined resource on non untitled editor input.");if(typeof((l=i.options)==null?void 0:l.singlePerResource)=="function"?i.options.singlePerResource():(h=i.options)==null?void 0:h.singlePerResource){const p=this.findExistingEditorsForResource(n,i.editorInfo.id);if(p.length){const g=await this.moveExistingEditorForResource(p,t);return g?{editor:g,options:o}:void 0}}if(!i.editorFactoryObject.createEditorInput)return;const r=await i.editorFactoryObject.createEditorInput(e,t);return o=r.options??o,{editor:r.editor,options:o}}async moveExistingEditorForResource(e,t){const i=e[0];for(const{editor:o,group:n}of e)if(o!==i.editor&&!await n.closeEditor(o))return;if(!(t.id!==i.group.id&&!i.group.moveEditor(i.editor,t)))return i.editor}findExistingEditorsForResource(e,t){const i=[],o=jo([...this.editorGroupService.groups]);for(const n of o)for(const s of n.editors)ot(s.resource,e)&&s.editorId===t&&i.push({editor:s,group:n});return i}async doHandleConflictingDefaults(e,t,i,o,n){const s=this.findMatchingEditors(e),r=JSON.parse(this.storageService.get(ao.conflictingDefaultsStorageID,0,"{}")),a=`*${yi(e)}`,l=()=>{r[a]=[],s.forEach(g=>r[a].push(g.editorInfo.id)),this.storageService.store(ao.conflictingDefaultsStorageID,JSON.stringify(r),0,1)};if(r[a]&&r[a].find(g=>g===o.editorId))return;const p=this.notificationService.prompt(me.Warning,d(4151,"There are multiple default editors available for the resource."),[{label:d(4152,"Configure Default"),run:async()=>{const g=await this.doPickEditor(i,!0);if(!g)return;i.options=g;const m=await this.resolveEditor(i,n);m===1||m===2||n.replaceEditors([{editor:o,replacement:m.editor,options:m.options??g}])}},{label:d(4153,"Keep {0}",t),run:l}]).onDidClose(()=>{l(),p.dispose()})}mapEditorsToQuickPickEntry(e,t){var p,g,m;const i=this.editorGroupService.activeGroup.findEditors(e).at(0);let o=e.scheme===pe.untitled?this._registeredEditors.filter(f=>f.editorInfo.priority!==Ne.exclusive):this.findMatchingEditors(e);o=jo(o,f=>f.editorInfo.id);const n=(p=this.getAssociationsForResource(e)[0])==null?void 0:p.viewType;o=o.sort((f,v)=>f.editorInfo.id===pt.id?-1:v.editorInfo.id===pt.id?1:si(v.editorInfo.priority)-si(f.editorInfo.priority));const s=[],r=d(4154,"Active"),a=d(4155,"Default"),l=d(4156,"Active and Default");let h=n;if(!h&&o.length>2&&((g=o[1])==null?void 0:g.editorInfo.priority)!==Ne.option&&(h=(m=o[1])==null?void 0:m.editorInfo.id),h||(h=pt.id),o.forEach(f=>{const v=(i==null?void 0:i.editorId)??pt.id,S=i?f.editorInfo.id===v:!1,E=f.editorInfo.id===h,D={id:f.editorInfo.id,label:f.editorInfo.label,description:S&&E?l:S?r:E?a:void 0,detail:f.editorInfo.detail??f.editorInfo.priority};s.push(D)}),!t&&yi(e)!==""){const f={type:"separator"};s.push(f);const v={id:ao.configureDefaultID,label:d(4157,"Configure default editor for '{0}'...",`*${yi(e)}`)};s.push(v)}return s}async doPickEditor(e,t){var h;let i=Ie.getOriginalUri(e,{supportSideBySide:Ce.PRIMARY});i===void 0&&(i=z.from({scheme:pe.untitled}));const o=this.mapEditorsToQuickPickEntry(i,t),n=new P,s=n.add(this.quickInputService.createQuickPick({useSeparators:!0})),r=t?d(4158,"Select new default editor for '{0}'",`*${yi(i)}`):d(4159,"Select editor for '{0}'",mt(i));s.placeholder=r,s.canAcceptInBackground=!0,s.items=o;const a=s.items.find(p=>p.type==="item");a&&(s.selectedItems=[a]);const l=await new Promise(p=>{n.add(s.onDidAccept(g=>{let m;s.selectedItems.length===1&&(m={item:s.selectedItems[0],keyMods:s.keyMods,openInBackground:g.inBackground}),i&&t&&(m!=null&&m.item.id)&&this.updateUserAssociations(`*${yi(i)}`,m.item.id),p(m)})),n.add(s.onDidHide(()=>{n.dispose(),p(void 0)})),n.add(s.onDidTriggerItemButton(g=>{p({item:g.item,openInBackground:!1}),i&&g.item&&g.item.id&&this.updateUserAssociations(`*${yi(i)}`,g.item.id)})),s.show()});if(s.dispose(),l)return l.item.id===ao.configureDefaultID?this.doPickEditor(e,!0):{...e.options,override:l.item.id,preserveFocus:l.openInBackground||((h=e.options)==null?void 0:h.preserveFocus)}}sendEditorResolutionTelemetry(e){e.editorId&&this.telemetryService.publicLog2("override.viewType",{viewType:e.editorId})}cacheEditors(){const e=new Set;for(const[i,o]of this._flattenedEditors)o.find(s=>s.editorInfo.priority!==Ne.option&&s.editorInfo.id!==pt.id)&&(ox(i)?e.add(`${i.pattern}`):e.add(i));const t=this.getAllUserAssociations();for(const i of t)i.filenamePattern&&e.add(i.filenamePattern);this.storageService.store(ao.cacheStorageID,JSON.stringify(Array.from(e)),0,1)}resourceMatchesCache(e){if(!this.cache)return!1;for(const t of this.cache)if(ld(t,e))return!0;return!1}},ao=go,go.configureDefaultID="promptOpenWith.configureDefault",go.cacheStorageID="editorOverrideService.cache",go.conflictingDefaultsStorageID="editorOverrideService.conflictingDefaults",go);Bg=ao=x([u(0,Z),u(1,O),u(2,F),u(3,Fe),u(4,He),u(5,Be),u(6,ie),u(7,Vt),u(8,Je)],Bg);var Og,is;let Ng=(is=class extends R{constructor(e,t){super(),this.instantiationService=e,this.configurationService=t,this._onDidChangeDirty=this._register(new I),this.onDidChangeDirty=this._onDidChangeDirty.event,this._onDidChangeEncoding=this._register(new I),this.onDidChangeEncoding=this._onDidChangeEncoding.event,this._onDidCreate=this._register(new I),this.onDidCreate=this._onDidCreate.event,this._onWillDispose=this._register(new I),this.onWillDispose=this._onWillDispose.event,this._onDidChangeLabel=this._register(new I),this.onDidChangeLabel=this._onDidChangeLabel.event,this.mapResourceToModel=new Bt}get(e){return this.mapResourceToModel.get(e)}getValue(e){var t,i;return(i=(t=this.get(e))==null?void 0:t.textEditorModel)==null?void 0:i.getValue()}async resolve(e){const t=this.doCreateOrGet(e);return await t.resolve(),t}create(e){return this.doCreateOrGet(e)}doCreateOrGet(e=Object.create(null)){const t=this.massageOptions(e);return t.untitledResource&&this.mapResourceToModel.has(t.untitledResource)?this.mapResourceToModel.get(t.untitledResource):this.doCreate(t)}massageOptions(e){var i,o;const t=Object.create(null);if(e.associatedResource?(t.untitledResource=z.from({scheme:pe.untitled,authority:e.associatedResource.authority,fragment:e.associatedResource.fragment,path:e.associatedResource.path,query:e.associatedResource.query}),t.associatedResource=e.associatedResource):((i=e.untitledResource)==null?void 0:i.scheme)===pe.untitled&&(t.untitledResource=e.untitledResource),e.languageId)t.languageId=e.languageId;else if(!t.associatedResource){const n=this.configurationService.getValue();(o=n.files)!=null&&o.defaultLanguage&&(t.languageId=n.files.defaultLanguage)}return t.encoding=e.encoding,t.initialValue=e.initialValue,t}doCreate(e){let t=e.untitledResource;if(!t){let o=1;do t=z.from({scheme:pe.untitled,path:`Untitled-${o}`}),o++;while(this.mapResourceToModel.has(t))}const i=this._register(this.instantiationService.createInstance(nx,t,!!e.associatedResource,e.initialValue,e.languageId,e.encoding));return this.registerModel(i),i}registerModel(e){const t=new P;t.add(e.onDidChangeDirty(()=>this._onDidChangeDirty.fire(e))),t.add(e.onDidChangeName(()=>this._onDidChangeLabel.fire(e))),t.add(e.onDidChangeEncoding(()=>this._onDidChangeEncoding.fire(e))),t.add(e.onWillDispose(()=>this._onWillDispose.fire(e))),N.once(e.onWillDispose)(()=>{this.mapResourceToModel.delete(e.resource),t.dispose()}),this.mapResourceToModel.set(e.resource,e),this._onDidCreate.fire(e),e.isDirty()&&this._onDidChangeDirty.fire(e)}isUntitledWithAssociatedResource(e){return e.scheme===pe.untitled&&e.path.length>1&&!Og.UNTITLED_WITHOUT_ASSOCIATED_RESOURCE_REGEX.test(e.path)}canDispose(e){return e.isDisposed()?!0:this.doCanDispose(e)}async doCanDispose(e){return e.isDirty()?(await N.toPromise(e.onDidChangeDirty),this.canDispose(e)):!0}},Og=is,is.UNTITLED_WITHOUT_ASSOCIATED_RESOURCE_REGEX=/Untitled-\d+/,is);Ng=Og=x([u(0,O),u(1,F)],Ng);var Oi,Fg,ki;let _l=(ki=class extends R{constructor(e,t,i,o,n,s,r,a,l,h,p){super(),this.editorService=e,this.editorGroupService=t,this.contextService=i,this.storageService=o,this.configurationService=n,this.fileService=s,this.workspacesService=r,this.instantiationService=a,this.layoutService=l,this.contextKeyService=h,this.logService=p,this.activeEditorListeners=this._register(new P),this.lastActiveEditor=void 0,this.editorHelper=this.instantiationService.createInstance(xl),this.canNavigateBackContextKey=new j("canNavigateBack",!1,d(4201,"Whether it is possible to navigate back in editor history")).bindTo(this.contextKeyService),this.canNavigateForwardContextKey=new j("canNavigateForward",!1,d(4202,"Whether it is possible to navigate forward in editor history")).bindTo(this.contextKeyService),this.canNavigateBackInNavigationsContextKey=new j("canNavigateBackInNavigationLocations",!1,d(4203,"Whether it is possible to navigate back in editor navigation locations history")).bindTo(this.contextKeyService),this.canNavigateForwardInNavigationsContextKey=new j("canNavigateForwardInNavigationLocations",!1,d(4204,"Whether it is possible to navigate forward in editor navigation locations history")).bindTo(this.contextKeyService),this.canNavigateToLastNavigationLocationContextKey=new j("canNavigateToLastNavigationLocation",!1,d(4205,"Whether it is possible to navigate to the last editor navigation location")).bindTo(this.contextKeyService),this.canNavigateBackInEditsContextKey=new j("canNavigateBackInEditLocations",!1,d(4206,"Whether it is possible to navigate back in editor edit locations history")).bindTo(this.contextKeyService),this.canNavigateForwardInEditsContextKey=new j("canNavigateForwardInEditLocations",!1,d(4207,"Whether it is possible to navigate forward in editor edit locations history")).bindTo(this.contextKeyService),this.canNavigateToLastEditLocationContextKey=new j("canNavigateToLastEditLocation",!1,d(4208,"Whether it is possible to navigate to the last editor edit location")).bindTo(this.contextKeyService),this.canReopenClosedEditorContextKey=new j("canReopenClosedEditor",!1,d(4209,"Whether it is possible to reopen the last closed editor")).bindTo(this.contextKeyService),this._onDidChangeEditorNavigationStack=this._register(new I),this.onDidChangeEditorNavigationStack=this._onDidChangeEditorNavigationStack.event,this.defaultScopedEditorNavigationStack=void 0,this.editorGroupScopedNavigationStacks=new Map,this.editorScopedNavigationStacks=new Map,this.editorNavigationScope=0,this.recentlyUsedEditorsStack=void 0,this.recentlyUsedEditorsStackIndex=0,this.recentlyUsedEditorsInGroupStack=void 0,this.recentlyUsedEditorsInGroupStackIndex=0,this.navigatingInRecentlyUsedEditorsStack=!1,this.navigatingInRecentlyUsedEditorsInGroupStack=!1,this.recentlyClosedEditors=[],this.ignoreEditorCloseEvent=!1,this.history=void 0,this.editorHistoryListeners=new Map,this.resourceExcludeMatcher=this._register(new sx(ge,()=>{const g=this._register(this.instantiationService.createInstance(rx,m=>ax(m?this.configurationService.getValue({resource:m}):this.configurationService.getValue())||Object.create(null),m=>m.affectsConfiguration(cx)||m.affectsConfiguration(dx)));return this._register(g.onExpressionChange(()=>this.removeExcludedFromHistory())),g})),this.registerListeners(),this.editorService.activeEditorPane&&this.onDidActiveEditorChange()}registerListeners(){this.registerMouseNavigationListener(),this._register(this.editorService.onDidActiveEditorChange(()=>this.onDidActiveEditorChange())),this._register(this.editorService.onDidOpenEditorFail(e=>this.remove(e.editor))),this._register(this.editorService.onDidCloseEditor(e=>this.onDidCloseEditor(e))),this._register(this.editorService.onDidMostRecentlyActiveEditorsChange(()=>this.handleEditorEventInRecentEditorsStack())),this._register(this.editorGroupService.onDidRemoveGroup(e=>this.onDidRemoveGroup(e))),this._register(this.fileService.onDidFilesChange(e=>this.onDidFilesChange(e))),this._register(this.fileService.onDidRunOperation(e=>this.onDidFilesChange(e))),this._register(this.storageService.onWillSaveState(()=>this.saveState())),this.registerEditorNavigationScopeChangeListener(),this._register(this.onDidChangeEditorNavigationStack(()=>this.updateContextKeys())),this._register(this.editorGroupService.onDidChangeActiveGroup(()=>this.updateContextKeys()))}onDidCloseEditor(e){this.handleEditorCloseEventInHistory(e),this.handleEditorCloseEventInReopen(e)}registerMouseNavigationListener(){const e=this._register(new P),t=()=>{e.clear(),this.configurationService.getValue(Oi.MOUSE_NAVIGATION_SETTING)&&this._register(N.runAndSubscribe(this.layoutService.onDidAddContainer,({container:i,disposables:o})=>{const n=o.add(new P);n.add(L(i,B.MOUSE_DOWN,s=>this.onMouseDownOrUp(s,!0))),n.add(L(i,B.MOUSE_UP,s=>this.onMouseDownOrUp(s,!1))),e.add(n)},{container:this.layoutService.mainContainer,disposables:this._store}))};this._register(this.configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration(Oi.MOUSE_NAVIGATION_SETTING)&&t()})),t()}onMouseDownOrUp(e,t){switch(e.button){case 3:re.stop(e),t&&this.goBack();break;case 4:re.stop(e),t&&this.goForward();break}}onDidRemoveGroup(e){this.handleEditorGroupRemoveInNavigationStacks(e)}onDidActiveEditorChange(){var i,o;const e=this.editorGroupService.activeGroup,t=e.activeEditorPane;if(!(this.lastActiveEditor&&this.editorHelper.matchesEditorIdentifier(this.lastActiveEditor,t))){if(this.lastActiveEditor=t!=null&&t.input?{editor:t.input,groupId:t.group.id}:void 0,this.activeEditorListeners.clear(),!(t!=null&&t.group.isTransient(t.input)))this.handleActiveEditorChange(e,t);else{this.logService.trace(`[History]: ignoring transient editor change until becoming non-transient (editor: ${(o=(i=t.input)==null?void 0:i.resource)==null?void 0:o.toString()}})`);const n=e.onDidModelChange(s=>{s.kind===12&&s.editor===t.input&&!t.group.isTransient(t.input)&&(n.dispose(),this.handleActiveEditorChange(e,t))});this.activeEditorListeners.add(n)}Cp(t)&&this.activeEditorListeners.add(t.onDidChangeSelection(n=>{var s,r;t.group.isTransient(t.input)?this.logService.trace(`[History]: ignoring transient editor selection change (editor: ${(r=(s=t.input)==null?void 0:s.resource)==null?void 0:r.toString()}})`):this.handleActiveEditorSelectionChangeEvent(e,t,n)})),this.updateContextKeys()}}onDidFilesChange(e){e instanceof ka?e.gotDeleted()&&this.remove(e):e.isOperation(1)?this.remove(e):e.isOperation(2)&&e.target.isFile&&this.move(e)}handleActiveEditorChange(e,t){this.handleActiveEditorChangeInHistory(t),this.handleActiveEditorChangeInNavigationStacks(e,t)}handleActiveEditorSelectionChangeEvent(e,t,i){this.handleActiveEditorSelectionChangeInNavigationStacks(e,t,i)}move(e){this.moveInHistory(e),this.moveInEditorNavigationStacks(e)}remove(e){this.removeFromHistory(e),this.removeFromEditorNavigationStacks(e),this.removeFromRecentlyClosedEditors(e),this.removeFromRecentlyOpened(e)}removeFromRecentlyOpened(e){let t;gt(e)?t=Ie.getOriginalUri(e):e instanceof ka||(t=e.resource),t&&this.workspacesService.removeRecentlyOpened([t])}clear(){this.clearRecentlyOpened(),this.clearEditorNavigationStacks(),this.recentlyClosedEditors=[],this.updateContextKeys()}updateContextKeys(){this.contextKeyService.bufferChangeEvents(()=>{const e=this.getStack();this.canNavigateBackContextKey.set(e.canGoBack(0)),this.canNavigateForwardContextKey.set(e.canGoForward(0)),this.canNavigateBackInNavigationsContextKey.set(e.canGoBack(2)),this.canNavigateForwardInNavigationsContextKey.set(e.canGoForward(2)),this.canNavigateToLastNavigationLocationContextKey.set(e.canGoLast(2)),this.canNavigateBackInEditsContextKey.set(e.canGoBack(1)),this.canNavigateForwardInEditsContextKey.set(e.canGoForward(1)),this.canNavigateToLastEditLocationContextKey.set(e.canGoLast(1)),this.canReopenClosedEditorContextKey.set(this.recentlyClosedEditors.length>0)})}registerEditorNavigationScopeChangeListener(){const e=()=>{this.disposeEditorNavigationStacks();const t=this.configurationService.getValue(Oi.NAVIGATION_SCOPE_SETTING);t==="editorGroup"?this.editorNavigationScope=1:t==="editor"?this.editorNavigationScope=2:this.editorNavigationScope=0};this._register(this.configurationService.onDidChangeConfiguration(t=>{t.affectsConfiguration(Oi.NAVIGATION_SCOPE_SETTING)&&e()})),e()}getStack(e=this.editorGroupService.activeGroup,t=e.activeEditor){var i,o;switch(this.editorNavigationScope){case 2:{if(!t)return new S0;let n=this.editorScopedNavigationStacks.get(e.id);n||(n=new Map,this.editorScopedNavigationStacks.set(e.id,n));let s=(i=n.get(t))==null?void 0:i.stack;if(!s){const r=new P;s=r.add(this.instantiationService.createInstance(Ra,2)),r.add(s.onDidChange(()=>this._onDidChangeEditorNavigationStack.fire())),n.set(t,{stack:s,disposable:r})}return s}case 1:{let n=(o=this.editorGroupScopedNavigationStacks.get(e.id))==null?void 0:o.stack;if(!n){const s=new P;n=s.add(this.instantiationService.createInstance(Ra,1)),s.add(n.onDidChange(()=>this._onDidChangeEditorNavigationStack.fire())),this.editorGroupScopedNavigationStacks.set(e.id,{stack:n,disposable:s})}return n}case 0:return this.defaultScopedEditorNavigationStack||(this.defaultScopedEditorNavigationStack=this._register(this.instantiationService.createInstance(Ra,0)),this._register(this.defaultScopedEditorNavigationStack.onDidChange(()=>this._onDidChangeEditorNavigationStack.fire()))),this.defaultScopedEditorNavigationStack}}goForward(e){return this.getStack().goForward(e)}goBack(e){return this.getStack().goBack(e)}goPrevious(e){return this.getStack().goPrevious(e)}goLast(e){return this.getStack().goLast(e)}handleActiveEditorChangeInNavigationStacks(e,t){this.getStack(e,t==null?void 0:t.input).handleActiveEditorChange(t)}handleActiveEditorSelectionChangeInNavigationStacks(e,t,i){this.getStack(e,t.input).handleActiveEditorSelectionChange(t,i)}handleEditorCloseEventInHistory(e){const t=this.editorScopedNavigationStacks.get(e.groupId);if(t){const i=t.get(e.editor);i&&(i.disposable.dispose(),t.delete(e.editor)),t.size===0&&this.editorScopedNavigationStacks.delete(e.groupId)}}handleEditorGroupRemoveInNavigationStacks(e){var i;(i=this.defaultScopedEditorNavigationStack)==null||i.remove(e.id);const t=this.editorGroupScopedNavigationStacks.get(e.id);t&&(t.disposable.dispose(),this.editorGroupScopedNavigationStacks.delete(e.id))}clearEditorNavigationStacks(){this.withEachEditorNavigationStack(e=>e.clear())}removeFromEditorNavigationStacks(e){this.withEachEditorNavigationStack(t=>t.remove(e))}moveInEditorNavigationStacks(e){this.withEachEditorNavigationStack(t=>t.move(e))}withEachEditorNavigationStack(e){this.defaultScopedEditorNavigationStack&&e(this.defaultScopedEditorNavigationStack);for(const[,t]of this.editorGroupScopedNavigationStacks)e(t.stack);for(const[,t]of this.editorScopedNavigationStacks)for(const[,i]of t)e(i.stack)}disposeEditorNavigationStacks(){var e;(e=this.defaultScopedEditorNavigationStack)==null||e.dispose(),this.defaultScopedEditorNavigationStack=void 0;for(const[,t]of this.editorGroupScopedNavigationStacks)t.disposable.dispose();this.editorGroupScopedNavigationStacks.clear();for(const[,t]of this.editorScopedNavigationStacks)for(const[,i]of t)i.disposable.dispose();this.editorScopedNavigationStacks.clear()}openNextRecentlyUsedEditor(e){const[t,i]=this.ensureRecentlyUsedStack(o=>o-1,e);return this.doNavigateInRecentlyUsedEditorsStack(t[i],e)}openPreviouslyUsedEditor(e){const[t,i]=this.ensureRecentlyUsedStack(o=>o+1,e);return this.doNavigateInRecentlyUsedEditorsStack(t[i],e)}async doNavigateInRecentlyUsedEditorsStack(e,t){if(e){const i=typeof t!="number"||!this.editorGroupService.getGroup(t);i?this.navigatingInRecentlyUsedEditorsStack=!0:this.navigatingInRecentlyUsedEditorsInGroupStack=!0;const o=this.editorGroupService.getGroup(e.groupId)??this.editorGroupService.activeGroup;try{await o.openEditor(e.editor)}finally{i?this.navigatingInRecentlyUsedEditorsStack=!1:this.navigatingInRecentlyUsedEditorsInGroupStack=!1}}}ensureRecentlyUsedStack(e,t){let i,o;const n=typeof t=="number"?this.editorGroupService.getGroup(t):void 0;n?(i=this.recentlyUsedEditorsInGroupStack||n.getEditors(0).map(r=>({groupId:n.id,editor:r})),o=this.recentlyUsedEditorsInGroupStackIndex):(i=this.recentlyUsedEditorsStack||this.editorService.getEditors(0),o=this.recentlyUsedEditorsStackIndex);let s=e(o);return s<0?s=0:s>i.length-1&&(s=i.length-1),n?(this.recentlyUsedEditorsInGroupStack=i,this.recentlyUsedEditorsInGroupStackIndex=s):(this.recentlyUsedEditorsStack=i,this.recentlyUsedEditorsStackIndex=s),[i,s]}handleEditorEventInRecentEditorsStack(){this.navigatingInRecentlyUsedEditorsStack||(this.recentlyUsedEditorsStack=void 0,this.recentlyUsedEditorsStackIndex=0),this.navigatingInRecentlyUsedEditorsInGroupStack||(this.recentlyUsedEditorsInGroupStack=void 0,this.recentlyUsedEditorsInGroupStackIndex=0)}handleEditorCloseEventInReopen(e){if(this.ignoreEditorCloseEvent)return;const{editor:t,context:i}=e;if(i===Mn.REPLACE||i===Mn.MOVE)return;const o=t.toUntyped();if(!o)return;const n=[],s=Ie.getOriginalUri(t,{supportSideBySide:Ce.BOTH});z.isUri(s)?n.push(s):s&&n.push(...hi([s.primary,s.secondary])),this.removeFromRecentlyClosedEditors(t),this.recentlyClosedEditors.push({editorId:t.editorId,editor:o,resource:Ie.getOriginalUri(t),associatedResources:n,index:e.index,sticky:e.sticky}),this.recentlyClosedEditors.length>Oi.MAX_RECENTLY_CLOSED_EDITORS&&this.recentlyClosedEditors.shift(),this.canReopenClosedEditorContextKey.set(!0)}async reopenLastClosedEditor(){const e=this.recentlyClosedEditors.pop();let t;return e&&(t=this.doReopenLastClosedEditor(e)),this.canReopenClosedEditorContextKey.set(this.recentlyClosedEditors.length>0),t}async doReopenLastClosedEditor(e){const t={pinned:!0,sticky:e.sticky,index:e.index,ignoreError:!0};(e.sticky&&!this.editorGroupService.activeGroup.isSticky(e.index)||!e.sticky&&this.editorGroupService.activeGroup.isSticky(e.index))&&(t.index=void 0);let i;if(!this.editorGroupService.activeGroup.contains(e.editor)){this.ignoreEditorCloseEvent=!0;try{i=await this.editorService.openEditor({...e.editor,options:{...e.editor.options,...t}})}finally{this.ignoreEditorCloseEvent=!1}}i||(lx(this.recentlyClosedEditors,e),this.reopenLastClosedEditor())}removeFromRecentlyClosedEditors(e){this.recentlyClosedEditors=this.recentlyClosedEditors.filter(t=>gt(e)&&t.editorId!==e.editorId?!0:!(t.resource&&this.editorHelper.matchesFile(t.resource,e)||t.associatedResources.some(i=>this.editorHelper.matchesFile(i,e)))),this.canReopenClosedEditorContextKey.set(this.recentlyClosedEditors.length>0)}handleActiveEditorChangeInHistory(e){const t=e==null?void 0:e.input;!t||t.isDisposed()||!this.includeInHistory(t)||(this.removeFromHistory(t),this.addToHistory(t))}addToHistory(e,t=!0){this.ensureHistoryLoaded(this.history);const i=this.editorHelper.preferResourceEditorInput(e);i&&(t?this.history.unshift(i):this.history.push(i),this.history.length>Oi.MAX_HISTORY_ITEMS&&this.editorHelper.clearOnEditorDispose(this.history.pop(),this.editorHistoryListeners),gt(e)&&this.editorHelper.onEditorDispose(e,()=>this.updateHistoryOnEditorDispose(i),this.editorHistoryListeners))}updateHistoryOnEditorDispose(e){if(gt(e))if(!hx(e))this.removeFromHistory(e);else{const t=[],i=e.primary.matches(e.secondary)?[e.primary]:[e.primary,e.secondary];for(const o of i){const n=this.editorHelper.preferResourceEditorInput(o);Sp(n)&&this.includeInHistory(n)&&t.push(n)}this.replaceInHistory(e,...t)}else this.includeInHistory(e)||this.removeFromHistory(e)}includeInHistory(e){return gt(e)?!0:!this.resourceExcludeMatcher.value.matches(e.resource)}removeExcludedFromHistory(){this.ensureHistoryLoaded(this.history),this.history=this.history.filter(e=>{const t=this.includeInHistory(e);return t||this.editorHelper.clearOnEditorDispose(e,this.editorHistoryListeners),t})}moveInHistory(e){e.isOperation(2)&&this.removeFromHistory(e)&&this.addToHistory({resource:e.target.resource})}removeFromHistory(e){let t=!1;return this.ensureHistoryLoaded(this.history),this.history=this.history.filter(i=>{const o=this.editorHelper.matchesEditor(e,i);return o&&(this.editorHelper.clearOnEditorDispose(e,this.editorHistoryListeners),t=!0),!o}),t}replaceInHistory(e,...t){this.ensureHistoryLoaded(this.history);let i=!1;const o=[];for(const n of this.history)this.editorHelper.matchesEditor(e,n)?(this.editorHelper.clearOnEditorDispose(e,this.editorHistoryListeners),i||(o.push(...t),i=!0)):t.some(s=>this.editorHelper.matchesEditor(s,n))||o.push(n);i||o.push(...t),this.history=o}clearRecentlyOpened(){this.history=[];for(const[,e]of this.editorHistoryListeners)Re(e);this.editorHistoryListeners.clear()}getHistory(){return this.ensureHistoryLoaded(this.history),this.history}ensureHistoryLoaded(e){this.history||(this.history=[],this.editorGroupService.isReady?this.loadHistory():(async()=>(await this.editorGroupService.whenReady,this.loadHistory()))())}loadHistory(){var o;this.history=[];const e=this.loadHistoryFromStorage(),t=[...this.editorService.getEditors(0)].reverse(),i=new Set;for(const{editor:n}of t)this.includeInHistory(n)&&(this.addToHistory(n),n.resource&&i.add(`${n.resource.toString()}/${n.editorId}`));for(const n of e)!i.has(`${n.resource.toString()}/${(o=n.options)==null?void 0:o.override}`)&&this.includeInHistory(n)&&this.addToHistory(n,!1)}loadHistoryFromStorage(){const e=[],t=this.storageService.get(Oi.HISTORY_STORAGE_KEY,1);if(t)try{const i=JSON.parse(t);for(const o of i)if(!(!o.editor||!o.editor.resource))try{e.push({...o.editor,resource:typeof o.editor.resource=="string"?z.parse(o.editor.resource):z.from(o.editor.resource)})}catch(n){gn(n)}}catch(i){gn(i)}return e}saveState(){if(!this.history)return;const e=[];for(const t of this.history)gt(t)||!Sp(t)||e.push({editor:{...t,resource:t.resource.toString()}});this.storageService.store(Oi.HISTORY_STORAGE_KEY,JSON.stringify(e),1,1)}getLastActiveWorkspaceRoot(e,t){const i=this.contextService.getWorkspace().folders;if(i.length!==0){if(i.length===1){const o=i[0].uri;return(!e||o.scheme===e)&&(!t||o.authority===t)?o:void 0}for(const o of this.getHistory()){if(gt(o)||e&&o.resource.scheme!==e||t&&o.resource.authority!==t)continue;const n=this.contextService.getWorkspaceFolder(o.resource);if(n)return n.uri}for(const o of i){const n=o.uri;if((!e||n.scheme===e)&&(!t||n.authority===t))return n}}}getLastActiveFile(e,t){for(const i of this.getHistory()){let o;if(gt(i)?o=Ie.getOriginalUri(i,{filterByScheme:e}):o=i.resource,o&&o.scheme===e&&(!t||o.authority===t))return o}}dispose(){super.dispose();for(const[,e]of this.editorGroupScopedNavigationStacks)e.disposable.dispose();for(const[,e]of this.editorScopedNavigationStacks)for(const[,t]of e)t.disposable.dispose();for(const[,e]of this.editorHistoryListeners)e.dispose()}},Oi=ki,ki.MOUSE_NAVIGATION_SETTING="workbench.editor.mouseBackForwardToNavigate",ki.NAVIGATION_SCOPE_SETTING="workbench.editor.navigationScope",ki.MAX_RECENTLY_CLOSED_EDITORS=20,ki.MAX_HISTORY_ITEMS=200,ki.HISTORY_STORAGE_KEY="history.entries",ki);_l=Oi=x([u(0,U),u(1,Z),u(2,ei),u(3,ie),u(4,F),u(5,Oe),u(6,tu),u(7,O),u(8,Y),u(9,K),u(10,Je)],_l);ux(tt,_l,0);class qw{constructor(e,t,i){this.editorIdentifier=e,this.selection=t,this.reason=i}justifiesNewNavigationEntry(e){if(this.editorIdentifier.groupId!==e.editorIdentifier.groupId||!this.editorIdentifier.editor.matches(e.editorIdentifier.editor)||!this.selection||!e.selection)return!0;const t=this.selection.compare(e.selection);return t===2&&(e.reason===4||e.reason===5)?!0:t===3}}let Ra=class extends R{constructor(e,t){super(),this.scope=e,this.instantiationService=t,this.selectionsStack=this._register(this.instantiationService.createInstance(Ba,0,this.scope)),this.editsStack=this._register(this.instantiationService.createInstance(Ba,1,this.scope)),this.navigationsStack=this._register(this.instantiationService.createInstance(Ba,2,this.scope)),this.stacks=[this.selectionsStack,this.editsStack,this.navigationsStack],this.onDidChange=N.any(this.selectionsStack.onDidChange,this.editsStack.onDidChange,this.navigationsStack.onDidChange)}canGoForward(e){return this.getStack(e).canGoForward()}goForward(e){return this.getStack(e).goForward()}canGoBack(e){return this.getStack(e).canGoBack()}goBack(e){return this.getStack(e).goBack()}goPrevious(e){return this.getStack(e).goPrevious()}canGoLast(e){return this.getStack(e).canGoLast()}goLast(e){return this.getStack(e).goLast()}getStack(e=0){switch(e){case 0:return this.selectionsStack;case 1:return this.editsStack;case 2:return this.navigationsStack}}handleActiveEditorChange(e){this.selectionsStack.notifyNavigation(e)}handleActiveEditorSelectionChange(e,t){const i=this.selectionsStack.current;this.selectionsStack.notifyNavigation(e,t),t.reason===3?this.editsStack.notifyNavigation(e,t):(t.reason===4||t.reason===5)&&!this.selectionsStack.isNavigating()&&(t.reason===5&&!this.navigationsStack.isNavigating()&&i&&this.navigationsStack.addOrReplace(i.groupId,i.editor,i.selection),this.navigationsStack.notifyNavigation(e,t))}clear(){for(const e of this.stacks)e.clear()}remove(e){for(const t of this.stacks)t.remove(e)}move(e){for(const t of this.stacks)t.move(e)}};Ra=x([u(1,O)],Ra);class S0{constructor(){this.onDidChange=N.None}canGoForward(){return!1}async goForward(){}canGoBack(){return!1}async goBack(){}async goPrevious(){}canGoLast(){return!1}async goLast(){}handleActiveEditorChange(){}handleActiveEditorSelectionChange(){}clear(){}remove(){}move(){}dispose(){}}var os;let Ba=(os=class extends R{get current(){return this.stack[this.index]}set current(e){e&&(this.stack[this.index]=e)}constructor(e,t,i,o,n,s){super(),this.filter=e,this.scope=t,this.instantiationService=i,this.editorService=o,this.editorGroupService=n,this.logService=s,this._onDidChange=this._register(new I),this.onDidChange=this._onDidChange.event,this.mapEditorToDisposable=new Map,this.mapGroupToDisposable=new Map,this.editorHelper=this.instantiationService.createInstance(xl),this.stack=[],this.index=-1,this.previousIndex=-1,this.navigating=!1,this.currentSelectionState=void 0,this.registerListeners()}registerListeners(){this._register(this.onDidChange(()=>this.traceStack())),this._register(this.logService.onDidChangeLogLevel(()=>this.traceStack()))}traceStack(){var t,i,o;if(this.logService.getLevel()!==Wb.Trace)return;const e=[];for(const n of this.stack)typeof((t=n.selection)==null?void 0:t.log)=="function"?e.push(`- group: ${n.groupId}, editor: ${(i=n.editor.resource)==null?void 0:i.toString()}, selection: ${n.selection.log()}`):e.push(`- group: ${n.groupId}, editor: ${(o=n.editor.resource)==null?void 0:o.toString()}, selection: <none>`);e.length===0?this.trace(`index: ${this.index}, navigating: ${this.isNavigating()}: <empty>`):this.trace(`index: ${this.index}, navigating: ${this.isNavigating()}
${e.join(`
`)}
			`)}trace(e,t=null,i){var s;if(this.logService.getLevel()!==Wb.Trace)return;let o;switch(this.filter){case 0:o="global";break;case 1:o="edits";break;case 2:o="navigation";break}let n;switch(this.scope){case 0:n="default";break;case 1:n="editorGroup";break;case 2:n="editor";break}t!==null?this.logService.trace(`[History stack ${o}-${n}]: ${e} (editor: ${(s=t==null?void 0:t.resource)==null?void 0:s.toString()}, event: ${this.traceEvent(i)})`):this.logService.trace(`[History stack ${o}-${n}]: ${e}`)}traceEvent(e){if(!e)return"<none>";switch(e.reason){case 3:return"edit";case 4:return"navigation";case 5:return"jump";case 1:return"programmatic";case 2:return"user"}}registerGroupListeners(e){if(!this.mapGroupToDisposable.has(e)){const t=this.editorGroupService.getGroup(e);t&&this.mapGroupToDisposable.set(e,t.onWillMoveEditor(i=>this.onWillMoveEditor(i)))}}onWillMoveEditor(e){if(this.trace("onWillMoveEditor()",e.editor),this.scope!==1)for(const t of this.stack)t.groupId===e.groupId&&this.editorHelper.matchesEditor(e.editor,t.editor)&&(t.groupId=e.target)}notifyNavigation(e,t){this.trace("notifyNavigation()",e==null?void 0:e.input,t);const i=Cp(e),o=(e==null?void 0:e.input)&&!e.input.isDisposed();this.navigating?(this.trace("notifyNavigation() ignoring (navigating)",e==null?void 0:e.input,t),i&&o?(this.trace("notifyNavigation() updating current selection state",e==null?void 0:e.input,t),this.currentSelectionState=new qw({groupId:e.group.id,editor:e.input},e.getSelection(),t==null?void 0:t.reason)):(this.trace("notifyNavigation() dropping current selection state",e==null?void 0:e.input,t),this.currentSelectionState=void 0)):(this.trace("notifyNavigation() not ignoring",e==null?void 0:e.input,t),i&&o?this.onSelectionAwareEditorNavigation(e.group.id,e.input,e.getSelection(),t):(this.currentSelectionState=void 0,o&&this.onNonSelectionAwareEditorNavigation(e.group.id,e.input)))}onSelectionAwareEditorNavigation(e,t,i,o){var s;if(((s=this.current)==null?void 0:s.groupId)===e&&!i&&this.editorHelper.matchesEditor(this.current.editor,t))return;this.trace("onSelectionAwareEditorNavigation()",t,o);const n=new qw({groupId:e,editor:t},i,o==null?void 0:o.reason);!this.currentSelectionState||this.currentSelectionState.justifiesNewNavigationEntry(n)?this.doAdd(e,t,n.selection):this.doReplace(e,t,n.selection),this.currentSelectionState=n}onNonSelectionAwareEditorNavigation(e,t){var i;((i=this.current)==null?void 0:i.groupId)===e&&this.editorHelper.matchesEditor(this.current.editor,t)||(this.trace("onNonSelectionAwareEditorNavigation()",t),this.doAdd(e,t))}doAdd(e,t,i){this.navigating||this.addOrReplace(e,t,i)}doReplace(e,t,i){this.navigating||this.addOrReplace(e,t,i,!0)}addOrReplace(e,t,i,o){this.registerGroupListeners(e);let n=!1;this.current&&(o||this.shouldReplaceStackEntry(this.current,{groupId:e,editor:t,selection:i}))&&(n=!0);const s=this.editorHelper.preferResourceEditorInput(t);if(!s)return;n?this.trace("replace()",s):this.trace("add()",s);const r={groupId:e,editor:s,selection:i},a=[];if(n)this.current&&a.push(this.current),this.current=r;else{if(this.stack.length>this.index+1){for(let l=this.index+1;l<this.stack.length;l++)a.push(this.stack[l]);this.stack=this.stack.slice(0,this.index+1)}this.stack.splice(this.index+1,0,r),this.stack.length>Fg.MAX_STACK_SIZE?(a.push(this.stack.shift()),this.previousIndex>=0&&this.previousIndex--):this.setIndex(this.index+1,!0)}for(const l of a)this.editorHelper.clearOnEditorDispose(l.editor,this.mapEditorToDisposable);gt(s)&&this.editorHelper.onEditorDispose(s,()=>this.remove(s),this.mapEditorToDisposable),this._onDidChange.fire()}shouldReplaceStackEntry(e,t){return e.groupId!==t.groupId||!this.editorHelper.matchesEditor(e.editor,t.editor)?!1:e.selection?t.selection?e.selection.compare(t.selection)===1:!1:!0}move(e){if(e.isOperation(2))for(const t of this.stack)this.editorHelper.matchesEditor(e,t.editor)&&(t.editor={resource:e.target.resource})}remove(e){var i;const t=this.stack.length;this.stack=this.stack.filter(o=>{const n=typeof e=="number"?o.groupId===e:this.editorHelper.matchesEditor(e,o.editor);return n&&this.editorHelper.clearOnEditorDispose(o.editor,this.mapEditorToDisposable),!n}),t!==this.stack.length&&(this.flatten(),this.index=this.stack.length-1,this.previousIndex=-1,typeof e=="number"&&((i=this.mapGroupToDisposable.get(e))==null||i.dispose(),this.mapGroupToDisposable.delete(e)),this._onDidChange.fire())}flatten(){const e=[];let t;for(const i of this.stack)t&&this.shouldReplaceStackEntry(i,t)||(t=i,e.push(i));this.stack=e}clear(){this.index=-1,this.previousIndex=-1,this.stack.splice(0);for(const[,e]of this.mapEditorToDisposable)Re(e);this.mapEditorToDisposable.clear();for(const[,e]of this.mapGroupToDisposable)Re(e);this.mapGroupToDisposable.clear()}dispose(){super.dispose(),this.clear()}canGoForward(){return this.stack.length>this.index+1}async goForward(){if(!await this.maybeGoCurrent()&&this.canGoForward())return this.setIndex(this.index+1),this.navigate()}canGoBack(){return this.index>0}async goBack(){if(!await this.maybeGoCurrent()&&this.canGoBack())return this.setIndex(this.index-1),this.navigate()}async goPrevious(){if(!await this.maybeGoCurrent())return this.previousIndex===-1?this.goBack():(this.setIndex(this.previousIndex),this.navigate())}canGoLast(){return this.stack.length>0}async goLast(){if(this.canGoLast())return this.setIndex(this.stack.length-1),this.navigate()}async maybeGoCurrent(){return this.filter===0||this.isCurrentSelectionActive()?!1:(await this.navigate(),!0)}isCurrentSelectionActive(){var i;if(!((i=this.current)!=null&&i.selection))return!1;const e=this.editorService.activeEditorPane;if(!Cp(e)||e.group.id!==this.current.groupId||!e.input||!this.editorHelper.matchesEditor(e.input,this.current.editor))return!1;const t=e.getSelection();return t?t.compare(this.current.selection)===1:!1}setIndex(e,t){this.previousIndex=this.index,this.index=e,t||this._onDidChange.fire()}async navigate(){this.navigating=!0;try{this.current&&await this.doNavigate(this.current)}finally{this.navigating=!1}}doNavigate(e){let t=Object.create(null);return e.selection&&(t=e.selection.restore(t)),gt(e.editor)?this.editorService.openEditor(e.editor,t,e.groupId):this.editorService.openEditor({...e.editor,options:{...e.editor.options,...t}},e.groupId)}isNavigating(){return this.navigating}},Fg=os,os.MAX_STACK_SIZE=50,os);Ba=Fg=x([u(2,O),u(3,U),u(4,Z),u(5,Je)],Ba);let xl=class{constructor(e,t,i,o){this.uriIdentityService=e,this.lifecycleService=t,this.fileService=i,this.pathService=o}preferResourceEditorInput(e){const t=Ie.getOriginalUri(e);if((t==null?void 0:t.scheme)===pe.file||(t==null?void 0:t.scheme)===pe.vscodeRemote||(t==null?void 0:t.scheme)===pe.vscodeUserData||(t==null?void 0:t.scheme)===this.pathService.defaultUriScheme){if(gt(e)){const o=e.toUntyped();if(Sp(o))return o}return e}else return gt(e)?e:void 0}matchesEditor(e,t){return e instanceof ka||e instanceof Hb?gt(t)?!1:e instanceof ka?e.contains(t.resource,2):this.matchesFile(t.resource,e):gt(e)?gt(t)?e.matches(t):this.matchesFile(t.resource,e):gt(t)?this.matchesFile(e.resource,t):e&&t&&this.uriIdentityService.extUri.isEqual(e.resource,t.resource)}matchesFile(e,t){if(t instanceof ka)return t.contains(e,2);if(t instanceof Hb)return this.uriIdentityService.extUri.isEqualOrParent(e,t.resource);if(gt(t)){const i=t.resource;return!i||this.lifecycleService.phase>=3&&!this.fileService.hasProvider(i)?!1:this.uriIdentityService.extUri.isEqual(i,e)}return this.uriIdentityService.extUri.isEqual(t==null?void 0:t.resource,e)}matchesEditorIdentifier(e,t){return!(t!=null&&t.group)||e.groupId!==t.group.id?!1:t.input?e.editor.matches(t.input):!1}onEditorDispose(e,t,i){const o=N.once(e.onWillDispose)(()=>t());let n=i.get(e);n||(n=new P,i.set(e,n)),n.add(o)}clearOnEditorDispose(e,t){if(!gt(e))return;const i=t.get(e);i&&(Re(i),t.delete(e))}};xl=x([u(0,Tc),u(1,wn),u(2,Oe),u(3,Ac)],xl);var E0=".webview.modified{box-shadow:-6px 0 5px -5px var(--vscode-scrollbar-shadow)}";we(E0,{});const k0=new j("activeCustomEditorId","",{type:"string",description:d(9695,"The viewType of the currently active custom editor.")}),_0=new j("focusedCustomEditorIsEditable",!1);class $w{constructor(e){this.id=e.id,this.displayName=e.displayName,this.providerDisplayName=e.providerDisplayName,this.priority=e.priority,this.selector=e.selector}matches(e){return this.selector.some(t=>t.filenamePattern&&ld(t.filenamePattern,e))}}class ep{constructor(e){this.allEditors=jo(e,t=>t.id)}get length(){return this.allEditors.length}get defaultEditor(){return this.allEditors.find(e=>{switch(e.priority){case Ne.default:case Ne.builtin:return this.allEditors.every(t=>t===e||x0(t,e));default:return!1}})}get bestAvailableEditor(){return Array.from(this.allEditors).sort((t,i)=>si(t.priority)-si(i.priority))[0]}}function x0(c,e){return si(c.priority)<si(e.priority)}class I0{constructor(){this._references=new Map}async getAllModels(e){const t=`${e.toString()}@@@`,i=[];for(const[o,n]of this._references)o.startsWith(t)&&n.model&&i.push(await n.model);return i}async get(e,t){const i=this.key(e,t),o=this._references.get(i);return o==null?void 0:o.model}tryRetain(e,t){const i=this.key(e,t),o=this._references.get(i);if(o)return o.counter++,o.model.then(n=>({object:n,dispose:Wf(()=>{--o.counter<=0&&(o.model.then(s=>s.dispose()),this._references.delete(i))})}))}add(e,t,i){const o=this.key(e,t);if(this._references.get(o))throw new Error("Model already exists");return this._references.set(o,{viewType:t,model:i,counter:0}),this.tryRetain(e,t)}disposeAllModelsForView(e){for(const[t,i]of this._references)i.viewType===e&&(i.model.then(o=>o.dispose()),this._references.delete(t))}key(e,t){return`${e.toString()}@@@${t}`}}const wi=Object.freeze({viewType:"viewType",displayName:"displayName",selector:"selector",priority:"priority"}),D0={description:d(11459,"Contributed custom editors."),type:"array",defaultSnippets:[{body:[{[wi.viewType]:"$1",[wi.displayName]:"$2",[wi.selector]:[{filenamePattern:"$3"}]}]}],items:{type:"object",required:[wi.viewType,wi.displayName,wi.selector],properties:{[wi.viewType]:{type:"string",markdownDescription:d(11460,"Identifier for the custom editor. This must be unique across all custom editors, so we recommend including your extension id as part of `viewType`. The `viewType` is used when registering custom editors with `vscode.registerCustomEditorProvider` and in the `onCustomEditor:${id}` [activation event](https://code.visualstudio.com/api/references/activation-events).")},[wi.displayName]:{type:"string",description:d(11461,"Human readable name of the custom editor. This is displayed to users when selecting which editor to use.")},[wi.selector]:{type:"array",description:d(11462,"Set of globs that the custom editor is enabled for."),items:{type:"object",defaultSnippets:[{body:{filenamePattern:"$1"}}],properties:{filenamePattern:{type:"string",description:d(11463,"Glob that the custom editor is enabled for.")}}}},[wi.priority]:{type:"string",markdownDeprecationMessage:d(11464,"Controls if the custom editor is enabled automatically when the user opens a file. This may be overridden by users using the `workbench.editorAssociations` setting."),enum:["default","option"],markdownEnumDescriptions:[d(11465,"The editor is automatically used when the user opens a resource, provided that no other default custom editors are registered for that resource."),d(11466,"The editor is not automatically used when the user opens a resource, but a user can switch to the editor using the `Reopen With` command.")],default:"default"}}}},A0=Hf.registerExtensionPoint({extensionPoint:"customEditors",deps:[px],jsonSchema:D0,activationEventsGenerator:(c,e)=>{for(const t of c){const i=t[wi.viewType];i&&e.push(`onCustomEditor:${i}`)}}});class T0 extends R{constructor(){super(...arguments),this.type="table"}shouldRender(e){var t;return!!((t=e.contributes)!=null&&t.customEditors)}render(e){var n;const t=((n=e.contributes)==null?void 0:n.customEditors)||[];if(!t.length)return{data:{headers:[],rows:[]},dispose:()=>{}};const i=[d(11467,"View Type"),d(11468,"Priority"),d(11469,"Filename Pattern")],o=t.map(s=>[s.viewType,s.priority??"",hi(s.selector.map(r=>r.filenamePattern)).join(", ")]);return{data:{headers:i,rows:o},dispose:()=>{}}}}$.as(zf.ExtensionFeaturesRegistry).registerExtensionFeature({id:"customEditors",label:d(11470,"Custom Editors"),access:{canToggle:!1},renderer:new ce(T0)});const Ln=class Ln extends R{constructor(e){super(),this._editors=new Map,this._onChange=this._register(new I),this.onChange=this._onChange.event,this._memento=new Oy(Ln.CUSTOM_EDITORS_STORAGE_ID,e);const t=this._memento.getMemento(0,1);for(const i of t[Ln.CUSTOM_EDITORS_ENTRY_ID]||[])this.add(new $w(i));A0.setHandler(i=>{this.update(i)})}update(e){this._editors.clear();for(const i of e)for(const o of i.value)this.add(new $w({id:o.viewType,displayName:o.displayName,providerDisplayName:i.description.isBuiltin?d(9696,"Built-in"):i.description.displayName||i.description.identifier.value,selector:o.selector||[],priority:V0(o,i.description)}));const t=this._memento.getMemento(0,1);t[Ln.CUSTOM_EDITORS_ENTRY_ID]=Array.from(this._editors.values()),this._memento.saveMemento(),this._onChange.fire()}[Symbol.iterator](){return this._editors.values()}get(e){return this._editors.get(e)}getContributedEditors(e){return Array.from(this._editors.values()).filter(t=>t.matches(e))}add(e){if(this._editors.has(e.id)){console.error(`Custom editor with id '${e.id}' already registered`);return}this._editors.set(e.id,e)}};Ln.CUSTOM_EDITORS_STORAGE_ID="customEditors",Ln.CUSTOM_EDITORS_ENTRY_ID="editors";let Gg=Ln;function V0(c,e){switch(c.priority){case Ne.default:case Ne.option:return c.priority;case Ne.builtin:return e.isBuiltin?Ne.builtin:Ne.default;default:return Ne.default}}let Wg=class extends R{constructor(e,t,i,o,n,s,r){super(),this.editorService=i,this.editorGroupService=o,this.instantiationService=n,this.uriIdentityService=s,this.editorResolverService=r,this._untitledCounter=0,this._editorResolverDisposables=this._register(new P),this._editorCapabilities=new Map,this._models=new I0,this._onDidChangeEditorTypes=this._register(new I),this.onDidChangeEditorTypes=this._onDidChangeEditorTypes.event,this._fileEditorFactory=$.as(wt.EditorFactory).getFileEditorFactory(),this._contributedEditors=this._register(new Gg(t)),this.editorResolverService.bufferChangeEvents(this.registerContributionPoints.bind(this)),this._register(this._contributedEditors.onChange(()=>{this.editorResolverService.bufferChangeEvents(this.registerContributionPoints.bind(this)),this._onDidChangeEditorTypes.fire()}));const a={contextKey:k0,getGroupContextKeyValue:p=>this.getActiveCustomEditorId(p),onDidChange:this.onDidChangeEditorTypes},l={contextKey:_0,getGroupContextKeyValue:p=>this.getCustomEditorIsEditable(p),onDidChange:this.onDidChangeEditorTypes};this._register(this.editorGroupService.registerContextKeyProvider(a)),this._register(this.editorGroupService.registerContextKeyProvider(l)),this._register(e.onDidRunOperation(p=>{p.isOperation(2)&&this.handleMovedFileInOpenedFileEditors(p.resource,this.uriIdentityService.asCanonicalUri(p.target.resource))}));const h=105;this._register(Ny.addImplementation(h,"custom-editor",()=>this.withActiveCustomEditor(p=>p.undo()))),this._register(Fy.addImplementation(h,"custom-editor",()=>this.withActiveCustomEditor(p=>p.redo())))}getEditorTypes(){return[...this._contributedEditors]}withActiveCustomEditor(e){const t=this.editorService.activeEditor;if(t instanceof Pt){const i=e(t);return i||!0}return!1}registerContributionPoints(){this._editorResolverDisposables.clear();for(const e of this._contributedEditors)for(const t of e.selector)t.filenamePattern&&this._editorResolverDisposables.add(this.editorResolverService.registerEditor(t.filenamePattern,{id:e.id,label:e.displayName,detail:e.providerDisplayName,priority:e.priority},{singlePerResource:()=>{var i;return!(((i=this.getCustomEditorCapabilities(e.id))==null?void 0:i.supportsMultipleEditorsPerDocument)??!1)}},{createEditorInput:({resource:i},o)=>({editor:Pt.create(this.instantiationService,i,e.id,o.id)}),createUntitledEditorInput:({resource:i},o)=>({editor:Pt.create(this.instantiationService,i??z.from({scheme:pe.untitled,authority:`Untitled-${this._untitledCounter++}`}),e.id,o.id)}),createDiffEditorInput:(i,o)=>({editor:this.createDiffEditorInput(i,e.id,o)})}))}createDiffEditorInput(e,t,i){const o=Pt.create(this.instantiationService,ae(e.modified.resource),t,i.id,{customClasses:"modified"}),n=Pt.create(this.instantiationService,ae(e.original.resource),t,i.id,{customClasses:"original"});return this.instantiationService.createInstance(Is,e.label,e.description,n,o,!0)}get models(){return this._models}getCustomEditor(e){return this._contributedEditors.get(e)}getContributedCustomEditors(e){return new ep(this._contributedEditors.getContributedEditors(e))}getUserConfiguredCustomEditors(e){const t=this.editorResolverService.getAssociationsForResource(e);return new ep(hi(t.map(i=>this._contributedEditors.get(i.viewType))))}getAllCustomEditors(e){return new ep([...this.getUserConfiguredCustomEditors(e).allEditors,...this.getContributedCustomEditors(e).allEditors])}registerCustomEditorCapabilities(e,t){if(this._editorCapabilities.has(e))throw new Error(`Capabilities for ${e} already set`);return this._editorCapabilities.set(e,t),ne(()=>{this._editorCapabilities.delete(e)})}getCustomEditorCapabilities(e){return this._editorCapabilities.get(e)}getActiveCustomEditorId(e){var o;const t=e.activeEditorPane;return((o=t==null?void 0:t.input)==null?void 0:o.resource)&&(t==null?void 0:t.input)instanceof Pt?t.input.viewType:""}getCustomEditorIsEditable(e){var o;const t=e.activeEditorPane;return((o=t==null?void 0:t.input)==null?void 0:o.resource)?(t==null?void 0:t.input)instanceof Pt:!1}async handleMovedFileInOpenedFileEditors(e,t){if(yi(e).toLowerCase()===yi(t).toLowerCase())return;const i=this.getAllCustomEditors(t);if(!i.allEditors.some(n=>n.priority!==Ne.option))return;const o=new Map;for(const n of this.editorGroupService.groups)for(const s of n.editors)if(this._fileEditorFactory.isFileEditor(s)&&!(s instanceof Pt)&&ot(s.resource,t)){let r=o.get(n.id);r||(r=[],o.set(n.id,r)),r.push(s)}if(o.size)for(const[n,s]of o)this.editorService.replaceEditors(s.map(r=>{let a;if(i.defaultEditor){const l=i.defaultEditor.id;a=Pt.create(this.instantiationService,t,l,n)}else a={resource:t,options:{override:pt.id}};return{editor:r,replacement:a,options:{preserveFocus:!0}}}),n)}};Wg=x([u(0,Oe),u(1,ie),u(2,U),u(3,Z),u(4,O),u(5,Tc),u(6,Mo)],Wg);let Hg=class extends R{constructor(e,t){super(),this._themeService=e,this._configurationService=t,this._cachedWebViewThemeData=void 0,this._onThemeDataChanged=this._register(new I),this.onThemeDataChanged=this._onThemeDataChanged.event,this._register(this._themeService.onDidColorThemeChange(()=>{this._reset()}));const i=["editor.fontFamily","editor.fontWeight","editor.fontSize","accessibility.underlineLinks"];this._register(this._configurationService.onDidChangeConfiguration(o=>{i.some(n=>o.affectsConfiguration(n))&&this._reset()}))}getTheme(){return this._themeService.getColorTheme()}getWebviewThemeData(){if(!this._cachedWebViewThemeData){const e=this._configurationService.getValue("editor"),t=e.fontFamily||hd.fontFamily,i=e.fontWeight||hd.fontWeight,o=e.fontSize||hd.fontSize,n=this._configurationService.getValue("accessibility.underlineLinks"),s=this._themeService.getColorTheme(),r=gx().getColors().reduce((h,p)=>{const g=s.getColor(p.id);return g&&(h["vscode-"+p.id.replace(".","-")]=g.toString()),h},{}),a={"vscode-font-family":mx,"vscode-font-weight":"normal","vscode-font-size":"13px","vscode-editor-font-family":t,"vscode-editor-font-weight":i,"vscode-editor-font-size":o+"px","text-link-decoration":n?"underline":"none",...r},l=ac.fromTheme(s);this._cachedWebViewThemeData={styles:a,activeTheme:l,themeLabel:s.label,themeId:s.settingsId}}return this._cachedWebViewThemeData}_reset(){this._cachedWebViewThemeData=void 0,this._onThemeDataChanged.fire()}};Hg=x([u(0,qA),u(1,F)],Hg);var ac;(function(c){c.light="vscode-light",c.dark="vscode-dark",c.highContrast="vscode-high-contrast",c.highContrastLight="vscode-high-contrast-light"})(ac||(ac={}));(function(c){function e(t){switch(t.type){case Ks.LIGHT:return c.light;case Ks.DARK:return c.dark;case Ks.HIGH_CONTRAST_DARK:return c.highContrast;case Ks.HIGH_CONTRAST_LIGHT:return c.highContrastLight}}c.fromTheme=e})(ac||(ac={}));class M0{constructor(e,t,i){this._getExtensionLocation=e,this._getMappings=t,this.tunnelService=i,this._tunnels=new Map}async getRedirect(e,t){const i=z.parse(t),o=fx(i);if(o){for(const n of this._getMappings())if(n.webviewPort===o.port){const s=this._getExtensionLocation();if(s&&s.scheme===pe.vscodeRemote){const r=e&&await this.getOrCreateTunnel(e,n.extensionHostPort);if(r)return r.tunnelLocalPort===n.webviewPort?void 0:encodeURI(i.with({authority:`127.0.0.1:${r.tunnelLocalPort}`}).toString(!0))}if(n.webviewPort!==n.extensionHostPort)return encodeURI(i.with({authority:`${o.address}:${n.extensionHostPort}`}).toString(!0))}}}async dispose(){for(const e of this._tunnels.values())await e.dispose();this._tunnels.clear()}async getOrCreateTunnel(e,t){const i=this._tunnels.get(t);if(i)return i;const o=await this.tunnelService.openTunnel({getAddress:async()=>e},void 0,t);let n;return typeof o=="string"&&(n=void 0),n&&this._tunnels.set(t,n),n}}const L0=new Map([[".svg","image/svg+xml"],[".txt",_a.text],[".css","text/css"],[".js","application/javascript"],[".cjs","application/javascript"],[".mjs","application/javascript"],[".json","application/json"],[".html","text/html"],[".htm","text/html"],[".xhtml","application/xhtml+xml"],[".oft","font/otf"],[".xml","application/xml"],[".wasm","application/wasm"]]);function P0(c){const e=bx(c.fsPath).toLowerCase();return L0.get(e)||wx(c.fsPath)||_a.unknown}var ho;(function(c){let e;(function(o){o[o.Success=0]="Success",o[o.Failed=1]="Failed",o[o.AccessDenied=2]="AccessDenied",o[o.NotModified=3]="NotModified"})(e=c.Type||(c.Type={}));class t{constructor(n,s,r,a){this.stream=n,this.etag=s,this.mtime=r,this.mimeType=a,this.type=e.Success}}c.StreamSuccess=t,c.Failed={type:e.Failed},c.AccessDenied={type:e.AccessDenied};class i{constructor(n,s){this.mimeType=n,this.mtime=s,this.type=e.NotModified}}c.NotModified=i})(ho||(ho={}));async function R0(c,e,t,i,o){var r;i.debug(`loadLocalResource - begin. requestUri=${c}`);const n=B0(c,e.roots);if(i.debug(`loadLocalResource - found resource to load. requestUri=${c}, resourceToLoad=${n}`),!n)return ho.AccessDenied;const s=P0(c);try{const a=await t.readFileStream(n,{etag:e.ifNoneMatch},o);return new ho.StreamSuccess(a.value,a.etag,a.mtime,s)}catch(a){return a instanceof Gy&&a.fileOperationResult===2?new ho.NotModified(s,(r=a.options)==null?void 0:r.mtime):(i.debug(`loadLocalResource - Error using fileReader. requestUri=${c}`),console.log(a),ho.Failed)}}function B0(c,e){for(const t of e)if(O0(t,c))return N0(c)}function O0(c,e){if(c.scheme!==e.scheme)return!1;let t=zb(e.fsPath),i=zb(c.fsPath+(c.fsPath.endsWith(xa)?"":xa));return Ub(c.fsPath)&&Ub(e.fsPath)&&(i=i.toLowerCase(),t=t.toLowerCase()),t.startsWith(i)}function N0(c){return c.scheme===pe.vscodeRemote?z.from({scheme:pe.vscodeRemote,authority:c.authority,path:"/vscode-resource",query:JSON.stringify({requestResourcePath:c.path})}):c}var F0=".monaco-workbench .simple-find-part-wrapper{max-width:calc(100% - 64px);overflow:hidden;padding:0 10px 10px;pointer-events:none;position:absolute;right:18px;top:0;z-index:10}.simple-find-part .monaco-inputbox>.ibwrapper>input{text-overflow:clip}.monaco-workbench .simple-find-part{align-items:center;background-color:var(--vscode-editorWidget-background)!important;border:1px solid var(--vscode-widget-border);border-bottom-left-radius:4px;border-bottom-right-radius:4px;box-shadow:0 0 8px 2px var(--vscode-widget-shadow);color:var(--vscode-editorWidget-foreground);display:flex;font-size:12px;padding:4px;pointer-events:all;position:relative;top:-45px;transition:top .2s linear;visibility:hidden;z-index:10}.monaco-workbench.reduce-motion .monaco-editor .find-widget{transition:top 0ms linear}.monaco-workbench .simple-find-part.visible{visibility:visible}.monaco-workbench .simple-find-part.suppress-transition{transition:none}.monaco-workbench .simple-find-part.visible-transition{top:0}.monaco-workbench .simple-find-part .monaco-findInput{flex:1}.monaco-workbench .simple-find-part .matchesCount{max-width:73px;min-width:73px;padding-left:5px;width:73px}.monaco-workbench .simple-find-part.reduced-find-widget .matchesCount{display:none}.monaco-workbench .simple-find-part .button{background-position:50%;background-repeat:no-repeat;cursor:pointer;display:flex;flex:initial;height:20px;justify-content:center;line-height:20px;margin-left:3px;min-width:20px;width:20px}.monaco-workbench div.simple-find-part div.button.disabled{cursor:default;opacity:.3!important}div.simple-find-part-wrapper div.button{border-radius:5px}.no-results.matchesCount{color:var(--vscode-errorForeground)}div.simple-find-part-wrapper div.button:hover:not(.disabled){background-color:var(--vscode-toolbar-hoverBackground);outline:1px dashed var(--vscode-toolbar-hoverOutline);outline-offset:-1px}.monaco-workbench .simple-find-part .monaco-sash{border-bottom-left-radius:4px;border-left:1px solid;left:0!important}.monaco-workbench .simple-find-part .monaco-sash.vertical:before{left:calc(50% - var(--vscode-sash-hover-size)/4);width:2px}";we(F0,{});const G0=d(11809,"Find"),W0=d(11810,"Find"),H0=d(11811,"Previous Match"),z0=d(11812,"Next Match"),U0=d(11813,"Close"),sd=310,K0=73;class q0 extends Ev{constructor(e,t,i,o,n){super(),this._keybindingService=n,this._isVisible=!1,this._foundMatch=!1,this._width=0,this.state=new vx,this._matchesLimit=e.matchesLimit??Number.MAX_SAFE_INTEGER,this._findInput=this._register(new yx(null,t,{label:G0,placeholder:W0,validation:a=>{if(a.length===0||!this._findInput.getRegex())return null;try{return new RegExp(a),null}catch(l){return this._foundMatch=!1,this.updateButtons(this._foundMatch),{content:l.message}}},showCommonFindToggles:e.showCommonFindToggles,appendCaseSensitiveLabel:e.appendCaseSensitiveActionId?this._getKeybinding(e.appendCaseSensitiveActionId):void 0,appendRegexLabel:e.appendRegexActionId?this._getKeybinding(e.appendRegexActionId):void 0,appendWholeWordsLabel:e.appendWholeWordsActionId?this._getKeybinding(e.appendWholeWordsActionId):void 0,showHistoryHint:()=>Cx(n),inputBoxStyles:Uf,toggleStyles:Kf},i)),this._updateHistoryDelayer=this._register(new Sx(500)),this._register(this._findInput.onInput(async a=>{(!e.checkImeCompletionState||!this._findInput.isImeSessionInProgress)&&(this._foundMatch=this._onInputChanged(),e.showResultCount&&await this.updateResultCount(),this.updateButtons(this._foundMatch),this.focusFindBox(),this._delayedUpdateHistory())})),this._findInput.setRegex(!!this.state.isRegex),this._findInput.setCaseSensitive(!!this.state.matchCase),this._findInput.setWholeWords(!!this.state.wholeWord),this._register(this._findInput.onDidOptionChange(()=>{this.state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this.state.onFindReplaceStateChange(()=>{this._findInput.setRegex(this.state.isRegex),this._findInput.setWholeWords(this.state.wholeWord),this._findInput.setCaseSensitive(this.state.matchCase),this.findFirst()})),this.prevBtn=this._register(new Fu({label:H0+(e.previousMatchActionId?this._getKeybinding(e.previousMatchActionId):""),icon:Ex,onTrigger:()=>{this.find(!0)}},o)),this.nextBtn=this._register(new Fu({label:z0+(e.nextMatchActionId?this._getKeybinding(e.nextMatchActionId):""),icon:kx,onTrigger:()=>{this.find(!1)}},o));const s=this._register(new Fu({label:U0+(e.closeWidgetActionId?this._getKeybinding(e.closeWidgetActionId):""),icon:_x,onTrigger:()=>{this.hide()}},o));this._innerDomNode=document.createElement("div"),this._innerDomNode.classList.add("simple-find-part"),this._innerDomNode.appendChild(this._findInput.domNode),this._innerDomNode.appendChild(this.prevBtn.domNode),this._innerDomNode.appendChild(this.nextBtn.domNode),this._innerDomNode.appendChild(s.domNode),this._domNode=document.createElement("div"),this._domNode.classList.add("simple-find-part-wrapper"),this._domNode.appendChild(this._innerDomNode),this.onkeyup(this._innerDomNode,a=>{if(a.equals(9)){this.hide(),a.preventDefault();return}}),this._focusTracker=this._register(ms(this._innerDomNode)),this._register(this._focusTracker.onDidFocus(this._onFocusTrackerFocus.bind(this))),this._register(this._focusTracker.onDidBlur(this._onFocusTrackerBlur.bind(this))),this._findInputFocusTracker=this._register(ms(this._findInput.domNode)),this._register(this._findInputFocusTracker.onDidFocus(this._onFindInputFocusTrackerFocus.bind(this))),this._register(this._findInputFocusTracker.onDidBlur(this._onFindInputFocusTrackerBlur.bind(this))),this._register(L(this._innerDomNode,"click",a=>{a.stopPropagation()})),e!=null&&e.showResultCount&&(this._domNode.classList.add("result-count"),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._findInput.domNode.insertAdjacentElement("afterend",this._matchesCount),this._register(this._findInput.onDidChange(async()=>{await this.updateResultCount()})),this._register(this._findInput.onDidOptionChange(async()=>{this._foundMatch=this._onInputChanged(),await this.updateResultCount(),this.focusFindBox(),this._delayedUpdateHistory()})));let r=e==null?void 0:e.initialWidth;if(r&&(r=r<sd?sd:r,this._domNode.style.width=`${r}px`),e!=null&&e.enableSash){const a=r??sd;let l=a;const h=this._register(new xx(this._innerDomNode,this,{orientation:0,size:1}));this._register(h.onDidStart(()=>{l=parseFloat(Kb(this._domNode).width)})),this._register(h.onDidChange(p=>{const g=l+p.startX-p.currentX;g<a||(this._domNode.style.width=`${g}px`)})),this._register(h.onDidReset(p=>{parseFloat(Kb(this._domNode).width)===a?this._domNode.style.width="100%":this._domNode.style.width=`${a}px`}))}}getVerticalSashLeft(e){return 0}get inputValue(){return this._findInput.getValue()}get focusTracker(){return this._focusTracker}_getKeybinding(e){var i;const t=(i=this._keybindingService)==null?void 0:i.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){var e;super.dispose(),(e=this._domNode)==null||e.remove()}isVisible(){return this._isVisible}getDomNode(){return this._domNode}getFindInputDomNode(){return this._findInput.domNode}reveal(e,t=!0){if(e&&this._findInput.setValue(e),this._isVisible){this._findInput.select();return}this._isVisible=!0,this.updateResultCount(),this.layout(),setTimeout(()=>{this._innerDomNode.classList.toggle("suppress-transition",!t),this._innerDomNode.classList.add("visible","visible-transition"),this._innerDomNode.setAttribute("aria-hidden","false"),this._findInput.select(),t||setTimeout(()=>{this._innerDomNode.classList.remove("suppress-transition")},0)},0)}show(e){e&&!this._isVisible&&this._findInput.setValue(e),this._isVisible=!0,this.layout(),setTimeout(()=>{this._innerDomNode.classList.add("visible","visible-transition"),this._innerDomNode.setAttribute("aria-hidden","false")},0)}hide(e=!0){this._isVisible&&(this._innerDomNode.classList.toggle("suppress-transition",!e),this._innerDomNode.classList.remove("visible-transition"),this._innerDomNode.setAttribute("aria-hidden","true"),setTimeout(()=>{this._isVisible=!1,this.updateButtons(this._foundMatch),this._innerDomNode.classList.remove("visible","suppress-transition")},e?200:0))}layout(e=this._width){if(this._width=e,!!this._isVisible&&this._matchesCount){let t=!1;sd+K0+28>=e&&(t=!0),this._innerDomNode.classList.toggle("reduced-find-widget",t)}}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this))}_updateHistory(){this._findInput.inputBox.addToHistory()}_getRegexValue(){return this._findInput.getRegex()}_getWholeWordValue(){return this._findInput.getWholeWords()}_getCaseSensitiveValue(){return this._findInput.getCaseSensitive()}updateButtons(e){const t=this.inputValue.length>0;this.prevBtn.setEnabled(this._isVisible&&t&&e),this.nextBtn.setEnabled(this._isVisible&&t&&e)}focusFindBox(){this.nextBtn.focus(),this._findInput.inputBox.focus()}async updateResultCount(){if(!this._matchesCount){this.updateButtons(this._foundMatch);return}const e=await this._getResultCount();this._matchesCount.innerText="";const t=this.inputValue.length>0&&(e==null?void 0:e.resultCount)===0;this._matchesCount.classList.toggle("no-results",t);let i="";if(e!=null&&e.resultCount){let o=String(e.resultCount);e.resultCount>=this._matchesLimit&&(o+="+");let n=String(e.resultIndex+1);n==="0"&&(n="?"),i=ua(Ix,n,o)}else i=qb;Dx(this._announceSearchResults(i,this.inputValue)),this._matchesCount.appendChild(document.createTextNode(i)),this._foundMatch=!!e&&e.resultCount>0,this.updateButtons(this._foundMatch)}changeState(e){this.state.change(e,!1)}_announceSearchResults(e,t){return t?e===qb?t===""?d(11815,"{0} found",e):d(11816,"{0} found for '{1}'",e,t):d(11817,"{0} found for '{1}'",e,t):d(11814,"Enter search input")}}const $0=le("simpleFindWidget.sashBorder",{dark:"#454545",light:"#C8C8C8",hcDark:"#6FC3DF",hcLight:"#0F4A85"},d(11818,"Border color of the sash border."));nu((c,e)=>{const t=c.getColor($0);e.addRule(`.monaco-workbench .simple-find-part .monaco-sash { background-color: ${t}; border-color: ${t} }`)});let zg=class extends q0{async _getResultCount(e){}constructor(e,t,i,o,n){super({showCommonFindToggles:!1,checkImeCompletionState:e.checkImeCompletionState,enableSash:!0},t,i,o,n),this._delegate=e,this._findWidgetFocused=qf.bindTo(i),this._register(e.hasFindResult(s=>{this.updateButtons(s),this.focusFindBox()})),this._register(e.onDidStopFind(()=>{this.updateButtons(!1)}))}find(e){const t=this.inputValue;t&&this._delegate.find(t,e)}hide(e=!0){super.hide(e),this._delegate.stopFind(!0),this._delegate.focus()}_onInputChanged(){const e=this.inputValue;return e?this._delegate.updateFind(e):this._delegate.stopFind(!1),!1}_onFocusTrackerFocus(){this._findWidgetFocused.set(!0)}_onFocusTrackerBlur(){this._findWidgetFocused.reset()}_onFindInputFocusTrackerFocus(){}_onFindInputFocusTrackerBlur(){}findFirst(){}};zg=x([u(1,Ec),u(2,K),u(3,Xe),u(4,xe)],zg);var Il;(function(c){(function(t){t[t.Initializing=0]="Initializing",t[t.Ready=1]="Ready"})(c.Type||(c.Type={}));class e{constructor(i){this.pendingMessages=i,this.type=0}}c.Initializing=e,c.Ready={type:1}})(Il||(Il={}));const j0="webviewId";let Ug=class extends R{get window(){var e;return typeof this._windowId=="number"?(e=Cc(this._windowId))==null?void 0:e.window:void 0}get platform(){return"browser"}get element(){return this._element}get isFocused(){return!(!this._focused||!this.window||this.window.document.activeElement&&this.window.document.activeElement!==this.element)}constructor(e,t,i,o,n,s,r,a,l,h,p,g,m){super(),this.webviewThemeDataProvider=t,this._environmentService=s,this._fileService=r,this._logService=a,this._remoteAuthorityResolverService=l,this._telemetryService=h,this._tunnelService=p,this._accessibilityService=m,this.id=ta(),this._windowId=void 0,this._expectedServiceWorkerVersion=4,this._state=new Il.Initializing([]),this._resourceLoadingCts=this._register(new ko),this._focusDelayer=this._register(new Tx(50)),this._onDidHtmlChange=this._register(new I),this.onDidHtmlChange=this._onDidHtmlChange.event,this._messageHandlers=new Map,this.checkImeCompletionState=!0,this._disposed=!1,this._onMissingCsp=this._register(new I),this.onMissingCsp=this._onMissingCsp.event,this._onDidClickLink=this._register(new I),this.onDidClickLink=this._onDidClickLink.event,this._onDidReload=this._register(new I),this.onDidReload=this._onDidReload.event,this._onMessage=this._register(new I),this.onMessage=this._onMessage.event,this._onDidScroll=this._register(new I),this.onDidScroll=this._onDidScroll.event,this._onDidWheel=this._register(new I),this.onDidWheel=this._onDidWheel.event,this._onDidUpdateState=this._register(new I),this.onDidUpdateState=this._onDidUpdateState.event,this._onDidFocus=this._register(new I),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new I),this.onDidBlur=this._onDidBlur.event,this._onFatalError=this._register(new I),this.onFatalError=this._onFatalError.event,this._onDidDispose=this._register(new I),this.onDidDispose=this._onDidDispose.event,this._hasAlertedAboutMissingCsp=!1,this._hasFindResult=this._register(new I),this.hasFindResult=this._hasFindResult.event,this._onDidStopFind=this._register(new I),this.onDidStopFind=this._onDidStopFind.event,this.providedViewType=e.providedViewType,this.origin=e.origin??this.id,this._options=e.options,this.extension=e.extension,this._content={html:"",title:e.title,options:e.contentOptions,state:void 0},this._portMappingManager=this._register(new M0(()=>{var f;return(f=this.extension)==null?void 0:f.location},()=>this._content.options.portMapping||[],this._tunnelService)),this._element=this._createElement(e.options,e.contentOptions),this._register(this.on("no-csp-found",()=>{this.handleNoCspFound()})),this._register(this.on("did-click-link",({uri:f})=>{this._onDidClickLink.fire(f)})),this._register(this.on("onmessage",({message:f,transfer:v})=>{this._onMessage.fire({message:f,transfer:v})})),this._register(this.on("did-scroll",({scrollYPercentage:f})=>{this._onDidScroll.fire({scrollYPercentage:f})})),this._register(this.on("do-reload",()=>{this.reload()})),this._register(this.on("do-update-state",f=>{this.state=f,this._onDidUpdateState.fire(f)})),this._register(this.on("did-focus",()=>{this.handleFocusChange(!0)})),this._register(this.on("did-blur",()=>{this.handleFocusChange(!1)})),this._register(this.on("did-scroll-wheel",f=>{this._onDidWheel.fire(f)})),this._register(this.on("did-find",({didFind:f})=>{this._hasFindResult.fire(f)})),this._register(this.on("fatal-error",f=>{n.error(d(9700,"Error loading webview: {0}",f.message)),this._onFatalError.fire({message:f.message})})),this._register(this.on("did-keydown",f=>{this.handleKeyEvent("keydown",f)})),this._register(this.on("did-keyup",f=>{this.handleKeyEvent("keyup",f)})),this._register(this.on("did-context-menu",f=>{if(!this.element||!this._contextKeyService)return;const v=this.element.getBoundingClientRect(),S=this._contextKeyService.createOverlay([...Object.entries(f.context),[j0,this.providedViewType]]);o.showContextMenu({menuId:b.WebviewContext,menuActionOptions:{shouldForwardArgs:!0},contextKeyService:S,getActionsContext:()=>({...f.context,webview:this.providedViewType}),getAnchor:()=>({x:v.x+f.clientX,y:v.y+f.clientY})}),this._send("set-context-menu-visible",{visible:!0})})),this._register(this.on("load-resource",async f=>{try{const v=Vx(f.authority),S=z.from({scheme:f.scheme,authority:v,path:decodeURIComponent(f.path),query:f.query?decodeURIComponent(f.query):f.query});this.loadResource(f.id,S,f.ifNoneMatch)}catch{this._send("did-load-resource",{id:f.id,status:404,path:f.path})}})),this._register(this.on("load-localhost",f=>{this.localLocalhost(f.id,f.origin)})),this._register(N.runAndSubscribe(t.onThemeDataChanged,()=>this.style())),this._register(m.onDidChangeReducedMotion(()=>this.style())),this._register(m.onDidChangeScreenReaderOptimized(()=>this.style())),this._register(o.onDidHideContextMenu(()=>this._send("set-context-menu-visible",{visible:!1}))),this._confirmBeforeClose=i.getValue("window.confirmBeforeClose"),this._register(i.onDidChangeConfiguration(f=>{f.affectsConfiguration("window.confirmBeforeClose")&&(this._confirmBeforeClose=i.getValue("window.confirmBeforeClose"),this._send("set-confirm-before-close",this._confirmBeforeClose))})),this._register(this.on("drag-start",()=>{this._startBlockingIframeDragEvents()})),this._register(this.on("drag",f=>{this.handleDragEvent("drag",f)})),e.options.enableFindWidget&&(this._webviewFindWidget=this._register(g.createInstance(zg,this)))}dispose(){var e;if(this._disposed=!0,(e=this.element)==null||e.remove(),this._element=void 0,this._messagePort=void 0,this._state.type===0){for(const t of this._state.pendingMessages)t.resolve(!1);this._state.pendingMessages=[]}this._onDidDispose.fire(),this._resourceLoadingCts.dispose(!0),super.dispose()}setContextKeyService(e){this._contextKeyService=e}postMessage(e,t){return this._send("message",{message:e,transfer:t})}async _send(e,t,i=[]){if(this._state.type===0){const{promise:o,resolve:n}=Wy();return this._state.pendingMessages.push({channel:e,data:t,transferable:i,resolve:n}),o}else return this.doPostMessage(e,t,i)}_createElement(e,t){const i=document.createElement("iframe");i.name=this.id,i.className=`webview ${e.customClasses||""}`,i.sandbox.add("allow-scripts","allow-same-origin","allow-forms","allow-pointer-lock","allow-downloads");const o=["cross-origin-isolated","autoplay"];return mp||o.push("clipboard-read","clipboard-write"),i.setAttribute("allow",o.join("; ")),i.style.border="none",i.style.width="100%",i.style.height="100%",i.focus=()=>{this._doFocus()},i}_initElement(e,t,i,o){const n={id:this.id,origin:this.origin,swVersion:String(this._expectedServiceWorkerVersion),extensionId:(t==null?void 0:t.id.value)??"",platform:this.platform,"vscode-resource-base-authority":Mx,parentOrigin:o.origin};this._options.disableServiceWorker&&(n.disableServiceWorker="true"),this._environmentService.remoteAuthority&&(n.remoteAuthority=this._environmentService.remoteAuthority),i.purpose&&(n.purpose=i.purpose),n.serviceWorkerUri=Ia.asBrowserUri("vs/workbench/contrib/webview/browser/pre/service-worker.js").toString(!0),n.fakeHtmlUri=Ia.asBrowserUri("vs/workbench/contrib/webview/browser/pre/fake.html").toString(!0),Lx.addSearchParam(n,!0,!0);const s=new URLSearchParams(n).toString(),r=mp?"index-no-csp.html":"index.html",a=Ia.asBrowserUri(`vs/workbench/contrib/webview/browser/pre/${r}`);this.element.setAttribute("src",`${a.toString(!0)}?${s}`)}mountTo(e,t){if(this.element){this._windowId=t.vscodeWindowId,this._encodedWebviewOriginPromise=Px(t.origin,this.origin).then(i=>this._encodedWebviewOrigin=i),this._encodedWebviewOriginPromise.then(i=>{this._disposed||this._initElement(i,this.extension,this._options,t)}),this._registerMessageHandler(t),this._webviewFindWidget&&e.appendChild(this._webviewFindWidget.getDomNode());for(const i of[B.MOUSE_DOWN,B.MOUSE_MOVE,B.DROP])this._register(L(e,i,()=>{this._stopBlockingIframeDragEvents()}));for(const i of[e,t])this._register(L(i,B.DRAG_END,()=>{this._stopBlockingIframeDragEvents()}));e.id=this.id,e.appendChild(this.element)}}_registerMessageHandler(e){const t=this._register(L(e,"message",i=>{var o,n;if(!(!this._encodedWebviewOrigin||((o=i==null?void 0:i.data)==null?void 0:o.target)!==this.id)&&i.data.channel==="webview-ready"){if(this._messagePort)return;this._logService.debug(`Webview(${this.id}): webview ready`),this._messagePort=i.ports[0],this._messagePort.onmessage=s=>{const r=this._messageHandlers.get(s.data.channel);if(!r){console.log(`No handlers found for '${s.data.channel}'`);return}r==null||r.forEach(a=>a(s.data.data,s))},(n=this.element)==null||n.classList.add("ready"),this._state.type===0&&this._state.pendingMessages.forEach(({channel:s,data:r,resolve:a})=>a(this.doPostMessage(s,r))),this._state=Il.Ready,t.dispose()}}))}_startBlockingIframeDragEvents(){this.element&&(this.element.style.pointerEvents="none")}_stopBlockingIframeDragEvents(){this.element&&(this.element.style.pointerEvents="auto")}webviewContentEndpoint(e){const t=this._environmentService.webviewExternalEndpoint;if(!t)throw new Error("'webviewExternalEndpoint' has not been configured. Webviews will not work!");const i=t.replace("{{uuid}}",e);return i[i.length-1]==="/"?i.slice(0,i.length-1):i}doPostMessage(e,t,i=[]){return this.element&&this._messagePort?(this._messagePort.postMessage({channel:e,args:t},i),!0):!1}on(e,t){let i=this._messageHandlers.get(e);return i||(i=new Set,this._messageHandlers.set(e,i)),i.add(t),ne(()=>{var o;(o=this._messageHandlers.get(e))==null||o.delete(t)})}handleNoCspFound(){var e;if(!this._hasAlertedAboutMissingCsp&&(this._hasAlertedAboutMissingCsp=!0,(e=this.extension)!=null&&e.id)){this._environmentService.isExtensionDevelopment&&this._onMissingCsp.fire(this.extension.id);const t={extension:this.extension.id.value};this._telemetryService.publicLog2("webviewMissingCsp",t)}}reload(){this.doUpdateContent(this._content);const e=this._register(this.on("did-load",()=>{this._onDidReload.fire(),e.dispose()}))}setHtml(e){this.doUpdateContent({...this._content,html:e}),this._onDidHtmlChange.fire(e)}setTitle(e){this._content={...this._content,title:e},this._send("set-title",e)}set contentOptions(e){if(this._logService.debug(`Webview(${this.id}): will update content options`),Rx(e,this._content.options)){this._logService.debug(`Webview(${this.id}): skipping content options update`);return}this.doUpdateContent({...this._content,options:e})}set localResourcesRoot(e){this._content={...this._content,options:{...this._content.options,localResourceRoots:e}}}set state(e){this._content={...this._content,state:e}}set initialScrollProgress(e){this._send("initial-scroll-position",e)}doUpdateContent(e){this._logService.debug(`Webview(${this.id}): will update content`),this._content=e;const t=!!this._content.options.allowScripts;this._send("content",{contents:this._content.html,title:this._content.title,options:{allowMultipleAPIAcquire:!!this._content.options.allowMultipleAPIAcquire,allowScripts:t,allowForms:this._content.options.allowForms??t},state:this._content.state,cspSource:Bx,confirmBeforeClose:this._confirmBeforeClose})}style(){let{styles:e,activeTheme:t,themeLabel:i,themeId:o}=this.webviewThemeDataProvider.getWebviewThemeData();this._options.transformCssVariables&&(e=this._options.transformCssVariables(e));const n=this._accessibilityService.isMotionReduced(),s=this._accessibilityService.isScreenReaderOptimized();this._send("styles",{styles:e,activeTheme:t,themeId:o,themeLabel:i,reduceMotion:n,screenReader:s})}handleFocusChange(e){this._focused=e,e?this._onDidFocus.fire():this._onDidBlur.fire()}handleKeyEvent(e,t){var o;const i=new KeyboardEvent(e,t);Object.defineProperty(i,"target",{get:()=>this.element}),(o=this.window)==null||o.dispatchEvent(i)}handleDragEvent(e,t){var o;const i=new DragEvent(e,t);Object.defineProperty(i,"target",{get:()=>this.element}),(o=this.window)==null||o.dispatchEvent(i)}windowDidDragStart(){this._startBlockingIframeDragEvents()}windowDidDragEnd(){this._stopBlockingIframeDragEvents()}selectAll(){this.execCommand("selectAll")}copy(){this.execCommand("copy")}paste(){this.execCommand("paste")}cut(){this.execCommand("cut")}undo(){this.execCommand("undo")}redo(){this.execCommand("redo")}execCommand(e){this.element&&this._send("execCommand",e)}async loadResource(e,t,i){try{const o=await R0(t,{ifNoneMatch:i,roots:this._content.options.localResourceRoots||[]},this._fileService,this._logService,this._resourceLoadingCts.token);switch(o.type){case ho.Type.Success:{const n=await this.streamToBuffer(o.stream);return this._send("did-load-resource",{id:e,status:200,path:t.path,mime:o.mimeType,data:n,etag:o.etag,mtime:o.mtime},[n])}case ho.Type.NotModified:return this._send("did-load-resource",{id:e,status:304,path:t.path,mime:o.mimeType,mtime:o.mtime});case ho.Type.AccessDenied:return this._send("did-load-resource",{id:e,status:401,path:t.path})}}catch{}return this._send("did-load-resource",{id:e,status:404,path:t.path})}async streamToBuffer(e){return(await Ox(e)).buffer.buffer}async localLocalhost(e,t){const i=this._environmentService.remoteAuthority,o=i?await this._remoteAuthorityResolverService.resolveAuthority(i):void 0,n=o?await this._portMappingManager.getRedirect(o.authority,t):void 0;return this._send("did-load-localhost",{id:e,origin:t,location:n})}focus(){this._doFocus(),this.handleFocusChange(!0)}_doFocus(){var e;if(this.element){try{(e=this.element.contentWindow)==null||e.focus()}catch{}this._focusDelayer.trigger(async()=>{var t,i,o,n;!this.isFocused||!this.element||(t=this.window)!=null&&t.document.activeElement&&this.window.document.activeElement!==this.element&&((i=this.window.document.activeElement)==null?void 0:i.tagName)!=="BODY"||((n=(o=this.window)==null?void 0:o.document.body)==null||n.focus(),this._send("focus",void 0))})}}find(e,t){this.element&&this._send("find",{value:e,previous:t})}updateFind(e){!e||!this.element||this._send("find",{value:e})}stopFind(e){this.element&&(this._send("find-stop",{clearSelection:!e}),this._onDidStopFind.fire())}showFind(e=!0){var t;(t=this._webviewFindWidget)==null||t.reveal(void 0,e)}hideFind(e=!0){var t;(t=this._webviewFindWidget)==null||t.hide(e)}runFindAction(e){var t;(t=this._webviewFindWidget)==null||t.find(e)}};Ug=x([u(2,F),u(3,Ve),u(4,He),u(5,bt),u(6,Oe),u(7,Je),u(8,Ax),u(9,Be),u(10,Qt),u(11,O),u(12,Vv)],Ug);let Kg=class extends R{get window(){return Cc(this._windowId,!0).window}constructor(e,t,i,o){super(),this._layoutService=t,this._webviewService=i,this._baseContextKeyService=o,this._isFirstLoad=!0,this._firstLoadPendingMessages=new Set,this._webview=this._register(new Se),this._webviewEvents=this._register(new P),this._html="",this._initialScrollProgress=0,this._state=void 0,this._owner=void 0,this._windowId=void 0,this._scopedContextKeyService=this._register(new Se),this._shouldShowFindWidgetOnRestore=!1,this._isDisposed=!1,this._onDidDispose=this._register(new I),this.onDidDispose=this._onDidDispose.event,this._onDidFocus=this._register(new I),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new I),this.onDidBlur=this._onDidBlur.event,this._onDidClickLink=this._register(new I),this.onDidClickLink=this._onDidClickLink.event,this._onDidReload=this._register(new I),this.onDidReload=this._onDidReload.event,this._onDidScroll=this._register(new I),this.onDidScroll=this._onDidScroll.event,this._onDidUpdateState=this._register(new I),this.onDidUpdateState=this._onDidUpdateState.event,this._onMessage=this._register(new I),this.onMessage=this._onMessage.event,this._onMissingCsp=this._register(new I),this.onMissingCsp=this._onMissingCsp.event,this._onDidWheel=this._register(new I),this.onDidWheel=this._onDidWheel.event,this._onFatalError=this._register(new I),this.onFatalError=this._onFatalError.event,this.providedViewType=e.providedViewType,this.origin=e.origin??ta(),this._title=e.title,this._extension=e.extension,this._options=e.options,this._contentOptions=e.contentOptions}get isFocused(){var e;return!!((e=this._webview.value)!=null&&e.isFocused)}dispose(){var e;this._isDisposed=!0,(e=this._container)==null||e.domNode.remove(),this._container=void 0;for(const t of this._firstLoadPendingMessages)t.resolve(!1);this._firstLoadPendingMessages.clear(),this._onDidDispose.fire(),super.dispose()}get container(){if(this._isDisposed)throw new Error("OverlayWebview has been disposed");if(!this._container){const e=document.createElement("div");e.style.position="absolute",e.style.overflow="hidden",this._container=new Nx(e),this._container.setVisibility("hidden"),this._layoutService.getContainer(this.window).appendChild(e)}return this._container.domNode}claim(e,t,i){var n,s,r,a,l;if(this._isDisposed)return;const o=this._owner;if(this._windowId!==t.vscodeWindowId&&(this.release(o),this._webview.clear(),this._webviewEvents.clear(),(n=this._container)==null||n.domNode.remove(),this._container=void 0),this._owner=e,this._windowId=t.vscodeWindowId,this._show(t),o!==e){const h=i||this._baseContextKeyService;this._scopedContextKeyService.clear(),this._scopedContextKeyService.value=h.createScoped(this.container);const p=(s=this._findWidgetVisible)==null?void 0:s.get();(r=this._findWidgetVisible)==null||r.reset(),this._findWidgetVisible=Hy.bindTo(h),this._findWidgetVisible.set(!!p),(a=this._findWidgetEnabled)==null||a.reset(),this._findWidgetEnabled=zy.bindTo(h),this._findWidgetEnabled.set(!!this.options.enableFindWidget),(l=this._webview.value)==null||l.setContextKeyService(this._scopedContextKeyService.value)}}release(e){var t;this._owner===e&&(this._scopedContextKeyService.clear(),this._owner=void 0,this._container&&this._container.setVisibility("hidden"),this._options.retainContextWhenHidden?(this._shouldShowFindWidgetOnRestore=!!((t=this._findWidgetVisible)!=null&&t.get()),this.hideFind(!1)):(this._webview.clear(),this._webviewEvents.clear()))}layoutWebviewOverElement(e,t,i){if(!this._container||!this._container.domNode.parentElement)return;const o=this._layoutService.whenContainerStylesLoaded(this.window);o?o.then(()=>this.doLayoutWebviewOverElement(e,t,i)):this.doLayoutWebviewOverElement(e,t,i)}doLayoutWebviewOverElement(e,t,i){if(!this._container||!this._container.domNode.parentElement)return;const o=e.getBoundingClientRect(),n=this._container.domNode.parentElement.getBoundingClientRect(),s=(n.height-this._container.domNode.parentElement.clientHeight)/2,r=(n.width-this._container.domNode.parentElement.clientWidth)/2;if(this._container.setTop(o.top-n.top-s),this._container.setLeft(o.left-n.left-r),this._container.setWidth(t?t.width:o.width),this._container.setHeight(t?t.height:o.height),i){const{top:a,left:l,right:h,bottom:p}=Y0(o,i);this._container.domNode.style.clipPath=`polygon(${l}px ${a}px, ${h}px ${a}px, ${h}px ${p}px, ${l}px ${p}px)`}}_show(e){var t,i;if(this._isDisposed)throw new Error("OverlayWebview is disposed");if(!this._webview.value){const o=this._webviewService.createWebviewElement({providedViewType:this.providedViewType,origin:this.origin,title:this._title,options:this._options,contentOptions:this._contentOptions,extension:this.extension});this._webview.value=o,o.state=this._state,this._scopedContextKeyService.value&&this._webview.value.setContextKeyService(this._scopedContextKeyService.value),this._html&&o.setHtml(this._html),this._options.tryRestoreScrollPosition&&(o.initialScrollProgress=this._initialScrollProgress),(t=this._findWidgetEnabled)==null||t.set(!!this.options.enableFindWidget),o.mountTo(this.container,e),this._webviewEvents.clear(),this._webviewEvents.add(o.onDidFocus(()=>{this._onDidFocus.fire()})),this._webviewEvents.add(o.onDidBlur(()=>{this._onDidBlur.fire()})),this._webviewEvents.add(o.onDidClickLink(n=>{this._onDidClickLink.fire(n)})),this._webviewEvents.add(o.onMessage(n=>{this._onMessage.fire(n)})),this._webviewEvents.add(o.onMissingCsp(n=>{this._onMissingCsp.fire(n)})),this._webviewEvents.add(o.onDidWheel(n=>{this._onDidWheel.fire(n)})),this._webviewEvents.add(o.onDidReload(()=>{this._onDidReload.fire()})),this._webviewEvents.add(o.onFatalError(n=>{this._onFatalError.fire(n)})),this._webviewEvents.add(o.onDidScroll(n=>{this._initialScrollProgress=n.scrollYPercentage,this._onDidScroll.fire(n)})),this._webviewEvents.add(o.onDidUpdateState(n=>{this._state=n,this._onDidUpdateState.fire(n)})),this._isFirstLoad&&this._firstLoadPendingMessages.forEach(async n=>{n.resolve(await o.postMessage(n.message,n.transfer))}),this._isFirstLoad=!1,this._firstLoadPendingMessages.clear()}this.options.retainContextWhenHidden&&this._shouldShowFindWidgetOnRestore&&(this.showFind(!1),this._shouldShowFindWidgetOnRestore=!1),(i=this._container)==null||i.setVisibility("visible")}setHtml(e){this._html=e,this._withWebview(t=>t.setHtml(e))}setTitle(e){this._title=e,this._withWebview(t=>t.setTitle(e))}get initialScrollProgress(){return this._initialScrollProgress}set initialScrollProgress(e){this._initialScrollProgress=e,this._withWebview(t=>t.initialScrollProgress=e)}get state(){return this._state}set state(e){this._state=e,this._withWebview(t=>t.state=e)}get extension(){return this._extension}set extension(e){this._extension=e,this._withWebview(t=>t.extension=e)}get options(){return this._options}set options(e){this._options={customClasses:this._options.customClasses,...e}}get contentOptions(){return this._contentOptions}set contentOptions(e){this._contentOptions=e,this._withWebview(t=>t.contentOptions=e)}set localResourcesRoot(e){this._withWebview(t=>t.localResourcesRoot=e)}async postMessage(e,t){if(this._webview.value)return this._webview.value.postMessage(e,t);if(this._isFirstLoad){let i;const o=new Promise(n=>i=n);return this._firstLoadPendingMessages.add({message:e,transfer:t,resolve:i}),o}return!1}focus(){var e;(e=this._webview.value)==null||e.focus()}reload(){var e;(e=this._webview.value)==null||e.reload()}selectAll(){var e;(e=this._webview.value)==null||e.selectAll()}copy(){var e;(e=this._webview.value)==null||e.copy()}paste(){var e;(e=this._webview.value)==null||e.paste()}cut(){var e;(e=this._webview.value)==null||e.cut()}undo(){var e;(e=this._webview.value)==null||e.undo()}redo(){var e;(e=this._webview.value)==null||e.redo()}showFind(e=!0){var t;this._webview.value&&(this._webview.value.showFind(e),(t=this._findWidgetVisible)==null||t.set(!0))}hideFind(e=!0){var t,i;(t=this._findWidgetVisible)==null||t.reset(),(i=this._webview.value)==null||i.hideFind(e)}runFindAction(e){var t;(t=this._webview.value)==null||t.runFindAction(e)}_withWebview(e){this._webview.value&&e(this._webview.value)}windowDidDragStart(){var e;(e=this._webview.value)==null||e.windowDidDragStart()}windowDidDragEnd(){var e;(e=this._webview.value)==null||e.windowDidDragEnd()}setContextKeyService(e){var t;(t=this._webview.value)==null||t.setContextKeyService(e)}};Kg=x([u(1,Y),u(2,Ds),u(3,K)],Kg);function Y0(c,e){const t=e.getBoundingClientRect(),i=Math.max(t.top-c.top,0),o=Math.max(c.width-(c.right-t.right),0),n=Math.max(c.height-(c.bottom-t.bottom),0),s=Math.max(t.left-c.left,0);return{top:i,right:o,bottom:n,left:s}}let qg=class extends R{constructor(e){super(),this._instantiationService=e,this._webviews=new Set,this._onDidChangeActiveWebview=this._register(new I),this.onDidChangeActiveWebview=this._onDidChangeActiveWebview.event,this._webviewThemeDataProvider=this._instantiationService.createInstance(Hg)}get activeWebview(){return this._activeWebview}_updateActiveWebview(e){e!==this._activeWebview&&(this._activeWebview=e,this._onDidChangeActiveWebview.fire(e))}get webviews(){return this._webviews.values()}createWebviewElement(e){const t=this._instantiationService.createInstance(Ug,e,this._webviewThemeDataProvider);return this.registerNewWebview(t),t}createWebviewOverlay(e){const t=this._instantiationService.createInstance(Kg,e);return this.registerNewWebview(t),t}registerNewWebview(e){this._webviews.add(e);const t=new P;t.add(e.onDidFocus(()=>{this._updateActiveWebview(e)}));const i=()=>{this._activeWebview===e&&this._updateActiveWebview(void 0)};t.add(e.onDidBlur(i)),t.add(e.onDidDispose(()=>{i(),t.dispose(),this._webviews.delete(e)}))}};qg=x([u(0,O)],qg);class Z0 extends R{constructor(){super(...arguments),this._resolvers=new Map,this._awaitingRevival=new Map,this._onNewResolverRegistered=this._register(new I),this.onNewResolverRegistered=this._onNewResolverRegistered.event}register(e,t){if(this._resolvers.has(e))throw new Error(`View resolver already registered for ${e}`);this._resolvers.set(e,t),this._onNewResolverRegistered.fire({viewType:e});const i=this._awaitingRevival.get(e);return i&&t.resolve(i.webview,Ti.None).then(()=>{this._awaitingRevival.delete(e),i.resolve()}),ne(()=>{this._resolvers.delete(e)})}resolve(e,t,i){const o=this._resolvers.get(e);if(!o){if(this._awaitingRevival.has(e))throw new Error("View already awaiting revival");const{promise:n,resolve:s}=Wy();return this._awaitingRevival.set(e,{webview:t,resolve:s}),n}return o.resolve(t,i)}}var X0='.monaco-workbench .progress-badge>.badge-content:before{background-color:currentColor;background-repeat:no-repeat;bottom:0;content:"";height:14px;left:0;margin:auto;mask:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMiAyIDE0IDE0Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNOSAxNmMtMy44NiAwLTctMy4xNC03LTdzMy4xNC03IDctN2MzLjg1OSAwIDcgMy4xNDEgNyA3cy0zLjE0MSA3LTcgN3pNOSAzLjRDNS45MTIgMy40IDMuNCA1LjkxMyAzLjQgOXMyLjUxMiA1LjYgNS42IDUuNiA1LjYtMi41MTIgNS42LTUuNlMxMi4wODggMy40IDkgMy40em0zLjg2IDcuMUw5LjcgOC42MDRWNC44SDguM3Y0LjU5NmwzLjg0IDIuMzA1LjcyLTEuMjAxeiIvPjwvc3ZnPg==") no-repeat;-webkit-mask:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMiAyIDE0IDE0Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNOSAxNmMtMy44NiAwLTctMy4xNC03LTdzMy4xNC03IDctN2MzLjg1OSAwIDcgMy4xNDEgNyA3cy0zLjE0MSA3LTcgN3pNOSAzLjRDNS45MTIgMy40IDMuNCA1LjkxMyAzLjQgOXMyLjUxMiA1LjYgNS42IDUuNiA1LjYtMi41MTIgNS42LTUuNlMxMi4wODggMy40IDkgMy40em0zLjg2IDcuMUw5LjcgOC42MDRWNC44SDguM3Y0LjU5NmwzLjg0IDIuMzA1LjcyLTEuMjAxeiIvPjwvc3ZnPg==") no-repeat;position:absolute;right:0;top:0;width:14px}';we(X0,{});var J0=".monaco-dialog-modal-block{align-items:center;display:flex;height:100%;justify-content:center;left:0;position:fixed;top:0;width:100%;z-index:2600}.monaco-dialog-modal-block.dimmed{background:rgba(0,0,0,.3)}.monaco-dialog-box{border-radius:3px;display:flex;flex-direction:column-reverse;max-width:90vw;min-height:75px;min-width:500px;padding:10px;transform:translateZ(0);width:min-content}.monaco-dialog-box .dialog-toolbar-row{height:22px;padding-bottom:4px}.monaco-dialog-box .dialog-toolbar-row .actions-container{justify-content:flex-end}.monaco-dialog-box .dialog-message-row{align-items:center;display:flex;flex-grow:1;padding:0 10px}.monaco-dialog-box .dialog-message-row>.dialog-icon.codicon{align-self:baseline;flex:0 0 48px;font-size:48px;height:48px}.monaco-dialog-box .dialog-message-row .dialog-message-container{word-wrap:break-word;display:flex;flex-direction:column;overflow:hidden;padding-left:24px;text-overflow:ellipsis;user-select:text;-webkit-user-select:text;white-space:normal}.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message{word-wrap:break-word;align-items:center;display:flex;flex:1;font-size:18px;line-height:22px;margin-bottom:8px;min-height:48px;white-space:normal}.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message-detail{flex:1;line-height:22px}.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message a:focus{outline-style:solid;outline-width:1px}.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-checkbox-row{display:flex;padding:15px 0 0}.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-checkbox-row .dialog-checkbox-message{cursor:pointer;user-select:none;-webkit-user-select:none}.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message-input{display:flex;padding:15px 0 0}.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message-input .monaco-inputbox{flex:1}.monaco-dialog-box code{font-family:var(--monaco-monospace-font)}.monaco-dialog-box>.dialog-buttons-row{align-items:center;display:flex;overflow:hidden;padding-right:1px;padding:20px 10px 10px;white-space:nowrap}.monaco-dialog-box>.dialog-buttons-row>.dialog-buttons{display:flex;justify-content:flex-end;margin-left:67px;overflow:hidden;width:100%}.monaco-dialog-box>.dialog-buttons-row>.dialog-buttons>.monaco-button{margin:4px 5px;outline-offset:2px!important;overflow:hidden;padding:5px 10px;text-overflow:ellipsis;width:fit-content}";we(J0,{});class Q0 extends R{constructor(e,t,i,o){super(),this.container=e,this.message=t,this.options=o,this.modalElement=this.container.appendChild(H(".monaco-dialog-modal-block.dimmed")),this.shadowElement=this.modalElement.appendChild(H(".dialog-shadow")),this.element=this.shadowElement.appendChild(H(".monaco-dialog-box")),this.element.setAttribute("role","dialog"),this.element.tabIndex=-1,Co(this.element),this.buttonStyles=o.buttonStyles,Array.isArray(i)&&i.length>0?this.buttons=i:this.options.disableDefaultAction?this.buttons=[]:this.buttons=[d(9702,"OK")];const n=this.element.appendChild(H(".dialog-buttons-row"));this.buttonsContainer=n.appendChild(H(".dialog-buttons"));const s=this.element.appendChild(H(".dialog-message-row"));if(this.iconElement=s.appendChild(H("#monaco-dialog-icon.dialog-icon")),this.iconElement.setAttribute("aria-label",this.getIconAriaLabel()),this.messageContainer=s.appendChild(H(".dialog-message-container")),this.options.detail||this.options.renderBody){const l=this.messageContainer.appendChild(H(".dialog-message")).appendChild(H("#monaco-dialog-message-text.dialog-message-text"));l.innerText=this.message}if(this.messageDetailElement=this.messageContainer.appendChild(H("#monaco-dialog-message-detail.dialog-message-detail")),this.options.detail||!this.options.renderBody?this.messageDetailElement.innerText=this.options.detail?this.options.detail:t:this.messageDetailElement.style.display="none",this.options.renderBody){const a=this.messageContainer.appendChild(H("#monaco-dialog-message-body.dialog-message-body"));this.options.renderBody(a);for(const l of this.messageContainer.querySelectorAll("a"))l.tabIndex=0}if(this.options.inputs?this.inputs=this.options.inputs.map(a=>{const l=this.messageContainer.appendChild(H(".dialog-message-input")),h=this._register(new Uy(l,void 0,{placeholder:a.placeholder,type:a.type??"text",inputBoxStyles:o.inputBoxStyles}));return a.value&&(h.value=a.value),h}):this.inputs=[],this.options.checkboxLabel){const a=this.messageContainer.appendChild(H(".dialog-checkbox-row")),l=this.checkbox=this._register(new Fx(this.options.checkboxLabel,!!this.options.checkboxChecked,o.checkboxStyles));a.appendChild(l.domNode);const h=a.appendChild(H(".dialog-checkbox-message"));h.innerText=this.options.checkboxLabel,this._register(L(h,B.CLICK,()=>l.checked=!l.checked))}const r=this.element.appendChild(H(".dialog-toolbar-row"));this.toolbarContainer=r.appendChild(H(".dialog-toolbar")),this.applyStyles()}getIconAriaLabel(){let e=d(9703,"Info");switch(this.options.type){case"error":e=d(9704,"Error");break;case"warning":e=d(9705,"Warning");break;case"pending":e=d(9706,"In Progress");break}return e}updateMessage(e){this.messageDetailElement.innerText=e}async show(){return this.focusToReturn=this.container.ownerDocument.activeElement,new Promise(e=>{Zt(this.buttonsContainer);const t=this.buttonBar=this._register(new _f(this.buttonsContainer)),i=this.rearrangeButtons(this.buttons,this.options.cancelId);i.forEach((s,r)=>{const a=i[r].index===0,l=this.options.buttonDetails?this._register(t.addButtonWithDescription({secondary:!a,...this.buttonStyles})):this._register(t.addButton({secondary:!a,...this.buttonStyles}));l.label=Gx(i[r].label,!0),l instanceof Wx&&(l.description=this.options.buttonDetails[i[r].index]),this._register(l.onDidClick(h=>{h&&re.stop(h),e({button:i[r].index,checkboxChecked:this.checkbox?this.checkbox.checked:void 0,values:this.inputs.length>0?this.inputs.map(p=>p.value):void 0})}))});const o=fe(this.container);this._register(L(o,"keydown",s=>{var l;const r=new xi(s);if(r.equals(512)&&r.preventDefault(),r.equals(3)){this.inputs.some(h=>h.hasFocus())&&(re.stop(s),e({button:((l=i.find(h=>h.index!==this.options.cancelId))==null?void 0:l.index)??0,checkboxChecked:this.checkbox?this.checkbox.checked:void 0,values:this.inputs.length>0?this.inputs.map(h=>h.value):void 0}));return}if(r.equals(10))return;let a=!1;if(r.equals(2)||r.equals(17)||r.equals(1026)||r.equals(15)){const h=[];let p=-1;if(this.messageContainer){const g=this.messageContainer.querySelectorAll("a");for(const m of g)h.push(m),Of(m)&&(p=h.length-1)}for(const g of this.inputs)h.push(g),g.hasFocus()&&(p=h.length-1);if(this.checkbox&&(h.push(this.checkbox),this.checkbox.hasFocus()&&(p=h.length-1)),this.buttonBar)for(const g of this.buttonBar.buttons)h.push(g),g.hasFocus()&&(p=h.length-1);if(r.equals(2)||r.equals(17)){p===-1&&(p=0);const g=(p+1)%h.length;h[g].focus()}else{p===-1&&(p=h.length);let g=p-1;g===-1&&(g=h.length-1),h[g].focus()}a=!0}a?re.stop(s,!0):this.options.keyEventProcessor&&this.options.keyEventProcessor(r)},!0)),this._register(L(o,"keyup",s=>{re.stop(s,!0);const r=new xi(s);!this.options.disableCloseAction&&r.equals(9)&&e({button:this.options.cancelId||0,checkboxChecked:this.checkbox?this.checkbox.checked:void 0})},!0)),this._register(L(this.element,"focusout",s=>{s.relatedTarget&&this.element&&(Yi(s.relatedTarget,this.element)||(this.focusToReturn=s.relatedTarget,s.target&&(s.target.focus(),re.stop(s,!0))))},!1));const n="codicon-modifier-spin";if(this.iconElement.classList.remove(...oe.asClassNameArray(T.dialogError),...oe.asClassNameArray(T.dialogWarning),...oe.asClassNameArray(T.dialogInfo),...oe.asClassNameArray(T.loading),n),this.options.icon)this.iconElement.classList.add(...oe.asClassNameArray(this.options.icon));else switch(this.options.type){case"error":this.iconElement.classList.add(...oe.asClassNameArray(T.dialogError));break;case"warning":this.iconElement.classList.add(...oe.asClassNameArray(T.dialogWarning));break;case"pending":this.iconElement.classList.add(...oe.asClassNameArray(T.loading),n);break;case"none":this.iconElement.classList.add("no-codicon");break;case"info":case"question":default:this.iconElement.classList.add(...oe.asClassNameArray(T.dialogInfo));break}if(!this.options.disableCloseAction){const s=this._register(new Vo(this.toolbarContainer,{})),r=this._register(new de("dialog.close",d(9707,"Close Dialog"),oe.asClassName(T.dialogClose),!0,async()=>{e({button:this.options.cancelId||0,checkboxChecked:this.checkbox?this.checkbox.checked:void 0})}));s.push(r,{icon:!0,label:!1})}this.applyStyles(),this.element.setAttribute("aria-modal","true"),this.element.setAttribute("aria-labelledby","monaco-dialog-icon monaco-dialog-message-text"),this.element.setAttribute("aria-describedby","monaco-dialog-icon monaco-dialog-message-text monaco-dialog-message-detail monaco-dialog-message-body"),qi(this.element),this.inputs.length>0?(this.inputs[0].focus(),this.inputs[0].select()):i.forEach((s,r)=>{s.index===0&&t.buttons[r].focus()})})}applyStyles(){const e=this.options.dialogStyles,t=e.dialogForeground,i=e.dialogBackground,o=e.dialogShadow?`0 0px 8px ${e.dialogShadow}`:"",n=e.dialogBorder?`1px solid ${e.dialogBorder}`:"",s=e.textLinkForeground;if(this.shadowElement.style.boxShadow=o,this.element.style.color=t??"",this.element.style.backgroundColor=i??"",this.element.style.border=n,s)for(const a of this.messageContainer.getElementsByTagName("a"))a.style.color=s;let r;switch(this.options.type){case"error":r=e.errorIconForeground;break;case"warning":r=e.warningIconForeground;break;default:r=e.infoIconForeground;break}r&&(this.iconElement.style.color=r)}dispose(){super.dispose(),this.modalElement&&(this.modalElement.remove(),this.modalElement=void 0),this.focusToReturn&&Yi(this.focusToReturn,this.container.ownerDocument.body)&&(this.focusToReturn.focus(),this.focusToReturn=void 0)}rearrangeButtons(e,t){const i=e.map((o,n)=>({label:o,index:n}));if(e.length<2)return i;if(be||fc){if(typeof t=="number"&&i[t]){const o=i.splice(t,1)[0];i.splice(1,0,o)}i.reverse()}else if(Xt&&typeof t=="number"&&i[t]){const o=i.splice(t,1)[0];i.push(o)}return i}}let $g=class extends R{constructor(e,t,i,o,n,s,r,a,l){super(),this.activityService=e,this.paneCompositeService=t,this.viewDescriptorService=i,this.viewsService=o,this.notificationService=n,this.statusbarService=s,this.layoutService=r,this.keybindingService=a,this.userActivityService=l,this.windowProgressStack=[],this.windowProgressStatusEntry=void 0}async withProgress(e,t,i){const{location:o}=e,n=async r=>{const a=this.userActivityService.markActive({whenHeldFor:15e3});try{return await t(r)}finally{a.dispose()}},s=r=>{const a=this.viewDescriptorService.getViewContainerById(r);if(a){const l=this.viewDescriptorService.getViewContainerLocation(a);if(l!==null)return this.withPaneCompositeProgress(r,l,n,{...e,location:r})}if(this.viewDescriptorService.getViewDescriptorById(r)!==null)return this.withViewProgress(r,n,{...e,location:r});throw new Error(`Bad progress location: ${r}`)};if(typeof o=="string")return s(o);switch(o){case 15:{let r=e.priority;return r!==Os.URGENT&&(this.notificationService.getFilter()===$b.ERROR?r=Os.SILENT:zx(e.source)&&this.notificationService.getFilter(e.source)===$b.ERROR&&(r=Os.SILENT)),this.withNotificationProgress({...e,location:o,priority:r},n,i)}case 10:{const r=e.type;return e.command?this.withWindowProgress({...e,location:o,type:r},n):this.withNotificationProgress({delay:150,...e,priority:Os.SILENT,location:15,type:r},n,i)}case 1:return this.withPaneCompositeProgress("workbench.view.explorer",0,n,{...e,location:o});case 3:return s("workbench.scm");case 5:return this.withPaneCompositeProgress("workbench.view.extensions",0,n,{...e,location:o});case 20:return this.withDialogProgress(e,n,i);default:throw new Error(`Bad progress location: ${o}`)}}withWindowProgress(e,t){const i=[e,new qy(()=>this.updateWindowProgress())],o=t(i[1]);let n=setTimeout(()=>{n=void 0,this.windowProgressStack.unshift(i),this.updateWindowProgress(),Promise.all([Lr(150),o]).finally(()=>{const s=this.windowProgressStack.indexOf(i);this.windowProgressStack.splice(s,1),this.updateWindowProgress()})},150);return o.finally(()=>clearTimeout(n))}updateWindowProgress(e=0){var t;if(e<this.windowProgressStack.length){const[i,o]=this.windowProgressStack[e],n=i.title,s=o.value&&o.value.message,r=i.command;let a,l;const h=i.source&&typeof i.source!="string"?i.source.label:i.source;if(n&&s)a=d(4210,"{0}: {1}",n,s),l=h?d(4211,"[{0}] {1}: {2}",h,n,s):a;else if(n)a=n,l=h?d(4212,"[{0}]: {1}",h,n):a;else if(s)a=s,l=h?d(4212,"[{0}]: {1}",h,s):a;else{this.updateWindowProgress(e+1);return}const p={name:d(4213,"Progress Message"),text:a,showProgress:i.type||!0,ariaLabel:a,tooltip:jb(l).trim(),command:r};this.windowProgressStatusEntry?this.windowProgressStatusEntry.update(p):this.windowProgressStatusEntry=this.statusbarService.addEntry(p,"status.progress",0)}else(t=this.windowProgressStatusEntry)==null||t.dispose(),this.windowProgressStatusEntry=void 0}withNotificationProgress(e,t,i){const o=new class extends R{get step(){return this._step}get done(){return this._done}constructor(){super(),this._onDidReport=this._register(new I),this.onDidReport=this._onDidReport.event,this._onWillDispose=this._register(new I),this.onWillDispose=this._onWillDispose.event,this._step=void 0,this._done=!1,this.promise=t(this),this.promise.finally(()=>{this.dispose()})}report(m){this._step=m,this._onDidReport.fire(m)}cancel(m){i==null||i(m),this.dispose()}dispose(){this._done=!0,this._onWillDispose.fire(),super.dispose()}},n=()=>{const m=new Br;return this.withWindowProgress({location:10,title:e.title?Dd(e.title).toString():void 0,command:"notifications.showList",type:e.type},f=>{function v(E){E.message&&f.report({message:Dd(E.message).toString()})}o.step&&v(o.step);const S=o.onDidReport(E=>v(E));return m.p.finally(()=>S.dispose()),N.once(o.onWillDispose)(()=>m.complete()),m.p}),ne(()=>m.complete())},s=(m,f,v)=>{const S=new P,E=e.primaryActions?Array.from(e.primaryActions):[],D=e.secondaryActions?Array.from(e.secondaryActions):[];if(e.buttons&&e.buttons.forEach((q,W)=>{const G=new class extends de{constructor(){super(`progress.button.${q}`,q,void 0,!0)}async run(){o.cancel(W)}};S.add(G),E.push(G)}),e.cancellable){const q=new class extends de{constructor(){super("progress.cancel",typeof e.cancellable=="string"?e.cancellable:d(4214,"Cancel"),void 0,!0)}async run(){o.cancel()}};S.add(q),E.push(q)}const V=this.notificationService.notify({severity:me.Info,message:jb(m),source:e.source,actions:{primary:E,secondary:D},progress:typeof v=="number"&&v>=0?{total:100,worked:v}:{infinite:!0},priority:f});let M;const J=q=>{Re(M),!q&&!o.done&&(M=n())};return S.add(V.onDidChangeVisibility(J)),f===Os.SILENT&&J(!1),N.once(V.onDidClose)(()=>S.dispose()),V},r=(m,f)=>{typeof f=="number"&&f>=0?(m.progress.total(100),m.progress.worked(f)):m.progress.infinite()};let a,l,h;const p=m=>{m!=null&&m.message&&e.title?h=`${e.title}: ${m.message}`:h=e.title||(m==null?void 0:m.message),!a&&h&&(typeof e.delay=="number"&&e.delay>0?typeof l!="number"&&(l=setTimeout(()=>a=s(h,e.priority,m==null?void 0:m.increment),e.delay)):a=s(h,e.priority,m==null?void 0:m.increment)),a&&(h&&a.updateMessage(h),typeof(m==null?void 0:m.increment)=="number"&&r(a,m.increment))};p(o.step);const g=o.onDidReport(m=>p(m));return N.once(o.onWillDispose)(()=>g.dispose()),(async()=>{try{typeof e.delay=="number"&&e.delay>0?await o.promise:await Promise.all([Lr(800),o.promise])}finally{clearTimeout(l),a==null||a.close()}})(),o.promise}withPaneCompositeProgress(e,t,i,o){const n=this.paneCompositeService.getProgressIndicator(e,t),s=n?this.withCompositeProgress(n,i,o):i({report:()=>{}});return t===0&&this.showOnActivityBar(e,o,s),s}withViewProgress(e,t,i){var a;const o=this.viewsService.getViewProgressIndicator(e),n=o?this.withCompositeProgress(o,t,i):t({report:()=>{}});if(this.viewDescriptorService.getViewLocationById(e)!==0)return n;const r=(a=this.viewDescriptorService.getViewContainerByViewId(e))==null?void 0:a.id;return r===void 0||this.showOnActivityBar(r,i,n),n}showOnActivityBar(e,t,i){let o,n=setTimeout(()=>{n=void 0;const s=this.activityService.showViewContainerActivity(e,{badge:new rS(()=>""),priority:100}),r=Date.now(),a=300;o={dispose(){const l=Date.now()-r;l<a?setTimeout(()=>s.dispose(),a-l):s.dispose()}}},t.delay||300);i.finally(()=>{clearTimeout(n),Re(o)})}withCompositeProgress(e,t,i){let o;function n(r){let a,l;return typeof r<"u"&&(typeof r=="number"?a=r:typeof r.increment=="number"&&(a=r.total??100,l=r.increment)),typeof a=="number"?(o||(o=e.show(a,i.delay),s.catch(()=>{}).finally(()=>o==null?void 0:o.done())),typeof l=="number"&&o.worked(l)):(o==null||o.done(),e.showWhile(s,i.delay)),o}const s=t({report:r=>{n(r)}});return n(i.total),s}withDialogProgress(e,t,i){const o=new P,n=["workbench.action.quit","workbench.action.reloadWindow","copy","cut","editor.action.clipboardCopyAction","editor.action.clipboardCutAction"];let s;const r=m=>{const f=e.buttons||[];return e.sticky||f.push(e.cancellable?typeof e.cancellable=="boolean"?d(4214,"Cancel"):e.cancellable:d(4215,"Dismiss")),s=new Q0(this.layoutService.activeContainer,m,f,{type:"pending",detail:e.detail,cancelId:f.length-1,disableCloseAction:e.sticky,disableDefaultAction:e.sticky,keyEventProcessor:v=>{const S=this.keybindingService.softDispatch(v,this.layoutService.activeContainer);S.kind===2&&S.commandId&&(n.includes(S.commandId)||re.stop(v,!0))},buttonStyles:Vr,checkboxStyles:Ux,inputBoxStyles:Uf,dialogStyles:Kx}),o.add(s),s.show().then(v=>{i==null||i(v.button),Re(s)}),s};let a=e.delay??0,l;const h=o.add(new Yr(()=>{a=0,l&&!s?s=r(l):l&&s.updateMessage(l)},0)),p=function(m){l=m,h.isScheduled()||h.schedule(a)},g=t({report:m=>{p(m.message)}});return g.finally(()=>{Re(o)}),e.title&&p(e.title),g}};$g=x([u(0,Wt),u(1,Gt),u(2,Te),u(3,it),u(4,He),u(5,kn),u(6,Ky),u(7,xe),u(8,Hx)],$g);let jg=class extends R{constructor(e){super(),this.paneCompositeParts=new Map;const t=e.createInstance(og),i=e.createInstance(Qp),o=e.createInstance(ng);this.paneCompositeParts.set(1,t),this.paneCompositeParts.set(0,i),this.paneCompositeParts.set(2,o);const n=this._register(new P);this.onDidPaneCompositeOpen=N.any(...Yb.map(s=>N.map(this.paneCompositeParts.get(s).onDidPaneCompositeOpen,r=>({composite:r,viewContainerLocation:s}),n))),this.onDidPaneCompositeClose=N.any(...Yb.map(s=>N.map(this.paneCompositeParts.get(s).onDidPaneCompositeClose,r=>({composite:r,viewContainerLocation:s}),n)))}openPaneComposite(e,t,i){return this.getPartByLocation(t).openPaneComposite(e,i)}getActivePaneComposite(e){return this.getPartByLocation(e).getActivePaneComposite()}getPaneComposite(e,t){return this.getPartByLocation(t).getPaneComposite(e)}getPaneComposites(e){return this.getPartByLocation(e).getPaneComposites()}getPinnedPaneCompositeIds(e){return this.getPartByLocation(e).getPinnedPaneCompositeIds()}getVisiblePaneCompositeIds(e){return this.getPartByLocation(e).getVisiblePaneCompositeIds()}getPaneCompositeIds(e){return this.getPartByLocation(e).getPaneCompositeIds()}getProgressIndicator(e,t){return this.getPartByLocation(t).getProgressIndicator(e)}hideActivePaneComposite(e){this.getPartByLocation(e).hideActivePaneComposite()}getLastActivePaneCompositeId(e){return this.getPartByLocation(e).getLastActivePaneCompositeId()}getPartByLocation(e){return ae(this.paneCompositeParts.get(e))}};jg=x([u(0,O)],jg);async function eM(c){const e=navigator.usb;if(!e)return;const t=await e.requestDevice({filters:(c==null?void 0:c.filters)??[]});if(t)return{deviceClass:t.deviceClass,deviceProtocol:t.deviceProtocol,deviceSubclass:t.deviceSubclass,deviceVersionMajor:t.deviceVersionMajor,deviceVersionMinor:t.deviceVersionMinor,deviceVersionSubminor:t.deviceVersionSubminor,manufacturerName:t.manufacturerName,productId:t.productId,productName:t.productName,serialNumber:t.serialNumber,usbVersionMajor:t.usbVersionMajor,usbVersionMinor:t.usbVersionMinor,usbVersionSubminor:t.usbVersionSubminor,vendorId:t.vendorId}}async function tM(c){const e=navigator.serial;if(!e)return;const t=await e.requestPort({filters:(c==null?void 0:c.filters)??[]});if(!t)return;const i=t.getInfo();return{usbVendorId:i.usbVendorId,usbProductId:i.usbProductId}}async function iM(c){const e=navigator.hid;if(!e)return;const t=await e.requestDevice({filters:(c==null?void 0:c.filters)??[]});if(!t.length)return;const i=t[0];return{opened:i.opened,vendorId:i.vendorId,productId:i.productId,productName:i.productName,collections:i.collections}}const oM=d(11110,"open"),nM=d(11111,"close"),sM=d(11112,"find");var tp={open:oM,close:nM,find:sM};let Yg=class{constructor(e,t,i,o){this.fileService=e,this.environmentService=t,this.lifecycleService=i,this.logService=o}async getLogs(){return qx(this.fileService,this.environmentService)}async whenWorkbenchRestored(){this.logService.info("[driver] Waiting for restored lifecycle phase..."),await this.lifecycleService.when(3),this.logService.info("[driver] Restored lifecycle phase reached. Waiting for contributions..."),await $.as(Pc.Workbench).whenRestored,this.logService.info("[driver] Workbench contributions created.")}async setValue(e,t){const i=ge.document.querySelector(e);if(!i)return Promise.reject(new Error(`Element not found: ${e}`));const o=i;o.value=t;const n=new Event("input",{bubbles:!0,cancelable:!0});o.dispatchEvent(n)}async isActiveElement(e){if(ge.document.querySelector(e)!==ge.document.activeElement){const i=[];let o=ge.document.activeElement;for(;o;){const n=o.tagName,s=o.id?`#${o.id}`:"",r=hi(o.className.split(/\s+/g).map(a=>a.trim())).map(a=>`.${a}`).join("");i.unshift(`${n}${s}${r}`),o=o.parentElement}throw new Error(`Active element not found. Current active element is '${i.join(" > ")}'. Looking for ${e}`)}return!0}async getElements(e,t){const i=ge.document.querySelectorAll(e),o=[];for(let n=0;n<i.length;n++){const s=i.item(n);o.push(this.serializeElement(s,t))}return o}serializeElement(e,t){const i=Object.create(null);for(let r=0;r<e.attributes.length;r++){const a=e.attributes.item(r);a&&(i[a.name]=a.value)}const o=[];if(t)for(let r=0;r<e.children.length;r++){const a=e.children.item(r);a&&o.push(this.serializeElement(a,!0))}const{left:n,top:s}=Zb(e);return{tagName:e.tagName,className:e.className,textContent:e.textContent||"",attributes:i,children:o,left:n,top:s}}async getElementXY(e,t,i){const o=typeof t=="number"&&typeof i=="number"?{x:t,y:i}:void 0;return this._getElementXY(e,o)}async typeInEditor(e,t){const i=ge.document.querySelector(e);if(!i)throw new Error(`Editor not found: ${e}`);const o=i,n=o.selectionStart,s=n+t.length,r=o.value,a=r.substr(0,n)+t+r.substr(n);o.value=a,o.setSelectionRange(s,s);const l=new Event("input",{bubbles:!0,cancelable:!0});o.dispatchEvent(l)}async getTerminalBuffer(e){const t=ge.document.querySelector(e);if(!t)throw new Error(`Terminal not found: ${e}`);const i=t.xterm;if(!i)throw new Error(`Xterm not found: ${e}`);const o=[];for(let n=0;n<i.buffer.active.length;n++)o.push(i.buffer.active.getLine(n).translateToString(!0));return o}async writeInTerminal(e,t){const i=ge.document.querySelector(e);if(!i)throw new Error(`Element not found: ${e}`);const o=i.xterm;if(!o)throw new Error(`Xterm not found: ${e}`);o.input(t)}getLocaleInfo(){return Promise.resolve({language:$x,locale:jx})}getLocalizedStrings(){return Promise.resolve({open:tp.open,close:tp.close,find:tp.find})}async _getElementXY(e,t){const i=ge.document.querySelector(e);if(!i)return Promise.reject(new Error(`Element not found: ${e}`));const{left:o,top:n}=Zb(i),{width:s,height:r}=jy(i);let a,l;return t?(a=o+t.x,l=n+t.y):(a=o+s/2,l=n+r/2),a=Math.round(a),l=Math.round(l),{x:a,y:l}}async exitApplication(){}};Yg=x([u(0,Oe),u(1,$y),u(2,wn),u(3,Je)],Yg);function rM(c){Object.assign(ge,{driver:c.createInstance(Yg)})}var Tn,Qo;let Dl=(Qo=class extends R{constructor(e,t={getWindowsCount:Xb,getWindows:Jb},i,o){super(),this.hostService=i,this.environmentService=o,this.enableWindowFocusOnElementFocus(e),this.enableMultiWindowAwareTimeout(e,t),this.registerFullScreenListeners(e.vscodeWindowId)}enableWindowFocusOnElementFocus(e){const t=e.HTMLElement.prototype.focus,i=this;e.HTMLElement.prototype.focus=function(o){i.onElementFocus(fe(this)),t.apply(this,[o])}}onElementFocus(e){const t=Ar();t!==e&&t.document.hasFocus()&&(e.focus(),!this.environmentService.extensionTestsLocationURI&&!e.document.hasFocus()&&this.hostService.focus(e))}enableMultiWindowAwareTimeout(e,t={getWindowsCount:Xb,getWindows:Jb}){const i=e.setTimeout;Object.defineProperty(e,"vscodeOriginalSetTimeout",{get:()=>i});const o=e.clearTimeout;Object.defineProperty(e,"vscodeOriginalClearTimeout",{get:()=>o}),e.setTimeout=function(n,s=0,...r){if(t.getWindowsCount()===1||typeof n=="string"||s===0)return i.apply(this,[n,s,...r]);const a=new Set,l=Tn.TIMEOUT_HANDLES++;Tn.TIMEOUT_DISPOSABLES.set(l,a);const h=Wf(n,()=>{Re(a),Tn.TIMEOUT_DISPOSABLES.delete(l)});for(const{window:p,disposables:g}of t.getWindows()){if(Yy(p)&&p.document.visibilityState==="hidden")continue;let m=!1;const f=p.vscodeOriginalSetTimeout.apply(this,[(...S)=>{m||h(...S)},s,...r]),v=ne(()=>{m=!0,p.vscodeOriginalClearTimeout(f),a.delete(v)});g.add(v),a.add(v)}return l},e.clearTimeout=function(n){const s=typeof n=="number"?Tn.TIMEOUT_DISPOSABLES.get(n):void 0;s?(Re(s),Tn.TIMEOUT_DISPOSABLES.delete(n)):o.apply(this,[n])}}registerFullScreenListeners(e){this._register(this.hostService.onDidChangeFullScreen(({windowId:t,fullscreen:i})=>{if(t===e){const o=Cc(e);o&&Yx(i,o.window)}}))}static async confirmOnShutdown(e,t){const i=e.get(xt),o=e.get(F),n=t===2?be?d(3571,"Are you sure you want to quit?"):d(3572,"Are you sure you want to exit?"):d(3573,"Are you sure you want to close the window?"),s=t===2?be?d(3574,"&&Quit"):d(3575,"&&Exit"):d(3576,"&&Close Window"),r=await i.confirm({message:n,primaryButton:s,checkbox:{label:d(3577,"Do not ask me again")}});return r.confirmed&&r.checkboxChecked&&await o.updateValue("window.confirmBeforeClose","never"),r.confirmed}},Tn=Qo,Qo.TIMEOUT_HANDLES=Number.MIN_SAFE_INTEGER,Qo.TIMEOUT_DISPOSABLES=new Map,Qo);Dl=Tn=x([u(2,st),u(3,bt)],Dl);let jw=class extends Dl{constructor(e,t,i,o,n,s,r,a,l){super(ge,void 0,l,s),this.openerService=e,this.lifecycleService=t,this.dialogService=i,this.labelService=o,this.productService=n,this.browserEnvironmentService=s,this.layoutService=r,this.instantiationService=a,this.registerListeners(),this.create()}registerListeners(){this._register(this.lifecycleService.onWillShutdown(()=>this.onWillShutdown()));const e=qa&&ge.visualViewport?ge.visualViewport:ge;this._register(L(e,B.RESIZE,()=>{this.layoutService.layout(),qa&&ge.scrollTo(0,0)})),this._register(L(this.layoutService.mainContainer,B.WHEEL,t=>t.preventDefault(),{passive:!1})),this._register(L(this.layoutService.mainContainer,B.CONTEXT_MENU,t=>re.stop(t,!0))),this._register(L(this.layoutService.mainContainer,B.DROP,t=>re.stop(t,!0)))}onWillShutdown(){N.toPromise(N.any(N.once(new Qb(ge.document.body,B.KEY_DOWN,!0).event),N.once(new Qb(ge.document.body,B.MOUSE_DOWN,!0).event))).then(async()=>{await Lr(3e3),await this.dialogService.prompt({type:me.Error,message:d(3578,"An unexpected error occurred that requires a reload of this page."),detail:d(3579,"The workbench was unexpectedly disposed while running."),buttons:[{label:d(3580,"&&Reload"),run:()=>ge.location.reload()}]})})}create(){this.setupOpenHandlers(),this.registerLabelFormatters(),this.registerCommands(),this.setupDriver()}setupDriver(){this.environmentService.enableSmokeTestDriver&&rM(this.instantiationService)}setupOpenHandlers(){this.openerService.setDefaultExternalOpener({openExternal:async e=>{var i;let t=!1;if((i=this.browserEnvironmentService.options)!=null&&i.openerAllowedExternalUrlPrefixes){for(const o of this.browserEnvironmentService.options.openerAllowedExternalUrlPrefixes)if(e.startsWith(o)){t=!0;break}}if(Gu(e,pe.http)||Gu(e,pe.https))Rf?Xx(e,!t)||await this.dialogService.prompt({type:me.Warning,message:d(3581,"The browser interrupted the opening of a new tab or window. Press 'Open' to open it anyway."),detail:e,buttons:[{label:d(3582,"&&Open"),run:()=>t?ew(e):tw(e)},{label:d(3583,"&&Learn More"),run:()=>this.openerService.open(z.parse("https://aka.ms/allow-vscode-popup"))}],cancelButton:!0}):t?ew(e):tw(e);else{const o=()=>{this.lifecycleService.withExpectedShutdown({disableShutdownHandling:!0},()=>ge.location.href=e)};o();const n=async()=>{const{downloadUrl:s}=this.productService;let r;const a=[{label:d(3584,"&&Try Again"),run:()=>o()}];s!==void 0?(r=d(3585,`We launched {0} on your computer.

If {1} did not launch, try again or install it below.`,this.productService.nameLong,this.productService.nameLong),a.push({label:d(3586,"&&Install"),run:async()=>{await this.openerService.open(z.parse(s)),n()}})):r=d(3587,`We launched {0} on your computer.

If {1} did not launch, try again below.`,this.productService.nameLong,this.productService.nameLong),await this.hostService.withExpectedShutdown(()=>this.dialogService.prompt({type:me.Info,message:d(3588,"All done. You can close this tab now."),detail:r,buttons:a,cancelButton:!0}))};Gu(e,this.productService.urlProtocol)&&await n()}return!0}})}registerLabelFormatters(){this._register(this.labelService.registerFormatter({scheme:pe.vscodeUserData,priority:!0,formatting:{label:"(Settings) ${path}",separator:"/"}}))}registerCommands(){qe.registerCommand("workbench.experimental.requestUsbDevice",async(e,t)=>eM(t)),qe.registerCommand("workbench.experimental.requestSerialPort",async(e,t)=>tM(t)),qe.registerCommand("workbench.experimental.requestHidDevice",async(e,t)=>iM(t))}};jw=x([u(0,It),u(1,wn),u(2,xt),u(3,mi),u(4,ou),u(5,Zx),u(6,Y),u(7,O),u(8,st)],jw);var wa,Al;(function(c){c[c.Maximized=0]="Maximized",c[c.Normal=1]="Normal",c[c.Fullscreen=2]="Fullscreen"})(Al||(Al={}));let Zg=class extends Dl{constructor(e,t,i,o,n,s){super(e,void 0,n,s),this.window=e,this.container=t,this.configurationService=o,this._onWillLayout=this._register(new I),this.onWillLayout=this._onWillLayout.event,this._onDidLayout=this._register(new I),this.onDidLayout=this._onDidLayout.event,this._onBeforeUnload=this._register(new I),this.onBeforeUnload=this._onBeforeUnload.event,this._onUnload=this._register(new I),this.onUnload=this._onUnload.event,this._onWillDispose=this._register(new I),this.onWillDispose=this._onWillDispose.event,this.whenStylesHaveLoaded=i.wait().then(()=>{}),this.registerListeners()}registerListeners(){this._register(L(this.window,B.BEFORE_UNLOAD,e=>this.handleBeforeUnload(e))),this._register(L(this.window,B.UNLOAD,()=>this.handleUnload())),this._register(L(this.window,"unhandledrejection",e=>{gn(e.reason),e.preventDefault()})),this._register(L(this.window,B.RESIZE,()=>this.layout())),this._register(L(this.container,B.SCROLL,()=>this.container.scrollTop=0)),vt?(this._register(L(this.container,B.DROP,e=>re.stop(e,!0))),this._register(L(this.container,B.WHEEL,e=>e.preventDefault(),{passive:!1})),this._register(L(this.container,B.CONTEXT_MENU,e=>re.stop(e,!0)))):(this._register(L(this.window.document.body,B.DRAG_OVER,e=>re.stop(e))),this._register(L(this.window.document.body,B.DROP,e=>re.stop(e))))}handleBeforeUnload(e){let t;if(this._onBeforeUnload.fire({veto(n){n&&(t=n)}}),t){this.handleVetoBeforeClose(e,t);return}const i=this.configurationService.getValue("window.confirmBeforeClose");(i==="always"||i==="keyboardOnly"&&Iv.getInstance().isModifierPressed)&&this.confirmBeforeClose(e)}handleVetoBeforeClose(e,t){this.preventUnload(e)}preventUnload(e){e.preventDefault(),e.returnValue=d(4216,"Changes that you made may not be saved. Please check press 'Cancel' and try again.")}confirmBeforeClose(e){this.preventUnload(e)}handleUnload(){this._onUnload.fire()}layout(){const e=jy(this.window.document.body,this.container);this._onWillLayout.fire(e),this._onDidLayout.fire(e)}createState(){return{bounds:{x:this.window.screenX,y:this.window.screenY,width:this.window.outerWidth,height:this.window.outerHeight},zoomLevel:aI(this.window)}}dispose(){this._store.isDisposed||(this._onWillDispose.fire(),super.dispose())}};Zg=x([u(3,F),u(4,st),u(5,bt)],Zg);var en;let Xg=(en=class extends R{constructor(e,t,i,o,n,s){super(),this.layoutService=e,this.dialogService=t,this.configurationService=i,this.telemetryService=o,this.hostService=n,this.environmentService=s,this._onDidOpenAuxiliaryWindow=this._register(new I),this.onDidOpenAuxiliaryWindow=this._onDidOpenAuxiliaryWindow.event,this.windows=new Map}async open(e){vi("code/auxiliaryWindow/willOpen");const t=await this.openWindow(e);if(!t)throw new Error(d(4217,"Unable to open a new window."));const i=await this.resolveWindowId(t);Qx(t,i);const o=new P,{container:n,stylesLoaded:s}=this.createContainer(t,o,e),r=this.createAuxiliaryWindow(t,n,s),a=new P;this.windows.set(t.vscodeWindowId,r),a.add(ne(()=>this.windows.delete(t.vscodeWindowId)));const l=new P;return N.once(r.onWillDispose)(()=>{t.close(),o.dispose(),a.dispose(),l.dispose()}),a.add(eI(t)),this._onDidOpenAuxiliaryWindow.fire({window:r,disposables:l}),vi("code/auxiliaryWindow/didOpen"),this.telemetryService.publicLog2("auxiliaryWindowOpen",{bounds:!!(e!=null&&e.bounds)}),r}createAuxiliaryWindow(e,t,i){return new Zg(e,t,i,this.configurationService,this.hostService,this.environmentService)}async openWindow(e){var l,h,p,g;const t=Ar(),i={x:t.screenX,y:t.screenY,width:t.outerWidth,height:t.outerHeight},o=Math.max(((l=e==null?void 0:e.bounds)==null?void 0:l.width)??wa.DEFAULT_SIZE.width,iw.WIDTH),n=Math.max(((h=e==null?void 0:e.bounds)==null?void 0:h.height)??wa.DEFAULT_SIZE.height,iw.HEIGHT);let s={x:((p=e==null?void 0:e.bounds)==null?void 0:p.x)??Math.max(i.x+i.width/2-o/2,0),y:((g=e==null?void 0:e.bounds)==null?void 0:g.y)??Math.max(i.y+i.height/2-n/2,0),width:o,height:n};!(e!=null&&e.bounds)&&s.x===i.x&&s.y===i.y&&(s={...s,x:s.x+30,y:s.y+30});const r=hi(["popup=yes",`left=${s.x}`,`top=${s.y}`,`width=${s.width}`,`height=${s.height}`,e!=null&&e.nativeTitlebar?"window-native-titlebar=yes":void 0,e!=null&&e.disableFullscreen?"window-disable-fullscreen=yes":void 0,(e==null?void 0:e.mode)===Al.Maximized?"window-maximized=yes":void 0,(e==null?void 0:e.mode)===Al.Fullscreen?"window-fullscreen=yes":void 0]),a=ge.open(tI?"":"about:blank",void 0,r.join(","));return!a&&vt?(await this.dialogService.prompt({type:me.Warning,message:d(4218,"The browser interrupted the opening of a new window. Press 'Retry' to try again."),detail:d(4219,"To avoid this problem in the future, please ensure to allow popups for this website."),buttons:[{label:d(4220,"&&Retry"),run:()=>this.openWindow(e)}],cancelButton:!0})).result:a==null?void 0:a.window}async resolveWindowId(e){return wa.WINDOW_IDS++}createContainer(e,t,i){this.applyMeta(e);const{stylesLoaded:o}=this.applyCSS(e,t),n=this.applyHTML(e,t);return{stylesLoaded:o,container:n}}applyMeta(e){for(const i of['meta[charset="utf-8"]','meta[http-equiv="Content-Security-Policy"]','meta[name="viewport"]','meta[name="theme-color"]']){const o=ge.document.querySelector(i);if(o){const n=Zy(e.document.head);if(ow(o,n),i==='meta[http-equiv="Content-Security-Policy"]'){const s=n.getAttribute("content");s&&n.setAttribute("content",s.replace(/(script-src[^\;]*)/,"script-src 'none'"))}}}const t=ge.document.querySelector('link[rel="icon"]');if(t){const i=iI(e.document.head);ow(t,i)}}applyCSS(e,t){vi("code/auxiliaryWindow/willApplyCSS");const i=new Map,o=new oI;o.wait().then(()=>vi("code/auxiliaryWindow/didLoadCSSStyles"));const n=t.add(new P);let s=0;function r(){--s===0&&(n.dispose(),o.open())}function a(l){if(cI(l))return;const h=e.document.head.appendChild(l.cloneNode(!0));l.tagName.toLowerCase()==="link"&&(s++,n.add(L(h,"load",r)),n.add(L(h,"error",r))),i.set(l,h)}s++;try{for(const l of ge.document.head.querySelectorAll('link[rel="stylesheet"], style'))a(l)}finally{r()}return t.add(nI(e)),t.add(sI.observe(ge.document.head,t,{childList:!0,subtree:!0})(l=>{var h;for(const p of l)if(!(p.type!=="childList"||p.target.nodeName.toLowerCase()==="title"||p.target.nodeName.toLowerCase()==="script"||p.target.nodeName.toLowerCase()==="meta")){for(const g of p.addedNodes)if(pn(g)&&(g.tagName.toLowerCase()==="style"||g.tagName.toLowerCase()==="link"))a(g);else if(g.nodeType===Node.TEXT_NODE&&g.parentNode){const m=i.get(g.parentNode);m&&(m.textContent=g.textContent)}for(const g of p.removedNodes){const m=i.get(g);m&&((h=m.parentNode)==null||h.removeChild(m),i.delete(g))}}})),vi("code/auxiliaryWindow/didApplyCSS"),{stylesLoaded:o}}applyHTML(e,t){vi("code/auxiliaryWindow/willApplyHTML");const i=document.createElement("div");return i.setAttribute("role","application"),rI(i,0,0,0,0,"relative"),i.style.display="flex",i.style.height="100%",i.style.flexDirection="column",e.document.body.append(i),t.add(Wu(ge.document.documentElement,e.document.documentElement)),t.add(Wu(ge.document.body,e.document.body)),t.add(Wu(this.layoutService.mainContainer,i,["class"])),vi("code/auxiliaryWindow/didApplyHTML"),i}getWindow(e){return this.windows.get(e)}},wa=en,en.DEFAULT_SIZE={width:800,height:600},en.WINDOW_IDS=Jx(ge)+1,en);Xg=wa=x([u(0,Y),u(1,xt),u(2,F),u(3,Be),u(4,st),u(5,bt)],Xg);let Jg=class extends Lc{constructor(e,t,i,o,n,s,r,a,l,h,p,g){super(e,{mergeViewWithContainerWhenSingleView:!1},r,i,o,l,n,h,a,s,p,g),this.constantViewDescriptors=new Map,this.allViews=new Map,this._register(t(m=>{this.filterValue=m,this.onFilterChanged(m)})),this._register(this.viewContainerModel.onDidChangeActiveViewDescriptors(()=>{this.updateAllViews(this.viewContainerModel.activeViewDescriptors)}))}updateAllViews(e){e.forEach(t=>{const i=this.getFilterOn(t);i&&(this.allViews.has(i)||this.allViews.set(i,new Map),this.allViews.get(i).set(t.id,t),this.filterValue&&!this.filterValue.includes(i)&&this.panes.find(o=>o.id===t.id)&&this.viewContainerModel.setVisible(t.id,!1))})}addConstantViewDescriptors(e){e.forEach(t=>this.constantViewDescriptors.set(t.id,t))}onFilterChanged(e){this.allViews.size===0&&this.updateAllViews(this.viewContainerModel.activeViewDescriptors),this.getViewsNotForTarget(e).forEach(t=>this.viewContainerModel.setVisible(t.id,!1)),this.getViewsForTarget(e).forEach(t=>this.viewContainerModel.setVisible(t.id,!0))}getViewsForTarget(e){const t=[];for(let i=0;i<e.length;i++)this.allViews.has(e[i])&&t.push(...Array.from(this.allViews.get(e[i]).values()));return t}getViewsNotForTarget(e){const t=this.allViews.keys();let i=t.next(),o=[];for(;!i.done;){let n=!1;e.forEach(s=>{i.value===s&&(n=!0)}),n||(o=o.concat(this.getViewsForTarget([i.value]))),i=t.next()}return o}onDidAddViewDescriptors(e){const t=super.onDidAddViewDescriptors(e);for(let i=0;i<e.length;i++)this.constantViewDescriptors.has(e[i].viewDescriptor.id)&&t[i].setExpanded(!1);return this.allViews.size===0&&this.updateAllViews(this.viewContainerModel.activeViewDescriptors),t}openView(e,t){var o;const i=super.openView(e,t);if(i){const n=Array.from(this.allViews.entries()).find(s=>s[1].has(e));n&&!((o=this.filterValue)!=null&&o.includes(n[0]))&&this.setFilter(n[1].get(e))}return i}};Jg=x([u(2,F),u(3,Y),u(4,Be),u(5,ie),u(6,O),u(7,te),u(8,Ve),u(9,Vt),u(10,ei),u(11,Te)],Jg);let Qg=class extends R{constructor(e,t,i,o,n){super(),this.viewDescriptorService=e,this.paneCompositeService=t,this.contextKeyService=i,this.layoutService=o,this.editorService=n,this._onDidChangeViewVisibility=this._register(new I),this.onDidChangeViewVisibility=this._onDidChangeViewVisibility.event,this._onDidChangeViewContainerVisibility=this._register(new I),this.onDidChangeViewContainerVisibility=this._onDidChangeViewContainerVisibility.event,this._onDidChangeFocusedView=this._register(new I),this.onDidChangeFocusedView=this._onDidChangeFocusedView.event,this.viewContainerDisposables=this._register(new za),this.viewDisposable=new Map,this.enabledViewContainersContextKeys=new Map,this.visibleViewContextKeys=new Map,this.viewPaneContainers=new Map,this._register(ne(()=>{this.viewDisposable.forEach(s=>s.dispose()),this.viewDisposable.clear()})),this.viewDescriptorService.viewContainers.forEach(s=>this.onDidRegisterViewContainer(s,this.viewDescriptorService.getViewContainerLocation(s))),this._register(this.viewDescriptorService.onDidChangeViewContainers(({added:s,removed:r})=>this.onDidChangeContainers(s,r))),this._register(this.viewDescriptorService.onDidChangeContainerLocation(({viewContainer:s,from:r,to:a})=>this.onDidChangeContainerLocation(s,r,a))),this._register(this.paneCompositeService.onDidPaneCompositeOpen(s=>this._onDidChangeViewContainerVisibility.fire({id:s.composite.getId(),visible:!0,location:s.viewContainerLocation}))),this._register(this.paneCompositeService.onDidPaneCompositeClose(s=>this._onDidChangeViewContainerVisibility.fire({id:s.composite.getId(),visible:!1,location:s.viewContainerLocation}))),this.focusedViewContextKey=fo.bindTo(i)}onViewsAdded(e){for(const t of e)this.onViewsVisibilityChanged(t,t.isBodyVisible())}onViewsVisibilityChanged(e,t){this.getOrCreateActiveViewContextKey(e).set(t),this._onDidChangeViewVisibility.fire({id:e.id,visible:t})}onViewsRemoved(e){for(const t of e)this.onViewsVisibilityChanged(t,!1)}getOrCreateActiveViewContextKey(e){const t=dI(e.id);let i=this.visibleViewContextKeys.get(t);return i||(i=new j(t,!1).bindTo(this.contextKeyService),this.visibleViewContextKeys.set(t,i)),i}onDidChangeContainers(e,t){for(const{container:i,location:o}of t)this.onDidDeregisterViewContainer(i,o);for(const{container:i,location:o}of e)this.onDidRegisterViewContainer(i,o)}onDidRegisterViewContainer(e,t){this.registerPaneComposite(e,t);const i=new P,o=this.viewDescriptorService.getViewContainerModel(e);this.onViewDescriptorsAdded(o.allViewDescriptors,e),i.add(o.onDidChangeAllViewDescriptors(({added:n,removed:s})=>{this.onViewDescriptorsAdded(n,e),this.onViewDescriptorsRemoved(s)})),this.updateViewContainerEnablementContextKey(e),i.add(o.onDidChangeActiveViewDescriptors(()=>this.updateViewContainerEnablementContextKey(e))),i.add(this.registerOpenViewContainerAction(e)),this.viewContainerDisposables.set(e.id,i)}onDidDeregisterViewContainer(e,t){this.deregisterPaneComposite(e,t),this.viewContainerDisposables.deleteAndDispose(e.id)}onDidChangeContainerLocation(e,t,i){this.deregisterPaneComposite(e,t),this.registerPaneComposite(e,i),this.layoutService.isVisible(op(i))&&this.viewDescriptorService.getViewContainersByLocation(i).filter(o=>this.isViewContainerActive(o.id)).length===1&&this.openViewContainer(e.id)}onViewDescriptorsAdded(e,t){if(this.viewDescriptorService.getViewContainerLocation(t)!==null)for(const o of e){const n=new P;n.add(this.registerOpenViewAction(o)),n.add(this.registerFocusViewAction(o,t.title)),n.add(this.registerResetViewLocationAction(o)),this.viewDisposable.set(o,n)}}onViewDescriptorsRemoved(e){for(const t of e){const i=this.viewDisposable.get(t);i&&(i.dispose(),this.viewDisposable.delete(t))}}updateViewContainerEnablementContextKey(e){let t=this.enabledViewContainersContextKeys.get(e.id);t||(t=this.contextKeyService.createKey(ip(e.id),!1),this.enabledViewContainersContextKeys.set(e.id,t)),t.set(!(e.hideIfEmpty&&this.viewDescriptorService.getViewContainerModel(e).activeViewDescriptors.length===0))}async openComposite(e,t,i){return this.paneCompositeService.openPaneComposite(e,t,i)}getComposite(e,t){return this.paneCompositeService.getPaneComposite(e,t)}isViewContainerVisible(e){var o;const t=this.viewDescriptorService.getViewContainerById(e);if(!t)return!1;const i=this.viewDescriptorService.getViewContainerLocation(t);return i===null?!1:((o=this.paneCompositeService.getActivePaneComposite(i))==null?void 0:o.getId())===e}isViewContainerActive(e){const t=this.viewDescriptorService.getViewContainerById(e);return t?t.hideIfEmpty?this.viewDescriptorService.getViewContainerModel(t).activeViewDescriptors.length>0:!0:!1}getVisibleViewContainer(e){var i;const t=(i=this.paneCompositeService.getActivePaneComposite(e))==null?void 0:i.getId();return t?this.viewDescriptorService.getViewContainerById(t):null}getActiveViewPaneContainerWithId(e){const t=this.viewDescriptorService.getViewContainerById(e);return t?this.getActiveViewPaneContainer(t):null}async openViewContainer(e,t){const i=this.viewDescriptorService.getViewContainerById(e);if(i){const o=this.viewDescriptorService.getViewContainerLocation(i);if(o!==null)return await this.paneCompositeService.openPaneComposite(e,o,t)||null}return null}async closeViewContainer(e){const t=this.viewDescriptorService.getViewContainerById(e);if(t){const i=this.viewDescriptorService.getViewContainerLocation(t),o=i!==null&&this.paneCompositeService.getActivePaneComposite(i);if(i!==null)return o?this.layoutService.setPartHidden(!0,op(i)):void 0}}isViewVisible(e){const t=this.getActiveViewWithId(e);return(t==null?void 0:t.isBodyVisible())||!1}getActiveViewWithId(e){const t=this.viewDescriptorService.getViewContainerByViewId(e);if(t){const i=this.getActiveViewPaneContainer(t);if(i)return i.getView(e)}return null}getViewWithId(e){const t=this.viewDescriptorService.getViewContainerByViewId(e);if(t){const i=this.viewPaneContainers.get(t.id);if(i)return i.getView(e)}return null}getFocusedViewName(){var i,o,n;const e=this.contextKeyService.getContextKeyValue(fo.key)??"",t=(i=this.editorService.activeTextEditorControl)!=null&&i.hasTextFocus()?d(4221,"Text Editor"):void 0;return((n=(o=this.viewDescriptorService.getViewDescriptorById(e.toString()))==null?void 0:o.name)==null?void 0:n.value)??t??""}async openView(e,t){const i=this.viewDescriptorService.getViewContainerByViewId(e);if(!i||!this.viewDescriptorService.getViewContainerModel(i).activeViewDescriptors.some(s=>s.id===e))return null;const o=this.viewDescriptorService.getViewContainerLocation(i),n=this.getComposite(i.id,o);if(n){const s=await this.openComposite(n.id,o);if(s&&s.openView)return s.openView(e,t)||null;t&&(s==null||s.focus())}return null}closeView(e){const t=this.viewDescriptorService.getViewContainerByViewId(e);if(t){const i=this.getActiveViewPaneContainer(t);if(i){const o=i.getView(e);if(o)if(i.views.length===1){const n=this.viewDescriptorService.getViewContainerLocation(t);n===0?this.layoutService.setPartHidden(!0,"workbench.parts.sidebar"):(n===1||n===2)&&this.paneCompositeService.hideActivePaneComposite(n),this.focusedViewContextKey.get()===e&&this.focusedViewContextKey.reset()}else o.setExpanded(!1)}}}getActiveViewPaneContainer(e){const t=this.viewDescriptorService.getViewContainerLocation(e);if(t===null)return null;const i=this.paneCompositeService.getActivePaneComposite(t);return(i==null?void 0:i.getId())===e.id&&i.getViewPaneContainer()||null}getViewProgressIndicator(e){const t=this.viewDescriptorService.getViewContainerByViewId(e);if(!t)return;const i=this.viewPaneContainers.get(t.id);if(!i)return;const o=i.getView(e);if(o)return i.isViewMergedWithContainer()?this.getViewContainerProgressIndicator(t):o.getProgressIndicator()}getViewContainerProgressIndicator(e){const t=this.viewDescriptorService.getViewContainerLocation(e);if(t!==null)return this.paneCompositeService.getProgressIndicator(e.id,t)}registerOpenViewContainerAction(e){const t=new P;if(e.openCommandActionDescriptor){const{id:i,mnemonicTitle:o,keybindings:n,order:s}=e.openCommandActionDescriptor??{id:e.id},r=e.openCommandActionDescriptor.title??e.title,a=this;if(t.add(C(class extends A{constructor(){super({id:i,get title(){const h=a.viewDescriptorService.getViewContainerLocation(e),p=typeof r=="string"?r:r.value,g=typeof r=="string"?r:r.original;return h===0?{value:d(4222,"Show {0}",p),original:`Show ${g}`}:{value:d(4223,"Toggle {0}",p),original:`Toggle ${g}`}},category:_.View,precondition:y.has(ip(e.id)),keybinding:n?{...n,weight:200}:void 0,f1:!0})}async run(h){const p=h.get(Z),g=h.get(Te),m=h.get(Y),f=h.get(it),v=g.getViewContainerLocation(e);switch(v){case 2:case 0:{const S=v===0?"workbench.parts.sidebar":"workbench.parts.auxiliarybar";!f.isViewContainerVisible(e.id)||!m.hasFocus(S)?await f.openViewContainer(e.id,!0):p.activeGroup.focus();break}case 1:!f.isViewContainerVisible(e.id)||!m.hasFocus("workbench.parts.panel")?await f.openViewContainer(e.id,!0):f.closeViewContainer(e.id);break}}})),o){const l=this.viewDescriptorService.getDefaultViewContainerLocation(e);t.add(k.appendMenuItem(b.MenubarViewMenu,{command:{id:i,title:o},group:l===0?"3_views":"4_panels",when:y.has(ip(e.id)),order:s??Number.MAX_VALUE}))}}return t}registerOpenViewAction(e){const t=new P;if(e.openCommandActionDescriptor){const i=e.openCommandActionDescriptor.title??e.name,o=e.openCommandActionDescriptor.id,n=this;if(t.add(C(class extends A{constructor(){super({id:o,get title(){const r=n.viewDescriptorService.getViewLocationById(e.id),a=typeof i=="string"?i:i.value,l=typeof i=="string"?i:i.original;return r===0?{value:d(4222,"Show {0}",a),original:`Show ${l}`}:{value:d(4223,"Toggle {0}",a),original:`Toggle ${l}`}},category:_.View,precondition:y.has(`${e.id}.active`),keybinding:e.openCommandActionDescriptor.keybindings?{...e.openCommandActionDescriptor.keybindings,weight:200}:void 0,f1:!0})}async run(r){const a=r.get(Z),l=r.get(Te),h=r.get(Y),p=r.get(it),g=r.get(K);if(fo.getValue(g)===e.id){const f=l.getViewLocationById(e.id);l.getViewLocationById(e.id)===0?a.activeGroup.focus():f!==null&&h.setPartHidden(!0,op(f))}else p.openView(e.id,!0)}})),e.openCommandActionDescriptor.mnemonicTitle){const s=this.viewDescriptorService.getDefaultContainerById(e.id);if(s){const r=this.viewDescriptorService.getDefaultViewContainerLocation(s);t.add(k.appendMenuItem(b.MenubarViewMenu,{command:{id:o,title:e.openCommandActionDescriptor.mnemonicTitle},group:r===0?"3_views":"4_panels",when:y.has(`${e.id}.active`),order:e.openCommandActionDescriptor.order??Number.MAX_VALUE}))}}}return t}registerFocusViewAction(e,t){return C(class extends A{constructor(){var n,s,r,a,l,h,p,g,m,f;const o=w(4224,"Focus on {0} View",e.name.value);super({id:e.focusCommand?e.focusCommand.id:`${e.id}.focus`,title:o,category:t,menu:[{id:b.CommandPalette,when:e.when}],keybinding:{when:y.has(`${e.id}.active`),weight:200,primary:(s=(n=e.focusCommand)==null?void 0:n.keybindings)==null?void 0:s.primary,secondary:(a=(r=e.focusCommand)==null?void 0:r.keybindings)==null?void 0:a.secondary,linux:(h=(l=e.focusCommand)==null?void 0:l.keybindings)==null?void 0:h.linux,mac:(g=(p=e.focusCommand)==null?void 0:p.keybindings)==null?void 0:g.mac,win:(f=(m=e.focusCommand)==null?void 0:m.keybindings)==null?void 0:f.win},metadata:{description:o.value,args:[{name:"focusOptions",description:"Focus Options",schema:{type:"object",properties:{preserveFocus:{type:"boolean",default:!1}}}}]}})}run(o,n){o.get(it).openView(e.id,!(n!=null&&n.preserveFocus))}})}registerResetViewLocationAction(e){return C(class extends A{constructor(){super({id:`${e.id}.resetViewLocation`,title:w(4225,"Reset Location"),menu:[{id:b.ViewTitleContext,when:y.or(y.and(y.equals("view",e.id),y.equals(`${e.id}.defaultViewLocation`,!1))),group:"1_hide",order:2}]})}run(i){const o=i.get(Te),n=o.getDefaultContainerById(e.id),s=o.getViewContainerModel(n);if(n.hideIfEmpty&&s.visibleViewDescriptors.length===0){const r=o.getDefaultViewContainerLocation(n);o.moveViewContainerToLocation(n,r,void 0,this.desc.id)}o.moveViewsToContainer([e],o.getDefaultContainerById(e.id),void 0,this.desc.id),i.get(it).openView(e.id,!0)}})}registerPaneComposite(e,t){const i=this;let o=class extends Pp{constructor(s,r,a,l,h,p,g){super(e.id,s,a,l,h,p,g,r)}createViewPaneContainer(s){const r=this._register(new P),a=i.createViewPaneContainer(s,e,t,r,this.instantiationService);return a instanceof Jg||r.add(N.any(a.onDidAddViews,a.onDidRemoveViews,a.onTitleAreaUpdate)(()=>{this.updateTitleArea()})),a}};o=x([u(0,Be),u(1,ei),u(2,ie),u(3,O),u(4,te),u(5,Ve),u(6,Vt)],o),$.as(Yw(t)).registerPaneComposite(nb.create(o,e.id,typeof e.title=="string"?e.title:e.title.value,ln(e.icon)?e.icon:void 0,e.order,e.requestedIndex,e.icon instanceof z?e.icon:void 0))}deregisterPaneComposite(e,t){$.as(Yw(t)).deregisterPaneComposite(e.id)}createViewPaneContainer(e,t,i,o,n){const s=n.createInstance(t.ctorDescriptor.ctor,...t.ctorDescriptor.staticArguments||[]);return this.viewPaneContainers.set(s.getId(),s),o.add(ne(()=>this.viewPaneContainers.delete(s.getId()))),o.add(s.onDidAddViews(r=>this.onViewsAdded(r))),o.add(s.onDidChangeViewVisibility(r=>this.onViewsVisibilityChanged(r,r.isBodyVisible()))),o.add(s.onDidRemoveViews(r=>this.onViewsRemoved(r))),o.add(s.onDidFocusView(r=>{this.focusedViewContextKey.get()!==r.id&&(this.focusedViewContextKey.set(r.id),this._onDidChangeFocusedView.fire())})),o.add(s.onDidBlurView(r=>{this.focusedViewContextKey.get()===r.id&&(this.focusedViewContextKey.reset(),this._onDidChangeFocusedView.fire())})),s}};Qg=x([u(0,Te),u(1,Gt),u(2,K),u(3,Y),u(4,U)],Qg);function ip(c){return`viewContainer.${c}.enabled`}function Yw(c){switch(c){case 2:return $i.Auxiliary;case 1:return $i.Panels;case 0:default:return $i.Viewlets}}function op(c){switch(c){case 2:return"workbench.parts.auxiliarybar";case 1:return"workbench.parts.panel";case 0:default:return"workbench.parts.sidebar"}}class aM{constructor(){this.onWillInstantiateEditorPane=Jt.onWillInstantiateEditorPane}didInstantiateEditorPane(e){return Jt.didInstantiateEditorPane(e)}}class cM{constructor(){this._providers=new Map,this._onDidChange=new I,this.onDidChange=this._onDidChange.event}dispose(){this._onDidChange.dispose()}register(e,t,i,o){const n=this._makeKey(e,t);if(this._providers.has(n))throw new Error(`A provider for the command ${t} and menu ${e} is already registered.`);this._providers.set(n,i);const s=o==null?void 0:o(()=>{this._onDidChange.fire(e)});return ne(()=>{s==null||s.dispose(),this._providers.delete(n)})}lookUp(e,t){return this._providers.get(this._makeKey(e,t))}_makeKey(e,t){return`${e.id}/${t instanceof b?t.id:t}`}}var em;class cc{constructor(){this.uris=[]}async perform(){return this}toString(){return"(noop)"}}class jS{constructor(e,t,i){this.newUri=e,this.oldUri=t,this.options=i,this.type="rename"}}let tm=em=class{constructor(e,t,i,o){this._edits=e,this._undoRedoInfo=t,this._workingCopyFileService=i,this._fileService=o}get uris(){return this._edits.flatMap(e=>[e.newUri,e.oldUri])}async perform(e){const t=[],i=[];for(const o of this._edits)o.options.overwrite===void 0&&o.options.ignoreIfExists&&await this._fileService.exists(o.newUri)||(t.push({file:{source:o.oldUri,target:o.newUri},overwrite:o.options.overwrite}),i.push(new jS(o.oldUri,o.newUri,o.options)));return t.length===0?new cc:(await this._workingCopyFileService.move(t,e,this._undoRedoInfo),new em(i,{isUndoing:!0},this._workingCopyFileService,this._fileService))}toString(){return`(rename ${this._edits.map(e=>`${e.oldUri} to ${e.newUri}`).join(", ")})`}};tm=em=x([u(2,uu),u(3,Oe)],tm);class dM{constructor(e,t,i){this.newUri=e,this.oldUri=t,this.options=i,this.type="copy"}}let im=class{constructor(e,t,i,o,n){this._edits=e,this._undoRedoInfo=t,this._workingCopyFileService=i,this._fileService=o,this._instaService=n}get uris(){return this._edits.flatMap(e=>[e.newUri,e.oldUri])}async perform(e){const t=[];for(const n of this._edits)n.options.overwrite===void 0&&n.options.ignoreIfExists&&await this._fileService.exists(n.newUri)||t.push({file:{source:n.oldUri,target:n.newUri},overwrite:n.options.overwrite});if(t.length===0)return new cc;const i=await this._workingCopyFileService.copy(t,e,this._undoRedoInfo),o=[];for(let n=0;n<i.length;n++){const s=i[n],r=this._edits[n];o.push(new hb(s.resource,{recursive:!0,folder:this._edits[n].options.folder||s.isDirectory,...r.options},!1))}return this._instaService.createInstance(dc,o,{isUndoing:!0})}toString(){return`(copy ${this._edits.map(e=>`${e.oldUri} to ${e.newUri}`).join(", ")})`}};im=x([u(2,uu),u(3,Oe),u(4,O)],im);class YS{constructor(e,t,i){this.newUri=e,this.options=t,this.contents=i,this.type="create"}}let Tl=class{constructor(e,t,i,o,n,s){this._edits=e,this._undoRedoInfo=t,this._fileService=i,this._workingCopyFileService=o,this._instaService=n,this._textFileService=s}get uris(){return this._edits.map(e=>e.newUri)}async perform(e){const t=[],i=[],o=[];for(const n of this._edits)if(n.newUri.scheme!==pe.untitled&&!(n.options.overwrite===void 0&&n.options.ignoreIfExists&&await this._fileService.exists(n.newUri))){if(n.options.folder)t.push({resource:n.newUri});else{const s=typeof n.contents<"u"?n.contents:await this._textFileService.getEncodedReadable(n.newUri);i.push({resource:n.newUri,contents:s,overwrite:n.options.overwrite})}o.push(new hb(n.newUri,n.options,!n.options.folder&&!n.contents))}return t.length===0&&i.length===0?new cc:(await this._workingCopyFileService.createFolder(t,e,this._undoRedoInfo),await this._workingCopyFileService.create(i,e,this._undoRedoInfo),this._instaService.createInstance(dc,o,{isUndoing:!0}))}toString(){return`(create ${this._edits.map(e=>{var t;return e.options.folder?`folder ${e.newUri}`:`file ${e.newUri} with ${((t=e.contents)==null?void 0:t.byteLength)||0} bytes`}).join(", ")})`}};Tl=x([u(2,Oe),u(3,uu),u(4,O),u(5,As)],Tl);class hb{constructor(e,t,i){this.oldUri=e,this.options=t,this.undoesCreate=i,this.type="delete"}}let dc=class{constructor(e,t,i,o,n,s,r){this._edits=e,this._undoRedoInfo=t,this._workingCopyFileService=i,this._fileService=o,this._configurationService=n,this._instaService=s,this._logService=r}get uris(){return this._edits.map(e=>e.oldUri)}async perform(e){const t=[],i=[];for(const o of this._edits){let n;try{n=await this._fileService.resolve(o.oldUri,{resolveMetadata:!0})}catch{if(!o.options.ignoreIfNotExists)throw new Error(`${o.oldUri} does not exist and can not be deleted`);continue}t.push({resource:o.oldUri,recursive:o.options.recursive,useTrash:!o.options.skipTrashBin&&this._fileService.hasCapability(o.oldUri,4096)&&this._configurationService.getValue("files.enableTrash")});let s;if(!o.undoesCreate&&!o.options.folder&&!(typeof o.options.maxSize=="number"&&n.size>o.options.maxSize))try{s=await this._fileService.readFile(o.oldUri)}catch(r){this._logService.error(r)}s!==void 0&&i.push(new YS(o.oldUri,o.options,s.value))}return t.length===0?new cc:(await this._workingCopyFileService.delete(t,e,this._undoRedoInfo),i.length===0?new cc:this._instaService.createInstance(Tl,i,{isUndoing:!0}))}toString(){return`(delete ${this._edits.map(e=>e.oldUri).join(", ")})`}};dc=x([u(2,uu),u(3,Oe),u(4,F),u(5,O),u(6,Je)],dc);class lM{constructor(e,t,i,o){this.label=e,this.code=t,this.operations=i,this.confirmBeforeUndo=o,this.type=1,this.resources=i.flatMap(n=>n.uris)}async undo(){await this._reverse()}async redo(){await this._reverse()}async _reverse(){for(let e=0;e<this.operations.length;e++){const i=await this.operations[e].perform(Ti.None);this.operations[e]=i}}toString(){return this.operations.map(e=>String(e)).join(", ")}}let om=class{constructor(e,t,i,o,n,s,r,a,l,h){this._label=e,this._code=t,this._undoRedoGroup=i,this._undoRedoSource=o,this._confirmBeforeUndo=n,this._progress=s,this._token=r,this._edits=a,this._instaService=l,this._undoRedoService=h}async apply(){var s,r;const e=[],t={undoRedoGroupId:this._undoRedoGroup.id},i=[];for(const a of this._edits)a.newResource&&a.oldResource&&!((s=a.options)!=null&&s.copy)?i.push(new jS(a.newResource,a.oldResource,a.options??{})):a.newResource&&a.oldResource&&((r=a.options)!=null&&r.copy)?i.push(new dM(a.newResource,a.oldResource,a.options??{})):!a.newResource&&a.oldResource?i.push(new hb(a.oldResource,a.options??{},!1)):a.newResource&&!a.oldResource&&i.push(new YS(a.newResource,a.options??{},await a.options.contents));if(i.length===0)return[];const o=[];o[0]=[i[0]];for(let a=1;a<i.length;a++){const l=i[a],h=sy(o);(h==null?void 0:h[0].type)===l.type?h.push(l):o.push([l])}for(const a of o){if(this._token.isCancellationRequested)break;let l;switch(a[0].type){case"rename":l=this._instaService.createInstance(tm,a,t);break;case"copy":l=this._instaService.createInstance(im,a,t);break;case"delete":l=this._instaService.createInstance(dc,a,t);break;case"create":l=this._instaService.createInstance(Tl,a,t);break}if(l){const h=await l.perform(this._token);e.push(h)}this._progress.report(void 0)}const n=new lM(this._label,this._code,e,this._confirmBeforeUndo);return this._undoRedoService.pushElement(n,this._undoRedoGroup,this._undoRedoSource),n.resources}};om=x([u(8,O),u(9,Xy)],om);class ZS{constructor(e){this._modelReference=e,this.model=this._modelReference.object.textEditorModel,this._edits=[]}dispose(){this._modelReference.dispose()}isNoOp(){return!(this._edits.length>0||this._newEol!==void 0&&this._newEol!==this.model.getEndOfLineSequence())}addEdit(e){this._expectedModelVersionId=e.versionId;const{textEdit:t}=e;if(typeof t.eol=="number"&&(this._newEol=t.eol),!t.range&&!t.text||Ae.isEmpty(t.range)&&!t.text)return;let i;t.range?i=Ae.lift(t.range):i=this.model.getFullModelRange(),this._edits.push({...Ep.replaceMove(i,t.text),insertAsSnippet:t.insertAsSnippet})}validate(){return typeof this._expectedModelVersionId>"u"||this.model.getVersionId()===this._expectedModelVersionId?{canApply:!0}:{canApply:!1,reason:this.model.uri}}getBeforeCursorState(){return null}apply(){this._edits.length>0&&(this._edits=this._edits.map(this._transformSnippetStringToInsertText,this).sort((e,t)=>Ae.compareRangesUsingStarts(e.range,t.range)),this.model.pushEditOperations(null,this._edits,()=>null)),this._newEol!==void 0&&this.model.pushEOL(this._newEol)}_transformSnippetStringToInsertText(e){if(!e.insertAsSnippet||!e.text)return e;const t=pu.asInsertText(e.text);return{...e,insertAsSnippet:!1,text:t}}}class hM extends ZS{constructor(e,t){super(e),this._editor=t}getBeforeCursorState(){return this._canUseEditor()?this._editor.getSelections():null}apply(){if(!this._canUseEditor()){super.apply();return}if(this._edits.length>0){const e=uI.get(this._editor);if(e&&this._edits.some(t=>t.insertAsSnippet)){const t=[];for(const i of this._edits)i.range&&i.text!==null&&t.push({range:Ae.lift(i.range),template:i.insertAsSnippet?i.text:pu.escape(i.text)});e.apply(t,{undoStopBefore:!1,undoStopAfter:!1})}else this._edits=this._edits.map(this._transformSnippetStringToInsertText,this).sort((t,i)=>Ae.compareRangesUsingStarts(t.range,i.range)),this._editor.executeEdits("",this._edits)}this._newEol!==void 0&&this._editor.hasModel()&&this._editor.getModel().pushEOL(this._newEol)}_canUseEditor(){var e,t;return((t=(e=this._editor)==null?void 0:e.getModel())==null?void 0:t.uri.toString())===this.model.uri.toString()}}let nm=class{constructor(e,t,i,o,n,s,r,a,l,h,p,g){this._label=e,this._code=t,this._editor=i,this._undoRedoGroup=o,this._undoRedoSource=n,this._progress=s,this._token=r,this._editorWorker=l,this._modelService=h,this._textModelResolverService=p,this._undoRedoService=g,this._edits=new Bt;for(const m of a){let f=this._edits.get(m.resource);f||(f=[],this._edits.set(m.resource,f)),f.push(m)}}_validateBeforePrepare(){for(const e of this._edits.values())for(const t of e)if(typeof t.versionId=="number"){const i=this._modelService.getModel(t.resource);if(i&&i.getVersionId()!==t.versionId)throw new Error(`${i.uri.toString()} has changed in the meantime`)}}async _createEditsTasks(){const e=[],t=[];for(const[i,o]of this._edits){const n=this._textModelResolverService.createModelReference(i).then(async s=>{var g,m;let r,a=!1;if(((m=(g=this._editor)==null?void 0:g.getModel())==null?void 0:m.uri.toString())===s.object.textEditorModel.uri.toString()?(r=new hM(s,this._editor),a=!0):r=new ZS(s),e.push(r),!a){o.forEach(r.addEdit,r);return}const l=async(f,v)=>{const S=o.slice(f,v),E=await this._editorWorker.computeMoreMinimalEdits(s.object.textEditorModel.uri,S.map(D=>D.textEdit),!1);E?E.forEach(D=>r.addEdit(new xo(s.object.textEditorModel.uri,D,void 0,void 0))):S.forEach(r.addEdit,r)};let h=0,p=0;for(;p<o.length;p++)(o[p].textEdit.insertAsSnippet||o[p].metadata)&&(await l(h,p),r.addEdit(o[p]),h=p+1);await l(h,p)});t.push(n)}return await Promise.all(t),e}_validateTasks(e){for(const t of e){const i=t.validate();if(!i.canApply)return i}return{canApply:!0}}async apply(){this._validateBeforePrepare();const e=await this._createEditsTasks();try{if(this._token.isCancellationRequested)return[];const t=[],i=this._validateTasks(e);if(!i.canApply)throw new Error(`${i.reason.toString()} has changed in the meantime`);if(e.length===1){const o=e[0];if(!o.isNoOp()){const n=new nw(this._label,this._code,o.model,o.getBeforeCursorState());this._undoRedoService.pushElement(n,this._undoRedoGroup,this._undoRedoSource),o.apply(),n.close(),t.push(o.model.uri)}this._progress.report(void 0)}else{const o=new hI(this._label,this._code,e.map(n=>new nw(this._label,this._code,n.model,n.getBeforeCursorState())));this._undoRedoService.pushElement(o,this._undoRedoGroup,this._undoRedoSource);for(const n of e)n.apply(),this._progress.report(void 0),t.push(n.model.uri);o.close()}return t}finally{Re(e)}}};nm=x([u(8,lI),u(9,wc),u(10,Ts),u(11,Xy)],nm);function uM(c){return c.map(e=>{if(xo.is(e))return xo.lift(e);if(di.is(e))return di.lift(e);if(Ad.is(e))return Ad.lift(e);throw new Error("Unsupported edit")})}let sm=class{constructor(e,t,i,o,n,s,r,a,l,h,p){this._label=e,this._code=t,this._editor=i,this._progress=o,this._token=n,this._edits=s,this._undoRedoGroup=r,this._undoRedoSource=a,this._confirmBeforeUndo=l,this._instaService=h,this._logService=p}ariaMessage(){const e=new Bt,t=new Bt;let i=0;for(const o of this._edits)o instanceof xo?(i+=1,t.set(o.resource,!0)):o instanceof di&&e.set(o.oldResource??o.newResource,!0);return this._edits.length===0?d(2110,"Made no edits"):e.size===0?i>1&&t.size>1?d(2111,"Made {0} text edits in {1} files",i,t.size):d(2112,"Made {0} text edits in one file",i):d(2113,"Made {0} text edits in {1} files, also created or deleted {2} files",i,t.size,e.size)}async perform(){if(this._edits.length===0)return[];const e=[1];for(let s=1;s<this._edits.length;s++)Object.getPrototypeOf(this._edits[s-1])===Object.getPrototypeOf(this._edits[s])?e[e.length-1]++:e.push(1);const t=this._edits.length>1?0:void 0;this._progress.report({increment:t,total:100});const i={report:s=>this._progress.report({increment:100/this._edits.length})},o=[];let n=0;for(const s of e){if(this._token.isCancellationRequested)break;const r=this._edits.slice(n,n+s);r[0]instanceof di?o.push(await this._performFileEdits(r,this._undoRedoGroup,this._undoRedoSource,this._confirmBeforeUndo,i)):r[0]instanceof xo?o.push(await this._performTextEdits(r,this._undoRedoGroup,this._undoRedoSource,i)):r[0]instanceof Ad?o.push(await this._performCellEdits(r,this._undoRedoGroup,this._undoRedoSource,i)):console.log("UNKNOWN EDIT"),n=n+s}return o.flat()}async _performFileEdits(e,t,i,o,n){return this._logService.debug("_performFileEdits",JSON.stringify(e)),await this._instaService.createInstance(om,this._label||d(2114,"Workspace Edit"),this._code||"undoredo.workspaceEdit",t,i,o,n,this._token,e).apply()}async _performTextEdits(e,t,i,o){return this._logService.debug("_performTextEdits",JSON.stringify(e)),await this._instaService.createInstance(nm,this._label||d(2114,"Workspace Edit"),this._code||"undoredo.workspaceEdit",this._editor,t,i,o,this._token,e).apply()}async _performCellEdits(e,t,i,o){return this._logService.debug("_performCellEdits",JSON.stringify(e)),await this._instaService.createInstance(pI,t,i,o,this._token,e).apply()}};sm=x([u(9,O),u(10,Je)],sm);let rm=class{constructor(e,t,i,o,n,s,r){this._instaService=e,this._logService=t,this._editorService=i,this._lifecycleService=o,this._dialogService=n,this._workingCopyService=s,this._configService=r,this._activeUndoRedoGroups=new Qy}setPreviewHandler(e){return this._previewHandler=e,ne(()=>{this._previewHandler===e&&(this._previewHandler=void 0)})}hasPreviewHandler(){return!!this._previewHandler}async apply(e,t){let i=uM(Array.isArray(e)?e:e.edits);if(i.length===0)return{ariaSummary:d(2115,"Made no edits"),isApplied:!1};this._previewHandler&&(t!=null&&t.showPreview||i.some(h=>{var p;return(p=h.metadata)==null?void 0:p.needsConfirmation}))&&(i=await this._previewHandler(i,t));let o=t==null?void 0:t.editor;if(!o){const h=this._editorService.activeTextEditorControl;gI(h)?o=h:mI(h)&&(o=h.getModifiedEditor())}o&&o.getOption(94)&&(o=void 0);let n,s=()=>{};if(typeof(t==null?void 0:t.undoRedoGroupId)=="number"){for(const h of this._activeUndoRedoGroups)if(h.id===t.undoRedoGroupId){n=h;break}}n||(n=new fI,s=this._activeUndoRedoGroups.push(n));const r=(t==null?void 0:t.quotableLabel)||(t==null?void 0:t.label),a=this._instaService.createInstance(sm,r,t==null?void 0:t.code,o,(t==null?void 0:t.progress)??qy.None,(t==null?void 0:t.token)??Ti.None,i,n,t==null?void 0:t.undoRedoSource,!!(t!=null&&t.confirmBeforeUndo));let l;try{l=this._lifecycleService.onBeforeShutdown(p=>p.veto(this._shouldVeto(r,p.reason),"veto.blukEditService"));const h=await a.perform();return t!=null&&t.respectAutoSaveConfig&&this._configService.getValue(XS)===!0&&h.length>1&&await this._saveAll(h),{ariaSummary:a.ariaMessage(),isApplied:i.length>0}}catch(h){throw this._logService.error(h),h}finally{l==null||l.dispose(),s()}}async _saveAll(e){const t=new bI(e),i=this._workingCopyService.dirtyWorkingCopies.map(async n=>{t.has(n.resource)&&await n.save()}),o=await Promise.allSettled(i);for(const n of o)n.status==="rejected"&&this._logService.warn(n.reason)}async _shouldVeto(e,t){let i,o;switch(t){case 1:i=d(2116,"Are you sure you want to close the window?"),o=d(2117,"&&Close Window");break;case 4:i=d(2118,"Are you sure you want to change the workspace?"),o=d(2119,"Change &&Workspace");break;case 3:i=d(2120,"Are you sure you want to reload the window?"),o=d(2121,"&&Reload Window");break;default:i=d(2122,"Are you sure you want to quit?"),o=d(2123,"&&Quit");break}return!(await this._dialogService.confirm({message:i,detail:d(2124,"'{0}' is in progress.",e||d(2125,"File operation")),primaryButton:o})).confirmed}};rm=x([u(0,O),u(1,Je),u(2,U),u(3,wn),u(4,xt),u(5,Jy),u(6,F)],rm);const XS="files.refactoring.autoSave";$.as(ks.Configuration).registerConfiguration({id:"files",properties:{[XS]:{description:d(2126,"Controls if files that were part of a refactoring are saved automatically"),default:!0,type:"boolean"}}});var pM=".monaco-workbench .bulk-edit-panel .highlight.insert{background-color:var(--vscode-diffEditor-insertedTextBackground)}.monaco-workbench .bulk-edit-panel .highlight.remove{background-color:var(--vscode-diffEditor-removedTextBackground);text-decoration:line-through}.monaco-workbench .bulk-edit-panel .message{padding:10px 20px}.monaco-workbench .bulk-edit-panel[data-state=data] .content,.monaco-workbench .bulk-edit-panel[data-state=message] .message{display:flex}.monaco-workbench .bulk-edit-panel[data-state=data] .message,.monaco-workbench .bulk-edit-panel[data-state=message] .content{display:none}.monaco-workbench .bulk-edit-panel .content{display:flex;flex-direction:column;justify-content:space-between}.monaco-workbench .bulk-edit-panel .content .buttons{padding-left:20px;padding-top:10px}.monaco-workbench .bulk-edit-panel .content .buttons .monaco-button{display:inline-flex;margin:0 4px;padding:4px 8px;width:inherit}.monaco-workbench .bulk-edit-panel .monaco-tl-contents{display:flex}.monaco-workbench .bulk-edit-panel .monaco-tl-contents .edit-checkbox{align-self:center}.monaco-workbench .bulk-edit-panel .monaco-tl-contents .edit-checkbox.disabled{opacity:.5}.monaco-workbench .bulk-edit-panel .monaco-tl-contents .monaco-icon-label.delete .monaco-icon-label-container{text-decoration:line-through}.monaco-workbench .bulk-edit-panel .monaco-tl-contents .details{font-size:.9em;margin-left:.5em;opacity:.7;white-space:pre}.monaco-workbench .bulk-edit-panel .monaco-tl-contents.category{align-items:center;display:flex;flex:1;flex-flow:row nowrap}.monaco-workbench .bulk-edit-panel .monaco-tl-contents.category .theme-icon,.monaco-workbench .bulk-edit-panel .monaco-tl-contents.textedit .theme-icon{margin-right:4px}.monaco-workbench .bulk-edit-panel .monaco-tl-contents.category .uri-icon,.monaco-workbench .bulk-edit-panel .monaco-tl-contents.textedit .uri-icon,.monaco-workbench.hc-light .bulk-edit-panel .monaco-tl-contents.category .uri-icon,.monaco-workbench.hc-light .bulk-edit-panel .monaco-tl-contents.textedit .uri-icon{background-image:var(--background-light);background-position:0;background-repeat:no-repeat;background-size:contain;height:100%;margin-right:4px;min-width:16px;width:16px}.monaco-workbench.hc-black .bulk-edit-panel .monaco-tl-contents.category .uri-icon,.monaco-workbench.hc-black .bulk-edit-panel .monaco-tl-contents.textedit .uri-icon,.monaco-workbench.vs-dark .bulk-edit-panel .monaco-tl-contents.category .uri-icon,.monaco-workbench.vs-dark .bulk-edit-panel .monaco-tl-contents.textedit .uri-icon{background-image:var(--background-dark)}.monaco-workbench .bulk-edit-panel .monaco-tl-contents.textedit .monaco-highlighted-label{overflow:hidden;text-overflow:ellipsis}";we(pM,{});let am=class{constructor(e,t,i,o){this._conflicts=new Bt,this._disposables=new P,this._onDidConflict=new I,this.onDidConflict=this._onDidConflict.event;const n=new Bt;for(const r of e)if(r instanceof xo){if(n.set(r.resource,!0),typeof r.versionId=="number"){const a=i.getModel(r.resource);a&&a.getVersionId()!==r.versionId&&(this._conflicts.set(r.resource,!0),this._onDidConflict.fire(this))}}else r instanceof di?r.newResource?n.set(r.newResource,!0):r.oldResource&&n.set(r.oldResource,!0):r instanceof Ad?n.set(r.resource,!0):o.warn("UNKNOWN edit type",r);this._disposables.add(t.onDidFilesChange(r=>{for(const a of n.keys())if(!i.getModel(a)&&r.contains(a)){this._conflicts.set(a,!0),this._onDidConflict.fire(this);break}}));const s=r=>{n.has(r.uri)&&(this._conflicts.set(r.uri,!0),this._onDidConflict.fire(this))};for(const r of i.getModels())this._disposables.add(r.onDidChangeContent(()=>s(r)))}dispose(){this._disposables.dispose(),this._onDidConflict.dispose()}list(){return[...this._conflicts.keys()]}hasConflicts(){return this._conflicts.size>0}};am=x([u(1,Oe),u(2,wc),u(3,Je)],am);var cm,va;class gM{constructor(){this._states=new WeakMap,this._checkedCount=0,this._onDidChange=new I,this.onDidChange=this._onDidChange.event}dispose(){this._onDidChange.dispose()}get checkedCount(){return this._checkedCount}isChecked(e){return this._states.get(e)??!1}updateChecked(e,t){const i=this._states.get(e);i!==t&&(i===void 0?t&&(this._checkedCount+=1):t?this._checkedCount+=1:this._checkedCount-=1,this._states.set(e,t),this._onDidChange.fire(e))}}class mM{constructor(e,t){this.parent=e,this.textEdit=t}}class fM{constructor(e,t){this.uri=e,this.parent=t,this.type=0,this.textEdits=[],this.originalEdits=new Map}addEdit(e,t,i){this.type|=t,this.originalEdits.set(e,i),i instanceof xo?this.textEdits.push(new mM(this,i)):t===8&&(this.newUri=i.newResource)}needsConfirmation(){for(const[,e]of this.originalEdits)if(!this.parent.checked.isChecked(e))return!0;return!1}}const Kh=class Kh{static keyOf(e){return(e==null?void 0:e.label)||"<default>"}constructor(e=Kh._defaultMetadata){this.metadata=e,this.operationByResource=new Map}get fileOperations(){return this.operationByResource.values()}};Kh._defaultMetadata=Object.freeze({label:d(10173,"Other"),icon:T.symbolFile,needsConfirmation:!1});let Vl=Kh,Ml=cm=class{static async create(e,t){return await e.get(O).createInstance(cm,t)._init()}constructor(e,t,i){this._bulkEdit=e,this._fileService=t,this.checked=new gM,this.fileOperations=[],this.categories=[],this.conflicts=i.createInstance(am,e)}dispose(){this.checked.dispose(),this.conflicts.dispose()}async _init(){var o,n,s,r,a,l;const e=new Map,t=new Map,i=new Bt;for(let h=0;h<this._bulkEdit.length;h++){const p=this._bulkEdit[h];let g,m;if(this.checked.updateChecked(p,!((o=p.metadata)!=null&&o.needsConfirmation)),p instanceof xo)m=1,g=p.resource;else if(p instanceof di)if(p.newResource&&p.oldResource){if(m=8,g=p.oldResource,((n=p.options)==null?void 0:n.overwrite)===void 0&&((s=p.options)!=null&&s.ignoreIfExists)&&await this._fileService.exists(g))continue;i.set(p.newResource,g)}else if(p.oldResource){if(m=4,g=p.oldResource,(r=p.options)!=null&&r.ignoreIfNotExists&&!await this._fileService.exists(g))continue}else if(p.newResource){if(m=2,g=p.newResource,((a=p.options)==null?void 0:a.overwrite)===void 0&&((l=p.options)!=null&&l.ignoreIfExists)&&await this._fileService.exists(g))continue}else continue;else continue;const f=(E,D)=>{let V=gp.getComparisonKey(E,!0),M=D.get(V);!M&&i.has(E)&&(E=i.get(E),V=gp.getComparisonKey(E,!0),M=D.get(V)),M||(M=new fM(E,this),D.set(V,M)),M.addEdit(h,m,p)};f(g,e);const v=Vl.keyOf(p.metadata);let S=t.get(v);S||(S=new Vl(p.metadata),t.set(v,S)),f(g,S.operationByResource)}e.forEach(h=>this.fileOperations.push(h)),t.forEach(h=>this.categories.push(h));for(const h of this.fileOperations)if(h.type!==1){let p=!0;for(const g of h.originalEdits.values())g instanceof di&&(p=p&&this.checked.isChecked(g));if(!p)for(const g of h.originalEdits.values())this.checked.updateChecked(g,p)}return this.categories.sort((h,p)=>h.metadata.needsConfirmation===p.metadata.needsConfirmation?h.metadata.label.localeCompare(p.metadata.label):h.metadata.needsConfirmation?-1:1),this}getWorkspaceEdit(){const e=[];let t=!0;for(let i=0;i<this._bulkEdit.length;i++){const o=this._bulkEdit[i];if(this.checked.isChecked(o)){e[i]=o;continue}t=!1}return t?this._bulkEdit:(yI(e),e)}async getFileEditOperation(e){const t=await e.options.contents;if(t)return Ep.replaceMove(Ae.lift({startLineNumber:0,startColumn:0,endLineNumber:Number.MAX_VALUE,endColumn:0}),t.toString())}async getFileEdits(e){for(const t of this.fileOperations)if(t.uri.toString()===e.toString()){const i=[];let o=!1;for(const n of t.originalEdits.values())n instanceof di?i.push(this.getFileEditOperation(n)):n instanceof xo?this.checked.isChecked(n)&&i.push(Promise.resolve(Ep.replaceMove(Ae.lift(n.textEdit.range),n.textEdit.insertAsSnippet?pu.asInsertText(n.textEdit.text):n.textEdit.text))):this.checked.isChecked(n)||(o=!0);return o?[]:(await Promise.all(i)).filter(n=>n!==void 0).sort((n,s)=>Ae.compareRangesUsingStarts(n.range,s.range))}return[]}getUriOfEdit(e){for(const t of this.fileOperations)for(const i of t.originalEdits.values())if(i===e)return t.uri;throw new Error("invalid edit")}};Ml=cm=x([u(1,Oe),u(2,O)],Ml);var mo;let Ll=(mo=class{static fromPreviewUri(e){return z.parse(e.query)}constructor(e,t,i,o){this._operations=e,this._languageService=t,this._modelService=i,this._textModelResolverService=o,this._disposables=new P,this._modelPreviewEdits=new Map,this._instanceId=ta(),this._disposables.add(this._textModelResolverService.registerTextModelContentProvider(va.Schema,this)),this._ready=this._init()}dispose(){this._disposables.dispose()}asPreviewUri(e){return z.from({scheme:va.Schema,authority:this._instanceId,path:e.path,query:e.toString()})}async _init(){for(const e of this._operations.fileOperations)await this._applyTextEditsToPreviewModel(e.uri);this._disposables.add(N.debounce(this._operations.checked.onDidChange,(e,t)=>t,wI)(e=>{const t=this._operations.getUriOfEdit(e);this._applyTextEditsToPreviewModel(t)}))}async _applyTextEditsToPreviewModel(e){const t=await this._getOrCreatePreviewModel(e),i=this._modelPreviewEdits.get(t.id);i&&t.applyEdits(i);const o=await this._operations.getFileEdits(e),n=t.applyEdits(o,!0);this._modelPreviewEdits.set(t.id,n)}async _getOrCreatePreviewModel(e){const t=this.asPreviewUri(e);let i=this._modelService.getModel(t);if(!i){try{const o=await this._textModelResolverService.createModelReference(e),n=o.object.textEditorModel;i=this._modelService.createModel(vI(n.createSnapshot()),this._languageService.createById(n.getLanguageId()),t),o.dispose()}catch{i=this._modelService.createModel("",this._languageService.createByFilepathOrFirstLine(t),t)}queueMicrotask(async()=>{this._disposables.add(await this._textModelResolverService.createModelReference(i.uri))})}return i}async provideTextContent(e){return e.toString()===va.emptyPreview.toString()?this._modelService.createModel("",null,e):(await this._ready,this._modelService.getModel(e))}},va=mo,mo.Schema="vscode-bulkeditpreview-editor",mo.emptyPreview=z.from({scheme:mo.Schema,fragment:"empty"}),mo);Ll=va=x([u(1,Zr),u(2,wc),u(3,Ts)],Ll);var dm,lm,hm;class qt{constructor(e,t){this.parent=e,this.category=t}isChecked(){const e=this.parent;let t=!0;for(const i of this.category.fileOperations)for(const o of i.originalEdits.values())t=t&&e.checked.isChecked(o);return t}setChecked(e){const t=this.parent;for(const i of this.category.fileOperations)for(const o of i.originalEdits.values())t.checked.updateChecked(o,e)}}class $t{constructor(e,t){this.parent=e,this.edit=t}isChecked(){const e=this.parent instanceof qt?this.parent.parent:this.parent;let t=!0;this.edit.type===1&&(t=!this.edit.textEdits.every(i=>!e.checked.isChecked(i.textEdit)));for(const i of this.edit.originalEdits.values())i instanceof di&&(t=t&&e.checked.isChecked(i));if(this.parent instanceof qt&&this.edit.type===1){for(const i of e.categories)for(const o of i.fileOperations)if(o.uri.toString()===this.edit.uri.toString())for(const n of o.originalEdits.values())n instanceof di&&(t=t&&e.checked.isChecked(n))}return t}setChecked(e){const t=this.parent instanceof qt?this.parent.parent:this.parent;for(const i of this.edit.originalEdits.values())t.checked.updateChecked(i,e);if(this.parent instanceof qt&&this.edit.type!==1){for(const i of t.categories)for(const o of i.fileOperations)if(o.uri.toString()===this.edit.uri.toString())for(const n of o.originalEdits.values())t.checked.updateChecked(n,e)}}isDisabled(){if(this.parent instanceof qt&&this.edit.type===1){const e=this.parent.parent;let t=!0;for(const i of e.categories)for(const o of i.fileOperations)if(o.uri.toString()===this.edit.uri.toString())for(const n of o.originalEdits.values())n instanceof di&&(t=t&&e.checked.isChecked(n));return!t}return!1}}class Io{constructor(e,t,i,o,n,s,r){this.parent=e,this.idx=t,this.edit=i,this.prefix=o,this.selecting=n,this.inserting=s,this.suffix=r}isChecked(){let e=this.parent.parent;return e instanceof qt&&(e=e.parent),e.checked.isChecked(this.edit.textEdit)}setChecked(e){let t=this.parent.parent;if(t instanceof qt&&(t=t.parent),t.checked.updateChecked(this.edit.textEdit,e),e)for(const i of this.parent.edit.originalEdits.values())i instanceof di&&t.checked.updateChecked(i,e)}isDisabled(){return this.parent.isDisabled()}}let um=class{constructor(e,t){this._textModelService=e,this._instantiationService=t,this.groupByFile=!0}hasChildren(e){return e instanceof $t?e.edit.textEdits.length>0:!(e instanceof Io)}async getChildren(e){if(e instanceof Ml)return this.groupByFile?e.fileOperations.map(t=>new $t(e,t)):e.categories.map(t=>new qt(e,t));if(e instanceof qt)return Array.from(e.category.fileOperations,t=>new $t(e,t));if(e instanceof $t&&e.edit.textEdits.length>0){let t,i;try{const n=await this._textModelService.createModelReference(e.edit.uri);t=n.object.textEditorModel,i=n}catch{t=this._instantiationService.createInstance(sw,"",Td,sw.DEFAULT_CREATION_OPTIONS,null),i=t}const o=e.edit.textEdits.map((n,s)=>{const r=t.validateRange(n.textEdit.textEdit.range),a=t.tokenization.getLineTokens(r.startLineNumber);let l=23;for(let g=a.findTokenIndexAtOffset(r.startColumn-1)-1;l<50&&g>=0;g--)l=r.startColumn-a.getStartOffset(g);const h=t.tokenization.getLineTokens(r.endLineNumber);let p=0;for(let g=h.findTokenIndexAtOffset(r.endColumn-1);p<50&&g<h.getCount();g++)p+=h.getEndOffset(g)-h.getStartOffset(g);return new Io(e,s,n,t.getValueInRange(new Ae(r.startLineNumber,r.startColumn-l,r.startLineNumber,r.startColumn)),t.getValueInRange(r),n.textEdit.textEdit.insertAsSnippet?pu.asInsertText(n.textEdit.textEdit.text):n.textEdit.textEdit.text,t.getValueInRange(new Ae(r.endLineNumber,r.endColumn,r.endLineNumber,r.endColumn+p)))});return i.dispose(),o}return[]}};um=x([u(0,Ts),u(1,O)],um);class bM{compare(e,t){return e instanceof $t&&t instanceof $t?JS(e.edit,t.edit):e instanceof Io&&t instanceof Io?Ae.compareRangesUsingStarts(e.edit.textEdit.textEdit.range,t.edit.textEdit.textEdit.range):0}}function JS(c,e){return gu(c.uri.toString(),e.uri.toString())}let pm=class{constructor(e){this._labelService=e}getWidgetAriaLabel(){return d(10174,"Bulk Edit")}getRole(e){return"checkbox"}getAriaLabel(e){if(e instanceof $t){if(e.edit.textEdits.length>0)return e.edit.type&8&&e.edit.newUri?d(10175,"Renaming {0} to {1}, also making text edits",this._labelService.getUriLabel(e.edit.uri,{relative:!0}),this._labelService.getUriLabel(e.edit.newUri,{relative:!0})):e.edit.type&2?d(10176,"Creating {0}, also making text edits",this._labelService.getUriLabel(e.edit.uri,{relative:!0})):e.edit.type&4?d(10177,"Deleting {0}, also making text edits",this._labelService.getUriLabel(e.edit.uri,{relative:!0})):d(10178,"{0}, making text edits",this._labelService.getUriLabel(e.edit.uri,{relative:!0}));if(e.edit.type&8&&e.edit.newUri)return d(10179,"Renaming {0} to {1}",this._labelService.getUriLabel(e.edit.uri,{relative:!0}),this._labelService.getUriLabel(e.edit.newUri,{relative:!0}));if(e.edit.type&2)return d(10180,"Creating {0}",this._labelService.getUriLabel(e.edit.uri,{relative:!0}));if(e.edit.type&4)return d(10181,"Deleting {0}",this._labelService.getUriLabel(e.edit.uri,{relative:!0}))}if(e instanceof Io){if(e.selecting.length>0&&e.inserting.length>0)return d(10182,"line {0}, replacing {1} with {2}",e.edit.textEdit.textEdit.range.startLineNumber,e.selecting,e.inserting);if(e.selecting.length>0&&e.inserting.length===0)return d(10183,"line {0}, removing {1}",e.edit.textEdit.textEdit.range.startLineNumber,e.selecting);if(e.selecting.length===0&&e.inserting.length>0)return d(10184,"line {0}, inserting {1}",e.edit.textEdit.textEdit.range.startLineNumber,e.selecting)}return null}};pm=x([u(0,mi)],pm);class wM{getId(e){return e instanceof $t?e.edit.uri+(e.parent instanceof qt?JSON.stringify(e.parent.category.metadata):""):e instanceof Io?e.parent.edit.uri.toString()+e.idx:JSON.stringify(e.category.metadata)}}class vM{constructor(e){e.classList.add("category"),this.icon=document.createElement("div"),e.appendChild(this.icon),this.label=new mu(e)}}var ns;let Pl=(ns=class{constructor(e){this._themeService=e,this.templateId=dm.id}renderTemplate(e){return new vM(e)}renderElement(e,t,i){var n;i.icon.style.setProperty("--background-dark",null),i.icon.style.setProperty("--background-light",null),i.icon.style.color="";const{metadata:o}=e.element.category;if(oe.isThemeIcon(o.iconPath)){const s=oe.asClassName(o.iconPath);i.icon.className=s?`theme-icon ${s}`:"",i.icon.style.color=o.iconPath.color?((n=this._themeService.getColorTheme().getColor(o.iconPath.color.id))==null?void 0:n.toString())??"":""}else z.isUri(o.iconPath)?(i.icon.className="uri-icon",i.icon.style.setProperty("--background-dark",Hi(o.iconPath)),i.icon.style.setProperty("--background-light",Hi(o.iconPath))):o.iconPath&&(i.icon.className="uri-icon",i.icon.style.setProperty("--background-dark",Hi(o.iconPath.dark)),i.icon.style.setProperty("--background-light",Hi(o.iconPath.light)));i.label.setLabel(o.label,o.description,{descriptionMatches:bs(e.filterData)})}disposeTemplate(e){e.label.dispose()}},dm=ns,ns.id="CategoryElementRenderer",ns);Pl=dm=x([u(0,te)],Pl);let gm=class{constructor(e,t,i){this._labelService=i,this._disposables=new P,this._localDisposables=new P,this._checkbox=document.createElement("input"),this._checkbox.className="edit-checkbox",this._checkbox.type="checkbox",this._checkbox.setAttribute("role","checkbox"),e.appendChild(this._checkbox),this._label=t.create(e,{supportHighlights:!0}),this._details=document.createElement("span"),this._details.className="details",e.appendChild(this._details)}dispose(){this._localDisposables.dispose(),this._disposables.dispose(),this._label.dispose()}set(e,t){if(this._localDisposables.clear(),this._checkbox.checked=e.isChecked(),this._checkbox.disabled=e.isDisabled(),this._localDisposables.add(L(this._checkbox,"change",()=>{e.setChecked(this._checkbox.checked)})),e.edit.type&8&&e.edit.newUri)this._label.setResource({resource:e.edit.uri,name:d(10185,"{0}  {1}",this._labelService.getUriLabel(e.edit.uri,{relative:!0}),this._labelService.getUriLabel(e.edit.newUri,{relative:!0}))},{fileDecorations:{colors:!0,badges:!1}}),this._details.innerText=d(10186,"(renaming)");else{const i={matches:bs(t),fileKind:ft.FILE,fileDecorations:{colors:!0,badges:!1},extraClasses:[]};e.edit.type&2?this._details.innerText=d(10187,"(creating)"):e.edit.type&4?(this._details.innerText=d(10188,"(deleting)"),i.extraClasses.push("delete")):this._details.innerText="",this._label.setFile(e.edit.uri,i)}}};gm=x([u(2,mi)],gm);var ss;let Rl=(ss=class{constructor(e,t){this._resourceLabels=e,this._labelService=t,this.templateId=lm.id}renderTemplate(e){return new gm(e,this._resourceLabels,this._labelService)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(e){e.dispose()}},lm=ss,ss.id="FileElementRenderer",ss);Rl=lm=x([u(1,mi)],Rl);let mm=class{constructor(e,t){this._themeService=t,this._disposables=new P,this._localDisposables=new P,e.classList.add("textedit"),this._checkbox=document.createElement("input"),this._checkbox.className="edit-checkbox",this._checkbox.type="checkbox",this._checkbox.setAttribute("role","checkbox"),e.appendChild(this._checkbox),this._icon=document.createElement("div"),e.appendChild(this._icon),this._label=this._disposables.add(new CI(e))}dispose(){this._localDisposables.dispose(),this._disposables.dispose()}set(e){var a;this._localDisposables.clear(),this._localDisposables.add(L(this._checkbox,"change",l=>{e.setChecked(this._checkbox.checked),l.preventDefault()})),e.parent.isChecked()?(this._checkbox.checked=e.isChecked(),this._checkbox.disabled=e.isDisabled()):(this._checkbox.checked=e.isChecked(),this._checkbox.disabled=e.isDisabled());let t="";t+=e.prefix,t+=e.selecting,t+=e.inserting,t+=e.suffix;const i={start:e.prefix.length,end:e.prefix.length+e.selecting.length,extraClasses:["remove"]},o={start:i.end,end:i.end+e.inserting.length,extraClasses:["insert"]};let n;const{metadata:s}=e.edit.textEdit;s&&s.description?n=d(10189,"{0} - {1}",s.label,s.description):s&&(n=s.label);const r=s==null?void 0:s.iconPath;if(!r)this._icon.style.display="none";else if(this._icon.style.display="block",this._icon.style.setProperty("--background-dark",null),this._icon.style.setProperty("--background-light",null),oe.isThemeIcon(r)){const l=oe.asClassName(r);this._icon.className=l?`theme-icon ${l}`:"",this._icon.style.color=r.color?((a=this._themeService.getColorTheme().getColor(r.color.id))==null?void 0:a.toString())??"":""}else z.isUri(r)?(this._icon.className="uri-icon",this._icon.style.setProperty("--background-dark",Hi(r)),this._icon.style.setProperty("--background-light",Hi(r))):(this._icon.className="uri-icon",this._icon.style.setProperty("--background-dark",Hi(r.dark)),this._icon.style.setProperty("--background-light",Hi(r.light)));this._label.set(t,[i,o],n,!0),this._icon.title=n||""}};mm=x([u(1,te)],mm);var rs;let Bl=(rs=class{constructor(e){this._themeService=e,this.templateId=hm.id}renderTemplate(e){return new mm(e,this._themeService)}renderElement({element:e},t,i){i.set(e)}disposeTemplate(e){}},hm=rs,rs.id="TextEditElementRenderer",rs);Bl=hm=x([u(0,te)],Bl);class yM{getHeight(){return 23}getTemplateId(e){return e instanceof $t?Rl.id:e instanceof Io?Bl.id:Pl.id}}class CM{getKeyboardNavigationLabel(e){if(e instanceof $t)return mt(e.edit.uri);if(e instanceof qt)return e.category.metadata.label}}var Bo,zt;let Ze=(zt=class extends fu{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f,v,S,E){super({...e,titleMenuId:b.BulkEditTitle},p,g,m,l,h,t,f,v,S,E),this._instaService=t,this._editorService=i,this._labelService=o,this._textModelService=n,this._dialogService=s,this._contextMenuService=r,this._storageService=a,this._treeViewStates=new Map,this._disposables=new P,this._sessionDisposables=new P,this._computeResourceDiffEditorInputs=new SI(async D=>{const V=new EI(async W=>{const G=W.uri,se=this._currentProvider.asPreviewUri(G);if(W.type&4)return{original:{resource:z.revive(se)},modified:{resource:void 0},goToFileResource:W.uri};{let Le;try{(await this._textModelService.createModelReference(G)).dispose(),Le=G}catch{Le=Ll.emptyPreview}return{original:{resource:z.revive(Le)},modified:{resource:z.revive(se)},goToFileResource:Le}}}),M=D.slice().sort(JS),J=[];for(const W of M)J.push(await V.get(W));return{resources:J,getResourceDiffEditorInputIdOfOperation:async W=>{const G=await V.get(W);return{original:G.original.resource,modified:G.modified.resource}}}}),this.element.classList.add("bulk-edit-panel","show-file-icons"),this._ctxHasCategories=Bo.ctxHasCategories.bindTo(l),this._ctxGroupByFile=Bo.ctxGroupByFile.bindTo(l),this._ctxHasCheckedChanges=Bo.ctxHasCheckedChanges.bindTo(l),this.telemetryService.publicLog2("views.bulkEditPane")}dispose(){this._tree.dispose(),this._disposables.dispose(),super.dispose()}renderBody(e){super.renderBody(e);const t=this._instaService.createInstance(Sc,{onDidChangeVisibility:this.onDidChangeBodyVisibility});this._disposables.add(t);const i=document.createElement("div");i.className="content",e.appendChild(i);const o=document.createElement("div");i.appendChild(o),this._treeDataSource=this._instaService.createInstance(um),this._treeDataSource.groupByFile=this._storageService.getBoolean(Bo._memGroupByFile,0,!0),this._ctxGroupByFile.set(this._treeDataSource.groupByFile),this._tree=this._instaService.createInstance(Xr,this.id,o,new yM,[this._instaService.createInstance(Bl),this._instaService.createInstance(Rl,t),this._instaService.createInstance(Pl)],this._treeDataSource,{accessibilityProvider:this._instaService.createInstance(pm),identityProvider:new wM,expandOnlyOnTwistieClick:!0,multipleSelectionSupport:!1,keyboardNavigationLabelProvider:new CM,sorter:new bM,selectionNavigation:!0}),this._disposables.add(this._tree.onContextMenu(this._onContextMenu,this)),this._disposables.add(this._tree.onDidOpen(l=>this._openElementInMultiDiffEditor(l)));const n=document.createElement("div");n.className="buttons",i.appendChild(n);const s=new _f(n);this._disposables.add(s);const r=s.addButton({supportIcons:!0,...Vr});r.label=d(5280,"Apply"),r.onDidClick(()=>this.accept(),this,this._disposables);const a=s.addButton({...Vr,secondary:!0});a.label=d(5281,"Discard"),a.onDidClick(()=>this.discard(),this,this._disposables),this._message=document.createElement("span"),this._message.className="message",this._message.innerText=d(5282,"Invoke a code action, like rename, to see a preview of its changes here."),e.appendChild(this._message),this._setState("message")}layoutBody(e,t){super.layoutBody(e,t);const i=e-50;this._tree.getHTMLElement().parentElement.style.height=`${i}px`,this._tree.layout(i,t)}_setState(e){this.element.dataset.state=e}async setInput(e,t){this._setState("data"),this._sessionDisposables.clear(),this._treeViewStates.clear(),this._currentResolve&&(this._currentResolve(void 0),this._currentResolve=void 0);const i=await this._instaService.invokeFunction(Ml.create,e);this._currentProvider=this._instaService.createInstance(Ll,i),this._sessionDisposables.add(this._currentProvider),this._sessionDisposables.add(i);const o=i.categories.length>1;return this._ctxHasCategories.set(o),this._treeDataSource.groupByFile=!o||this._treeDataSource.groupByFile,this._ctxHasCheckedChanges.set(i.checked.checkedCount>0),this._currentInput=i,new Promise(n=>{t.onCancellationRequested(()=>n(void 0)),this._currentResolve=n,this._setTreeInput(i),this._sessionDisposables.add(i.checked.onDidChange(()=>{this._tree.updateChildren(),this._ctxHasCheckedChanges.set(i.checked.checkedCount>0)}))})}hasInput(){return!!this._currentInput}async _setTreeInput(e){const t=this._treeViewStates.get(this._treeDataSource.groupByFile);if(await this._tree.setInput(e,t),this._tree.domFocus(),t)return;const i=[...this._tree.getNode(e).children].slice(0,10);for(;i.length>0;){const{element:o}=i.shift();o instanceof $t&&await this._tree.expand(o,!0),o instanceof qt&&(await this._tree.expand(o,!0),i.push(...this._tree.getNode(o).children))}}accept(){var i;const e=(i=this._currentInput)==null?void 0:i.conflicts.list();if(!e||e.length===0){this._done(!0);return}let t;e.length===1?t=d(5283,"Cannot apply refactoring because '{0}' has changed in the meantime.",this._labelService.getUriLabel(e[0],{relative:!0})):t=d(5284,"Cannot apply refactoring because {0} other files have changed in the meantime.",e.length),this._dialogService.warn(t).finally(()=>this._done(!1))}discard(){this._done(!1)}_done(e){var t,i;(i=this._currentResolve)==null||i.call(this,e?(t=this._currentInput)==null?void 0:t.getWorkspaceEdit():void 0),this._currentInput=void 0,this._setState("message"),this._sessionDisposables.clear()}toggleChecked(){const[e]=this._tree.getFocus();((e instanceof $t||e instanceof Io)&&!e.isDisabled()||e instanceof qt)&&e.setChecked(!e.isChecked())}groupByFile(){this._treeDataSource.groupByFile||this.toggleGrouping()}groupByType(){this._treeDataSource.groupByFile&&this.toggleGrouping()}toggleGrouping(){const e=this._tree.getInput();if(e){const t=this._tree.getViewState();this._treeViewStates.set(this._treeDataSource.groupByFile,t),this._treeDataSource.groupByFile=!this._treeDataSource.groupByFile,this._setTreeInput(e),this._storageService.store(Bo._memGroupByFile,this._treeDataSource.groupByFile,0,0),this._ctxGroupByFile.set(this._treeDataSource.groupByFile)}}async _openElementInMultiDiffEditor(e){var h,p;const t=(h=this._currentInput)==null?void 0:h.fileOperations;if(!t)return;let i,o;if(e.element instanceof Io)o=e.element.parent,i=e.element.edit.textEdit.textEdit.range;else if(e.element instanceof $t)o=e.element,i=(p=e.element.edit.textEdits[0])==null?void 0:p.textEdit.textEdit.range;else return;const n=await this._computeResourceDiffEditorInputs.get(t),s=await n.getResourceDiffEditorInputIdOfOperation(o.edit),r={...e.editorOptions,viewState:{revealData:{resource:s,range:i}}},a=z.from({scheme:Bo.Schema}),l="Refactor Preview";this._editorService.openEditor({multiDiffSource:a,label:l,options:r,isTransient:!0,description:l,resources:n.resources},e.sideBySide?Mr:ny)}_onContextMenu(e){this._contextMenuService.showContextMenu({menuId:b.BulkEditContext,contextKeyService:this.contextKeyService,getAnchor:()=>e.anchor})}},Bo=zt,zt.ID="refactorPreview",zt.Schema="vscode-bulkeditpreview-multieditor",zt.ctxHasCategories=new j("refactorPreview.hasCategories",!1),zt.ctxGroupByFile=new j("refactorPreview.groupByFile",!0),zt.ctxHasCheckedChanges=new j("refactorPreview.hasCheckedChanges",!0),zt._memGroupByFile=`${zt.ID}.groupByFile`,zt);Ze=Bo=x([u(1,O),u(2,U),u(3,mi),u(4,Ts),u(5,xt),u(6,Ve),u(7,ie),u(8,K),u(9,Te),u(10,xe),u(11,Ve),u(12,F),u(13,It),u(14,te),u(15,Be),u(16,Xe)],Ze);var fm;async function Vs(c){const e=await c.openView(Ze.ID,!0);if(e instanceof Ze)return e}let bm=class{constructor(e,t){var i;this._paneCompositeService=e,this._editorGroupsService=t,this._activePanel=(i=e.getActivePaneComposite(1))==null?void 0:i.getId()}async restore(e,t){if(e&&(typeof this._activePanel=="string"?await this._paneCompositeService.openPaneComposite(this._activePanel,1):this._paneCompositeService.hideActivePaneComposite(1)),t)for(const i of this._editorGroupsService.groups){const o=[];for(const n of i.editors){const s=Ie.getCanonicalUri(n,{supportSideBySide:Ce.PRIMARY});(s==null?void 0:s.scheme)===Ze.Schema&&o.push(n)}o.length&&i.closeEditors(o,{preserveFocus:!0})}}};bm=x([u(0,Gt),u(1,Z)],bm);class Zw{constructor(e,t=new ko){this.uxState=e,this.cts=t}}var tn;let ui=(tn=class{constructor(e,t,i,o,n,s){this._paneCompositeService=e,this._viewsService=t,this._editorGroupsService=i,this._dialogService=o,n.setPreviewHandler(r=>this._previewEdit(r)),this._ctxEnabled=fm.ctxEnabled.bindTo(s)}async _previewEdit(e){var n;this._ctxEnabled.set(!0);const t=((n=this._activeSession)==null?void 0:n.uxState)??new bm(this._paneCompositeService,this._editorGroupsService),i=await Vs(this._viewsService);if(!i)return this._ctxEnabled.set(!1),e;if(i.hasInput()){const{confirmed:s}=await this._dialogService.confirm({type:me.Info,message:d(2127,"Another refactoring is being previewed."),detail:d(2128,"Press 'Continue' to discard the previous refactoring and continue with the current refactoring."),primaryButton:d(2129,"&&Continue")});if(!s)return[]}let o;this._activeSession?(await this._activeSession.uxState.restore(!1,!0),this._activeSession.cts.dispose(!0),o=new Zw(t)):o=new Zw(t),this._activeSession=o;try{return await i.setInput(e,o.cts.token)??[]}finally{this._activeSession===o&&(await this._activeSession.uxState.restore(!0,!0),this._activeSession.cts.dispose(),this._ctxEnabled.set(!1),this._activeSession=void 0)}}},fm=tn,tn.ID="workbench.contrib.bulkEditPreview",tn.ctxEnabled=new j("refactorPreview.enabled",!1),tn);ui=fm=x([u(0,Gt),u(1,it),u(2,Z),u(3,xt),u(4,eC),u(5,K)],ui);C(class extends A{constructor(){super({id:"refactorPreview.apply",title:w(2130,"Apply Refactoring"),category:w(2131,"Refactor Preview"),icon:T.check,precondition:y.and(ui.ctxEnabled,Ze.ctxHasCheckedChanges),menu:[{id:b.BulkEditContext,order:1}],keybinding:{weight:90,when:y.and(ui.ctxEnabled,fo.isEqualTo(Ze.ID)),primary:2051}})}async run(e){const t=e.get(it),i=await Vs(t);i==null||i.accept()}});C(class extends A{constructor(){super({id:"refactorPreview.discard",title:w(2132,"Discard Refactoring"),category:w(2131,"Refactor Preview"),icon:T.clearAll,precondition:ui.ctxEnabled,menu:[{id:b.BulkEditContext,order:2}]})}async run(e){const t=e.get(it),i=await Vs(t);i==null||i.discard()}});C(class extends A{constructor(){super({id:"refactorPreview.toggleCheckedState",title:w(2133,"Toggle Change"),category:w(2131,"Refactor Preview"),precondition:ui.ctxEnabled,keybinding:{weight:200,when:ye,primary:10},menu:{id:b.BulkEditContext,group:"navigation"}})}async run(e){const t=e.get(it),i=await Vs(t);i==null||i.toggleChecked()}});C(class extends A{constructor(){super({id:"refactorPreview.groupByFile",title:w(2134,"Group Changes By File"),category:w(2131,"Refactor Preview"),icon:T.ungroupByRefType,precondition:y.and(Ze.ctxHasCategories,Ze.ctxGroupByFile.negate(),ui.ctxEnabled),menu:[{id:b.BulkEditTitle,when:y.and(Ze.ctxHasCategories,Ze.ctxGroupByFile.negate()),group:"navigation",order:3}]})}async run(e){const t=e.get(it),i=await Vs(t);i==null||i.groupByFile()}});C(class extends A{constructor(){super({id:"refactorPreview.groupByType",title:w(2135,"Group Changes By Type"),category:w(2131,"Refactor Preview"),icon:T.groupByRefType,precondition:y.and(Ze.ctxHasCategories,Ze.ctxGroupByFile,ui.ctxEnabled),menu:[{id:b.BulkEditTitle,when:y.and(Ze.ctxHasCategories,Ze.ctxGroupByFile),group:"navigation",order:3}]})}async run(e){const t=e.get(it),i=await Vs(t);i==null||i.groupByType()}});C(class extends A{constructor(){super({id:"refactorPreview.toggleGrouping",title:w(2135,"Group Changes By Type"),category:w(2131,"Refactor Preview"),icon:T.listTree,toggled:Ze.ctxGroupByFile.negate(),precondition:y.and(Ze.ctxHasCategories,ui.ctxEnabled),menu:[{id:b.BulkEditContext,order:3}]})}async run(e){const t=e.get(it),i=await Vs(t);i==null||i.toggleGrouping()}});Mt(ui.ID,ui,2);const QS=X("refactor-preview-view-icon",T.lightbulb,d(2136,"View icon of the refactor preview view.")),SM=$.as(Ot.ViewContainersRegistry).registerViewContainer({id:Ze.ID,title:w(2137,"Refactor Preview"),hideIfEmpty:!0,ctorDescriptor:new ce(Lc,[Ze.ID,{mergeViewWithContainerWhenSingleView:!0}]),icon:QS,storageId:Ze.ID},1);$.as(Ot.ViewsRegistry).registerViews([{id:Ze.ID,name:w(2137,"Refactor Preview"),when:ui.ctxEnabled,ctorDescriptor:new ce(Ze),containerIcon:QS}],SM);function EM(){return{[eC.toString()]:new ce(rm,[],!0)}}function rd(c,e){if(e==null)return c;const t=new URL(c,e);return t.host=new URL(e).hostname,t.toString()}var kM=".monaco-workbench .call-hierarchy .message,.monaco-workbench .call-hierarchy .results{display:none}.monaco-workbench .call-hierarchy[data-state=data] .results{display:inherit;height:100%}.monaco-workbench .call-hierarchy[data-state=message] .message{align-items:center;display:flex;height:100%;justify-content:center}.monaco-workbench .call-hierarchy .editor,.monaco-workbench .call-hierarchy .tree{height:100%}.monaco-editor .call-hierarchy .tree{background-color:var(--vscode-peekViewResult-background);color:var(--vscode-peekViewResult-fileForeground)}.monaco-workbench .call-hierarchy .tree .callhierarchy-element{align-items:center;display:flex;flex:1;flex-flow:row nowrap}.monaco-workbench .call-hierarchy .tree .callhierarchy-element .monaco-icon-label{padding-left:4px}.monaco-editor .call-hierarchy .tree .monaco-list:focus .monaco-list-rows>.monaco-list-row.selected:not(.highlighted){background-color:var(--vscode-peekViewResult-selectionBackground);color:var(--vscode-peekViewResult-selectionForeground)!important}.monaco-editor .call-hierarchy .call-decoration{background-color:var(--vscode-peekViewEditor-matchHighlightBackground);border:2px solid var(--vscode-peekViewEditor-matchHighlightBorder);box-sizing:border-box}.monaco-editor .call-hierarchy .editor .monaco-editor .inputarea.ime-input,.monaco-editor .call-hierarchy .editor .monaco-editor .monaco-editor-background{background-color:var(--vscode-peekViewEditor-background)}.monaco-editor .call-hierarchy .editor .monaco-editor .margin{background-color:var(--vscode-peekViewEditorGutter-background)}";we(kM,{});class md{constructor(e,t,i,o){this.item=e,this.locations=t,this.model=i,this.parent=o}static compare(e,t){let i=gu(e.item.uri.toString(),t.item.uri.toString());return i===0&&(i=Ae.compareRangesUsingStarts(e.item.range,t.item.range)),i}}let _M=class{constructor(e){this.getDirection=e}hasChildren(){return!0}async getChildren(e){if(e instanceof tC)return e.roots.map(o=>new md(o,void 0,e,void 0));const{model:t,item:i}=e;return this.getDirection()==="outgoingCalls"?(await t.resolveOutgoingCalls(i,Ti.None)).map(o=>new md(o.to,o.fromRanges.map(n=>({range:n,uri:i.uri})),t,e)):(await t.resolveIncomingCalls(i,Ti.None)).map(o=>new md(o.from,o.fromRanges.map(n=>({range:n,uri:o.from.uri})),t,e))}},xM=class{compare(e,t){return md.compare(e,t)}},IM=class{constructor(e){this.getDirection=e}getId(e){let t=this.getDirection()+JSON.stringify(e.item.uri)+JSON.stringify(e.item.range);return e.parent&&(t+=this.getId(e.parent)),t}};class DM{constructor(e,t){this.icon=e,this.label=t}}const qh=class qh{constructor(){this.templateId=qh.id}renderTemplate(e){e.classList.add("callhierarchy-element");const t=document.createElement("div");e.appendChild(t);const i=new mu(e,{supportHighlights:!0});return new DM(t,i)}renderElement(e,t,i){var r;const{element:o,filterData:n}=e,s=(r=o.item.tags)==null?void 0:r.includes(1);i.icon.className="",i.icon.classList.add("inline",...oe.asClassNameArray(iC.toIcon(o.item.kind))),i.label.setLabel(o.item.name,o.item.detail,{labelEscapeNewLines:!0,matches:bs(n),strikethrough:s})}disposeTemplate(e){e.label.dispose()}};qh.id="CallRenderer";let Ol=qh,AM=class{getHeight(e){return 22}getTemplateId(e){return Ol.id}},TM=class{constructor(e){this.getDirection=e}getWidgetAriaLabel(){return d(11471,"Call Hierarchy")}getAriaLabel(e){return this.getDirection()==="outgoingCalls"?d(11472,"calls from {0}",e.item.name):d(11473,"callers of {0}",e.item.name)}};var wm;let Xw=class{static store(e,t){t.store("callHierarchyPeekLayout",JSON.stringify(e),0,1)}static retrieve(e){const t=e.get("callHierarchyPeekLayout",0,"{}"),i={ratio:.7,height:17};try{return{...i,...JSON.parse(t)}}catch{return i}}constructor(e,t){this.ratio=e,this.height=t}};class VM extends Xr{}var as;let Wr=(as=class extends oC{constructor(e,t,i,o,n,s,r,a,l,h,p){super(e,{showFrame:!0,showArrow:!0,isResizeable:!0,isAccessible:!0},p),this._where=t,this._direction=i,this._peekViewService=n,this._editorService=s,this._textModelService=r,this._storageService=a,this._menuService=l,this._contextKeyService=h,this._instantiationService=p,this._treeViewStates=new Map,this._previewDisposable=new P,this.create(),this._peekViewService.addExclusiveWidget(e,this),this._applyTheme(o.getColorTheme()),this._disposables.add(o.onDidColorThemeChange(this._applyTheme,this)),this._disposables.add(this._previewDisposable)}dispose(){Xw.store(this._layoutInfo,this._storageService),this._splitView.dispose(),this._tree.dispose(),this._editor.dispose(),super.dispose()}get direction(){return this._direction}_applyTheme(e){const t=e.getColor(nC)||at.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(sC)||at.transparent,primaryHeadingColor:e.getColor(rC),secondaryHeadingColor:e.getColor(aC)})}_fillHead(e){super._fillHead(e,!0);const t=this._menuService.createMenu(wm.TitleMenu,this._contextKeyService),i=()=>{const o=[];hn(t,void 0,o),this._actionbarWidget.clear(),this._actionbarWidget.push(o,{label:!1,icon:!0})};this._disposables.add(t),this._disposables.add(t.onDidChange(i)),i()}_fillBody(e){this._layoutInfo=Xw.retrieve(this._storageService),this._dim=new he(0,0),this._parent=e,e.classList.add("call-hierarchy");const t=document.createElement("div");t.classList.add("message"),e.appendChild(t),this._message=t,this._message.tabIndex=0;const i=document.createElement("div");i.classList.add("results"),e.appendChild(i),this._splitView=new $a(i,{orientation:1});const o=document.createElement("div");o.classList.add("editor"),i.appendChild(o);const n={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._editor=this._instantiationService.createInstance(cC,o,n,{},this.editor);const s=document.createElement("div");s.classList.add("tree"),i.appendChild(s);const r={sorter:new xM,accessibilityProvider:new TM(()=>this._direction),identityProvider:new IM(()=>this._direction),expandOnlyOnTwistieClick:!0,overrideStyles:{listBackground:gC}};this._tree=this._instantiationService.createInstance(VM,"CallHierarchyPeek",s,new AM,[this._instantiationService.createInstance(Ol)],this._instantiationService.createInstance(_M,()=>this._direction),r),this._splitView.addView({onDidChange:N.None,element:o,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:a=>{this._dim.height&&this._editor.layout({height:this._dim.height,width:a})}},Kt.Distribute),this._splitView.addView({onDidChange:N.None,element:s,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:a=>{this._dim.height&&this._tree.layout(this._dim.height,a)}},Kt.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this._layoutInfo.ratio=this._splitView.getViewSize(0)/this._dim.width)})),this._disposables.add(this._tree.onDidChangeFocus(this._updatePreview,this)),this._disposables.add(this._editor.onMouseDown(a=>{const{event:l,target:h}=a;if(l.detail!==2)return;const[p]=this._tree.getFocus();p&&(this.dispose(),this._editorService.openEditor({resource:p.item.uri,options:{selection:h.range}}))})),this._disposables.add(this._tree.onMouseDblClick(a=>{a.target!==dC.Twistie&&a.element&&(this.dispose(),this._editorService.openEditor({resource:a.element.item.uri,options:{selection:a.element.item.selectionRange,pinned:!0}}))})),this._disposables.add(this._tree.onDidChangeSelection(a=>{const[l]=a.elements;l&&lC(a.browserEvent)&&(this.dispose(),this._editorService.openEditor({resource:l.item.uri,options:{selection:l.item.selectionRange,pinned:!0}}))}))}async _updatePreview(){const[e]=this._tree.getFocus();if(!e)return;this._previewDisposable.clear();const t={description:"call-hierarchy-decoration",stickiness:1,className:"call-decoration",overviewRuler:{color:hC(uC),position:Rc.Center}};let i;this._direction==="outgoingCalls"?i=e.parent?e.parent.item.uri:e.model.root.uri:i=e.item.uri;const o=await this._textModelService.createModelReference(i);this._editor.setModel(o.object.textEditorModel);const n=[];let s,r=e.locations;r||(r=[{uri:e.item.uri,range:e.item.selectionRange}]);for(const l of r)l.uri.toString()===i.toString()&&(n.push({range:l.range,options:t}),s=s?Ae.plusRange(l.range,s):l.range);if(s){this._editor.revealRangeInCenter(s,1);const l=this._editor.createDecorationsCollection(n);this._previewDisposable.add(ne(()=>l.clear()))}this._previewDisposable.add(o);const a=this._direction==="outgoingCalls"?d(9708,"Calls from '{0}'",e.model.root.name):d(9709,"Callers of '{0}'",e.model.root.name);this.setTitle(a)}showLoading(){this._parent.dataset.state="loading",this.setTitle(d(9710,"Loading...")),this._show()}showMessage(e){this._parent.dataset.state="message",this.setTitle(""),this.setMetaTitle(""),this._message.innerText=e,this._show(),this._message.focus()}async showModel(e){this._show();const t=this._treeViewStates.get(this._direction);await this._tree.setInput(e,t);const i=this._tree.getNode(e).children[0];await this._tree.expand(i.element),i.children.length===0?this.showMessage(this._direction==="outgoingCalls"?d(9711,"No calls from '{0}'",e.root.name):d(9712,"No callers of '{0}'",e.root.name)):(this._parent.dataset.state="data",(!t||this._tree.getFocus().length===0)&&this._tree.setFocus([i.children[0].element]),this._tree.domFocus(),this._updatePreview())}getModel(){return this._tree.getInput()}getFocused(){return this._tree.getFocus()[0]}async updateDirection(e){const t=this._tree.getInput();t&&e!==this._direction&&(this._treeViewStates.set(this._direction,this._tree.getViewState()),this._direction=e,await this.showModel(t))}_show(){this._isShowing||(this.editor.revealLineInCenterIfOutsideViewport(this._where.lineNumber,0),super.show(Ae.fromPositions(this._where),this._layoutInfo.height))}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){(this._dim.height!==e||this._dim.width!==t)&&(super._doLayoutBody(e,t),this._dim=new he(t,e),this._layoutInfo.height=this._viewZone?this._viewZone.heightInLines:this._layoutInfo.height,this._splitView.layout(t),this._splitView.resizeView(0,t*this._layoutInfo.ratio))}},wm=as,as.TitleMenu=new b("callhierarchy/title"),as);Wr=wm=x([u(3,te),u(4,pC),u(5,U),u(6,Ts),u(7,ie),u(8,yt),u(9,K),u(10,O)],Wr);var Ws;const vm=new j("editorHasCallHierarchyProvider",!1,d(4226,"Whether a call hierarchy provider is available")),zc=new j("callHierarchyVisible",!1,d(4227,"Whether call hierarchy peek is currently showing")),lc=new j("callHierarchyDirection",void 0,{type:"string",description:d(4228,"Whether call hierarchy shows incoming or outgoing calls")});function MM(c){return c==="outgoingCalls"||c==="incomingCalls"?c:"incomingCalls"}var on;let Do=(on=class{static get(e){return e.getContribution(Ws.Id)}constructor(e,t,i,o,n){this._editor=e,this._contextKeyService=t,this._storageService=i,this._editorService=o,this._instantiationService=n,this._dispoables=new P,this._sessionDisposables=new P,this._ctxIsVisible=zc.bindTo(this._contextKeyService),this._ctxHasProvider=vm.bindTo(this._contextKeyService),this._ctxDirection=lc.bindTo(this._contextKeyService),this._dispoables.add(N.any(e.onDidChangeModel,e.onDidChangeModelLanguage,Hu.onDidChange)(()=>{this._ctxHasProvider.set(e.hasModel()&&Hu.has(e.getModel()))})),this._dispoables.add(this._sessionDisposables)}dispose(){this._ctxHasProvider.reset(),this._ctxIsVisible.reset(),this._dispoables.dispose()}async startCallHierarchyFromEditor(){if(this._sessionDisposables.clear(),!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition();if(!Hu.has(e))return;const i=new ko,o=tC.create(e,t,i.token),n=MM(this._storageService.get(Ws._StorageDirection,0,"incomingCalls"));this._showCallHierarchyWidget(t,n,o,i)}async startCallHierarchyFromCallHierarchy(){var n;if(!this._widget)return;const e=this._widget.getModel(),t=this._widget.getFocused();if(!t||!e)return;const i=await this._editorService.openCodeEditor({resource:t.item.uri},this._editor);if(!i)return;const o=e.fork(t.item);this._sessionDisposables.clear(),(n=Ws.get(i))==null||n._showCallHierarchyWidget(Ae.lift(o.root.selectionRange).getStartPosition(),this._widget.direction,Promise.resolve(o),new ko)}_showCallHierarchyWidget(e,t,i,o){this._ctxIsVisible.set(!0),this._ctxDirection.set(t),N.any(this._editor.onDidChangeModel,this._editor.onDidChangeModelLanguage)(this.endCallHierarchy,this,this._sessionDisposables),this._widget=this._instantiationService.createInstance(Wr,this._editor,e,t),this._widget.showLoading(),this._sessionDisposables.add(this._widget.onDidClose(()=>{this.endCallHierarchy(),this._storageService.store(Ws._StorageDirection,this._widget.direction,0,0)})),this._sessionDisposables.add({dispose(){o.dispose(!0)}}),this._sessionDisposables.add(this._widget),i.then(n=>{o.token.isCancellationRequested||(n?(this._sessionDisposables.add(n),this._widget.showModel(n)):this._widget.showMessage(d(4229,"No results")))}).catch(n=>{if(jr(n)){this.endCallHierarchy();return}this._widget.showMessage(d(4230,"Failed to show call hierarchy"))})}showOutgoingCalls(){var e;(e=this._widget)==null||e.updateDirection("outgoingCalls"),this._ctxDirection.set("outgoingCalls")}showIncomingCalls(){var e;(e=this._widget)==null||e.updateDirection("incomingCalls"),this._ctxDirection.set("incomingCalls")}endCallHierarchy(){this._sessionDisposables.clear(),this._ctxIsVisible.set(!1),this._editor.focus()}},Ws=on,on.Id="callHierarchy",on._StorageDirection="callHierarchy/defaultDirection",on);Do=Ws=x([u(1,K),u(2,ie),u(3,ia),u(4,O)],Do);$f(Do.Id,Do,0);C(class extends to{constructor(){super({id:"editor.showCallHierarchy",title:w(4231,"Peek Call Hierarchy"),menu:{id:b.EditorContextPeek,group:"navigation",order:1e3,when:y.and(vm,Vd.notInPeekEditor,Qa.isInEmbeddedEditor.toNegated())},keybinding:{when:Qa.editorTextFocus,weight:200,primary:1574},precondition:y.and(vm,Vd.notInPeekEditor),f1:!0})}async runEditorCommand(e,t){var i;return(i=Do.get(t))==null?void 0:i.startCallHierarchyFromEditor()}});C(class extends to{constructor(){super({id:"editor.showIncomingCalls",title:w(4232,"Show Incoming Calls"),icon:X("callhierarchy-incoming",T.callIncoming,d(4233,"Icon for incoming calls in the call hierarchy view.")),precondition:y.and(zc,lc.isEqualTo("outgoingCalls")),keybinding:{weight:200,primary:1574},menu:{id:Wr.TitleMenu,when:lc.isEqualTo("outgoingCalls"),order:1}})}runEditorCommand(c,e){var t;return(t=Do.get(e))==null?void 0:t.showIncomingCalls()}});C(class extends to{constructor(){super({id:"editor.showOutgoingCalls",title:w(4234,"Show Outgoing Calls"),icon:X("callhierarchy-outgoing",T.callOutgoing,d(4235,"Icon for outgoing calls in the call hierarchy view.")),precondition:y.and(zc,lc.isEqualTo("incomingCalls")),keybinding:{weight:200,primary:1574},menu:{id:Wr.TitleMenu,when:lc.isEqualTo("incomingCalls"),order:1}})}runEditorCommand(c,e){var t;return(t=Do.get(e))==null?void 0:t.showOutgoingCalls()}});C(class extends to{constructor(){super({id:"editor.refocusCallHierarchy",title:w(4236,"Refocus Call Hierarchy"),precondition:zc,keybinding:{weight:200,primary:1027}})}async runEditorCommand(c,e){var t;return(t=Do.get(e))==null?void 0:t.startCallHierarchyFromCallHierarchy()}});C(class extends to{constructor(){super({id:"editor.closeCallHierarchy",title:d(4237,"Close"),icon:T.close,precondition:zc,keybinding:{weight:210,primary:9,when:y.not("config.editor.stablePeek")},menu:{id:Wr.TitleMenu,order:1e3}})}runEditorCommand(c,e){var t;return(t=Do.get(e))==null?void 0:t.endCallHierarchy()}});var LM=".monaco-workbench .type-hierarchy .message,.monaco-workbench .type-hierarchy .results{display:none}.monaco-workbench .type-hierarchy[data-state=data] .results{display:inherit;height:100%}.monaco-workbench .type-hierarchy[data-state=message] .message{align-items:center;display:flex;height:100%;justify-content:center}.monaco-workbench .type-hierarchy .editor,.monaco-workbench .type-hierarchy .tree{height:100%}.monaco-editor .type-hierarchy .tree{background-color:var(--vscode-peekViewResult-background);color:var(--vscode-peekViewResult-fileForeground)}.monaco-editor .type-hierarchy .tree .monaco-list:focus .monaco-list-rows>.monaco-list-row.selected:not(.highlighted){background-color:var(--vscode-peekViewResult-selectionBackground);color:var(--vscode-peekViewResult-selectionForeground)!important}.monaco-workbench .type-hierarchy .tree .typehierarchy-element{align-items:center;display:flex;flex:1;flex-flow:row nowrap}.monaco-workbench .type-hierarchy .tree .typehierarchy-element .monaco-icon-label{padding-left:4px}.monaco-editor .type-hierarchy .type-decoration{background-color:var(--vscode-peekViewEditor-matchHighlightBackground);border:2px solid var(--vscode-peekViewEditor-matchHighlightBorder);box-sizing:border-box}.monaco-editor .type-hierarchy .editor .monaco-editor .inputarea.ime-input,.monaco-editor .type-hierarchy .editor .monaco-editor .monaco-editor-background{background-color:var(--vscode-peekViewEditor-background)}.monaco-editor .type-hierarchy .editor .monaco-editor .margin{background-color:var(--vscode-peekViewEditorGutter-background)}";we(LM,{});class fd{constructor(e,t,i){this.item=e,this.model=t,this.parent=i}static compare(e,t){let i=gu(e.item.uri.toString(),t.item.uri.toString());return i===0&&(i=Ae.compareRangesUsingStarts(e.item.range,t.item.range)),i}}class PM{constructor(e){this.getDirection=e}hasChildren(){return!0}async getChildren(e){if(e instanceof mC)return e.roots.map(o=>new fd(o,e,void 0));const{model:t,item:i}=e;return this.getDirection()==="supertypes"?(await t.provideSupertypes(i,Ti.None)).map(o=>new fd(o,t,e)):(await t.provideSubtypes(i,Ti.None)).map(o=>new fd(o,t,e))}}class RM{compare(e,t){return fd.compare(e,t)}}class BM{constructor(e){this.getDirection=e}getId(e){let t=this.getDirection()+JSON.stringify(e.item.uri)+JSON.stringify(e.item.range);return e.parent&&(t+=this.getId(e.parent)),t}}class OM{constructor(e,t){this.icon=e,this.label=t}}const $h=class $h{constructor(){this.templateId=$h.id}renderTemplate(e){e.classList.add("typehierarchy-element");const t=document.createElement("div");e.appendChild(t);const i=new mu(e,{supportHighlights:!0});return new OM(t,i)}renderElement(e,t,i){var r;const{element:o,filterData:n}=e,s=(r=o.item.tags)==null?void 0:r.includes(1);i.icon.classList.add("inline",...oe.asClassNameArray(iC.toIcon(o.item.kind))),i.label.setLabel(o.item.name,o.item.detail,{labelEscapeNewLines:!0,matches:bs(n),strikethrough:s})}disposeTemplate(e){e.label.dispose()}};$h.id="TypeRenderer";let Nl=$h;class NM{getHeight(e){return 22}getTemplateId(e){return Nl.id}}class FM{constructor(e){this.getDirection=e}getWidgetAriaLabel(){return d(11474,"Type Hierarchy")}getAriaLabel(e){return this.getDirection()==="supertypes"?d(11475,"supertypes of {0}",e.item.name):d(11476,"subtypes of {0}",e.item.name)}}var ym;class Jw{static store(e,t){t.store("typeHierarchyPeekLayout",JSON.stringify(e),0,1)}static retrieve(e){const t=e.get("typeHierarchyPeekLayout",0,"{}"),i={ratio:.7,height:17};try{return{...i,...JSON.parse(t)}}catch{return i}}constructor(e,t){this.ratio=e,this.height=t}}class GM extends Xr{}var cs;let Hr=(cs=class extends oC{constructor(e,t,i,o,n,s,r,a,l,h,p){super(e,{showFrame:!0,showArrow:!0,isResizeable:!0,isAccessible:!0},p),this._where=t,this._direction=i,this._peekViewService=n,this._editorService=s,this._textModelService=r,this._storageService=a,this._menuService=l,this._contextKeyService=h,this._instantiationService=p,this._treeViewStates=new Map,this._previewDisposable=new P,this.create(),this._peekViewService.addExclusiveWidget(e,this),this._applyTheme(o.getColorTheme()),this._disposables.add(o.onDidColorThemeChange(this._applyTheme,this)),this._disposables.add(this._previewDisposable)}dispose(){Jw.store(this._layoutInfo,this._storageService),this._splitView.dispose(),this._tree.dispose(),this._editor.dispose(),super.dispose()}get direction(){return this._direction}_applyTheme(e){const t=e.getColor(nC)||at.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(sC)||at.transparent,primaryHeadingColor:e.getColor(rC),secondaryHeadingColor:e.getColor(aC)})}_fillHead(e){super._fillHead(e,!0);const t=this._menuService.createMenu(ym.TitleMenu,this._contextKeyService),i=()=>{const o=[];hn(t,void 0,o),this._actionbarWidget.clear(),this._actionbarWidget.push(o,{label:!1,icon:!0})};this._disposables.add(t),this._disposables.add(t.onDidChange(i)),i()}_fillBody(e){this._layoutInfo=Jw.retrieve(this._storageService),this._dim=new he(0,0),this._parent=e,e.classList.add("type-hierarchy");const t=document.createElement("div");t.classList.add("message"),e.appendChild(t),this._message=t,this._message.tabIndex=0;const i=document.createElement("div");i.classList.add("results"),e.appendChild(i),this._splitView=new $a(i,{orientation:1});const o=document.createElement("div");o.classList.add("editor"),i.appendChild(o);const n={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._editor=this._instantiationService.createInstance(cC,o,n,{},this.editor);const s=document.createElement("div");s.classList.add("tree"),i.appendChild(s);const r={sorter:new RM,accessibilityProvider:new FM(()=>this._direction),identityProvider:new BM(()=>this._direction),expandOnlyOnTwistieClick:!0,overrideStyles:{listBackground:gC}};this._tree=this._instantiationService.createInstance(GM,"TypeHierarchyPeek",s,new NM,[this._instantiationService.createInstance(Nl)],this._instantiationService.createInstance(PM,()=>this._direction),r),this._splitView.addView({onDidChange:N.None,element:o,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:a=>{this._dim.height&&this._editor.layout({height:this._dim.height,width:a})}},Kt.Distribute),this._splitView.addView({onDidChange:N.None,element:s,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:a=>{this._dim.height&&this._tree.layout(this._dim.height,a)}},Kt.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this._layoutInfo.ratio=this._splitView.getViewSize(0)/this._dim.width)})),this._disposables.add(this._tree.onDidChangeFocus(this._updatePreview,this)),this._disposables.add(this._editor.onMouseDown(a=>{const{event:l,target:h}=a;if(l.detail!==2)return;const[p]=this._tree.getFocus();p&&(this.dispose(),this._editorService.openEditor({resource:p.item.uri,options:{selection:h.range}}))})),this._disposables.add(this._tree.onMouseDblClick(a=>{a.target!==dC.Twistie&&a.element&&(this.dispose(),this._editorService.openEditor({resource:a.element.item.uri,options:{selection:a.element.item.selectionRange,pinned:!0}}))})),this._disposables.add(this._tree.onDidChangeSelection(a=>{const[l]=a.elements;l&&lC(a.browserEvent)&&(this.dispose(),this._editorService.openEditor({resource:l.item.uri,options:{selection:l.item.selectionRange,pinned:!0}}))}))}async _updatePreview(){const[e]=this._tree.getFocus();if(!e)return;this._previewDisposable.clear();const t={description:"type-hierarchy-decoration",stickiness:1,className:"type-decoration",overviewRuler:{color:hC(uC),position:Rc.Center}};let i;this._direction==="supertypes"?i=e.parent?e.parent.item.uri:e.model.root.uri:i=e.item.uri;const o=await this._textModelService.createModelReference(i);this._editor.setModel(o.object.textEditorModel);const n=[];let s;const r={uri:e.item.uri,range:e.item.selectionRange};if(r.uri.toString()===i.toString()&&(n.push({range:r.range,options:t}),s=s?Ae.plusRange(r.range,s):r.range),s){this._editor.revealRangeInCenter(s,1);const l=this._editor.createDecorationsCollection(n);this._previewDisposable.add(ne(()=>l.clear()))}this._previewDisposable.add(o);const a=this._direction==="supertypes"?d(9713,"Supertypes of '{0}'",e.model.root.name):d(9714,"Subtypes of '{0}'",e.model.root.name);this.setTitle(a)}showLoading(){this._parent.dataset.state="loading",this.setTitle(d(9715,"Loading...")),this._show()}showMessage(e){this._parent.dataset.state="message",this.setTitle(""),this.setMetaTitle(""),this._message.innerText=e,this._show(),this._message.focus()}async showModel(e){this._show();const t=this._treeViewStates.get(this._direction);await this._tree.setInput(e,t);const i=this._tree.getNode(e).children[0];await this._tree.expand(i.element),i.children.length===0?this.showMessage(this._direction==="supertypes"?d(9716,"No supertypes of '{0}'",e.root.name):d(9717,"No subtypes of '{0}'",e.root.name)):(this._parent.dataset.state="data",(!t||this._tree.getFocus().length===0)&&this._tree.setFocus([i.children[0].element]),this._tree.domFocus(),this._updatePreview())}getModel(){return this._tree.getInput()}getFocused(){return this._tree.getFocus()[0]}async updateDirection(e){const t=this._tree.getInput();t&&e!==this._direction&&(this._treeViewStates.set(this._direction,this._tree.getViewState()),this._direction=e,await this.showModel(t))}_show(){this._isShowing||(this.editor.revealLineInCenterIfOutsideViewport(this._where.lineNumber,0),super.show(Ae.fromPositions(this._where),this._layoutInfo.height))}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){(this._dim.height!==e||this._dim.width!==t)&&(super._doLayoutBody(e,t),this._dim=new he(t,e),this._layoutInfo.height=this._viewZone?this._viewZone.heightInLines:this._layoutInfo.height,this._splitView.layout(t),this._splitView.resizeView(0,t*this._layoutInfo.ratio))}},ym=cs,cs.TitleMenu=new b("typehierarchy/title"),cs);Hr=ym=x([u(3,te),u(4,pC),u(5,U),u(6,Ts),u(7,ie),u(8,yt),u(9,K),u(10,O)],Hr);var Hs;const Cm=new j("editorHasTypeHierarchyProvider",!1,d(4238,"Whether a type hierarchy provider is available")),Uc=new j("typeHierarchyVisible",!1,d(4239,"Whether type hierarchy peek is currently showing")),hc=new j("typeHierarchyDirection",void 0,{type:"string",description:d(4240,"whether type hierarchy shows super types or subtypes")});function WM(c){return c==="subtypes"||c==="supertypes"?c:"subtypes"}var nn;let Ao=(nn=class{static get(e){return e.getContribution(Hs.Id)}constructor(e,t,i,o,n){this._editor=e,this._contextKeyService=t,this._storageService=i,this._editorService=o,this._instantiationService=n,this._disposables=new P,this._sessionDisposables=new P,this._ctxHasProvider=Cm.bindTo(this._contextKeyService),this._ctxIsVisible=Uc.bindTo(this._contextKeyService),this._ctxDirection=hc.bindTo(this._contextKeyService),this._disposables.add(N.any(e.onDidChangeModel,e.onDidChangeModelLanguage,zu.onDidChange)(()=>{this._ctxHasProvider.set(e.hasModel()&&zu.has(e.getModel()))})),this._disposables.add(this._sessionDisposables)}dispose(){this._disposables.dispose()}async startTypeHierarchyFromEditor(){if(this._sessionDisposables.clear(),!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition();if(!zu.has(e))return;const i=new ko,o=mC.create(e,t,i.token),n=WM(this._storageService.get(Hs._storageDirectionKey,0,"subtypes"));this._showTypeHierarchyWidget(t,n,o,i)}_showTypeHierarchyWidget(e,t,i,o){this._ctxIsVisible.set(!0),this._ctxDirection.set(t),N.any(this._editor.onDidChangeModel,this._editor.onDidChangeModelLanguage)(this.endTypeHierarchy,this,this._sessionDisposables),this._widget=this._instantiationService.createInstance(Hr,this._editor,e,t),this._widget.showLoading(),this._sessionDisposables.add(this._widget.onDidClose(()=>{this.endTypeHierarchy(),this._storageService.store(Hs._storageDirectionKey,this._widget.direction,0,0)})),this._sessionDisposables.add({dispose(){o.dispose(!0)}}),this._sessionDisposables.add(this._widget),i.then(n=>{o.token.isCancellationRequested||(n?(this._sessionDisposables.add(n),this._widget.showModel(n)):this._widget.showMessage(d(4241,"No results")))}).catch(n=>{if(jr(n)){this.endTypeHierarchy();return}this._widget.showMessage(d(4242,"Failed to show type hierarchy"))})}async startTypeHierarchyFromTypeHierarchy(){var n;if(!this._widget)return;const e=this._widget.getModel(),t=this._widget.getFocused();if(!t||!e)return;const i=await this._editorService.openCodeEditor({resource:t.item.uri},this._editor);if(!i)return;const o=e.fork(t.item);this._sessionDisposables.clear(),(n=Hs.get(i))==null||n._showTypeHierarchyWidget(Ae.lift(o.root.selectionRange).getStartPosition(),this._widget.direction,Promise.resolve(o),new ko)}showSupertypes(){var e;(e=this._widget)==null||e.updateDirection("supertypes"),this._ctxDirection.set("supertypes")}showSubtypes(){var e;(e=this._widget)==null||e.updateDirection("subtypes"),this._ctxDirection.set("subtypes")}endTypeHierarchy(){this._sessionDisposables.clear(),this._ctxIsVisible.set(!1),this._editor.focus()}},Hs=nn,nn.Id="typeHierarchy",nn._storageDirectionKey="typeHierarchy/defaultDirection",nn);Ao=Hs=x([u(1,K),u(2,ie),u(3,ia),u(4,O)],Ao);$f(Ao.Id,Ao,0);C(class extends to{constructor(){super({id:"editor.showTypeHierarchy",title:w(4243,"Peek Type Hierarchy"),menu:{id:b.EditorContextPeek,group:"navigation",order:1e3,when:y.and(Cm,Vd.notInPeekEditor)},precondition:y.and(Cm,Vd.notInPeekEditor),f1:!0})}async runEditorCommand(e,t){var i;return(i=Ao.get(t))==null?void 0:i.startTypeHierarchyFromEditor()}});C(class extends to{constructor(){super({id:"editor.showSupertypes",title:w(4244,"Show Supertypes"),icon:T.typeHierarchySuper,precondition:y.and(Uc,hc.isEqualTo("subtypes")),keybinding:{weight:200,primary:1574},menu:{id:Hr.TitleMenu,when:hc.isEqualTo("subtypes"),order:1}})}runEditorCommand(c,e){var t;return(t=Ao.get(e))==null?void 0:t.showSupertypes()}});C(class extends to{constructor(){super({id:"editor.showSubtypes",title:w(4245,"Show Subtypes"),icon:T.typeHierarchySub,precondition:y.and(Uc,hc.isEqualTo("supertypes")),keybinding:{weight:200,primary:1574},menu:{id:Hr.TitleMenu,when:hc.isEqualTo("supertypes"),order:1}})}runEditorCommand(c,e){var t;return(t=Ao.get(e))==null?void 0:t.showSubtypes()}});C(class extends to{constructor(){super({id:"editor.refocusTypeHierarchy",title:w(4246,"Refocus Type Hierarchy"),precondition:Uc,keybinding:{weight:200,primary:1027}})}async runEditorCommand(c,e){var t;return(t=Ao.get(e))==null?void 0:t.startTypeHierarchyFromTypeHierarchy()}});C(class extends to{constructor(){super({id:"editor.closeTypeHierarchy",title:d(4247,"Close"),icon:T.close,precondition:Uc,keybinding:{weight:210,primary:9,when:y.not("config.editor.stablePeek")},menu:{id:Hr.TitleMenu,order:1e3}})}runEditorCommand(c,e){var t;return(t=Ao.get(e))==null?void 0:t.endTypeHierarchy()}});function ub(c){const e=c==null?void 0:c.getHTMLElement();e&&!Of(e)&&(c==null||c.domFocus())}async function HM(c,e){if(!bC.getValue(c.contextKeyService))return e(c);const t=c.getFocus(),i=c.getSelection();await e(c);const o=c.getFocus();if(i.length>1||!fs(t,i)||fs(t,o))return;const n=new KeyboardEvent("keydown");c.setSelection(o,n)}async function Ft(c,e){if(!c)return;await HM(c,e);const t=c.getFocus();t.length&&c.reveal(t[0]),c.setAnchor(t[0]),ub(c)}ee.registerCommandAndKeybindingRule({id:"list.focusDown",weight:200,when:ye,primary:18,mac:{primary:18,secondary:[300]},handler:(c,e)=>{Ft(c.get(ue).lastFocusedList,async t=>{const i=new KeyboardEvent("keydown");await t.focusNext(typeof e=="number"?e:1,!1,i)})}});ee.registerCommandAndKeybindingRule({id:"list.focusUp",weight:200,when:ye,primary:16,mac:{primary:16,secondary:[302]},handler:(c,e)=>{Ft(c.get(ue).lastFocusedList,async t=>{const i=new KeyboardEvent("keydown");await t.focusPrevious(typeof e=="number"?e:1,!1,i)})}});ee.registerCommandAndKeybindingRule({id:"list.focusAnyDown",weight:200,when:ye,primary:530,mac:{primary:530,secondary:[812]},handler:(c,e)=>{Ft(c.get(ue).lastFocusedList,async t=>{const i=new KeyboardEvent("keydown",{altKey:!0});await t.focusNext(typeof e=="number"?e:1,!1,i)})}});ee.registerCommandAndKeybindingRule({id:"list.focusAnyUp",weight:200,when:ye,primary:528,mac:{primary:528,secondary:[814]},handler:(c,e)=>{Ft(c.get(ue).lastFocusedList,async t=>{const i=new KeyboardEvent("keydown",{altKey:!0});await t.focusPrevious(typeof e=="number"?e:1,!1,i)})}});ee.registerCommandAndKeybindingRule({id:"list.focusPageDown",weight:200,when:ye,primary:12,handler:c=>{Ft(c.get(ue).lastFocusedList,async e=>{const t=new KeyboardEvent("keydown");await e.focusNextPage(t)})}});ee.registerCommandAndKeybindingRule({id:"list.focusPageUp",weight:200,when:ye,primary:11,handler:c=>{Ft(c.get(ue).lastFocusedList,async e=>{const t=new KeyboardEvent("keydown");await e.focusPreviousPage(t)})}});ee.registerCommandAndKeybindingRule({id:"list.focusFirst",weight:200,when:ye,primary:14,handler:c=>{Ft(c.get(ue).lastFocusedList,async e=>{const t=new KeyboardEvent("keydown");await e.focusFirst(t)})}});ee.registerCommandAndKeybindingRule({id:"list.focusLast",weight:200,when:ye,primary:13,handler:c=>{Ft(c.get(ue).lastFocusedList,async e=>{const t=new KeyboardEvent("keydown");await e.focusLast(t)})}});ee.registerCommandAndKeybindingRule({id:"list.focusAnyFirst",weight:200,when:ye,primary:526,handler:c=>{Ft(c.get(ue).lastFocusedList,async e=>{const t=new KeyboardEvent("keydown",{altKey:!0});await e.focusFirst(t)})}});ee.registerCommandAndKeybindingRule({id:"list.focusAnyLast",weight:200,when:ye,primary:525,handler:c=>{Ft(c.get(ue).lastFocusedList,async e=>{const t=new KeyboardEvent("keydown",{altKey:!0});await e.focusLast(t)})}});function eE(c,e){if(c instanceof Bc||c instanceof Oc||c instanceof Nc){const t=c,i=t.getFocus()?t.getFocus()[0]:void 0,o=t.getSelection();o&&typeof i=="number"&&o.indexOf(i)>=0?t.setSelection(o.filter(n=>n!==e)):typeof i=="number"&&t.setSelection(o.concat(i))}else if(c instanceof Mi||c instanceof Li||c instanceof Lt){const t=c,i=t.getFocus()?t.getFocus()[0]:void 0;if(e===i)return;const o=t.getSelection(),n=new KeyboardEvent("keydown",{shiftKey:!0});o&&o.indexOf(i)>=0?t.setSelection(o.filter(s=>s!==e),n):t.setSelection(o.concat(i),n)}}function pb(c,e){const t=c.getStickyScrollFocus();if(t.length===0)throw new Error("StickyScroll has no focus");if(t.length>1)throw new Error("StickyScroll can only have a single focused item");c.reveal(t[0]),c.getHTMLElement().focus(),c.setFocus(t),e==null||e(t[0])}ee.registerCommandAndKeybindingRule({id:"list.expandSelectionDown",weight:200,when:y.and(ye,jf),primary:1042,handler:(c,e)=>{const t=c.get(ue).lastFocusedList;if(!t)return;const i=t.getFocus()?t.getFocus()[0]:void 0,o=new KeyboardEvent("keydown");t.focusNext(typeof e=="number"?e:1,!1,o),eE(t,i);const n=t.getFocus();n.length&&t.reveal(n[0]),ub(t)}});ee.registerCommandAndKeybindingRule({id:"list.expandSelectionUp",weight:200,when:y.and(ye,jf),primary:1040,handler:(c,e)=>{const t=c.get(ue).lastFocusedList;if(!t)return;const i=t.getFocus()?t.getFocus()[0]:void 0,o=new KeyboardEvent("keydown");t.focusPrevious(typeof e=="number"?e:1,!1,o),eE(t,i);const n=t.getFocus();n.length&&t.reveal(n[0]),ub(t)}});ee.registerCommandAndKeybindingRule({id:"list.collapse",weight:200,when:y.and(ye,y.or(kI,_I)),primary:15,mac:{primary:15,secondary:[2064]},handler:c=>{const e=c.get(ue).lastFocusedList;if(!e||!(e instanceof Mi||e instanceof Li||e instanceof Lt))return;const t=e,i=t.getFocus();if(i.length===0)return;const o=i[0];if(!t.collapse(o)){const n=t.getParentElement(o);n&&Ft(e,s=>{const r=new KeyboardEvent("keydown");s.setFocus([n],r)})}}});ee.registerCommandAndKeybindingRule({id:"list.stickyScroll.collapse",weight:250,when:Yf,primary:15,mac:{primary:15,secondary:[2064]},handler:c=>{const e=c.get(ue).lastFocusedList;!e||!(e instanceof Mi||e instanceof Li||e instanceof Lt)||pb(e,t=>e.collapse(t))}});ee.registerCommandAndKeybindingRule({id:"list.collapseAll",weight:200,when:ye,primary:2063,mac:{primary:2063,secondary:[3088]},handler:c=>{const e=c.get(ue).lastFocusedList;e&&!(e instanceof Bc||e instanceof Oc||e instanceof Nc)&&e.collapseAll()}});ee.registerCommandAndKeybindingRule({id:"list.collapseAllToFocus",weight:200,when:ye,handler:c=>{const e=c.get(ue).lastFocusedList,t=fC("keydown",!0);if(e instanceof Mi||e instanceof Li||e instanceof Lt){const i=e,o=i.getFocus();o.length>0&&i.collapse(o[0],!0),i.setSelection(o,t),i.setAnchor(o[0])}}});ee.registerCommandAndKeybindingRule({id:"list.focusParent",weight:200,when:ye,handler:c=>{const e=c.get(ue).lastFocusedList;if(!e||!(e instanceof Mi||e instanceof Li||e instanceof Lt))return;const t=e,i=t.getFocus();if(i.length===0)return;const o=i[0],n=t.getParentElement(o);n&&Ft(e,s=>{const r=new KeyboardEvent("keydown");s.setFocus([n],r)})}});ee.registerCommandAndKeybindingRule({id:"list.expand",weight:200,when:y.and(ye,y.or(xI,II)),primary:17,handler:c=>{const e=c.get(ue).lastFocusedList;if(e){if(e instanceof Mi||e instanceof Li){const t=e.getFocus();if(t.length===0)return;const i=t[0];if(!e.expand(i)){const o=e.getFirstElementChild(i);o&&e.getNode(o).visible&&Ft(e,s=>{const r=new KeyboardEvent("keydown");s.setFocus([o],r)})}}else if(e instanceof Lt){const t=e.getFocus();if(t.length===0)return;const i=t[0];e.expand(i).then(o=>{if(i&&!o){const n=e.getFirstElementChild(i);n&&e.getNode(n).visible&&Ft(e,r=>{const a=new KeyboardEvent("keydown");r.setFocus([n],a)})}})}}}});function gb(c,e){const t=c.get(ue).lastFocusedList,i=fC("keydown",e);if(t instanceof Bc||t instanceof Oc||t instanceof Nc){const o=t;o.setAnchor(o.getFocus()[0]),o.setSelection(o.getFocus(),i)}else if(t instanceof Mi||t instanceof Li||t instanceof Lt){const o=t,n=o.getFocus();if(n.length>0){let s=!0;(o.expandOnlyOnTwistieClick===!0||typeof o.expandOnlyOnTwistieClick!="boolean"&&o.expandOnlyOnTwistieClick(n[0]))&&(s=!1),s&&o.toggleCollapsed(n[0])}o.setAnchor(n[0]),o.setSelection(n,i)}}ee.registerCommandAndKeybindingRule({id:"list.select",weight:200,when:ye,primary:3,mac:{primary:3,secondary:[2066]},handler:c=>{gb(c,!1)}});ee.registerCommandAndKeybindingRule({id:"list.stickyScrollselect",weight:250,when:Yf,primary:3,mac:{primary:3,secondary:[2066]},handler:c=>{const e=c.get(ue).lastFocusedList;!e||!(e instanceof Mi||e instanceof Li||e instanceof Lt)||pb(e,t=>e.setSelection([t]))}});ee.registerCommandAndKeybindingRule({id:"list.selectAndPreserveFocus",weight:200,when:ye,handler:c=>{gb(c,!0)}});ee.registerCommandAndKeybindingRule({id:"list.selectAll",weight:200,when:y.and(ye,jf),primary:2079,handler:c=>{const e=c.get(ue).lastFocusedList;if(e instanceof Bc||e instanceof Oc||e instanceof Nc){const t=e,i=new KeyboardEvent("keydown");t.setSelection(DI(t.length),i)}else if(e instanceof Mi||e instanceof Li||e instanceof Lt){const t=e,i=t.getFocus(),o=t.getSelection();let n;i.length>0&&(o.length===0||!o.includes(i[0]))&&(n=i[0]),!n&&o.length>0&&(n=o[0]);let s;n?s=t.getParentElement(n):s=void 0;const r=[],a=h=>{for(const p of h.children)p.visible&&(r.push(p.element),p.collapsed||a(p))};a(t.getNode(s)),s&&o.length===r.length&&r.unshift(s);const l=new KeyboardEvent("keydown");t.setSelection(r,l)}}});ee.registerCommandAndKeybindingRule({id:"list.toggleSelection",weight:200,when:ye,primary:3075,handler:c=>{const e=c.get(ue).lastFocusedList;if(!e)return;const t=e.getFocus();if(t.length===0)return;const i=e.getSelection(),o=i.indexOf(t[0]);o>-1?e.setSelection([...i.slice(0,o),...i.slice(o+1)]):e.setSelection([...i,t[0]])}});ee.registerCommandAndKeybindingRule({id:"list.showHover",weight:200,primary:Ee(2089,2087),when:ye,handler:async(c,...e)=>{const i=c.get(ue).lastFocusedList;if(!i)return;const o=i.getFocus();if(!o||o.length===0)return;const s=i.getHTMLElement().querySelector(".monaco-scrollable-element"),r=s==null?void 0:s.querySelector(".monaco-list-rows"),a=r==null?void 0:r.querySelector(".focused");if(!a)return;const l=zM(a);l&&c.get(Xe).showManagedHover(l)}});function zM(c){if(c.matches('[custom-hover="true"]'))return c;const e=c.querySelector('[custom-hover="true"]:not([tabindex]):not(.action-item)');if(e)return e}ee.registerCommandAndKeybindingRule({id:"list.toggleExpand",weight:200,when:ye,primary:10,handler:c=>{const e=c.get(ue).lastFocusedList;if(e instanceof Mi||e instanceof Li||e instanceof Lt){const t=e,i=t.getFocus();if(i.length>0&&t.isCollapsible(i[0])){t.toggleCollapsed(i[0]);return}}gb(c,!0)}});ee.registerCommandAndKeybindingRule({id:"list.stickyScrolltoggleExpand",weight:250,when:Yf,primary:10,handler:c=>{const e=c.get(ue).lastFocusedList;!e||!(e instanceof Mi||e instanceof Li||e instanceof Lt)||pb(e)}});ee.registerCommandAndKeybindingRule({id:"list.clear",weight:200,when:y.and(ye,AI),primary:9,handler:c=>{const e=c.get(ue).lastFocusedList;if(!e)return;const t=e.getSelection(),i=new KeyboardEvent("keydown");if(t.length>1)if(bC.getValue(e.contextKeyService)){const n=e.getFocus();e.setSelection([n[0]],i)}else e.setSelection([],i);else e.setSelection([],i),e.setFocus([],i);e.setAnchor(void 0)}});qe.registerCommand({id:"list.triggerTypeNavigation",handler:c=>{const e=c.get(ue).lastFocusedList;e==null||e.triggerTypeNavigation()}});qe.registerCommand({id:"list.toggleFindMode",handler:c=>{const e=c.get(ue).lastFocusedList;if(e instanceof bu||e instanceof Lt){const t=e;t.findMode=t.findMode===Uu.Filter?Uu.Highlight:Uu.Filter}}});qe.registerCommand({id:"list.toggleFindMatchType",handler:c=>{const e=c.get(ue).lastFocusedList;if(e instanceof bu||e instanceof Lt){const t=e;t.findMatchType=t.findMatchType===Ku.Contiguous?Ku.Fuzzy:Ku.Contiguous}}});qe.registerCommandAlias("list.toggleKeyboardNavigation","list.triggerTypeNavigation");qe.registerCommandAlias("list.toggleFilterOnType","list.toggleFindMode");ee.registerCommandAndKeybindingRule({id:"list.find",weight:200,when:y.and(wC,TI),primary:2596,secondary:[61],handler:c=>{const e=c.get(ue).lastFocusedList;e instanceof Bc||e instanceof Oc||e instanceof Nc||(e instanceof bu||e instanceof Lt)&&e.openFind()}});ee.registerCommandAndKeybindingRule({id:"list.closeFind",weight:200,when:y.and(wC,VI),primary:9,handler:c=>{const e=c.get(ue).lastFocusedList;(e instanceof bu||e instanceof Lt)&&e.closeFind()}});var pv;ee.registerCommandAndKeybindingRule({id:"list.scrollUp",weight:200,when:y.and(ye,(pv=MI)==null?void 0:pv.negate()),primary:2064,handler:c=>{const e=c.get(ue).lastFocusedList;e&&(e.scrollTop-=10)}});var gv;ee.registerCommandAndKeybindingRule({id:"list.scrollDown",weight:200,when:y.and(ye,(gv=LI)==null?void 0:gv.negate()),primary:2066,handler:c=>{const e=c.get(ue).lastFocusedList;e&&(e.scrollTop+=10)}});ee.registerCommandAndKeybindingRule({id:"list.scrollLeft",weight:200,when:ye,handler:c=>{const e=c.get(ue).lastFocusedList;e&&(e.scrollLeft-=10)}});ee.registerCommandAndKeybindingRule({id:"list.scrollRight",weight:200,when:ye,handler:c=>{const e=c.get(ue).lastFocusedList;e&&(e.scrollLeft+=10)}});C(class extends A{constructor(){super({id:"tree.toggleStickyScroll",title:{...w(4248,"Toggle Tree Sticky Scroll"),mnemonicTitle:d(4249,"&&Toggle Tree Sticky Scroll")},category:"View",metadata:{description:d(4250,"Toggles Sticky Scroll widget at the top of tree structures such as the File Explorer and Debug variables View.")},f1:!0})}run(e){const t=e.get(F),i=!t.getValue("workbench.tree.enableStickyScroll");t.updateValue("workbench.tree.enableStickyScroll",i)}});var UM='.file-icon-themable-tree .align-icon-with-twisty .monaco-tl-twistie:not(.force-twistie):not(.collapsible),.file-icon-themable-tree .monaco-tl-twistie.force-no-twistie,.file-icon-themable-tree.align-icons-and-twisties .monaco-tl-twistie:not(.force-twistie):not(.collapsible),.file-icon-themable-tree.hide-arrows .monaco-tl-twistie:not(.force-twistie){background-image:none!important;padding-right:0!important;visibility:hidden;width:0!important}.file-icon-themable-tree .monaco-list-row .content .monaco-highlighted-label .highlight,.pane-body .monaco-tl-contents .monaco-highlighted-label .highlight{background-color:var(--vscode-list-filterMatchBackground);color:unset!important;outline:1px dotted var(--vscode-list-filterMatchBorder);outline-offset:-1px}.monaco-workbench .tree-explorer-viewlet-tree-view{height:100%}.monaco-workbench .tree-explorer-viewlet-tree-view .message{display:flex;padding:4px 12px 4px 18px;user-select:text;-webkit-user-select:text}.monaco-workbench .tree-explorer-viewlet-tree-view .message p{margin-bottom:0;margin-top:0;padding-bottom:4px}.monaco-workbench .tree-explorer-viewlet-tree-view .message ul{padding-left:24px}.monaco-workbench .tree-explorer-viewlet-tree-view .message p>a{color:var(--vscode-textLink-foreground)}.monaco-workbench .tree-explorer-viewlet-tree-view .message .rendered-message{width:100%}.monaco-workbench .tree-explorer-viewlet-tree-view .message .button-container{margin:auto;max-width:300px;width:100%}.monaco-workbench .tree-explorer-viewlet-tree-view .message .button-container:not(:last-child){padding-bottom:8px}.monaco-workbench .tree-explorer-viewlet-tree-view .message.hide{display:none}.monaco-workbench .tree-explorer-viewlet-tree-view .customview-tree{height:100%}.monaco-workbench .tree-explorer-viewlet-tree-view .customview-tree.hide{display:none}.monaco-workbench .pane>.pane-body>.welcome-view{box-sizing:border-box;display:flex;flex-direction:column;height:100%;width:100%}.monaco-workbench .pane>.pane-body.welcome>:not(.welcome-view),.monaco-workbench .pane>.pane-body:not(.welcome)>.welcome-view{display:none}.monaco-workbench .pane>.pane-body .welcome-view-content{align-items:center;box-sizing:border-box;display:flex;flex-direction:column;padding:0 20px 1em}.monaco-workbench .pane>.pane-body .welcome-view-content>.button-container{max-width:300px;width:100%}.monaco-workbench:not(.reduce-motion) .pane>.pane-body .welcome-view-content>.button-container{transition:max-width .2s ease-out}.monaco-workbench .pane>.pane-body .welcome-view-content.wide>.button-container{max-width:100%}.monaco-workbench .pane>.pane-body .welcome-view-content>.button-container>.monaco-button{max-width:300px}.monaco-workbench .pane>.pane-body .welcome-view-content>p{width:100%}.monaco-workbench .pane>.pane-body .welcome-view-content>*{margin-block-end:0;margin-block-start:1em;margin-inline-end:0;margin-inline-start:0}.monaco-workbench .pane>.pane-body .welcome-view-content>p .codicon[class*=codicon-]{font-size:13px;line-height:1.4em;vertical-align:bottom}.customview-tree .monaco-list-row .monaco-tl-contents.align-icon-with-twisty:before{display:none}.customview-tree .monaco-list-row .monaco-tl-contents:not(.align-icon-with-twisty):before{display:inline-block}.customview-tree .monaco-list .monaco-list-row{padding-left:0;padding-right:12px}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item{display:flex;flex:1;flex-wrap:nowrap;height:22px;line-height:22px;overflow:hidden;padding-left:3px;text-overflow:ellipsis}.customview-tree .monaco-list .monaco-list-row.selected .custom-view-tree-node-item .custom-view-tree-node-item-checkbox{background-color:var(--vscode-checkbox-selectBackground);border:1px solid var(--vscode-checkbox-selectBorder)}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-checkbox{background-color:var(--vscode-checkbox-background);border:1px solid var(--vscode-checkbox-border);height:16px;margin:3px 6px 3px 0;opacity:1;padding:0;width:16px}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-checkbox.codicon{font-size:13px;line-height:15px}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .monaco-inputbox{flex:1;line-height:normal}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-resourceLabel{flex:1;overflow:hidden;text-overflow:ellipsis}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .monaco-icon-label-container:after{content:"";display:block}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item>.custom-view-tree-node-item-resourceLabel>.custom-view-tree-node-item-icon,.timeline-tree-view .monaco-list .monaco-list-row .custom-view-tree-node-item>.custom-view-tree-node-item-icon{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;align-items:center;background-position:0;background-repeat:no-repeat;background-size:16px;display:flex;height:22px;justify-content:center;padding-right:6px;width:16px}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item>.custom-view-tree-node-item-resourceLabel>.custom-view-tree-node-item-icon.disabled{opacity:.6}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item>.custom-view-tree-node-item-resourceLabel>.custom-view-tree-node-item-icon.codicon.codicon-modifier-spin{margin-left:-6px;padding-left:6px}.customview-tree .monaco-list .monaco-list-row.selected .custom-view-tree-node-item>.custom-view-tree-node-item-resourceLabel>.custom-view-tree-node-item-icon.codicon{color:currentColor!important}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-resourceLabel .monaco-icon-label-container>.monaco-icon-name-container{flex:1}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-resourceLabel:after{margin-right:4px;padding-right:0}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .actions{display:none}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .actions .action-label{padding:2px}.customview-tree .monaco-list .monaco-list-row.focused .custom-view-tree-node-item .actions,.customview-tree .monaco-list .monaco-list-row.selected .custom-view-tree-node-item .actions,.customview-tree .monaco-list .monaco-list-row:hover .custom-view-tree-node-item .actions{display:block}.monaco-workbench .auxiliarybar.pane-composite-part>.title.has-composite-bar>.title-actions .monaco-action-bar .action-item.viewpane-filter-container{max-width:inherit}.viewpane-filter-container{cursor:default;display:flex}.viewpane-filter-container.grow{flex:1}.viewpane-filter-container>.viewpane-filter{align-items:center;display:flex;flex:1;position:relative}.viewpane-filter-container>.viewpane-filter .monaco-inputbox{flex:1;font-size:12px;height:24px}.pane-header .viewpane-filter-container>.viewpane-filter .monaco-inputbox .monaco-inputbox{height:20px;line-height:18px}.monaco-workbench.vs .viewpane-filter-container>.viewpane-filter .monaco-inputbox{height:25px}.viewpane-filter-container>.viewpane-filter>.viewpane-filter-controls{align-items:center;bottom:0;display:flex;position:absolute;right:0;top:0}.viewpane-filter-container>.viewpane-filter>.viewpane-filter-controls>.viewpane-filter-badge{border-radius:2px;margin:4px 2px 4px 0;padding:0 8px}.viewpane-filter.small>.viewpane-filter-controls>.viewpane-filter-badge,.viewpane-filter>.viewpane-filter-controls>.viewpane-filter-badge.hidden{display:none}.panel>.title .monaco-action-bar .action-item.viewpane-filter-container{margin-right:10px;max-width:400px;min-width:150px}.pane-body .viewpane-filter-container:not(:empty){flex:1;height:auto;margin:10px 20px}.pane-body .viewpane-filter-container>.viewpane-filter>.viewpane-filter-controls .monaco-action-bar .action-item{margin-right:4px}.viewpane-filter>.viewpane-filter-controls .monaco-action-bar .action-label.codicon.codicon-filter.checked{background-color:var(--vscode-inputOption-activeBackground);border-color:var(--vscode-inputOption-activeBorder);color:var(--vscode-inputOption-activeForeground)}';we(UM,{});class KM extends de{constructor(e,t){super("vs.tree.collapse",d(11477,"Collapse All"),"collapse-all",t),this.viewer=e}async run(){this.viewer.collapseAll(),this.viewer.setSelection([]),this.viewer.setFocus([])}}class qM extends R{constructor(){super(...arguments),this._onDidChangeCheckboxState=this._register(new I),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event}setCheckboxState(e){this._onDidChangeCheckboxState.fire([e])}}const jh=class jh extends R{constructor(e,t,i,o){super(),this.checkboxStateHandler=t,this.hoverDelegate=i,this.hoverService=o,this.checkboxContainer=e}render(e){e.checkbox&&(this.toggle?(this.toggle.checked=e.checkbox.isChecked,this.toggle.setIcon(this.toggle.checked?T.check:void 0)):this.createCheckbox(e))}createCheckbox(e){e.checkbox&&(this.toggle=new vC({isChecked:e.checkbox.isChecked,title:"",icon:e.checkbox.isChecked?T.check:void 0,...Kf}),this.setHover(e.checkbox),this.setAccessibilityInformation(e.checkbox),this.toggle.domNode.classList.add(jh.checkboxClass),this.toggle.domNode.tabIndex=1,ve(this.checkboxContainer,this.toggle.domNode),this.registerListener(e))}registerListener(e){this.toggle&&(this._register({dispose:()=>this.removeCheckbox()}),this._register(this.toggle),this._register(this.toggle.onChange(()=>{this.setCheckbox(e)})))}setHover(e){this.toggle&&(this.hover?this.hover.update(e.tooltip):this.hover=this._register(this.hoverService.setupManagedHover(this.hoverDelegate,this.toggle.domNode,this.checkboxHoverContent(e))))}setCheckbox(e){this.toggle&&e.checkbox&&(e.checkbox.isChecked=this.toggle.checked,this.toggle.setIcon(this.toggle.checked?T.check:void 0),this.setHover(e.checkbox),this.setAccessibilityInformation(e.checkbox),this.checkboxStateHandler.setCheckboxState(e))}checkboxHoverContent(e){return e.tooltip?e.tooltip:e.isChecked?d(11478,"Checked"):d(11479,"Unchecked")}setAccessibilityInformation(e){this.toggle&&e.accessibilityInformation&&(this.toggle.domNode.ariaLabel=e.accessibilityInformation.label,e.accessibilityInformation.role&&(this.toggle.domNode.role=e.accessibilityInformation.role))}removeCheckbox(){const e=this.checkboxContainer.children;for(const t of e)t.remove()}};jh.checkboxClass="custom-view-tree-node-item-checkbox";let Fl=jh;var Sm;let Em=class extends fu{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m){super({...e,titleMenuId:b.ViewTitle,donotForwardArgs:!1},t,i,o,n,s,r,a,l,h,g,m);const{treeView:f}=$.as(Ot.ViewsRegistry).getView(e.id);this.treeView=f,this._register(this.treeView.onDidChangeActions(()=>this.updateActions(),this)),this._register(this.treeView.onDidChangeTitle(v=>this.updateTitle(v))),this._register(this.treeView.onDidChangeDescription(v=>this.updateTitleDescription(v))),this._register(ne(()=>{this._container&&this.treeView.container&&this._container===this.treeView.container&&this.treeView.setVisibility(!1)})),this._register(this.onDidChangeBodyVisibility(()=>this.updateTreeVisibility())),this._register(this.treeView.onDidChangeWelcomeState(()=>this._onDidChangeViewWelcomeState.fire())),e.title!==this.treeView.title&&this.updateTitle(this.treeView.title),e.titleDescription!==this.treeView.description&&this.updateTitleDescription(this.treeView.description),this._actionRunner=new oE(p,()=>this.treeView.getSelection()),this.updateTreeVisibility()}focus(){super.focus(),this.treeView.focus()}renderBody(e){this._container=e,super.renderBody(e),this.renderTreeView(e)}shouldShowWelcome(){return(this.treeView.dataProvider===void 0||!!this.treeView.dataProvider.isTreeEmpty)&&(this.treeView.message===void 0||this.treeView.message==="")}layoutBody(e,t){super.layoutBody(e,t),this.layoutTreeView(e,t)}getOptimalWidth(){return this.treeView.getOptimalWidth()}renderTreeView(e){this.treeView.show(e)}layoutTreeView(e,t){this.treeView.layout(e,t)}updateTreeVisibility(){this.treeView.setVisibility(this.isBodyVisible())}getActionRunner(){return this._actionRunner}getActionsContext(){return{$treeViewId:this.id,$focusedTreeItem:!0,$selectedTreeItems:!0}}};Em=x([u(1,xe),u(2,Ve),u(3,F),u(4,K),u(5,Te),u(6,O),u(7,It),u(8,te),u(9,Be),u(10,He),u(11,Xe),u(12,PI)],Em);class np{constructor(){this.label={label:"root"},this.handle="0",this.parentHandle=void 0,this.collapsibleState=Ui.Expanded,this.children=void 0}}function tE(c){const e=qe.getCommand(c);if(e){const t=k.getCommand(e.id);return t&&t.precondition}}function iE(c,e){const t=c.originalId?c.originalId:c.id,i=tE(t);return i?e.contextMatchesRules(i):!0}function Qw(c){return!!c&&typeof c!="string"&&"element"in c&&"disposables"in c}const $M=d(9718,"There is no data provider registered that can provide view data."),jM=new j("customTreeView",!1);class YM extends Xr{}let km=class extends R{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f,v,S){super(),this.id=e,this._title=t,this.themeService=i,this.instantiationService=o,this.commandService=n,this.configurationService=s,this.progressService=r,this.contextMenuService=a,this.keybindingService=l,this.notificationService=h,this.viewDescriptorService=p,this.hoverService=g,this.contextKeyService=m,this.activityService=f,this.logService=v,this.openerService=S,this.isVisible=!1,this._hasIconForParentNode=!1,this._hasIconForLeafNode=!1,this.focused=!1,this._canSelectMany=!1,this._manuallyManageCheckboxes=!1,this.elementsToRefresh=[],this.lastSelection=[],this._onDidExpandItem=this._register(new I),this.onDidExpandItem=this._onDidExpandItem.event,this._onDidCollapseItem=this._register(new I),this.onDidCollapseItem=this._onDidCollapseItem.event,this._onDidChangeSelectionAndFocus=this._register(new I),this.onDidChangeSelectionAndFocus=this._onDidChangeSelectionAndFocus.event,this._onDidChangeVisibility=this._register(new I),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._onDidChangeActions=this._register(new I),this.onDidChangeActions=this._onDidChangeActions.event,this._onDidChangeWelcomeState=this._register(new I),this.onDidChangeWelcomeState=this._onDidChangeWelcomeState.event,this._onDidChangeTitle=this._register(new I),this.onDidChangeTitle=this._onDidChangeTitle.event,this._onDidChangeDescription=this._register(new I),this.onDidChangeDescription=this._onDidChangeDescription.event,this._onDidChangeCheckboxState=this._register(new I),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event,this._onDidCompleteRefresh=this._register(new I),this._isInitialized=!1,this._activity=this._register(new Se),this.activated=!1,this.treeDisposables=this._register(new P),this._height=0,this._width=0,this.refreshing=!1,this.root=new np,this.lastActive=this.root}initialize(){this._isInitialized||(this._isInitialized=!0,this.contextKeyService.bufferChangeEvents(()=>{this.initializeShowCollapseAllAction(),this.initializeCollapseAllToggle(),this.initializeShowRefreshAction()}),this.treeViewDnd=this.instantiationService.createInstance(Im,this.id),this._dragAndDropController&&(this.treeViewDnd.controller=this._dragAndDropController),this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration("explorer.decorations")&&this.doRefresh([this.root])})),this._register(this.viewDescriptorService.onDidChangeLocation(({views:e,from:t,to:i})=>{var o;e.some(n=>n.id===this.id)&&((o=this.tree)==null||o.updateOptions({overrideStyles:aw(this.viewLocation).listOverrideStyles}))})),this.registerActions(),this.create())}get viewContainer(){return this.viewDescriptorService.getViewContainerByViewId(this.id)}get viewLocation(){return this.viewDescriptorService.getViewLocationById(this.id)}get dragAndDropController(){return this._dragAndDropController}set dragAndDropController(e){this._dragAndDropController=e,this.treeViewDnd&&(this.treeViewDnd.controller=e)}get dataProvider(){return this._dataProvider}set dataProvider(e){if(e){this.visible&&this.activate();const t=this;this._dataProvider=new class{constructor(){this._isEmpty=!0,this._onDidChangeEmpty=new I,this.onDidChangeEmpty=this._onDidChangeEmpty.event}get isTreeEmpty(){return this._isEmpty}async getChildren(i){let o;const n=[];if(i&&i.children?o=i.children:(i=i??t.root,i.children=await(i instanceof np?e.getChildren():e.getChildren(i)),o=i.children??[],o.forEach(s=>{var r,a;s.parent=i,!t.manuallyManageCheckboxes&&((r=i==null?void 0:i.checkbox)==null?void 0:r.isChecked)===!0&&((a=s.checkbox)==null?void 0:a.isChecked)===!1&&(s.checkbox.isChecked=!0,n.push(s))})),i instanceof np){const s=this._isEmpty;this._isEmpty=o.length===0,s!==this._isEmpty&&this._onDidChangeEmpty.fire()}return n.length>0&&t._onDidChangeCheckboxState.fire(n),o}},this._dataProvider.onDidChangeEmpty&&this._register(this._dataProvider.onDidChangeEmpty(()=>{this.updateCollapseAllToggle(),this._onDidChangeWelcomeState.fire()})),this.updateMessage(),this.refresh()}else this._dataProvider=void 0,this.treeDisposables.clear(),this.activated=!1,this.updateMessage();this._onDidChangeWelcomeState.fire()}get message(){return this._message}set message(e){this._message=e,this.updateMessage(),this._onDidChangeWelcomeState.fire()}get title(){return this._title}set title(e){this._title=e,this._onDidChangeTitle.fire(this._title)}get description(){return this._description}set description(e){this._description=e,this._onDidChangeDescription.fire(this._description)}get badge(){return this._badge}set badge(e){var t,i;if(!(((t=this._badge)==null?void 0:t.value)===(e==null?void 0:e.value)&&((i=this._badge)==null?void 0:i.tooltip)===(e==null?void 0:e.tooltip)))if(this._badge=e,e){const o={badge:new yo(e.value,()=>e.tooltip),priority:50};this._activity.value=this.activityService.showViewActivity(this.id,o)}else this._activity.clear()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){var i;const t=this._canSelectMany;this._canSelectMany=e,this._canSelectMany!==t&&((i=this.tree)==null||i.updateOptions({multipleSelectionSupport:this.canSelectMany}))}get manuallyManageCheckboxes(){return this._manuallyManageCheckboxes}set manuallyManageCheckboxes(e){this._manuallyManageCheckboxes=e}get hasIconForParentNode(){return this._hasIconForParentNode}get hasIconForLeafNode(){return this._hasIconForLeafNode}get visible(){return this.isVisible}initializeShowCollapseAllAction(e=!1){return this.collapseAllContext||(this.collapseAllContextKey=new j(`treeView.${this.id}.enableCollapseAll`,e,d(9719,"Whether the the tree view with id {0} enables collapse all.",this.id)),this.collapseAllContext=this.collapseAllContextKey.bindTo(this.contextKeyService)),!0}get showCollapseAllAction(){var e;return this.initializeShowCollapseAllAction(),!!((e=this.collapseAllContext)!=null&&e.get())}set showCollapseAllAction(e){var t;this.initializeShowCollapseAllAction(e),(t=this.collapseAllContext)==null||t.set(e)}initializeShowRefreshAction(e=!1){this.refreshContext||(this.refreshContextKey=new j(`treeView.${this.id}.enableRefresh`,e,d(9720,"Whether the tree view with id {0} enables refresh.",this.id)),this.refreshContext=this.refreshContextKey.bindTo(this.contextKeyService))}get showRefreshAction(){var e;return this.initializeShowRefreshAction(),!!((e=this.refreshContext)!=null&&e.get())}set showRefreshAction(e){var t;this.initializeShowRefreshAction(e),(t=this.refreshContext)==null||t.set(e)}registerActions(){const e=this;this._register(C(class extends A{constructor(){super({id:`workbench.actions.treeView.${e.id}.refresh`,title:d(9721,"Refresh"),menu:{id:b.ViewTitle,when:y.and(y.equals("view",e.id),e.refreshContextKey),group:"navigation",order:Number.MAX_SAFE_INTEGER-1},icon:T.refresh})}async run(){return e.refresh()}})),this._register(C(class extends A{constructor(){super({id:`workbench.actions.treeView.${e.id}.collapseAll`,title:d(9722,"Collapse All"),menu:{id:b.ViewTitle,when:y.and(y.equals("view",e.id),e.collapseAllContextKey),group:"navigation",order:Number.MAX_SAFE_INTEGER},precondition:e.collapseAllToggleContextKey,icon:T.collapseAll})}async run(){if(e.tree)return new KM(e.tree,!0).run()}}))}setVisibility(e){this.initialize(),e=!!e,this.isVisible!==e&&(this.isVisible=e,this.tree&&(this.isVisible?qi(this.tree.getHTMLElement()):Co(this.tree.getHTMLElement()),this.isVisible&&this.elementsToRefresh.length&&this.dataProvider&&(this.doRefresh(this.elementsToRefresh),this.elementsToRefresh=[])),OI(()=>{this.dataProvider&&this._onDidChangeVisibility.fire(this.isVisible)}),this.visible&&this.activate())}focus(e=!0,t){if(this.tree&&this.root.children&&this.root.children.length>0){const i=t??this.tree.getSelection()[0];i&&e&&this.tree.reveal(i,.5),this.tree.domFocus()}else this.tree&&this.treeContainer&&!this.treeContainer.classList.contains("hide")?this.tree.domFocus():this.domNode.focus()}show(e){this._container=e,ve(e,this.domNode)}create(){this.domNode=H(".tree-explorer-viewlet-tree-view"),this.messageElement=ve(this.domNode,H(".message")),this.updateMessage(),this.treeContainer=ve(this.domNode,H(".customview-tree")),this.treeContainer.classList.add("file-icon-themable-tree","show-file-icons");const e=this._register(ms(this.domNode));this._register(e.onDidFocus(()=>this.focused=!0)),this._register(e.onDidBlur(()=>this.focused=!1))}createTree(){this.treeDisposables.clear();const e=Qh.bind(void 0,this.instantiationService),t=this.treeDisposables.add(this.instantiationService.createInstance(_m,this.id));this.treeLabels=this.treeDisposables.add(this.instantiationService.createInstance(Sc,this));const i=this.instantiationService.createInstance(JM,this,h=>this.progressService.withProgress({location:this.id},()=>h)),o=new QM(this.themeService),n=this.treeDisposables.add(new qM),s=this.instantiationService.createInstance(uc,this.id,t,this.treeLabels,e,o,n,()=>this.manuallyManageCheckboxes);this.treeDisposables.add(s.onDidChangeCheckboxState(h=>this._onDidChangeCheckboxState.fire(h)));const r=this._title;this.tree=this.treeDisposables.add(this.instantiationService.createInstance(YM,this.id,this.treeContainer,new XM,[s],i,{identityProvider:new ZM,accessibilityProvider:{getAriaLabel(h){if(h.accessibilityInformation)return h.accessibilityInformation.label;if(ln(h.tooltip))return h.tooltip;{if(h.resourceUri&&!h.label)return null;let p="";return h.label&&(p+=h.label.label+" "),h.description&&(p+=h.description),p}},getRole(h){var p;return((p=h.accessibilityInformation)==null?void 0:p.role)??"treeitem"},getWidgetAriaLabel(){return r}},keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:h=>h.label?h.label.label:h.resourceUri?mt(z.revive(h.resourceUri)):void 0},expandOnlyOnTwistieClick:h=>!!h.command||!!h.checkbox||this.configurationService.getValue("workbench.tree.expandMode")==="doubleClick",collapseByDefault:h=>h.collapsibleState!==Ui.Expanded,multipleSelectionSupport:this.canSelectMany,dnd:this.treeViewDnd,overrideStyles:aw(this.viewLocation).listOverrideStyles})),this.treeDisposables.add(s.onDidChangeMenuContext(h=>h.forEach(p=>{var g;return(g=this.tree)==null?void 0:g.rerender(p)}))),this.treeDisposables.add(this.tree),t.setContextKeyService(this.tree.contextKeyService),o.tree=this.tree;const a=new oE(this.notificationService,()=>this.tree.getSelection());s.actionRunner=a,this.tree.contextKeyService.createKey(this.id,!0),jM.bindTo(this.tree.contextKeyService).set(!0),this.treeDisposables.add(this.tree.onContextMenu(h=>this.onContextMenu(t,h,a))),this.treeDisposables.add(this.tree.onDidChangeSelection(h=>{var p;this.lastSelection=h.elements,this.lastActive=((p=this.tree)==null?void 0:p.getFocus()[0])??this.lastActive,this._onDidChangeSelectionAndFocus.fire({selection:this.lastSelection,focus:this.lastActive})})),this.treeDisposables.add(this.tree.onDidChangeFocus(h=>{var p;h.elements.length&&h.elements[0]!==this.lastActive&&(this.lastActive=h.elements[0],this.lastSelection=((p=this.tree)==null?void 0:p.getSelection())??this.lastSelection,this._onDidChangeSelectionAndFocus.fire({selection:this.lastSelection,focus:this.lastActive}))})),this.treeDisposables.add(this.tree.onDidChangeCollapseState(h=>{if(!h.node.element)return;const p=Array.isArray(h.node.element.element)?h.node.element.element[0]:h.node.element.element;h.node.collapsed?this._onDidCollapseItem.fire(p):this._onDidExpandItem.fire(p)})),this.tree.setInput(this.root).then(()=>this.updateContentAreas()),this.treeDisposables.add(this.tree.onDidOpen(async h=>{if(!h.browserEvent||h.browserEvent.target&&h.browserEvent.target.classList.contains(Fl.checkboxClass))return;const p=this.tree.getSelection(),g=await this.resolveCommand(p.length===1?p[0]:void 0);if(g&&iE(g,this.contextKeyService)){let m=g.arguments||[];(g.id===NI||g.id===FI)&&(m=[...m,h]);try{await this.commandService.executeCommand(g.id,...m)}catch(f){this.notificationService.error(f)}}})),this.treeDisposables.add(t.onDidChange(h=>{var p,g;(p=this.tree)!=null&&p.hasNode(h)&&((g=this.tree)==null||g.rerender(h))}))}async resolveCommand(e){let t=e==null?void 0:e.command;return e&&!t&&e instanceof yC&&e.hasResolve&&(await e.resolve(Ti.None),t=e.command),t}onContextMenu(e,t,i){this.hoverService.hideHover();const o=t.element;if(o===null)return;const n=t.browserEvent;n.preventDefault(),n.stopPropagation(),this.tree.setFocus([o]);let s=this.canSelectMany?this.getSelection():[];s.find(a=>a.handle===o.handle)||(s=[o]);const r=e.getResourceContextActions(s);r.length&&this.contextMenuService.showContextMenu({getAnchor:()=>t.anchor,getActions:()=>r,getActionViewItem:a=>{const l=this.keybindingService.lookupKeybinding(a.id);if(l)return new Ef(a,a,{label:!0,keybinding:l.getLabel()})},onHide:a=>{a&&this.tree.domFocus()},getActionsContext:()=>({$treeViewId:this.id,$treeItemHandle:o.handle}),actionRunner:i})}updateMessage(){this._message?this.showMessage(this._message):this.dataProvider?this.hideMessage():this.showMessage($M),this.updateContentAreas()}processMessage(e,t){const i=e.value.split(`
`),o=[];let n=!1;for(const r of i){const a=Dd(r);if(a.nodes.length===1&&typeof a.nodes[0]!="string"){const l=a.nodes[0],h=document.createElement("div");h.classList.add("button-container");const p=new CC(h,{title:l.title,secondary:n,supportIcons:!0,...Vr});p.label=l.label,p.onDidClick(m=>{this.openerService.open(l.href,{allowCommands:!0})},null,t);const g=z.parse(l.href);if(g.scheme===pe.command){const m=tE(g.path);m&&(p.enabled=this.contextKeyService.contextMatchesRules(m),t.add(this.contextKeyService.onDidChangeContext(f=>{f.affectsSome(new Set(m.keys()))&&(p.enabled=this.contextKeyService.contextMatchesRules(m))})))}t.add(p),n=!0,o.push(h)}else{n=!1;const l=this.markdownRenderer.render(new _c(r,{isTrusted:e.isTrusted,supportThemeIcons:e.supportThemeIcons,supportHtml:e.supportHtml}));o.push(l.element),t.add(l)}}const s=document.createElement("div");s.classList.add("rendered-message");for(const r of o)pn(r)?s.appendChild(r):s.appendChild(r.element);return s}showMessage(e){if(Qw(this._messageValue)&&this._messageValue.disposables.dispose(),cw(e)&&!this.markdownRenderer&&(this.markdownRenderer=this.instantiationService.createInstance(GI,{})),cw(e)){const t=new P,i=this.processMessage(e,t);this._messageValue={element:i,disposables:t}}else this._messageValue=e;this.messageElement&&(this.messageElement.classList.remove("hide"),this.resetMessageElement(),typeof this._messageValue=="string"&&!_p(this._messageValue)?this.messageElement.textContent=this._messageValue:Qw(this._messageValue)&&this.messageElement.appendChild(this._messageValue.element),this.layout(this._height,this._width))}hideMessage(){var e;this.resetMessageElement(),(e=this.messageElement)==null||e.classList.add("hide"),this.layout(this._height,this._width)}resetMessageElement(){this.messageElement&&Zt(this.messageElement)}layout(e,t){var i;if(e&&t&&this.messageElement&&this.treeContainer){this._height=e,this._width=t;const o=e-WI(this.messageElement);this.treeContainer.style.height=o+"px",(i=this.tree)==null||i.layout(o,t)}}getOptimalWidth(){if(this.tree){const e=this.tree.getHTMLElement(),t=[].slice.call(e.querySelectorAll(".outline-item-label > a"));return HI(e,t)}return 0}updateCheckboxes(e){return nE(e)}async refresh(e,t){if(this.dataProvider&&this.tree){this.refreshing&&await N.toPromise(this._onDidCompleteRefresh.event),e||(e=[this.root],this.elementsToRefresh=[]);for(const i of e)i.children=void 0;if(this.isVisible){const i=this.updateCheckboxes(t??[]);return this.doRefresh(e.concat(i))}else if(this.elementsToRefresh.length){const i=new Set;this.elementsToRefresh.forEach(o=>i.add(o.handle));for(const o of e)i.has(o.handle)||this.elementsToRefresh.push(o)}else this.elementsToRefresh.push(...e)}}async expand(e){const t=this.tree;if(t)try{e=Array.isArray(e)?e:[e];for(const i of e)await t.expand(i,!1)}catch{}}isCollapsed(e){var t;return!!((t=this.tree)!=null&&t.isCollapsed(e))}setSelection(e){var t;(t=this.tree)==null||t.setSelection(e)}getSelection(){var e;return((e=this.tree)==null?void 0:e.getSelection())??[]}setFocus(e){this.tree&&(e?(this.focus(!0,e),this.tree.setFocus([e])):this.tree.getFocus().length===0&&this.tree.setFocus([]))}async reveal(e){if(this.tree)return this.tree.reveal(e)}async doRefresh(e){const t=this.tree;if(t&&this.visible){this.refreshing=!0;const i=t.getSelection();try{await Promise.all(e.map(n=>t.updateChildren(n,!0,!0)))}catch(n){this.logService.error(n)}const o=t.getSelection();(i.length!==o.length||i.some((n,s)=>n.handle!==o[s].handle))&&(this.lastSelection=o,this._onDidChangeSelectionAndFocus.fire({selection:this.lastSelection,focus:this.lastActive})),this.refreshing=!1,this._onDidCompleteRefresh.fire(),this.updateContentAreas(),this.focused&&this.focus(!1),this.updateCollapseAllToggle()}}initializeCollapseAllToggle(){this.collapseAllToggleContext||(this.collapseAllToggleContextKey=new j(`treeView.${this.id}.toggleCollapseAll`,!1,d(9723,"Whether collapse all is toggled for the tree view with id {0}.",this.id)),this.collapseAllToggleContext=this.collapseAllToggleContextKey.bindTo(this.contextKeyService))}updateCollapseAllToggle(){var e;this.showCollapseAllAction&&(this.initializeCollapseAllToggle(),(e=this.collapseAllToggleContext)==null||e.set(!!this.root.children&&this.root.children.length>0&&this.root.children.some(t=>t.collapsibleState!==Ui.None)))}updateContentAreas(){const e=!this.root.children||this.root.children.length===0;this._messageValue&&e&&!this.refreshing&&this.treeContainer?(this.dragAndDropController||this.treeContainer.classList.add("hide"),this.domNode.setAttribute("tabindex","0")):this.treeContainer&&(this.treeContainer.classList.remove("hide"),this.domNode===un()&&this.focus(),this.domNode.removeAttribute("tabindex"))}get container(){return this._container}};km=x([u(2,te),u(3,O),u(4,lt),u(5,F),u(6,Ic),u(7,Ve),u(8,xe),u(9,He),u(10,Te),u(11,Xe),u(12,K),u(13,Wt),u(14,Je),u(15,It)],km);class ZM{getId(e){return e.handle}}class XM{getHeight(e){return uc.ITEM_HEIGHT}getTemplateId(e){return uc.TREE_TEMPLATE_ID}}class JM{constructor(e,t){this.treeView=e,this.withProgress=t}hasChildren(e){return!!this.treeView.dataProvider&&e.collapsibleState!==Ui.None}async getChildren(e){let t=[];if(this.treeView.dataProvider)try{t=await this.withProgress(this.treeView.dataProvider.getChildren(e))??[]}catch(i){if(!i.message.startsWith("Bad progress location:"))throw i}return t}}var sn;let uc=(sn=class extends R{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m){super(),this.treeViewId=e,this.menus=t,this.labels=i,this.actionViewItemProvider=o,this.aligner=n,this.checkboxStateHandler=s,this.manuallyManageCheckboxes=r,this.themeService=a,this.configurationService=l,this.labelService=h,this.contextKeyService=p,this.hoverService=g,this._onDidChangeCheckboxState=this._register(new I),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event,this._onDidChangeMenuContext=this._register(new I),this.onDidChangeMenuContext=this._onDidChangeMenuContext.event,this._hasCheckbox=!1,this._renderedElements=new Map,this._hoverDelegate=this._register(m.createInstance(RI,"mouse",!1,{})),this._register(this.themeService.onDidFileIconThemeChange(()=>this.rerender())),this._register(this.themeService.onDidColorThemeChange(()=>this.rerender())),this._register(s.onDidChangeCheckboxState(f=>{this.updateCheckboxes(f)})),this._register(this.contextKeyService.onDidChangeContext(f=>this.onDidChangeContext(f)))}get templateId(){return Sm.TREE_TEMPLATE_ID}set actionRunner(e){this._actionRunner=e}renderTemplate(e){e.classList.add("custom-view-tree-node-item");const t=ve(e,H("")),i=this.labels.create(e,{supportHighlights:!0,hoverDelegate:this._hoverDelegate}),o=wf(i.element,H(".custom-view-tree-node-item-icon")),n=ve(i.element,H(".actions")),s=new Vo(n,{actionViewItemProvider:this.actionViewItemProvider});return{resourceLabel:i,icon:o,checkboxContainer:t,actionBar:s,container:e}}getHover(e,t,i){return!(i instanceof yC)||!i.hasResolve?t&&!i.tooltip?void 0:i.tooltip===void 0?e:ln(i.tooltip)?i.tooltip!==""?i.tooltip:void 0:{markdown:i.tooltip,markdownNotSupportedFallback:t?void 0:BI(i.tooltip)}:{markdown:typeof i.tooltip=="string"?i.tooltip:o=>new Promise(n=>{i.resolve(o).then(()=>n(i.tooltip))}),markdownNotSupportedFallback:t?void 0:e??""}}renderElement(e,t,i){var S;const o=e.element,n=o.resourceUri?z.revive(o.resourceUri):null,s=o.label?o.label:n?{label:mt(n)}:void 0,r=ln(o.description)?o.description:n&&o.description===!0?this.labelService.getUriLabel(xf(n),{relative:!0}):void 0,a=s?s.label:void 0,l=s&&s.highlights&&a?s.highlights.map(([E,D])=>{if(E<0&&(E=a.length+E),D<0&&(D=a.length+D),E>=a.length||D>a.length)return{start:0,end:0};if(E>D){const V=E;E=D,D=V}return{start:E,end:D}}):void 0,h=this.themeService.getColorTheme().type===Ks.LIGHT?o.icon:o.iconDark,p=h?z.revive(h):void 0,g=this.getHover(a,n,o);i.actionBar.clear(),i.icon.style.color="";let m=!0;if(o.command&&(m=iE(o.command,this.contextKeyService)),this.renderCheckbox(o,i),n){const E=this.configurationService.getValue("explorer.decorations"),D=n||z.parse("missing:_icon_resource");i.resourceLabel.setResource({name:a,description:r,resource:D},{fileKind:this.getFileKind(o),title:g,hideIcon:this.shouldHideResourceLabelIcon(p,o.themeIcon),fileDecorations:E,extraClasses:["custom-view-tree-node-item-resourceLabel"],matches:l||bs(e.filterData),strikethrough:s==null?void 0:s.strikethrough,disabledCommand:!m,labelEscapeNewLines:!0,forceLabel:!!o.label})}else i.resourceLabel.setResource({name:a,description:r},{title:g,hideIcon:!0,extraClasses:["custom-view-tree-node-item-resourceLabel"],matches:l||bs(e.filterData),strikethrough:s==null?void 0:s.strikethrough,disabledCommand:!m,labelEscapeNewLines:!0});if(p)i.icon.className="custom-view-tree-node-item-icon",i.icon.style.backgroundImage=Hi(p);else{let E;this.shouldShowThemeIcon(!!n,o.themeIcon)&&(E=oe.asClassName(o.themeIcon),o.themeIcon.color&&(i.icon.style.color=((S=this.themeService.getColorTheme().getColor(o.themeIcon.color.id))==null?void 0:S.toString())??"")),i.icon.className=E?`custom-view-tree-node-item-icon ${E}`:"",i.icon.style.backgroundImage=""}m||(i.icon.className=i.icon.className+" disabled",i.container.parentElement&&(i.container.parentElement.className=i.container.parentElement.className+" disabled")),i.actionBar.context={$treeViewId:this.treeViewId,$treeItemHandle:o.handle};const f=this.menus.getResourceActions([o]);i.actionBar.push(f,{icon:!0,label:!1}),this._actionRunner&&(i.actionBar.actionRunner=this._actionRunner),this.setAlignment(i.container,o);const v=this._renderedElements.get(e.element.handle)??[];this._renderedElements.set(e.element.handle,[...v,{original:e,rendered:i}])}rerender(){const e=new Set(this._renderedElements.keys());for(const t of e){const i=this._renderedElements.get(t)??[];for(const o of i)this.disposeElement(o.original,0,o.rendered),this.renderElement(o.original,0,o.rendered)}}renderCheckbox(e,t){if(e.checkbox){if(this._hasCheckbox||(this._hasCheckbox=!0,this.rerender()),!t.checkbox){const i=new Fl(t.checkboxContainer,this.checkboxStateHandler,this._hoverDelegate,this.hoverService);t.checkbox=i}t.checkbox.render(e)}else t.checkbox&&(t.checkbox.dispose(),t.checkbox=void 0)}setAlignment(e,t){e.parentElement.classList.toggle("align-icon-with-twisty",!this._hasCheckbox&&this.aligner.alignIconWithTwisty(t))}shouldHideResourceLabelIcon(e,t){return!!e||!!t&&!this.isFileKindThemeIcon(t)}shouldShowThemeIcon(e,t){return t?!(e&&this.isFileKindThemeIcon(t)):!1}isFolderThemeIcon(e){return(e==null?void 0:e.id)===kp.id}isFileKindThemeIcon(e){return e?e.id===rw.id||this.isFolderThemeIcon(e):!1}getFileKind(e){if(e.themeIcon)switch(e.themeIcon.id){case rw.id:return ft.FILE;case kp.id:return ft.FOLDER}return e.collapsibleState===Ui.Collapsed||e.collapsibleState===Ui.Expanded?ft.FOLDER:ft.FILE}onDidChangeContext(e){const t=[];for(const[i,o]of this._renderedElements)for(const n of o)(e.affectsSome(this.menus.getElementOverlayContexts(n.original.element))||e.affectsSome(this.menus.getEntireMenuContexts()))&&t.push(n.original.element);t.length&&this._onDidChangeMenuContext.fire(t)}updateCheckboxes(e){let t=[];this.manuallyManageCheckboxes()||(t=nE(e)),t.forEach(i=>{const o=this._renderedElements.get(i.handle);o&&o.forEach(n=>{var s;return(s=n.rendered.checkbox)==null?void 0:s.render(i)})}),this._onDidChangeCheckboxState.fire(t)}disposeElement(e,t,i){var s;const o=this._renderedElements.get(e.element.handle)??[],n=o.findIndex(r=>i===r.rendered);o.length===1?this._renderedElements.delete(e.element.handle):o.length>0&&o.splice(n,1),(s=i.checkbox)==null||s.dispose(),i.checkbox=void 0}disposeTemplate(e){e.resourceLabel.dispose(),e.actionBar.dispose()}},Sm=sn,sn.ITEM_HEIGHT=22,sn.TREE_TEMPLATE_ID="treeExplorer",sn);uc=Sm=x([u(7,te),u(8,F),u(9,mi),u(10,K),u(11,Xe),u(12,O)],uc);class QM extends R{constructor(e){super(),this.themeService=e}set tree(e){this._tree=e}alignIconWithTwisty(e){if(e.collapsibleState!==Ui.None||!this.hasIcon(e))return!1;if(this._tree){const t=this._tree.getParentElement(e)||this._tree.getInput();return this.hasIcon(t)?!!t.children&&t.children.some(i=>i.collapsibleState!==Ui.None&&!this.hasIcon(i)):!!t.children&&t.children.every(i=>i.collapsibleState===Ui.None||!this.hasIcon(i))}else return!1}hasIcon(e){if(this.themeService.getColorTheme().type===Ks.LIGHT?e.icon:e.iconDark)return!0;if(e.resourceUri||e.themeIcon){const i=this.themeService.getFileIconTheme();return(e.themeIcon?e.themeIcon.id===kp.id:e.collapsibleState!==Ui.None)?i.hasFileIcons&&i.hasFolderIcons:i.hasFileIcons}return!1}}class oE extends bc{constructor(e,t){super(),this.getSelectedResources=t,this._register(this.onDidRun(i=>{i.error&&!jr(i.error)&&e.error(d(9724,"Error running command {1}: {0}. This is likely caused by the extension that contributes {1}.",i.error.message,i.action.id))}))}async runAction(e,t){const i=this.getSelectedResources();let o,n=!1;i.length>1&&(o=i.map(s=>((s.handle===t.$treeItemHandle||t.$selectedTreeItems)&&(n=!0),{$treeViewId:t.$treeViewId,$treeItemHandle:s.handle}))),!n&&o&&(o=void 0),await e.run(t,o)}}let _m=class{constructor(e,t){this.id=e,this.menuService=t,this._onDidChange=new I,this.onDidChange=this._onDidChange.event}getResourceActions(e){return this.getActions(this.getMenuId(),e).primary}getResourceContextActions(e){return this.getActions(this.getMenuId(),e).secondary}setContextKeyService(e){this.contextKeyService=e}filterNonUniversalActions(e,t){const i=new Set(t.map(o=>o.id));for(const o of e){const n=o.keys();for(const s of n)i.has(s)||o.delete(s)}}buildMenu(e){const t=[];for(const i of e)i.size>0&&(t.length&&t.push(new We),t.push(...i.values()));return t}createGroups(e){const t=[];let i=new Map;for(const o of e)o instanceof We?(t.push(i),i=new Map):i.set(o.id,o);return t.push(i),t}getElementOverlayContexts(e){return new Map([["view",this.id],["viewItem",e.contextValue]])}getEntireMenuContexts(){return this.menuService.getMenuContexts(this.getMenuId())}getMenuId(){return b.ViewItemContext}getActions(e,t){if(!this.contextKeyService)return{primary:[],secondary:[]};let i=[],o=[];for(let n=0;n<t.length;n++){const s=t[n],r=this.contextKeyService.createOverlay(this.getElementOverlayContexts(s)),a=this.menuService.getMenuActions(e,r,{shouldForwardArgs:!0}),p={primary:[],secondary:[]};Tr(a,p,"inline"),n===0?(i=this.createGroups(p.primary),o=this.createGroups(p.secondary)):(this.filterNonUniversalActions(i,p.primary),this.filterNonUniversalActions(o,p.secondary))}return{primary:this.buildMenu(i),secondary:this.buildMenu(o)}}dispose(){this.contextKeyService=void 0}};_m=x([u(1,yt)],_m);let xm=class extends km{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f,v,S,E,D,V){super(e,t,o,n,s,r,a,l,h,p,g,f,m,S,D,V),this.extensionId=i,this.extensionService=v,this.telemetryService=E}activate(){this.activated||(this.telemetryService.publicLog2("Extension:ViewActivate",{extensionId:new Py(this.extensionId),id:this.id}),this.createTree(),this.progressService.withProgress({location:this.id},()=>this.extensionService.activateByEvent(`onView:${this.id}`)).then(()=>Lr(2e3)).then(()=>{this.updateMessage()}),this.activated=!0)}};xm=x([u(3,te),u(4,O),u(5,lt),u(6,F),u(7,Ic),u(8,Ve),u(9,xe),u(10,He),u(11,Te),u(12,K),u(13,Xe),u(14,Vt),u(15,Wt),u(16,Be),u(17,Je),u(18,It)],xm);let Im=class{constructor(e,t,i,o,n){this.treeId=e,this.labelService=t,this.instantiationService=i,this.treeViewsDragAndDropService=o,this.logService=n,this.treeItemsTransfer=wo.getInstance(),this.treeMimeType=`application/vnd.code.tree.${e.toLowerCase()}`}set controller(e){this.dndController=e}handleDragAndLog(e,t,i,o){return e.handleDrag(t,i,o).then(n=>{if(n){const s=[];for(const r of n)r[0]!==this.treeMimeType&&e.dragMimeTypes.findIndex(a=>a===r[0])<0&&s.push(r[0]);s.length&&this.logService.warn(`Drag and drop controller for tree ${this.treeId} adds the following data transfer types but does not declare them in dragMimeTypes: ${s.join(", ")}`)}return n})}addExtensionProvidedTransferTypes(e,t){var o;if(!e.dataTransfer||!this.dndController)return;const i=ta();this.dragCancellationToken=new ko,this.treeViewsDragAndDropService.addDragOperationTransfer(i,this.handleDragAndLog(this.dndController,t,i,this.dragCancellationToken.token)),this.treeItemsTransfer.setData([new zi(i)],zi.prototype),e.dataTransfer.clearData(_a.text),this.dndController.dragMimeTypes.find(n=>n===_a.uriList)&&((o=e.dataTransfer)==null||o.setData(sr.RESOURCES,"")),this.dndController.dragMimeTypes.forEach(n=>{var s;(s=e.dataTransfer)==null||s.setData(n,"")})}addResourceInfoToTransfer(e,t){if(t.length&&e.dataTransfer){this.instantiationService.invokeFunction(o=>uy(o,t,e));const i=t.filter(o=>o.scheme===pe.file).map(o=>o.fsPath);i.length&&e.dataTransfer.setData(vp.FILES,JSON.stringify(i))}}onDragStart(e,t){if(t.dataTransfer){const i=e.getData(),o=[],n={id:this.treeId,itemHandles:[]};i.forEach(s=>{n.itemHandles.push(s.handle),s.resourceUri&&o.push(z.revive(s.resourceUri))}),this.addResourceInfoToTransfer(t,o),this.addExtensionProvidedTransferTypes(t,n.itemHandles),t.dataTransfer.setData(this.treeMimeType,JSON.stringify(n))}}debugLog(e){e.size?this.logService.debug(`TreeView dragged mime types: ${Array.from(e).join(", ")}`):this.logService.debug("TreeView dragged with no supported mime types.")}onDragOver(e,t,i,o,n){const s=dw(n.dataTransfer),r=new Set(Array.from(s,h=>h[0]));if(n.dataTransfer){for(const h of n.dataTransfer.items)if(h.kind==="file"||h.type===sr.RESOURCES.toLowerCase()){r.add(_a.uriList);break}}this.debugLog(r);const a=this.dndController;return!a||!n.dataTransfer||a.dropMimeTypes.length===0?!1:Array.from(r).some((h,p)=>h===this.treeMimeType?!0:a.dropMimeTypes.indexOf(h)>=0)?{accept:!0,bubble:0,autoExpand:!0}:!1}getDragURI(e){return this.dndController?e.resourceUri?z.revive(e.resourceUri).toString():e.handle:null}getDragLabel(e){if(!this.dndController)return;if(e.length>1)return String(e.length);const t=e[0];return t.label?t.label.label:t.resourceUri?this.labelService.getUriLabel(z.revive(t.resourceUri)):void 0}async drop(e,t,i,o,n){const s=this.dndController;if(!n.dataTransfer||!s)return;let r,a;this.treeItemsTransfer.hasData(zi.prototype)&&(a=this.treeItemsTransfer.getData(zi.prototype)[0].identifier);const l=dw(n.dataTransfer,!0),h=new zI;for(const[g,m]of l)if((g===this.treeMimeType||s.dropMimeTypes.includes(g)||m.asFile()&&s.dropMimeTypes.includes(sr.FILES.toLowerCase()))&&(h.append(g,m),g===this.treeMimeType))try{r=JSON.parse(await m.asString())}catch{}const p=await this.treeViewsDragAndDropService.removeDragOperationTransfer(a);if(p)for(const[g,m]of p)h.append(g,m);return s.handleDrop(h,t,Ti.None,a,r==null?void 0:r.id,r==null?void 0:r.itemHandles)}onDragEnd(e){var t,i;((t=e.dataTransfer)==null?void 0:t.dropEffect)==="none"&&((i=this.dragCancellationToken)==null||i.cancel())}dispose(){}};Im=x([u(1,mi),u(2,O),u(3,Pf),u(4,Je)],Im);function nE(c){const e=[];for(const t of c)if(t.checkbox!==void 0){const i=s=>{for(const r of s.children??[])r.checkbox!==void 0&&s.checkbox!==void 0&&r.checkbox.isChecked!==s.checkbox.isChecked&&(r.checkbox.isChecked=s.checkbox.isChecked,e.push(r),i(r))};i(t);const o=new Set,n=s=>{if(s.parent&&s.parent.checkbox!==void 0&&s.parent.children){if(o.has(s.parent))return;o.add(s.parent);let r=!1,a=!1;for(const l of s.parent.children){if(r&&a)break;l.checkbox!==void 0&&(l.checkbox.isChecked?a=!0:r=!0)}a&&!r&&s.parent.checkbox.isChecked!==!0?(s.parent.checkbox.isChecked=!0,e.push(s.parent),n(s.parent)):r&&s.parent.checkbox.isChecked!==!1&&(s.parent.checkbox.isChecked=!1,e.push(s.parent),n(s.parent))}};n(t)}return c.concat(e)}var eL='.ports-view .monaco-icon-label,.ports-view .monaco-list .monaco-list-row.focused .monaco-icon-label,.ports-view .monaco-list .monaco-list-row:hover:not(.highlighted) .monaco-icon-label{flex:1}.ports-view .monaco-list .monaco-list-row .actionBarContainer{flex:1 0 auto;flex:0 0 auto;text-align:right}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell{display:flex;flex:1;flex-wrap:nowrap;height:22px;overflow:hidden;text-overflow:ellipsis}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell .monaco-inputbox{flex:1;height:22px;line-height:19px}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell .monaco-inputbox input{margin-top:-40px}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell .ports-view-actionbar-cell-localaddress{color:var(--vscode-textLink-foreground);text-decoration:var(--text-link-decoration)}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell .ports-view-actionbar-cell-localaddress:hover{text-decoration:underline}.ports-view .monaco-table-td[data-col-index="0"],.ports-view .monaco-table-th,.ports-view .monaco-table-th[data-col-index="0"]{padding-left:10px}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell .monaco-button{line-height:1.4em;margin-bottom:3px;margin-left:3px;margin-top:4px;padding:2px 14px;width:auto}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell>.ports-view-actionbar-cell-icon.codicon{margin-top:3px;padding-right:3px}.ports-view .monaco-list .monaco-list-row.selected .ports-view-actionbar-cell>.ports-view-actionbar-cell-icon.codicon{color:currentColor!important}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell .ports-view-actionbar-cell-resourceLabel .monaco-icon-label-container>.monaco-icon-name-container{flex:1}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell .ports-view-actionbar-cell-resourceLabel:after{padding-right:0}.ports-view .monaco-list .monaco-list-row .ports-view-actionbar-cell .actions{display:none}.ports-view .monaco-list .monaco-list-row.focused .ports-view-actionbar-cell .actions,.ports-view .monaco-list .monaco-list-row.selected .ports-view-actionbar-cell .actions,.ports-view .monaco-list .monaco-list-row:hover .ports-view-actionbar-cell .actions{display:block}.ports-view .monaco-list .ports-view-actionbar-cell .actions .action-label{background-position:50% 50%;background-repeat:no-repeat;background-size:16px;height:100%;padding:2px;width:16px}.monaco-workbench .codicon.codicon-ports-forwarded-with-process-icon{color:var(--vscode-ports-iconRunningProcessForeground)}';we(eL,{});X("remote-explorer-get-started",T.star,d(11114,"Getting started icon in the remote explorer view."));X("remote-explorer-documentation",T.book,d(11115,"Documentation icon in the remote explorer view."));X("remote-explorer-feedback",T.twitter,d(11116,"Feedback icon in the remote explorer view."));X("remote-explorer-review-issues",T.issues,d(11117,"Review issue icon in the remote explorer view."));X("remote-explorer-report-issues",T.comment,d(11118,"Report issue icon in the remote explorer view."));X("remote-explorer-view-icon",T.remoteExplorer,d(11119,"View icon of the remote explorer view."));const sE=X("ports-view-icon",T.plug,d(11120,"View icon of the remote ports view."));X("ports-view-icon",T.plug,d(11121,"Icon representing a remote port."));const rE=X("private-ports-view-icon",T.lock,d(11122,"Icon representing a private remote port.")),tL=X("ports-forward-icon",T.plus,d(11123,"Icon for the forward action.")),iL=X("ports-stop-forward-icon",T.x,d(11124,"Icon for the stop forwarding action.")),oL=X("ports-open-browser-icon",T.globe,d(11125,"Icon for the open browser action.")),nL=X("ports-open-preview-icon",T.openPreview,d(11126,"Icon for the open preview action.")),sL=X("ports-copy-address-icon",T.clippy,d(11127,"Icon for the copy local address action.")),aE=X("ports-label-icon",T.tag,d(11128,"Icon for the label port action.")),rL=X("ports-forwarded-without-process-icon",T.circleOutline,d(11129,"Icon for forwarded ports that don't have a running process.")),aL=X("ports-forwarded-with-process-icon",T.circleFilled,d(11130,"Icon for forwarded ports that do have a running process."));var Dm;const cL=new j("openPreviewEnabled",!1);class dL{constructor(e){this.remoteExplorerService=e,this.headerRowHeight=22}getHeight(e){return e.tunnelType===Ke.Add&&!this.remoteExplorerService.getEditableData(void 0)?30:22}}let Am=class{constructor(e,t){this.remoteExplorerService=e,this.tunnelService=t,this._candidates=new Map,this.input={label:d(11131,"Add Port"),icon:void 0,tunnelType:Ke.Add,hasRunningProcess:!1,remoteHost:"",remotePort:0,processDescription:"",tooltipPostfix:"",iconTooltip:"",portTooltip:"",processTooltip:"",originTooltip:"",privacyTooltip:"",source:{source:Zf.User,description:""},protocol:vo.Http,privacy:{id:Md.Private,themeIcon:rE.id,label:d(11132,"Private")},strip:()=>{}},this.model=e.tunnelModel,this.onForwardedPortsChanged=N.any(this.model.onForwardPort,this.model.onClosePort,this.model.onPortName,this.model.onCandidatesChanged)}get all(){const e=[];return this._candidates=new Map,this.model.candidates.forEach(t=>{this._candidates.set(Dt(t.host,t.port),t)}),(this.model.forwarded.size>0||this.remoteExplorerService.getEditableData(void 0))&&e.push(...this.forwarded),this.model.detected.size>0&&e.push(...this.detected),e.push(this.input),e}addProcessInfoFromCandidate(e){const t=Dt(e.remoteHost,e.remotePort);this._candidates.has(t)&&(e.processDescription=this._candidates.get(t).detail)}get forwarded(){return Array.from(this.model.forwarded.values()).map(t=>{const i=ct.createFromTunnel(this.remoteExplorerService,this.tunnelService,t);return this.addProcessInfoFromCandidate(i),i}).sort((t,i)=>t.remotePort===i.remotePort?t.remoteHost<i.remoteHost?-1:1:t.remotePort<i.remotePort?-1:1)}get detected(){return Array.from(this.model.detected.values()).map(e=>{const t=ct.createFromTunnel(this.remoteExplorerService,this.tunnelService,e,Ke.Detected,!1);return this.addProcessInfoFromCandidate(t),t})}isEmpty(){return this.detected.length===0&&(this.forwarded.length===0||this.forwarded.length===1&&this.forwarded[0].tunnelType===Ke.Add&&!this.remoteExplorerService.getEditableData(void 0))}};Am=x([u(0,nt),u(1,Qt)],Am);function Kc(c){return{label:"",tunnel:c,editId:At.None,tooltip:""}}class lL{constructor(){this.label="",this.tooltip="",this.weight=1,this.minimumWidth=40,this.maximumWidth=40,this.templateId="actionbar"}project(e){if(e.tunnelType===Ke.Add)return Kc(e);const t=e.processDescription?aL:rL;let i="";return e instanceof ct&&(i=`${e.iconTooltip} ${e.tooltipPostfix}`),{label:"",icon:t,tunnel:e,editId:At.None,tooltip:i}}}class hL{constructor(){this.label=d(11133,"Port"),this.tooltip=d(11134,"The label and remote port number of the forwarded port."),this.weight=1,this.templateId="actionbar"}project(e){const t=e.tunnelType===Ke.Add,i=e.label;let o="";return e instanceof ct&&!t?o=`${e.portTooltip} ${e.tooltipPostfix}`:o=i,{label:i,tunnel:e,menuId:b.TunnelPortInline,editId:e.tunnelType===Ke.Add?At.New:At.Label,tooltip:o}}}class mb{constructor(){this.label=d(11135,"Forwarded Address"),this.tooltip=d(11136,"The address that the forwarded port is available at."),this.weight=1,this.templateId="actionbar"}project(e){if(e.tunnelType===Ke.Add)return Kc(e);const t=e.localAddress??"";let i=t;return e instanceof ct&&(i=e.tooltipPostfix),{label:t,menuId:b.TunnelLocalAddressInline,tunnel:e,editId:At.LocalPort,tooltip:i,markdownTooltip:t?mb.getHoverText(t):void 0}}static getHoverText(e){return function(t){const i=t.getValue("editor");let o="";i.multiCursorModifier==="ctrlCmd"?be?o=d(11137,"option + click"):o=d(11138,"alt + click"):be?o=d(11139,"cmd + click"):o=d(11140,"ctrl + click");const n=new _c("",!0),s=e.startsWith("http")?e:`http://${e}`;return n.appendLink(s,"Follow link").appendMarkdown(` (${o})`)}}}class uL{constructor(){this.label=d(11141,"Running Process"),this.tooltip=d(11142,"The command line of the process that is using the port."),this.weight=2,this.templateId="actionbar"}project(e){return e.tunnelType===Ke.Add?Kc(e):{label:e.processDescription??"",tunnel:e,editId:At.None,tooltip:e instanceof ct?e.processTooltip:""}}}class pL{constructor(){this.label=d(11143,"Origin"),this.tooltip=d(11144,"The source that a forwarded port originates from. Can be an extension, user forwarded, statically forwarded, or automatically forwarded."),this.weight=1,this.templateId="actionbar"}project(e){if(e.tunnelType===Ke.Add)return Kc(e);const t=e.source.description,i=`${e instanceof ct?e.originTooltip:""}. ${e instanceof ct?e.tooltipPostfix:""}`;return{label:t,menuId:b.TunnelOriginInline,tunnel:e,editId:At.None,tooltip:i}}}class gL{constructor(){this.label=d(11145,"Visibility"),this.tooltip=d(11146,"The availability of the forwarded port."),this.weight=1,this.templateId="actionbar"}project(e){var o;if(e.tunnelType===Ke.Add)return Kc(e);const t=(o=e.privacy)==null?void 0:o.label;let i="";return e instanceof ct&&(i=`${e.privacy.label} ${e.tooltipPostfix}`),{label:t,tunnel:e,icon:{id:e.privacy.themeIcon},editId:At.None,tooltip:i}}}let Tm=class extends R{constructor(e,t,i,o,n,s,r){super(),this.instantiationService=e,this.contextKeyService=t,this.menuService=i,this.contextViewService=o,this.remoteExplorerService=n,this.commandService=s,this.configurationService=r,this.templateId="actionbar",this._hoverDelegate=Jh("mouse")}set actionRunner(e){this._actionRunner=e}renderTemplate(e){const t=ve(e,H(".ports-view-actionbar-cell")),i=ve(t,H(".ports-view-actionbar-cell-icon")),o=new mu(t,{supportHighlights:!0,hoverDelegate:this._hoverDelegate}),n=ve(t,H(".actions")),s=new Vo(n,{actionViewItemProvider:Qh.bind(void 0,this.instantiationService),hoverDelegate:this._hoverDelegate});return{label:o,icon:i,actionBar:s,container:t,elementDisposable:R.None}}renderElement(e,t,i){i.actionBar.clear(),i.icon.className="ports-view-actionbar-cell-icon",i.icon.style.display="none",i.label.setLabel(""),i.label.element.style.display="none",i.container.style.height="22px",i.button&&(i.button.element.style.display="none",i.button.dispose()),i.container.style.paddingLeft="0px",i.elementDisposable.dispose();let o;e.editId===At.New&&(o=this.remoteExplorerService.getEditableData(void 0))?this.renderInputBox(i.container,o):(o=this.remoteExplorerService.getEditableData(e.tunnel,e.editId),o?this.renderInputBox(i.container,o):e.tunnel.tunnelType===Ke.Add&&e.menuId===b.TunnelPortInline?this.renderButton(e,i):this.renderActionBarItem(e,i))}renderButton(e,t){t.container.style.paddingLeft="7px",t.container.style.height="28px",t.button=this._register(new CC(t.container,Vr)),t.button.label=e.label,t.button.element.title=e.tooltip,this._register(t.button.onDidClick(()=>{this.commandService.executeCommand(dt.INLINE_ID)}))}tunnelContext(e){let t;return e instanceof ct&&(t=e.strip()),t||(t={tunnelType:e.tunnelType,remoteHost:e.remoteHost,remotePort:e.remotePort,localAddress:e.localAddress,protocol:e.protocol,localUri:e.localUri,localPort:e.localPort,name:e.name,closeable:e.closeable,source:e.source,privacy:e.privacy,processDescription:e.processDescription,label:e.label}),t}renderActionBarItem(e,t){t.label.element.style.display="flex",t.label.setLabel(e.label,void 0,{title:e.markdownTooltip?{markdown:e.markdownTooltip(this.configurationService),markdownNotSupportedFallback:e.tooltip}:e.tooltip,extraClasses:e.menuId===b.TunnelLocalAddressInline?["ports-view-actionbar-cell-localaddress"]:void 0}),t.actionBar.context=this.tunnelContext(e.tunnel),t.container.style.paddingLeft="10px";const i=[["view",Bn],[qc.key,e.tunnel.tunnelType],[$c.key,e.tunnel.closeable],[Vm.key,e.tunnel.privacy.id],[Du.key,e.tunnel.protocol]],o=this.contextKeyService.createOverlay(i),n=new P;if(t.elementDisposable=n,e.menuId){const s=n.add(this.menuService.createMenu(e.menuId,o));let r=[];if(hn(s,{shouldForwardArgs:!0},r),r){const a=r.filter(l=>l.id.toLowerCase().indexOf("label")>=0);a.length>1&&(a.sort((l,h)=>l.label.length-h.label.length),a.pop(),r=r.filter(l=>a.indexOf(l)<0)),t.actionBar.push(r,{icon:!0,label:!1}),this._actionRunner&&(t.actionBar.actionRunner=this._actionRunner)}}e.icon&&(t.icon.className=`ports-view-actionbar-cell-icon ${oe.asClassName(e.icon)}`,t.icon.title=e.tooltip,t.icon.style.display="inline")}renderInputBox(e,t){this.inputDone&&(this.inputDone(!1,!1),this.inputDone=void 0),e.style.paddingLeft="5px";const i=t.startingValue||"",o=new Uy(e,this.contextViewService,{ariaLabel:d(11147,"Press Enter to confirm or Escape to cancel."),validationOptions:{validation:r=>{const a=t.validationMessage(r);return a?{content:a.content,formatContent:!0,type:a.severity===me.Error?3:1}:null}},placeholder:t.placeholder||"",inputBoxStyles:Uf});o.value=i,o.focus(),o.select({start:0,end:t.startingValue?t.startingValue.length:0});const n=Wf(async(r,a)=>{Re(s),this.inputDone&&(this.inputDone=void 0),o.element.style.display="none";const l=o.value;if(a)return t.onFinish(l,r)});this.inputDone=n;const s=[o,Xv(o.inputElement,B.KEY_DOWN,async r=>{if(r.equals(3))return r.stopPropagation(),o.validate()!==3?n(!0,!0):n(!1,!0);if(r.equals(9))return r.preventDefault(),r.stopPropagation(),n(!1,!0)}),L(o.inputElement,B.BLUR,()=>n(o.validate()!==3,!0))];return ne(()=>{n(!1,!1)})}disposeElement(e,t,i,o){i.elementDisposable.dispose()}disposeTemplate(e){var t;e.label.dispose(),e.actionBar.dispose(),e.elementDisposable.dispose(),(t=e.button)==null||t.dispose()}};Tm=x([u(0,O),u(1,K),u(2,yt),u(3,Ec),u(4,nt),u(5,lt),u(6,F)],Tm);class ct{static createFromTunnel(e,t,i,o=Ke.Forwarded,n){return new ct(o,i.remoteHost,i.remotePort,i.source,!!i.hasRunningProcess,i.protocol,i.localUri,i.localAddress,i.localPort,n===void 0?i.closeable:n,i.name,i.runningProcess,i.pid,i.privacy,e,t)}strip(){return new ct(this.tunnelType,this.remoteHost,this.remotePort,this.source,this.hasRunningProcess,this.protocol,this.localUri,this.localAddress,this.localPort,this.closeable,this.name,this.runningProcess,this.pid,this._privacy)}constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f,v,S){this.tunnelType=e,this.remoteHost=t,this.remotePort=i,this.source=o,this.hasRunningProcess=n,this.protocol=s,this.localUri=r,this.localAddress=a,this.localPort=l,this.closeable=h,this.name=p,this.runningProcess=g,this.pid=m,this._privacy=f,this.remoteExplorerService=v,this.tunnelService=S}get label(){if(this.tunnelType===Ke.Add&&this.name)return this.name;const e=qI(this.remoteHost)||$I(this.remoteHost)?`${this.remotePort}`:`${this.remoteHost}:${this.remotePort}`;return this.name?`${this.name} (${e})`:e}set processDescription(e){this.runningProcess=e}get processDescription(){var t;let e="";return this.runningProcess?(this.pid&&((t=this.remoteExplorerService)!=null&&t.namedProcesses.has(this.pid))?e=this.remoteExplorerService.namedProcesses.get(this.pid):e=this.runningProcess.replace(/\0/g," ").trim(),this.pid&&(e+=` (${this.pid})`)):this.hasRunningProcess&&(e=d(11148,"Process information unavailable")),e}get tooltipPostfix(){let e;return this.localAddress?e=d(11149,"Remote port {0}:{1} forwarded to local address {2}. ",this.remoteHost,this.remotePort,this.localAddress):e=d(11150,"Remote port {0}:{1} not forwarded. ",this.remoteHost,this.remotePort),e}get iconTooltip(){return this.tunnelType===Ke.Add?this.label:`${this.processDescription?d(11151,"Port has running process."):d(11152,"No running process.")}`}get portTooltip(){return this.tunnelType===Ke.Add?"":`${this.name?d(11153,"Port labeled {0}. ",this.name):""}`}get processTooltip(){return this.processDescription??""}get originTooltip(){return this.source.description}get privacy(){var e,t;return(e=this.tunnelService)!=null&&e.privacyOptions?((t=this.tunnelService)==null?void 0:t.privacyOptions.find(i=>i.id===this._privacy))??{id:"",themeIcon:T.question.id,label:d(11154,"Unknown")}:{id:Md.Private,themeIcon:rE.id,label:d(11132,"Private")}}}const qc=new j("tunnelType",Ke.Add,!0),$c=new j("tunnelCloseable",!1,!0),Vm=new j("tunnelPrivacy",void 0,!0),cE=new j("tunnelPrivacyEnabled",!1,!0),Du=new j("tunnelProtocol",vo.Http,!0),Au=new j("tunnelViewFocus",!1,d(11155,"Whether the Ports view has focus.")),jc="tunnelViewSelection",mL=new j(jc,void 0,!0),dE="tunnelViewMultiSelection",lE=new j(dE,void 0,!0),hE=new j("portChangable",!1,!0),uE=new j("protocolChangable",!0,!0);var rn;let Gn=(rn=class extends fu{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f,v,S,E,D){super(t,i,o,s,n,a,r,l,m,v,S),this.viewModel=e,this.quickInputService=h,this.commandService=p,this.menuService=g,this.remoteExplorerService=f,this.tunnelService=E,this.contextViewService=D,this.tableDisposables=this._register(new P),this.isEditing=!1,this.titleActions=[],this.lastFocus=[],this.height=0,this.width=0,this.tunnelTypeContext=qc.bindTo(n),this.tunnelCloseableContext=$c.bindTo(n),this.tunnelPrivacyContext=Vm.bindTo(n),this.tunnelPrivacyEnabledContext=cE.bindTo(n),this.tunnelPrivacyEnabledContext.set(E.canChangePrivacy),this.protocolChangableContextKey=uE.bindTo(n),this.protocolChangableContextKey.set(E.canChangeProtocol),this.tunnelProtocolContext=Du.bindTo(n),this.tunnelViewFocusContext=Au.bindTo(n),this.tunnelViewSelectionContext=mL.bindTo(n),this.tunnelViewMultiSelectionContext=lE.bindTo(n),this.portChangableContextKey=hE.bindTo(n);const V=this.contextKeyService.createOverlay([["view",Dm.ID]]),M=this._register(this.menuService.createMenu(b.TunnelTitle,V)),J=()=>{this.titleActions=[],hn(M,void 0,this.titleActions),this.updateActions()};this._register(M.onDidChange(J)),J(),this._register(ne(()=>{this.titleActions=[]})),this.registerPrivacyActions(),this._register(N.once(this.tunnelService.onAddedTunnelProvider)(()=>{var W;let q=!1;this.tunnelPrivacyEnabledContext.get()===!1&&(this.tunnelPrivacyEnabledContext.set(E.canChangePrivacy),q=!0),this.protocolChangableContextKey.get()===!0&&(this.protocolChangableContextKey.set(E.canChangeProtocol),q=!0),q&&(J(),this.registerPrivacyActions(),this.createTable(),(W=this.table)==null||W.layout(this.height,this.width))}))}registerPrivacyActions(){for(const e of this.tunnelService.privacyOptions){const t=`remote.tunnel.privacy${e.id}`;qe.registerCommand(t,Mm.handler(e.id)),k.appendMenuItem(b.TunnelPrivacy,{order:0,command:{id:t,title:e.label,toggled:Vm.isEqualTo(e.id)}})}}get portCount(){return this.remoteExplorerService.tunnelModel.forwarded.size+this.remoteExplorerService.tunnelModel.detected.size}createTable(){if(!this.panelContainer)return;this.tableDisposables.clear(),Zt(this.panelContainer);const e=ve(this.panelContainer,H(".customview-tree"));e.classList.add("ports-view"),e.classList.add("file-icon-themable-tree","show-file-icons");const t=new Tm(this.instantiationService,this.contextKeyService,this.menuService,this.contextViewService,this.remoteExplorerService,this.commandService,this.configurationService),i=[new lL,new hL,new mb,new uL];this.tunnelService.canChangePrivacy&&i.push(new gL),i.push(new pL),this.table=this.instantiationService.createInstance(UI,"RemoteTunnels",e,new dL(this.remoteExplorerService),i,[t],{keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:r=>r.label},multipleSelectionSupport:!0,accessibilityProvider:{getAriaLabel:r=>r instanceof ct?`${r.tooltipPostfix} ${r.portTooltip} ${r.iconTooltip} ${r.processTooltip} ${r.originTooltip} ${this.tunnelService.canChangePrivacy?r.privacy.label:""}`:r.label,getWidgetAriaLabel:()=>d(11157,"Tunnel View")},openOnSingleClick:!0});const o=new bc;t.actionRunner=o,this.tableDisposables.add(this.table),this.tableDisposables.add(this.table.onContextMenu(r=>this.onContextMenu(r,o))),this.tableDisposables.add(this.table.onMouseDblClick(r=>this.onMouseDblClick(r))),this.tableDisposables.add(this.table.onDidChangeFocus(r=>this.onFocusChanged(r))),this.tableDisposables.add(this.table.onDidChangeSelection(r=>this.onSelectionChanged(r))),this.tableDisposables.add(this.table.onDidFocus(()=>this.tunnelViewFocusContext.set(!0))),this.tableDisposables.add(this.table.onDidBlur(()=>this.tunnelViewFocusContext.set(!1)));const n=()=>{var r;return(r=this.table)==null?void 0:r.splice(0,Number.POSITIVE_INFINITY,this.viewModel.all)};n();let s=this.portCount;this.tableDisposables.add(N.debounce(this.viewModel.onForwardedPortsChanged,(r,a)=>a,50)(()=>{const r=this.portCount;(s===0||r===0)&&s!==r&&this._onDidChangeViewWelcomeState.fire(),s=r,n()})),this.tableDisposables.add(this.table.onMouseClick(r=>{if(this.hasOpenLinkModifier(r.browserEvent)&&this.table){const a=this.table.getSelectedElements();(a.length===0||a.length===1&&a[0]===r.element)&&this.commandService.executeCommand(jt.ID,r.element)}})),this.tableDisposables.add(this.table.onDidOpen(r=>{var a;!r.element||r.element.tunnelType!==Ke.Forwarded||((a=r.browserEvent)==null?void 0:a.type)==="dblclick"&&this.commandService.executeCommand(To.ID)})),this.tableDisposables.add(this.remoteExplorerService.onDidChangeEditable(r=>{var a,l;this.isEditing=!!this.remoteExplorerService.getEditableData(r==null?void 0:r.tunnel,r==null?void 0:r.editId),this._onDidChangeViewWelcomeState.fire(),this.isEditing||e.classList.remove("highlight"),n(),this.isEditing?(e.classList.add("highlight"),r||(a=this.table)==null||a.reveal(this.table.indexOf(this.viewModel.input))):(r&&r.tunnel.tunnelType!==Ke.Add&&((l=this.table)==null||l.setFocus(this.lastFocus)),this.focus())}))}renderBody(e){super.renderBody(e),this.panelContainer=ve(e,H(".tree-explorer-viewlet-tree-view")),this.createTable()}shouldShowWelcome(){return this.viewModel.isEmpty()&&!this.isEditing}focus(){var e;super.focus(),(e=this.table)==null||e.domFocus()}onFocusChanged(e){e.indexes.length>0&&e.elements.length>0&&(this.lastFocus=[...e.indexes]);const t=e.elements,i=t&&t.length?t[0]:void 0;i?(this.tunnelViewSelectionContext.set(Dt(i.remoteHost,i.remotePort)),this.tunnelTypeContext.set(i.tunnelType),this.tunnelCloseableContext.set(!!i.closeable),this.tunnelPrivacyContext.set(i.privacy.id),this.tunnelProtocolContext.set(i.protocol===vo.Https?vo.Https:vo.Https),this.portChangableContextKey.set(!!i.localPort)):(this.tunnelTypeContext.reset(),this.tunnelViewSelectionContext.reset(),this.tunnelCloseableContext.reset(),this.tunnelPrivacyContext.reset(),this.tunnelProtocolContext.reset(),this.portChangableContextKey.reset())}hasOpenLinkModifier(e){const t=this.configurationService.getValue("editor");let i=!1;return t.multiCursorModifier==="ctrlCmd"?i=e.altKey:be?i=e.metaKey:i=e.ctrlKey,i}onSelectionChanged(e){const t=e.elements;t.length>1?this.tunnelViewMultiSelectionContext.set(t.map(i=>Dt(i.remoteHost,i.remotePort))):this.tunnelViewMultiSelectionContext.set(void 0)}onContextMenu(e,t){var o,n;if(e.element!==void 0&&!(e.element instanceof ct))return;e.browserEvent.preventDefault(),e.browserEvent.stopPropagation();const i=e.element;i?((o=this.table)==null||o.setFocus([this.table.indexOf(i)]),this.tunnelTypeContext.set(i.tunnelType),this.tunnelCloseableContext.set(!!i.closeable),this.tunnelPrivacyContext.set(i.privacy.id),this.tunnelProtocolContext.set(i.protocol),this.portChangableContextKey.set(!!i.localPort)):(this.tunnelTypeContext.set(Ke.Add),this.tunnelCloseableContext.set(!1),this.tunnelPrivacyContext.set(void 0),this.tunnelProtocolContext.set(void 0),this.portChangableContextKey.set(!1)),this.contextMenuService.showContextMenu({menuId:b.TunnelContext,menuActionOptions:{shouldForwardArgs:!0},contextKeyService:(n=this.table)==null?void 0:n.contextKeyService,getAnchor:()=>e.anchor,getActionViewItem:s=>{const r=this.keybindingService.lookupKeybinding(s.id);if(r)return new Ef(s,s,{label:!0,keybinding:r.getLabel()})},onHide:s=>{var r;s&&((r=this.table)==null||r.domFocus())},getActionsContext:()=>i==null?void 0:i.strip(),actionRunner:t})}onMouseDblClick(e){e.element||this.commandService.executeCommand(dt.INLINE_ID)}layoutBody(e,t){var i;this.height=e,this.width=t,super.layoutBody(e,t),(i=this.table)==null||i.layout(e,t)}},Dm=rn,rn.ID=Bn,rn.TITLE=w(11156,"Ports"),rn);Gn=Dm=x([u(2,xe),u(3,Ve),u(4,K),u(5,F),u(6,O),u(7,Te),u(8,It),u(9,Fe),u(10,lt),u(11,yt),u(12,te),u(13,nt),u(14,Be),u(15,Xe),u(16,Qt),u(17,Ec)],Gn);class fL{constructor(e,t){this.id=Gn.ID,this.name=Gn.TITLE,this.canToggleVisibility=!0,this.hideByDefault=!1,this.group="details@0",this.order=-500,this.canMoveView=!0,this.containerIcon=sE,this.ctorDescriptor=new ce(Gn,[e]),this.remoteAuthority=t.remoteAuthority?t.remoteAuthority.split("+")[0]:void 0}}function xn(c){return c&&c.tunnelType&&c.remoteHost&&c.source}var To;(function(c){c.ID="remote.tunnel.label",c.LABEL=d(11158,"Set Port Label"),c.COMMAND_ID_KEYWORD="label";function e(){return async(t,i)=>{const o=t.get(nt);let n;if(xn(i))n=i;else{const s=t.get(K).getContextKeyValue(jc),r=s?o.tunnelModel.forwarded.get(s):void 0;if(r){const a=t.get(Qt);n=ct.createFromTunnel(o,a,r)}}if(n){const s=n;return new Promise(r=>{const a=s.name?s.name:`${s.remotePort}`;o.setEditable(s,At.Label,{onFinish:async(l,h)=>{l=l.trim(),o.setEditable(s,At.Label,null);const p=h&&l!==a;p&&await o.tunnelModel.name(s.remoteHost,s.remotePort,l),r(p?{port:s.remotePort,label:l}:void 0)},validationMessage:()=>null,placeholder:d(11159,"Port label"),startingValue:a})})}}}c.handler=e})(To||(To={}));const bL=d(11160,"Forwarded port should be a number or a host:port."),fb=65536,pE=d(11161,"Port number must be  0 and < {0}.",fb),gE=d(11162,"May Require Sudo"),wL=d(11163,"Port is already forwarded");var dt;(function(c){c.INLINE_ID="remote.tunnel.forwardInline",c.COMMANDPALETTE_ID="remote.tunnel.forwardCommandPalette",c.LABEL=w(11164,"Forward a Port"),c.TREEITEM_LABEL=d(11165,"Forward Port");const e=d(11166,"Port number or address (eg. 3000 or 10.10.10.10:2000).");function t(s,r,a,l){const h=qu(a);if(h){if(h.port>=fb)return{content:pE,severity:me.Error};if(l&&r.isPortPrivileged(h.port))return{content:gE,severity:me.Info};if(rr(s.tunnelModel.forwarded,h.host,h.port))return{content:wL,severity:me.Error}}else return{content:bL,severity:me.Error};return null}function i(s,r,a,l){r?typeof r=="string"&&s.warn(d(11168,"Unable to forward {0}:{1}. {2}",a,l,r)):s.warn(d(11167,"Unable to forward {0}:{1}. The host may not be available or that remote port may already be forwarded",a,l))}function o(){return async(s,r)=>{const a=s.get(nt),l=s.get(He),h=s.get(Qt);a.setEditable(void 0,At.New,{onFinish:async(p,g)=>{a.setEditable(void 0,At.New,null);let m;g&&(m=qu(p))&&a.forward({remote:{host:m.host,port:m.port},elevateIfNeeded:!0}).then(f=>i(l,f,m.host,m.port))},validationMessage:p=>t(a,h,p,h.canElevate),placeholder:e})}}c.inlineHandler=o;function n(){return async(s,r)=>{const a=s.get(nt),l=s.get(He),h=s.get(it),p=s.get(Fe),g=s.get(Qt);await h.openView(Gn.ID,!0);const m=await p.input({prompt:e,validateInput:v=>Promise.resolve(t(a,g,v,g.canElevate))});let f;m&&(f=qu(m))&&a.forward({remote:{host:f.host,port:f.port},elevateIfNeeded:!0}).then(v=>i(l,v,f.host,f.port))}}c.commandPaletteHandler=n})(dt||(dt={}));function mE(c,e,t){const i=c.map(o=>{const n=ct.createFromTunnel(e,t,o);return{label:n.label,description:n.processDescription,tunnel:n}});return i.length===0&&i.push({label:d(11169,"No ports currently forwarded. Try running the {0} command",dt.LABEL.value)}),i}var pi;(function(c){c.INLINE_ID="remote.tunnel.closeInline",c.COMMANDPALETTE_ID="remote.tunnel.closeCommandPalette",c.LABEL=w(11170,"Stop Forwarding Port");function e(){return async(i,o)=>{const n=i.get(K),s=i.get(nt);let r=[];const a=n.getContextKeyValue(dE);if(a)a.forEach(l=>{const h=s.tunnelModel.forwarded.get(l);h&&(r==null||r.push(h))});else if(xn(o))r=[o];else{const l=n.getContextKeyValue(jc),h=l?s.tunnelModel.forwarded.get(l):void 0;h&&(r=[h])}if(!(!r||r.length===0))return Promise.all(r.map(l=>s.close({host:l.remoteHost,port:l.remotePort},ys.User)))}}c.inlineHandler=e;function t(){return async i=>{const o=i.get(Fe),n=i.get(nt),s=i.get(Qt),r=i.get(lt),a=mE(Array.from(n.tunnelModel.forwarded.values()).filter(h=>h.closeable),n,s),l=await o.pick(a,{placeHolder:d(11171,"Choose a port to stop forwarding")});l&&l.tunnel?await n.close({host:l.tunnel.remoteHost,port:l.tunnel.remotePort},ys.User):l&&await r.executeCommand(dt.COMMANDPALETTE_ID)}}c.commandPaletteHandler=t})(pi||(pi={}));var jt;(function(c){c.ID="remote.tunnel.open",c.LABEL=d(11172,"Open in Browser");function e(){return async(i,o)=>{let n;if(xn(o)?n=Dt(o.remoteHost,o.remotePort):o.tunnelRemoteHost&&o.tunnelRemotePort&&(n=Dt(o.tunnelRemoteHost,o.tunnelRemotePort)),n){const s=i.get(nt).tunnelModel,r=i.get(It);return t(s,r,n)}}}c.handler=e;function t(i,o,n){const s=i.forwarded.get(n)||i.detected.get(n);return s?o.open(s.localUri,{allowContributedOpeners:!1}):Promise.resolve()}c.run=t})(jt||(jt={}));var Ai;(function(c){c.ID="remote.tunnel.openPreview",c.LABEL=d(11173,"Preview in Editor");function e(){return async(i,o)=>{let n;if(xn(o)?n=Dt(o.remoteHost,o.remotePort):o.tunnelRemoteHost&&o.tunnelRemotePort&&(n=Dt(o.tunnelRemoteHost,o.tunnelRemotePort)),n){const s=i.get(nt).tunnelModel,r=i.get(It),a=i.get(SC);return t(s,r,a,n)}}}c.handler=e;async function t(i,o,n,s){const r=i.forwarded.get(s)||i.detected.get(s);if(r){const a=r.remoteHost.includes(":")?`[${r.remoteHost}]`:r.remoteHost,l=z.parse(`http://${a}:${r.remotePort}`),h=await n.getOpener(r.localUri,{sourceUri:l},Ti.None);return h?h.openExternalUri(r.localUri,{sourceUri:l},Ti.None):o.open(r.localUri)}return Promise.resolve()}c.run=t})(Ai||(Ai={}));var zr;(function(c){c.ID="remote.tunnel.openCommandPalette",c.LABEL=d(11174,"Open Port in Browser");function e(){return async(t,i)=>{const o=t.get(nt),n=t.get(Qt),s=o.tunnelModel,r=t.get(Fe),a=t.get(It),l=t.get(lt),h=[...s.forwarded,...s.detected].map(g=>{const m=ct.createFromTunnel(o,n,g[1]);return{label:m.label,description:m.processDescription,tunnel:m}});h.length===0?h.push({label:d(11175,"No ports currently forwarded. Open the Ports view to get started.")}):h.push({label:d(11176,"Open the Ports view...")});const p=await r.pick(h,{placeHolder:d(11177,"Choose the port to open")});if(p&&p.tunnel)return jt.run(s,a,Dt(p.tunnel.remoteHost,p.tunnel.remotePort));if(p)return l.executeCommand(`${Bn}.focus`)}}c.handler=e})(zr||(zr={}));var gi;(function(c){c.INLINE_ID="remote.tunnel.copyAddressInline",c.COMMANDPALETTE_ID="remote.tunnel.copyAddressCommandPalette",c.INLINE_LABEL=d(11178,"Copy Local Address"),c.COMMANDPALETTE_LABEL=d(11179,"Copy Forwarded Port Address");async function e(o,n,s){const r=o.tunnelModel.address(s.remoteHost,s.remotePort);r&&await n.writeText(r.toString())}function t(){return async(o,n)=>{const s=o.get(nt);let r;if(xn(n))r=n;else{const a=o.get(K).getContextKeyValue(jc);r=a?s.tunnelModel.forwarded.get(a):void 0}if(r)return e(s,o.get(xp),r)}}c.inlineHandler=t;function i(){return async(o,n)=>{const s=o.get(Fe),r=o.get(nt),a=o.get(Qt),l=o.get(lt),h=o.get(xp),p=Array.from(r.tunnelModel.forwarded.values()).concat(Array.from(r.tunnelModel.detected.values())),g=await s.pick(mE(p,r,a),{placeHolder:d(11180,"Choose a forwarded port")});g&&g.tunnel?await e(r,h,g.tunnel):g&&await l.executeCommand(dt.COMMANDPALETTE_ID)}}c.commandPaletteHandler=i})(gi||(gi={}));var Ur;(function(c){c.ID="remote.tunnel.changeLocalPort",c.LABEL=d(11181,"Change Local Address Port");function e(i,o,n){if(o.match(/^[0-9]+$/)){if(Number(o)>=fb)return{content:pE,severity:me.Error};if(n&&i.isPortPrivileged(Number(o)))return{content:gE,severity:me.Info}}else return{content:d(11182,"Local port should be a number."),severity:me.Error};return null}function t(){return async(i,o)=>{const n=i.get(nt),s=i.get(He),r=i.get(Qt);let a;if(xn(o))a=o;else{const l=i.get(K).getContextKeyValue(jc),h=l?n.tunnelModel.forwarded.get(l):void 0;if(h){const p=i.get(Qt);a=ct.createFromTunnel(n,p,h)}}if(a){const l=a;n.setEditable(l,At.LocalPort,{onFinish:async(h,p)=>{if(n.setEditable(l,At.LocalPort,null),p){await n.close({host:l.remoteHost,port:l.remotePort},ys.Other);const g=Number(h),m=await n.forward({remote:{host:l.remoteHost,port:l.remotePort},local:g,name:l.name,elevateIfNeeded:!0,source:l.source});m&&typeof m!="string"&&m.tunnelLocalPort!==g&&s.warn(d(11183,"The local port {0} is not available. Port number {1} has been used instead",h,m.tunnelLocalPort??m.localAddress))}},validationMessage:h=>e(r,h,r.canElevate),placeholder:d(11184,"New local port")})}}}c.handler=t})(Ur||(Ur={}));var Mm;(function(c){function e(t){return async(i,o)=>{if(xn(o)){const n=i.get(nt);return await n.close({host:o.remoteHost,port:o.remotePort},ys.Other),n.forward({remote:{host:o.remoteHost,port:o.remotePort},local:o.localPort,name:o.name,elevateIfNeeded:!0,privacy:t,source:o.source})}}}c.handler=e})(Mm||(Mm={}));var Ji;(function(c){c.ID_HTTP="remote.tunnel.setProtocolHttp",c.ID_HTTPS="remote.tunnel.setProtocolHttps",c.LABEL_HTTP=d(11185,"HTTP"),c.LABEL_HTTPS=d(11186,"HTTPS");async function e(o,n,s,r){if(xn(o)){const a={protocol:n},l=r.remoteAuthority?4:3;return s.tunnelModel.configPortsAttributes.addAttributes(o.remotePort,a,l)}}function t(){return async(o,n)=>e(n,vo.Http,o.get(nt),o.get(bt))}c.handlerHttp=t;function i(){return async(o,n)=>e(n,vo.Https,o.get(nt),o.get(bt))}c.handlerHttps=i})(Ji||(Ji={}));const bb=10,Ms=qc.isEqualTo(Ke.Forwarded),Ls=y.or(Ms,qc.isEqualTo(Ke.Detected)),In=lE.isEqualTo(void 0);ee.registerCommandAndKeybindingRule({id:To.ID,weight:200+bb,when:y.and(Au,Ms,In),primary:60,mac:{primary:3},handler:To.handler()});qe.registerCommand(dt.INLINE_ID,dt.inlineHandler());qe.registerCommand(dt.COMMANDPALETTE_ID,dt.commandPaletteHandler());ee.registerCommandAndKeybindingRule({id:pi.INLINE_ID,weight:200+bb,when:y.and($c,Au),primary:20,mac:{primary:2049,secondary:[20]},handler:pi.inlineHandler()});qe.registerCommand(pi.COMMANDPALETTE_ID,pi.commandPaletteHandler());qe.registerCommand(jt.ID,jt.handler());qe.registerCommand(Ai.ID,Ai.handler());qe.registerCommand(zr.ID,zr.handler());ee.registerCommandAndKeybindingRule({id:gi.INLINE_ID,weight:200+bb,when:y.and(Au,Ls,In),primary:2081,handler:gi.inlineHandler()});qe.registerCommand(gi.COMMANDPALETTE_ID,gi.commandPaletteHandler());qe.registerCommand(Ur.ID,Ur.handler());qe.registerCommand(Ji.ID_HTTP,Ji.handlerHttp());qe.registerCommand(Ji.ID_HTTPS,Ji.handlerHttps());k.appendMenuItem(b.CommandPalette,{command:{id:pi.COMMANDPALETTE_ID,title:pi.LABEL},when:Nn});k.appendMenuItem(b.CommandPalette,{command:{id:dt.COMMANDPALETTE_ID,title:dt.LABEL},when:Nn});k.appendMenuItem(b.CommandPalette,{command:{id:gi.COMMANDPALETTE_ID,title:gi.COMMANDPALETTE_LABEL},when:Nn});k.appendMenuItem(b.CommandPalette,{command:{id:zr.ID,title:zr.LABEL},when:Nn});k.appendMenuItem(b.TunnelContext,{group:"._open",order:0,command:{id:jt.ID,title:jt.LABEL},when:y.and(Ls,In)});k.appendMenuItem(b.TunnelContext,{group:"._open",order:1,command:{id:Ai.ID,title:Ai.LABEL},when:y.and(Ls,In)});k.appendMenuItem(b.TunnelContext,{group:"0_manage",order:1,command:{id:To.ID,title:To.LABEL,icon:aE},when:y.and(Ms,In)});k.appendMenuItem(b.TunnelContext,{group:"2_localaddress",order:0,command:{id:gi.INLINE_ID,title:gi.INLINE_LABEL},when:y.and(Ls,In)});k.appendMenuItem(b.TunnelContext,{group:"2_localaddress",order:1,command:{id:Ur.ID,title:Ur.LABEL},when:y.and(Ms,hE,In)});k.appendMenuItem(b.TunnelContext,{group:"2_localaddress",order:2,submenu:b.TunnelPrivacy,title:d(11187,"Port Visibility"),when:y.and(Ms,cE)});k.appendMenuItem(b.TunnelContext,{group:"2_localaddress",order:3,submenu:b.TunnelProtocol,title:d(11188,"Change Port Protocol"),when:y.and(Ms,In,uE)});k.appendMenuItem(b.TunnelContext,{group:"3_forward",order:0,command:{id:pi.INLINE_ID,title:pi.LABEL},when:$c});k.appendMenuItem(b.TunnelContext,{group:"3_forward",order:1,command:{id:dt.INLINE_ID,title:dt.LABEL}});k.appendMenuItem(b.TunnelProtocol,{order:0,command:{id:Ji.ID_HTTP,title:Ji.LABEL_HTTP,toggled:Du.isEqualTo(vo.Http)}});k.appendMenuItem(b.TunnelProtocol,{order:1,command:{id:Ji.ID_HTTPS,title:Ji.LABEL_HTTPS,toggled:Du.isEqualTo(vo.Https)}});k.appendMenuItem(b.TunnelPortInline,{group:"0_manage",order:0,command:{id:dt.INLINE_ID,title:dt.TREEITEM_LABEL,icon:tL},when:qc.isEqualTo(Ke.Candidate)});k.appendMenuItem(b.TunnelPortInline,{group:"0_manage",order:4,command:{id:To.ID,title:To.LABEL,icon:aE},when:Ms});k.appendMenuItem(b.TunnelPortInline,{group:"0_manage",order:5,command:{id:pi.INLINE_ID,title:pi.LABEL,icon:iL},when:$c});k.appendMenuItem(b.TunnelLocalAddressInline,{order:-1,command:{id:gi.INLINE_ID,title:gi.INLINE_LABEL,icon:sL},when:Ls});k.appendMenuItem(b.TunnelLocalAddressInline,{order:0,command:{id:jt.ID,title:jt.LABEL,icon:oL},when:Ls});k.appendMenuItem(b.TunnelLocalAddressInline,{order:1,command:{id:Ai.ID,title:Ai.LABEL,icon:nL},when:Ls});le("ports.iconRunningProcessForeground",KI,d(11189,"The color of the icon for a port that has an associated running process."));const Ni=class Ni extends R{constructor(e,t){super(),this._onDidMatchLocalUrl=new I,this.onDidMatchLocalUrl=this._onDidMatchLocalUrl.event,this.listeners=new Map,this.replPositions=new Map,e.instances.forEach(i=>{this.registerTerminalInstance(i)}),this._register(e.onDidCreateInstance(i=>{this.registerTerminalInstance(i)})),this._register(e.onDidDisposeInstance(i=>{var o;(o=this.listeners.get(i))==null||o.dispose(),this.listeners.delete(i)})),this._register(t.onDidNewSession(i=>{(!i.parentSession||i.parentSession&&i.hasSeparateRepl())&&this.listeners.set(i.getId(),i.onDidChangeReplElements(()=>{this.processNewReplElements(i)}))})),this._register(t.onDidEndSession(({session:i})=>{var o;this.listeners.has(i.getId())&&((o=this.listeners.get(i.getId()))==null||o.dispose(),this.listeners.delete(i.getId()))}))}registerTerminalInstance(e){Ni.excludeTerminals.includes(e.title)||this.listeners.set(e,e.onData(t=>{this.processData(t)}))}processNewReplElements(e){const t=this.replPositions.get(e.getId()),i=e.getReplElements();if(this.replPositions.set(e.getId(),{position:i.length-1,tail:i[i.length-1]}),!t&&i.length>0)i.forEach(o=>this.processData(o.toString()));else if(t&&i.length-1!==t.position)for(let o=i.length-1;o>=0;o--){const n=i[o];if(n===t.tail)break;this.processData(n.toString())}}dispose(){super.dispose();const e=this.listeners.values();for(const t of e)t.dispose()}processData(e){e=jI(e);const t=e.match(Ni.localUrlRegex)||[];if(t&&t.length>0)t.forEach(i=>{let o;try{o=new URL(i)}catch{}if(o){const n=i.match(Ni.extractPortRegex),s=parseFloat(o.port?o.port:n?n[2]:"NaN");if(!isNaN(s)&&Number.isInteger(s)&&s>0&&s<=65535){let r=o.hostname;if(r!=="0.0.0.0"&&r!=="127.0.0.1"&&(r="localhost"),s!==9229&&e.startsWith("Debugger listening on"))return;this._onDidMatchLocalUrl.fire({port:s,host:r})}}});else{const i=e.match(Ni.localPythonServerRegex);i&&i.length===3&&this._onDidMatchLocalUrl.fire({host:i[1],port:Number(i[2])})}}};Ni.localUrlRegex=/\b\w{0,20}(?::\/\/)?(?:localhost|127\.0\.0\.1|0\.0\.0\.0|:\d{2,5})[\w\-\.\~:\/\?\#[\]\@!\$&\(\)\*\+\,\;\=]*/gim,Ni.extractPortRegex=/(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d{1,5})/,Ni.localPythonServerRegex=/HTTP\son\s(127\.0\.0\.1|0\.0\.0\.0)\sport\s(\d+)/,Ni.excludeTerminals=["Dev Containers"];let Lm=Ni;const sp="workbench.view.remote";let ev=class extends R{constructor(e,t,i,o,n,s){super(),this.contextKeyService=e,this.environmentService=t,this.remoteExplorerService=i,this.tunnelService=o,this.activityService=n,this.statusbarService=s,this.contextKeyListener=this._register(new Se),this.activityBadge=this._register(new Se),this._register($.as(Ot.ViewsRegistry).registerViewWelcomeContent(Bn,{content:this.environmentService.remoteAuthority?d(8927,`No forwarded ports. Forward a port to access your running services locally.
[Forward a Port]({0})`,`command:${dt.INLINE_ID}`):d(8928,`No forwarded ports. Forward a port to access your locally running services over the internet.
[Forward a Port]({0})`,`command:${dt.INLINE_ID}`)})),this.enableBadgeAndStatusBar(),this.enableForwardedPortsFeatures()}async getViewContainer(){return $.as(Ot.ViewContainersRegistry).registerViewContainer({id:$u,title:w(8929,"Ports"),icon:sE,ctorDescriptor:new ce(Lc,[$u,{mergeViewWithContainerWhenSingleView:!0}]),storageId:$u,hideIfEmpty:!0,order:5},1)}async enableForwardedPortsFeatures(){this.contextKeyListener.clear();const e=!!lw.getValue(this.contextKeyService),t=!!Nn.getValue(this.contextKeyService);if(e||t){t||this.contextKeyService.createKey(Nn.key,!0);const i=await this.getViewContainer(),o=new fL(new Am(this.remoteExplorerService,this.tunnelService),this.environmentService),n=$.as(Ot.ViewsRegistry);i&&(this.remoteExplorerService.enablePortsFeatures(!e),n.registerViews([o],i))}else this.contextKeyListener.value=this.contextKeyService.onDidChangeContext(i=>{i.affectsSome(new Set([...lw.keys(),...Nn.keys()]))&&this.enableForwardedPortsFeatures()})}enableBadgeAndStatusBar(){const e=$.as(Ot.ViewsRegistry).onViewsRegistered(t=>{t.find(i=>i.views.find(o=>o.id===Bn))&&(this._register(N.debounce(this.remoteExplorerService.tunnelModel.onForwardPort,(i,o)=>o,50)(()=>{this.updateActivityBadge(),this.updateStatusBar()})),this._register(N.debounce(this.remoteExplorerService.tunnelModel.onClosePort,(i,o)=>o,50)(()=>{this.updateActivityBadge(),this.updateStatusBar()})),this.updateActivityBadge(),this.updateStatusBar(),e.dispose())})}async updateActivityBadge(){this.remoteExplorerService.tunnelModel.forwarded.size>0&&(this.activityBadge.value=this.activityService.showViewActivity(Bn,{badge:new yo(this.remoteExplorerService.tunnelModel.forwarded.size,e=>e===1?d(8930,"1 forwarded port"):d(8931,"{0} forwarded ports",e))}))}updateStatusBar(){this.entryAccessor?this.entryAccessor.update(this.entry):this._register(this.entryAccessor=this.statusbarService.addEntry(this.entry,"status.forwardedPorts",0,40))}get entry(){let e;const t=this.remoteExplorerService.tunnelModel.forwarded.size+this.remoteExplorerService.tunnelModel.detected.size,i=`${t}`;if(t===0)e=d(8932,"No Ports Forwarded");else{const o=Array.from(this.remoteExplorerService.tunnelModel.forwarded.values());o.push(...Array.from(this.remoteExplorerService.tunnelModel.detected.values())),e=d(8933,"Forwarded Ports: {0}",o.map(n=>n.remotePort).join(", "))}return{name:d(8934,"Forwarded Ports"),text:`$(radio-tower) ${i}`,ariaLabel:e,tooltip:e,command:`${Bn}.focus`}}};ev=x([u(0,K),u(1,bt),u(2,nt),u(3,Qt),u(4,Wt),u(5,kn)],ev);let tv=class{constructor(e,t){this.remoteExplorerService=e,this.logService=t,this.remoteExplorerService.tunnelModel.environmentTunnelsSet?this.restore():N.once(this.remoteExplorerService.tunnelModel.onEnvironmentTunnelsSet)(async()=>{await this.restore()})}async restore(){return this.logService.trace("ForwardedPorts: Doing first restore."),this.remoteExplorerService.restore()}};tv=x([u(0,nt),u(1,Je)],tv);let iv=class extends R{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f,v){super(),this.terminalService=e,this.notificationService=t,this.openerService=i,this.externalOpenerService=o,this.remoteExplorerService=n,this.contextKeyService=r,this.configurationService=a,this.debugService=l,this.tunnelService=p,this.hostService=g,this.logService=m,this.storageService=f,this.preferencesService=v,s.remoteAuthority&&(a.whenRemoteConfigurationLoaded().then(()=>h.getEnvironment()).then(S=>{this.setup(S),this._register(a.onDidChangeConfiguration(E=>{E.affectsConfiguration(no)?this.setup(S):E.affectsConfiguration(Zc)&&!this.portListener&&this.listenForPorts()}))}),this.storageService.getBoolean("processPortForwardingFallback",1,!0)||this.configurationService.updateValue(Zc,0,5))}getPortAutoFallbackNumber(){const e=this.configurationService.inspect(Zc);if(e.value!==void 0&&(e.value===0||e.value!==e.defaultValue))return e.value;const t=this.configurationService.inspect(no);return t.applicationValue===oo||t.userValue===oo||t.userLocalValue===oo||t.userRemoteValue===oo||t.workspaceFolderValue===oo||t.workspaceValue===oo?0:e.value??20}listenForPorts(){var t,i;let e=this.getPortAutoFallbackNumber();if(e===0){(t=this.portListener)==null||t.dispose();return}this.procForwarder&&!this.portListener&&this.configurationService.getValue(no)===oo?this.portListener=this._register(this.remoteExplorerService.tunnelModel.onForwardPort(async()=>{var o;if(e=this.getPortAutoFallbackNumber(),e===0){(o=this.portListener)==null||o.dispose();return}Array.from(this.remoteExplorerService.tunnelModel.forwarded.values()).filter(n=>n.source.source===Zf.Auto).length>e&&(await this.configurationService.updateValue(no,Ip),this.notificationService.notify({message:d(8935,"Over 20 ports have been automatically forwarded. The `process` based automatic port forwarding has been switched to `hybrid` in settings. Some ports may no longer be detected."),severity:me.Warning,actions:{primary:[new de("switchBack",d(8936,"Undo"),void 0,!0,async()=>{var n;await this.configurationService.updateValue(no,oo),await this.configurationService.updateValue(Zc,0,5),(n=this.portListener)==null||n.dispose(),this.portListener=void 0}),new de("showPortSourceSetting",d(8937,"Show Setting"),void 0,!0,async()=>{await this.preferencesService.openSettings({query:"remote.autoForwardPortsSource"})})]}}))})):((i=this.portListener)==null||i.dispose(),this.portListener=void 0)}setup(e){var o,n,s,r;const t=(o=this.procForwarder)==null?void 0:o.forwarded,i=this.outputForwarder||this.procForwarder;if((n=this.procForwarder)==null||n.dispose(),this.procForwarder=void 0,(s=this.outputForwarder)==null||s.dispose(),this.outputForwarder=void 0,(e==null?void 0:e.os)!==3)((r=this.configurationService.inspect(no).default)==null?void 0:r.value)!==hw&&$.as(ks.Configuration).registerDefaultConfigurations([{overrides:{"remote.autoForwardPortsSource":hw}}]),this.outputForwarder=this._register(new ov(this.terminalService,this.notificationService,this.openerService,this.externalOpenerService,this.remoteExplorerService,this.configurationService,this.debugService,this.tunnelService,this.hostService,this.logService,this.contextKeyService,()=>!1));else{const a=()=>this.configurationService.getValue(no)===oo;a()?this.procForwarder=this._register(new nv(!1,t,!i,this.configurationService,this.remoteExplorerService,this.notificationService,this.openerService,this.externalOpenerService,this.tunnelService,this.hostService,this.logService,this.contextKeyService)):this.configurationService.getValue(no)===Ip&&(this.procForwarder=this._register(new nv(!0,t,!i,this.configurationService,this.remoteExplorerService,this.notificationService,this.openerService,this.externalOpenerService,this.tunnelService,this.hostService,this.logService,this.contextKeyService))),this.outputForwarder=this._register(new ov(this.terminalService,this.notificationService,this.openerService,this.externalOpenerService,this.remoteExplorerService,this.configurationService,this.debugService,this.tunnelService,this.hostService,this.logService,this.contextKeyService,a))}this.listenForPorts()}};iv=x([u(0,YI),u(1,He),u(2,It),u(3,SC),u(4,nt),u(5,bt),u(6,K),u(7,ZI),u(8,XI),u(9,JI),u(10,Qt),u(11,st),u(12,Je),u(13,ie),u(14,bn)],iv);const Yh=class Yh extends R{constructor(e,t,i,o,n,s,r,a){super(),this.notificationService=e,this.remoteExplorerService=t,this.openerService=i,this.externalOpenerService=o,this.tunnelService=n,this.hostService=s,this.logService=r,this.contextKeyService=a,this.alreadyOpenedOnce=new Set,this.lastNotifyTime=new Date,this.lastNotifyTime.setFullYear(this.lastNotifyTime.getFullYear()-1)}async doAction(e){var i,o;this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Starting action for ${(i=e[0])==null?void 0:i.tunnelRemotePort}`),this.doActionTunnels=e;const t=await this.portNumberHeuristicDelay();if(this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Heuristic chose ${t==null?void 0:t.tunnelRemotePort}`),t){const n=await this.remoteExplorerService.tunnelModel.getAttributes([{port:t.tunnelRemotePort,host:t.tunnelRemoteHost}]),s=(o=n==null?void 0:n.get(t.tunnelRemotePort))==null?void 0:o.onAutoForward;switch(this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) onAutoForward action is ${s}`),s){case qs.OpenBrowserOnce:{if(this.alreadyOpenedOnce.has(t.localAddress))break;this.alreadyOpenedOnce.add(t.localAddress)}case qs.OpenBrowser:{const r=Dt(t.tunnelRemoteHost,t.tunnelRemotePort);await jt.run(this.remoteExplorerService.tunnelModel,this.openerService,r);break}case qs.OpenPreview:{const r=Dt(t.tunnelRemoteHost,t.tunnelRemotePort);await Ai.run(this.remoteExplorerService.tunnelModel,this.openerService,this.externalOpenerService,r);break}case qs.Silent:break;default:{const r=new Date().getTime()-this.lastNotifyTime.getTime();this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) time elapsed since last notification ${r} ms`),r>Yh.NOTIFY_COOL_DOWN&&await this.showNotification(t)}}}}hide(e){var t;this.doActionTunnels&&(this.doActionTunnels=this.doActionTunnels.filter(i=>!e.includes(i.tunnelRemotePort))),this.lastShownPort&&e.indexOf(this.lastShownPort)>=0&&((t=this.lastNotification)==null||t.close())}async portNumberHeuristicDelay(){if(this.logService.trace("ForwardedPorts: (OnAutoForwardedAction) Starting heuristic delay"),!this.doActionTunnels||this.doActionTunnels.length===0)return;this.doActionTunnels=this.doActionTunnels.sort((t,i)=>t.tunnelRemotePort-i.tunnelRemotePort);const e=this.doActionTunnels.shift();return e.tunnelRemotePort%1e3===0?(this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Heuristic chose tunnel because % 1000: ${e.tunnelRemotePort}`),this.newerTunnel=e,e):e.tunnelRemotePort<1e4&&e.tunnelRemotePort!==9229?(this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Heuristic chose tunnel because < 10000: ${e.tunnelRemotePort}`),this.newerTunnel=e,e):(this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Waiting for "better" tunnel than ${e.tunnelRemotePort}`),this.newerTunnel=void 0,new Promise(t=>{setTimeout(()=>{var i;this.newerTunnel?t(void 0):(i=this.doActionTunnels)!=null&&i.includes(e)?t(e):t(void 0)},3e3)}))}async basicMessage(e){var o;const t=await this.remoteExplorerService.tunnelModel.getAttributes([{host:e.tunnelRemoteHost,port:e.tunnelRemotePort}],!1),i=(o=t==null?void 0:t.get(e.tunnelRemotePort))==null?void 0:o.label;return d(8938,"Your application{0} running on port {1} is available.  ",i?` (${i})`:"",e.tunnelRemotePort)}linkMessage(){return d(8939,"[See all forwarded ports]({0})",`command:${Gn.ID}.focus`)}async showNotification(e){var o;if(!await this.hostService.hadLastFocus())return;(o=this.lastNotification)==null||o.close();let t=await this.basicMessage(e);const i=[this.openBrowserChoice(e)];(!vt||cL.getValue(this.contextKeyService))&&i.push(this.openPreviewChoice(e)),e.tunnelLocalPort!==e.tunnelRemotePort&&this.tunnelService.canElevate&&this.tunnelService.isPortPrivileged(e.tunnelRemotePort)&&(t+=d(8940,"You'll need to run as superuser to use port {0} locally.  ",e.tunnelRemotePort),i.unshift(this.elevateChoice(e))),e.privacy===Md.Private&&vt&&this.tunnelService.canChangePrivacy&&i.push(this.makePublicChoice(e)),t+=this.linkMessage(),this.lastNotification=this.notificationService.prompt(me.Info,t,i,{neverShowAgain:{id:"remote.tunnelsView.autoForwardNeverShow",isSecondary:!0}}),this.lastShownPort=e.tunnelRemotePort,this.lastNotifyTime=new Date,this.lastNotification.onDidClose(()=>{this.lastNotification=void 0,this.lastShownPort=void 0})}makePublicChoice(e){return{label:d(8941,"Make Public"),run:async()=>{const t=rr(this.remoteExplorerService.tunnelModel.forwarded,e.tunnelRemoteHost,e.tunnelRemotePort);return await this.remoteExplorerService.close({host:e.tunnelRemoteHost,port:e.tunnelRemotePort},ys.Other),this.remoteExplorerService.forward({remote:{host:e.tunnelRemoteHost,port:e.tunnelRemotePort},local:e.tunnelLocalPort,name:t==null?void 0:t.name,elevateIfNeeded:!0,privacy:Md.Public,source:t==null?void 0:t.source})}}}openBrowserChoice(e){const t=Dt(e.tunnelRemoteHost,e.tunnelRemotePort);return{label:jt.LABEL,run:()=>jt.run(this.remoteExplorerService.tunnelModel,this.openerService,t)}}openPreviewChoice(e){const t=Dt(e.tunnelRemoteHost,e.tunnelRemotePort);return{label:Ai.LABEL,run:()=>Ai.run(this.remoteExplorerService.tunnelModel,this.openerService,this.externalOpenerService,t)}}elevateChoice(e){return{label:d(8942,"Use Port {0} as Sudo...",e.tunnelRemotePort),run:async()=>{var i;await this.remoteExplorerService.close({host:e.tunnelRemoteHost,port:e.tunnelRemotePort},ys.Other);const t=await this.remoteExplorerService.forward({remote:{host:e.tunnelRemoteHost,port:e.tunnelRemotePort},local:e.tunnelRemotePort,elevateIfNeeded:!0,source:Xf});!t||typeof t=="string"||((i=this.lastNotification)==null||i.close(),this.lastShownPort=t.tunnelRemotePort,this.lastNotification=this.notificationService.prompt(me.Info,await this.basicMessage(t)+this.linkMessage(),[this.openBrowserChoice(t),this.openPreviewChoice(e)],{neverShowAgain:{id:"remote.tunnelsView.autoForwardNeverShow",isSecondary:!0}}),this.lastNotification.onDidClose(()=>{this.lastNotification=void 0,this.lastShownPort=void 0}))}}}};Yh.NOTIFY_COOL_DOWN=5e3;let Gl=Yh;class ov extends R{constructor(e,t,i,o,n,s,r,a,l,h,p,g){super(),this.terminalService=e,this.notificationService=t,this.openerService=i,this.externalOpenerService=o,this.remoteExplorerService=n,this.configurationService=s,this.debugService=r,this.tunnelService=a,this.hostService=l,this.logService=h,this.contextKeyService=p,this.privilegedOnly=g,this.notifier=new Gl(t,n,i,o,a,l,h,p),this._register(s.onDidChangeConfiguration(m=>{m.affectsConfiguration(Da)&&this.tryStartStopUrlFinder()})),this.portsFeatures=this._register(this.remoteExplorerService.onEnabledPortsFeatures(()=>{this.tryStartStopUrlFinder()})),this.tryStartStopUrlFinder(),s.getValue(no)===Ip&&this._register(this.tunnelService.onTunnelClosed(m=>this.notifier.hide([m.port])))}tryStartStopUrlFinder(){this.configurationService.getValue(Da)?this.startUrlFinder():this.stopUrlFinder()}startUrlFinder(){var e;!this.urlFinder&&this.remoteExplorerService.portsFeaturesEnabled!==EC.AdditionalFeatures||((e=this.portsFeatures)==null||e.dispose(),this.urlFinder=this._register(new Lm(this.terminalService,this.debugService)),this._register(this.urlFinder.onDidMatchLocalUrl(async t=>{var n;if(rr(this.remoteExplorerService.tunnelModel.detected,t.host,t.port))return;const i=(n=await this.remoteExplorerService.tunnelModel.getAttributes([t]))==null?void 0:n.get(t.port);if((i==null?void 0:i.onAutoForward)===qs.Ignore||this.privilegedOnly()&&!this.tunnelService.isPortPrivileged(t.port))return;const o=await this.remoteExplorerService.forward({remote:t,source:Xf},i??null);o&&typeof o!="string"&&this.notifier.doAction([o])})))}stopUrlFinder(){this.urlFinder&&(this.urlFinder.dispose(),this.urlFinder=void 0)}}class nv extends R{constructor(e,t,i,o,n,s,r,a,l,h,p,g){super(),this.unforwardOnly=e,this.alreadyAutoForwarded=t,this.needsInitialCandidates=i,this.configurationService=o,this.remoteExplorerService=n,this.notificationService=s,this.openerService=r,this.externalOpenerService=a,this.tunnelService=l,this.hostService=h,this.logService=p,this.contextKeyService=g,this.autoForwarded=new Set,this.notifiedOnly=new Set,this.initialCandidates=new Set,this.notifier=new Gl(s,n,r,a,l,h,p,g),t==null||t.forEach(m=>this.autoForwarded.add(m)),this.initialize()}get forwarded(){return this.autoForwarded}async initialize(){this.remoteExplorerService.tunnelModel.environmentTunnelsSet||await new Promise(e=>this.remoteExplorerService.tunnelModel.onEnvironmentTunnelsSet(()=>e())),this._register(this.configurationService.onDidChangeConfiguration(async e=>{e.affectsConfiguration(Da)&&await this.startStopCandidateListener()})),this.portsFeatures=this._register(this.remoteExplorerService.onEnabledPortsFeatures(async()=>{await this.startStopCandidateListener()})),this.startStopCandidateListener()}async startStopCandidateListener(){this.configurationService.getValue(Da)?await this.startCandidateListener():this.stopCandidateListener()}stopCandidateListener(){this.candidateListener&&(this.candidateListener.dispose(),this.candidateListener=void 0)}async startCandidateListener(){var e;this.candidateListener||this.remoteExplorerService.portsFeaturesEnabled!==EC.AdditionalFeatures||((e=this.portsFeatures)==null||e.dispose(),await this.setInitialCandidates(),this.configurationService.getValue(Da)&&(this.candidateListener=this._register(this.remoteExplorerService.tunnelModel.onCandidatesChanged(this.handleCandidateUpdate,this))))}async setInitialCandidates(){if(!this.needsInitialCandidates){this.logService.debug("ForwardedPorts: (ProcForwarding) Not setting initial candidates");return}let e=this.remoteExplorerService.tunnelModel.candidatesOrUndefined;e||(await new Promise(t=>this.remoteExplorerService.tunnelModel.onCandidatesChanged(()=>t())),e=this.remoteExplorerService.tunnelModel.candidates);for(const t of e)this.initialCandidates.add(Dt(t.host,t.port));this.logService.debug(`ForwardedPorts: (ProcForwarding) Initial candidates set to ${e.map(t=>t.port).join(", ")}`)}async forwardCandidates(){let e;const t=[];this.logService.trace(`ForwardedPorts: (ProcForwarding) Attempting to forward ${this.remoteExplorerService.tunnelModel.candidates.length} candidates`);for(const i of this.remoteExplorerService.tunnelModel.candidates){if(!i.detail){this.logService.trace(`ForwardedPorts: (ProcForwarding) Port ${i.port} missing detail`);continue}e||(e=await this.remoteExplorerService.tunnelModel.getAttributes(this.remoteExplorerService.tunnelModel.candidates));const o=e==null?void 0:e.get(i.port),n=Dt(i.host,i.port);if(this.initialCandidates.has(n)&&(o==null?void 0:o.onAutoForward)===void 0||this.notifiedOnly.has(n)||this.autoForwarded.has(n))continue;const s=rr(this.remoteExplorerService.tunnelModel.forwarded,i.host,i.port);if(rr(this.remoteExplorerService.tunnelModel.detected,i.host,i.port))continue;if((o==null?void 0:o.onAutoForward)===qs.Ignore){this.logService.trace(`ForwardedPorts: (ProcForwarding) Port ${i.port} is ignored`);continue}const r=await this.remoteExplorerService.forward({remote:i,source:Xf},o??null);!s&&r?(this.logService.trace(`ForwardedPorts: (ProcForwarding) Port ${i.port} has been forwarded`),this.autoForwarded.add(n)):r&&(this.logService.trace(`ForwardedPorts: (ProcForwarding) Port ${i.port} has been notified`),this.notifiedOnly.add(n)),r&&typeof r!="string"&&t.push(r)}if(this.logService.trace(`ForwardedPorts: (ProcForwarding) Forwarded ${t.length} candidates`),t.length!==0)return t}async handleCandidateUpdate(e){const t=[];let i;if(this.unforwardOnly){i=new Map;for(const n of this.remoteExplorerService.tunnelModel.forwarded.entries())n[1].source.source===Zf.Auto&&i.set(n[0],n[1])}else i=new Map(this.autoForwarded.entries());for(const n of e){const s=n[0];let r=n[1];const a=rr(i,r.host,r.port);a?(typeof a=="string"?this.autoForwarded.delete(s):r={host:a.remoteHost,port:a.remotePort},await this.remoteExplorerService.close(r,ys.AutoForwardEnd),t.push(r.port)):this.notifiedOnly.has(s)?(this.notifiedOnly.delete(s),t.push(r.port)):this.initialCandidates.has(s)&&this.initialCandidates.delete(s)}if(this.unforwardOnly)return;t.length>0&&await this.notifier.hide(t);const o=await this.forwardCandidates();o&&await this.notifier.doAction(o)}}const sv="workbench.view.scm";var rv;(function(c){c[c.HistoryPrevious=0]="HistoryPrevious",c[c.HistoryNext=1]="HistoryNext"})(rv||(rv={}));var Pm;const rp={webviewState:"webviewState"};var hr;let Rm=(hr=class extends fu{static getOriginStore(e){return this._originStore??(this._originStore=new QI("webviewViews.origins",e)),this._originStore}constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f,v,S,E,D){super({...e,titleMenuId:b.ViewTitle,showActions:eD.WhenExpanded},s,o,t,i,p,n,r,h,a,l),this.activityService=g,this.extensionService=m,this.progressService=f,this.storageService=v,this.viewService=S,this.webviewService=E,this.webviewViewService=D,this._webview=this._register(new Se),this._webviewDisposables=this._register(new P),this._activated=!1,this.activity=this._register(new Se),this._onDidChangeVisibility=this._register(new I),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._onDispose=this._register(new I),this.onDispose=this._onDispose.event,this.extensionId=e.fromExtensionId,this.defaultTitle=this.title,this.memento=new Oy(`webviewView.${this.id}`,v),this.viewState=this.memento.getMemento(1,1),this._register(this.onDidChangeBodyVisibility(()=>this.updateTreeVisibility())),this._register(this.webviewViewService.onNewResolverRegistered(V=>{V.viewType===this.id&&this.updateTreeVisibility()})),this.updateTreeVisibility()}dispose(){this._onDispose.fire(),clearTimeout(this._repositionTimeout),super.dispose()}focus(){var e;super.focus(),(e=this._webview.value)==null||e.focus()}renderBody(e){super.renderBody(e),this._container=e,this._rootContainer=void 0,this._resizeObserver||(this._resizeObserver=new ResizeObserver(()=>{setTimeout(()=>{this.layoutWebview()},0)}),this._register(ne(()=>{this._resizeObserver.disconnect()})),this._resizeObserver.observe(e))}saveState(){this._webview.value&&(this.viewState[rp.webviewState]=this._webview.value.state),this.memento.saveMemento(),super.saveState()}layoutBody(e,t){super.layoutBody(e,t),this.layoutWebview(new he(t,e))}updateTreeVisibility(){var e,t;this.isBodyVisible()?(this.activate(),(e=this._webview.value)==null||e.claim(this,fe(this.element),void 0)):(t=this._webview.value)==null||t.release(this)}activate(){if(this._activated)return;this._activated=!0;const e=this.extensionId?Pm.getOriginStore(this.storageService).getOrigin(this.id,this.extensionId):void 0,t=this.webviewService.createWebviewOverlay({origin:e,providedViewType:this.id,title:this.title,options:{purpose:"webviewView"},contentOptions:{},extension:this.extensionId?{id:this.extensionId}:void 0});t.state=this.viewState[rp.webviewState],this._webview.value=t,this._container&&this.layoutWebview(),this._webviewDisposables.add(ne(()=>{var o;(o=this._webview.value)==null||o.release(this)})),this._webviewDisposables.add(t.onDidUpdateState(()=>{this.viewState[rp.webviewState]=t.state}));for(const o of[B.DRAG,B.DRAG_END,B.DRAG_ENTER,B.DRAG_LEAVE,B.DRAG_START])this._webviewDisposables.add(L(this._webview.value.container,o,n=>{n.preventDefault(),n.stopImmediatePropagation(),this.dropTargetElement.dispatchEvent(new DragEvent(n.type,n))}));this._webviewDisposables.add(new tD(fe(this.element),()=>this._webview.value));const i=this._webviewDisposables.add(new ko);this.withProgress(async()=>{await this.extensionService.activateByEvent(`onView:${this.id}`);const o=this,n={webview:t,onDidChangeVisibility:this.onDidChangeBodyVisibility,onDispose:this.onDispose,get title(){return o.setTitle},set title(s){o.updateTitle(s)},get description(){return o.titleDescription},set description(s){o.updateTitleDescription(s)},get badge(){return o.badge},set badge(s){o.updateBadge(s)},dispose:()=>{this._activated=!1,this._webview.clear(),this._webviewDisposables.clear()},show:s=>{this.viewService.openView(this.id,!s)}};await this.webviewViewService.resolve(this.id,n,i.token)})}updateTitle(e){this.setTitle=e,super.updateTitle(typeof e=="string"?e:this.defaultTitle)}updateBadge(e){var t,i;if(!(((t=this.badge)==null?void 0:t.value)===(e==null?void 0:e.value)&&((i=this.badge)==null?void 0:i.tooltip)===(e==null?void 0:e.tooltip))&&(this.badge=e,e)){const o={badge:new yo(e.value,()=>e.tooltip),priority:150};this.activity.value=this.activityService.showViewActivity(this.id,o)}}async withProgress(e){return this.progressService.withProgress({location:this.id,delay:500},e)}onDidScrollRoot(){this.layoutWebview()}doLayoutWebview(e){const t=this._webview.value;!this._container||!t||((!this._rootContainer||!this._rootContainer.isConnected)&&(this._rootContainer=this.findRootContainer(this._container)),t.layoutWebviewOverElement(this._container,e,this._rootContainer))}layoutWebview(e){this.doLayoutWebview(e),clearTimeout(this._repositionTimeout),this._repositionTimeout=setTimeout(()=>this.doLayoutWebview(e),200)}findRootContainer(e){return Id(e,"monaco-scrollable-element")??void 0}},Pm=hr,hr);Rm=Pm=x([u(1,F),u(2,K),u(3,Ve),u(4,O),u(5,xe),u(6,It),u(7,Be),u(8,Xe),u(9,te),u(10,Te),u(11,Wt),u(12,Vt),u(13,Ic),u(14,ie),u(15,it),u(16,Ds),u(17,kC)],Rm);const av={type:"object",properties:{id:{description:d(4251,"Unique id used to identify the container in which views can be contributed using 'views' contribution point"),type:"string",pattern:"^[a-zA-Z0-9_-]+$"},title:{description:d(4252,"Human readable string used to render the container"),type:"string"},icon:{description:d(4253,"Path to the container icon. Icons are 24x24 centered on a 50x40 block and have a fill color of 'rgb(215, 218, 224)' or '#d7dae0'. It is recommended that icons be in SVG, though any image file type is accepted."),type:"string"}},required:["id","title","icon"]},vL={description:d(4254,"Contributes views containers to the editor"),type:"object",properties:{activitybar:{description:d(4255,"Contribute views containers to Activity Bar"),type:"array",items:av},panel:{description:d(4256,"Contribute views containers to Panel"),type:"array",items:av}}};var Oo;(function(c){c.Tree="tree",c.Webview="webview"})(Oo||(Oo={}));var js;(function(c){c.Visible="visible",c.Hidden="hidden",c.Collapsed="collapsed"})(js||(js={}));const ha={type:"object",required:["id","name"],defaultSnippets:[{body:{id:"${1:id}",name:"${2:name}"}}],properties:{type:{markdownDescription:d(4257,"Type of the view. This can either be `tree` for a tree view based view or `webview` for a webview based view. The default is `tree`."),type:"string",enum:["tree","webview"],markdownEnumDescriptions:[d(4258,"The view is backed by a `TreeView` created by `createTreeView`."),d(4259,"The view is backed by a `WebviewView` registered by `registerWebviewViewProvider`.")]},id:{markdownDescription:d(4260,"Identifier of the view. This should be unique across all views. It is recommended to include your extension id as part of the view id. Use this to register a data provider through `vscode.window.registerTreeDataProviderForView` API. Also to trigger activating your extension by registering `onView:${id}` event to `activationEvents`."),type:"string"},name:{description:d(4261,"The human-readable name of the view. Will be shown"),type:"string"},when:{description:d(4262,"Condition which must be true to show this view"),type:"string"},icon:{description:d(4263,"Path to the view icon. View icons are displayed when the name of the view cannot be shown. It is recommended that icons be in SVG, though any image file type is accepted."),type:"string"},contextualTitle:{description:d(4264,"Human-readable context for when the view is moved out of its original location. By default, the view's container name will be used."),type:"string"},visibility:{description:d(4265,"Initial state of the view when the extension is first installed. Once the user has changed the view state by collapsing, moving, or hiding the view, the initial state will not be used again."),type:"string",enum:["visible","hidden","collapsed"],default:"visible",enumDescriptions:[d(4266,"The default initial state for the view. In most containers the view will be expanded, however; some built-in containers (explorer, scm, and debug) show all contributed views collapsed regardless of the `visibility`."),d(4267,"The view will not be shown in the view container, but will be discoverable through the views menu and other view entry points and can be un-hidden by the user."),d(4268,"The view will show in the view container, but will be collapsed.")]},initialSize:{type:"number",description:d(4269,"The initial size of the view. The size will behave like the css 'flex' property, and will set the initial size when the view is first shown. In the side bar, this is the height of the view. This value is only respected when the same extension owns both the view and the view container.")},accessibilityHelpContent:{type:"string",markdownDescription:d(4270,"When the accessibility help dialog is invoked in this view, this content will be presented to the user as a markdown string. Keybindings will be resolved when provided in the format of <keybinding:commandId>. If there is no keybinding, that will be indicated and this command will be included in a quickpick for easy configuration.")}}},yL={type:"object",required:["id","name"],properties:{id:{description:d(4260,"Identifier of the view. This should be unique across all views. It is recommended to include your extension id as part of the view id. Use this to register a data provider through `vscode.window.registerTreeDataProviderForView` API. Also to trigger activating your extension by registering `onView:${id}` event to `activationEvents`."),type:"string"},name:{description:d(4261,"The human-readable name of the view. Will be shown"),type:"string"},when:{description:d(4262,"Condition which must be true to show this view"),type:"string"},group:{description:d(4271,"Nested group in the viewlet"),type:"string"},remoteName:{description:d(4272,"The name of the remote type associated with this view"),type:["string","array"],items:{type:"string"}}}},CL={description:d(4273,"Contributes views to the editor"),type:"object",properties:{explorer:{description:d(4274,"Contributes views to Explorer container in the Activity bar"),type:"array",items:ha,default:[]},debug:{description:d(4275,"Contributes views to Debug container in the Activity bar"),type:"array",items:ha,default:[]},scm:{description:d(4276,"Contributes views to SCM container in the Activity bar"),type:"array",items:ha,default:[]},test:{description:d(4277,"Contributes views to Test container in the Activity bar"),type:"array",items:ha,default:[]},remote:{description:d(4278,"Contributes views to Remote container in the Activity bar. To contribute to this container, enableProposedApi needs to be turned on"),type:"array",items:yL,default:[]}},additionalProperties:{description:d(4279,"Contributes views to contributed views container"),type:"array",items:ha,default:[]}},fE=Hf.registerExtensionPoint({extensionPoint:"viewsContainers",jsonSchema:vL}),SL=Hf.registerExtensionPoint({extensionPoint:"views",deps:[fE],jsonSchema:CL,activationEventsGenerator:(c,e)=>{for(const t of c)for(const i of Object.values(t))for(const o of i)o.id&&e.push(`onView:${o.id}`)}}),EL=7;var ur;let Wl=(ur=class{constructor(e,t){this.instantiationService=e,this.logService=t,this.viewContainersRegistry=$.as(Ot.ViewContainersRegistry),this.viewsRegistry=$.as(Ot.ViewsRegistry),this.handleAndRegisterCustomViewContainers(),this.handleAndRegisterCustomViews()}handleAndRegisterCustomViewContainers(){fE.setHandler((e,{added:t,removed:i})=>{i.length&&this.removeCustomViewContainers(i),t.length&&this.addCustomViewContainers(t,this.viewContainersRegistry.all)})}addCustomViewContainers(e,t){const i=$.as(Ot.ViewContainersRegistry);let o=EL+i.all.filter(s=>!!s.extensionId&&i.getViewContainerLocation(s)===0).length,n=5+i.all.filter(s=>!!s.extensionId&&i.getViewContainerLocation(s)===1).length+1;for(const{value:s,collector:r,description:a}of e)Object.entries(s).forEach(([l,h])=>{if(this.isValidViewsContainer(h,r))switch(l){case"activitybar":o=this.registerCustomViewContainers(h,a,o,t,0);break;case"panel":n=this.registerCustomViewContainers(h,a,n,t,1);break}})}removeCustomViewContainers(e){const t=$.as(Ot.ViewContainersRegistry),i=e.reduce((o,n)=>(o.add(n.description.identifier),o),new uw);for(const o of t.all)if(o.extensionId&&i.has(o.extensionId)){const n=this.viewsRegistry.getViews(o);n.length&&this.viewsRegistry.moveViews(n,this.getDefaultViewContainer()),this.deregisterCustomViewContainer(o)}}isValidViewsContainer(e,t){if(!Array.isArray(e))return t.error(d(4280,"views containers must be an array")),!1;for(const i of e){if(typeof i.id!="string"&&_p(i.id))return t.error(d(4281,"property `{0}` is mandatory and must be of type `string` with non-empty value. Only alphanumeric characters, '_', and '-' are allowed.","id")),!1;if(!/^[a-z0-9_-]+$/i.test(i.id))return t.error(d(4281,"property `{0}` is mandatory and must be of type `string` with non-empty value. Only alphanumeric characters, '_', and '-' are allowed.","id")),!1;if(typeof i.title!="string")return t.error(d(4282,"property `{0}` is mandatory and must be of type `string`","title")),!1;if(typeof i.icon!="string")return t.error(d(4282,"property `{0}` is mandatory and must be of type `string`","icon")),!1;if(_p(i.title))return t.warn(d(4283,"property `{0}` is mandatory and must be of type `string` with non-empty value","title")),!0}return!0}registerCustomViewContainers(e,t,i,o,n){return e.forEach(s=>{const a=oe.fromString(s.icon)||pw(t.extensionLocation,s.icon),l=`workbench.view.extension.${s.id}`,h=s.title||l,p=this.registerCustomViewContainer(l,h,a,i++,t.identifier,n);if(o.length){const g=[];for(const m of o)p!==m&&g.push(...this.viewsRegistry.getViews(m).filter(f=>f.originalContainerId===s.id));g.length&&this.viewsRegistry.moveViews(g,p)}}),i}registerCustomViewContainer(e,t,i,o,n,s){let r=this.viewContainersRegistry.get(e);return r||(r=this.viewContainersRegistry.registerViewContainer({id:e,title:{value:t,original:t},extensionId:n,ctorDescriptor:new ce(Lc,[e,{mergeViewWithContainerWhenSingleView:!0}]),hideIfEmpty:!0,order:o,icon:i},s)),r}deregisterCustomViewContainer(e){this.viewContainersRegistry.deregisterViewContainer(e),$.as($i.Viewlets).deregisterPaneComposite(e.id)}handleAndRegisterCustomViews(){SL.setHandler((e,{added:t,removed:i})=>{i.length&&this.removeViews(i),t.length&&this.addViews(t)})}addViews(e){const t=new Set,i=[];for(const o of e){const{value:n,collector:s}=o;Object.entries(n).forEach(([r,a])=>{var g;if(!this.isValidViewDescriptors(a,s))return;if(r==="remote"&&!gw(o.description,"contribViewsRemote")){s.warn(d(4284,`View container '{0}' requires 'enabledApiProposals: ["contribViewsRemote"]' to be added to 'Remote'.`,r));return}const l=this.getViewContainer(r);l||s.warn(d(4285,"View container '{0}' does not exist and all views registered to it will be added to 'Explorer'.",r));const h=l||this.getDefaultViewContainer(),p=[];for(let m=0;m<a.length;m++){const f=a[m];if(t.has(f.id)){s.error(d(4286,"Cannot register multiple views with same id `{0}`",f.id));continue}if(this.viewsRegistry.getView(f.id)!==null){s.error(d(4287,"A view with id `{0}` is already registered.",f.id));continue}const v=_C.equals(o.description.identifier,h.extensionId)?m+1:h.viewOrderDelegate?h.viewOrderDelegate.getOrder(f.group):void 0;let S;typeof f.icon=="string"&&(S=oe.fromString(f.icon)||pw(o.description.extensionLocation,f.icon));const E=this.convertInitialVisibility(f.visibility),D=this.getViewType(f.type);if(!D){s.error(d(4288,"Unknown view type `{0}`.",f.type));continue}let V;typeof f.initialSize=="number"&&(((g=h.extensionId)==null?void 0:g.value)===o.description.identifier.value?V=f.initialSize:this.logService.warn(`${o.description.identifier.value} tried to set the view size of ${f.id} but it was ignored because the view container does not belong to it.`));let M;gw(o.description,"contribAccessibilityHelpContent")&&f.accessibilityHelpContent&&(M=new _c(f.accessibilityHelpContent));const J={type:D,ctorDescriptor:D===Oo.Tree?new ce(Em):new ce(Rm),id:f.id,name:{value:f.name,original:f.name},when:y.deserialize(f.when),containerIcon:S||(l==null?void 0:l.icon),containerTitle:f.contextualTitle||l&&(typeof l.title=="string"?l.title:l.title.value),canToggleVisibility:!0,canMoveView:(l==null?void 0:l.id)!==sp,treeView:D===Oo.Tree?this.instantiationService.createInstance(xm,f.id,f.name,o.description.identifier.value):void 0,collapsed:this.showCollapsed(h)||E===js.Collapsed,order:v,extensionId:o.description.identifier,originalContainerId:r,group:f.group,remoteAuthority:f.remoteName||f.remoteAuthority,virtualWorkspace:f.virtualWorkspace,hideByDefault:E===js.Hidden,workspace:(l==null?void 0:l.id)===sp?!0:void 0,weight:V,accessibilityHelpContent:M};t.add(J.id),p.push(J)}i.push({viewContainer:h,views:p})})}this.viewsRegistry.registerViews2(i)}getViewType(e){if(e===Oo.Webview)return Oo.Webview;if(!e||e===Oo.Tree)return Oo.Tree}getDefaultViewContainer(){return this.viewContainersRegistry.get(Aa)}removeViews(e){const t=e.reduce((i,o)=>(i.add(o.description.identifier),i),new uw);for(const i of this.viewContainersRegistry.all){const o=this.viewsRegistry.getViews(i).filter(n=>n.extensionId&&t.has(n.extensionId));if(o.length){this.viewsRegistry.deregisterViews(o,i);for(const n of o){const s=n;s.treeView&&s.treeView.dispose()}}}}convertInitialVisibility(e){if(Object.values(js).includes(e))return e}isValidViewDescriptors(e,t){if(!Array.isArray(e))return t.error(d(4289,"views must be an array")),!1;for(const i of e){if(typeof i.id!="string")return t.error(d(4282,"property `{0}` is mandatory and must be of type `string`","id")),!1;if(typeof i.name!="string")return t.error(d(4282,"property `{0}` is mandatory and must be of type `string`","name")),!1;if(i.when&&typeof i.when!="string")return t.error(d(4290,"property `{0}` can be omitted or must be of type `string`","when")),!1;if(i.icon&&typeof i.icon!="string")return t.error(d(4290,"property `{0}` can be omitted or must be of type `string`","icon")),!1;if(i.contextualTitle&&typeof i.contextualTitle!="string")return t.error(d(4290,"property `{0}` can be omitted or must be of type `string`","contextualTitle")),!1;if(i.visibility&&!this.convertInitialVisibility(i.visibility))return t.error(d(4291,"property `{0}` can be omitted or must be one of {1}","visibility",Object.values(js).join(", "))),!1}return!0}getViewContainer(e){switch(e){case"explorer":return this.viewContainersRegistry.get(Aa);case"debug":return this.viewContainersRegistry.get(mw);case"scm":return this.viewContainersRegistry.get(sv);case"remote":return this.viewContainersRegistry.get(sp);default:return this.viewContainersRegistry.get(`workbench.view.extension.${e}`)}}showCollapsed(e){switch(e.id){case Aa:case sv:case mw:return!0}return!1}},ur.ID="workbench.contrib.viewsExtensionHandler",ur);Wl=x([u(0,O),u(1,Je)],Wl);class kL extends R{constructor(){super(...arguments),this.type="table"}shouldRender(e){var t;return!!((t=e.contributes)!=null&&t.viewsContainers)}render(e){var s;const t=((s=e.contributes)==null?void 0:s.viewsContainers)||{},i=Object.keys(t).reduce((r,a)=>{const l=t[a];return r.push(...l.map(h=>({...h,location:a}))),r},[]);if(!i.length)return{data:{headers:[],rows:[]},dispose:()=>{}};const o=[d(4292,"ID"),d(4293,"Title"),d(4294,"Where")],n=i.sort((r,a)=>r.id.localeCompare(a.id)).map(r=>[r.id,r.title,r.location]);return{data:{headers:o,rows:n},dispose:()=>{}}}}class _L extends R{constructor(){super(...arguments),this.type="table"}shouldRender(e){var t;return!!((t=e.contributes)!=null&&t.views)}render(e){var s;const t=((s=e.contributes)==null?void 0:s.views)||{},i=Object.keys(t).reduce((r,a)=>{const l=t[a];return r.push(...l.map(h=>({...h,location:a}))),r},[]);if(!i.length)return{data:{headers:[],rows:[]},dispose:()=>{}};const o=[d(4295,"ID"),d(4296,"Name"),d(4294,"Where")],n=i.sort((r,a)=>r.id.localeCompare(a.id)).map(r=>[r.id,r.name,r.location]);return{data:{headers:o,rows:n},dispose:()=>{}}}}$.as(zf.ExtensionFeaturesRegistry).registerExtensionFeature({id:"viewsContainers",label:d(4297,"View Containers"),access:{canToggle:!1},renderer:new ce(kL)});$.as(zf.ExtensionFeaturesRegistry).registerExtensionFeature({id:"views",label:d(4298,"Views"),access:{canToggle:!1},renderer:new ce(_L)});Mt(Wl.ID,Wl,1);class bE extends xC{constructor(){super(...arguments),this.editorControl=void 0}get scopedContextKeyService(){var e;return(e=this.editorControl)==null?void 0:e.invokeWithinContext(t=>t.get(K))}getTitle(){return this.input?this.input.getName():d(11063,"Text Editor")}createEditorControl(e,t){this.editorControl=this._register(this.instantiationService.createInstance(IC,e,t,this.getCodeEditorWidgetOptions()))}getCodeEditorWidgetOptions(){return Object.create(null)}updateEditorControlOptions(e){var t;(t=this.editorControl)==null||t.updateOptions(e)}getMainControl(){return this.editorControl}getControl(){return this.editorControl}computeEditorViewState(e){if(!this.editorControl)return;const t=this.editorControl.getModel();if(!t)return;const i=t.uri;if(i&&ot(i,e))return this.editorControl.saveViewState()??void 0}setOptions(e){super.setOptions(e),e&&Fc(e,ae(this.editorControl),0)}focus(){var e;super.focus(),(e=this.editorControl)==null||e.focus()}hasFocus(){var e;return((e=this.editorControl)==null?void 0:e.hasTextFocus())||super.hasFocus()}setEditorVisible(e){var t,i;super.setEditorVisible(e),e?(t=this.editorControl)==null||t.onVisible():(i=this.editorControl)==null||i.onHide()}layout(e){var t;(t=this.editorControl)==null||t.layout(e)}}var Bm;let Om=class extends bE{constructor(e,t,i,o,n,s,r,a,l,h){super(e,t,i,o,n,s,r,l,a,h)}async setInput(e,t,i,o){await super.setInput(e,t,i,o);const n=await e.resolve();if(o.isCancellationRequested)return;if(!(n instanceof iD))throw new Error("Unable to open file as text");const s=ae(this.editorControl),r=n.textEditorModel;if(s.setModel(r),!DC(t==null?void 0:t.viewState)){const a=this.loadEditorViewState(e,i);a&&(t!=null&&t.selection&&(a.cursorState=[]),s.restoreViewState(a))}t&&Fc(t,s,1),s.updateOptions(this.getReadonlyConfiguration(n.isReadonly()))}revealLastLine(){const e=this.editorControl;if(!e)return;const t=e.getModel();if(t){const i=t.getLineCount();e.revealPosition({lineNumber:i,column:t.getLineMaxColumn(i)},0)}}clearInput(){var e;super.clearInput(),(e=this.editorControl)==null||e.setModel(null)}tracksEditorViewState(e){return e instanceof Xi||e instanceof AC}};Om=x([u(2,Be),u(3,O),u(4,ie),u(5,_s),u(6,te),u(7,Z),u(8,U),u(9,Oe)],Om);var ds;let Hl=(ds=class extends Om{constructor(e,t,i,o,n,s,r,a,l,h,p){super(Bm.ID,e,t,i,o,n,s,a,r,p),this.modelService=l,this.languageService=h}createEditorControl(e,t){super.createEditorControl(e,t);const i=this.editorControl;i&&this._register(i.onDidPaste(o=>this.onDidEditorPaste(o,i)))}onDidEditorPaste(e,t){if(this.input instanceof Xi&&this.input.hasLanguageSetExplicitly||e.range.startLineNumber!==1||e.range.startColumn!==1||t.getOption(94))return;const i=t.getModel();if(!i||!(i.getLineCount()===e.range.endLineNumber&&i.getLineMaxColumn(e.range.endLineNumber)===e.range.endColumn)||i.getLanguageId()!==Td)return;let s;if(e.languageId)s={id:e.languageId,source:"event"};else{const r=this.languageService.guessLanguageIdByFilepathOrFirstLine(i.uri,i.getLineContent(1).substr(0,1e3))??void 0;r&&(s={id:r,source:"guess"})}if(s&&s.id!==Td){this.input instanceof Xi&&s.source==="event"?this.input.setLanguageId(s.id):i.setLanguage(this.languageService.createById(s.id));const r=this.modelService.getCreationOptions(i.getLanguageId(),i.uri,i.isForSimpleWidget);i.detectIndentation(r.insertSpaces,r.tabSize)}}},Bm=ds,ds.ID="workbench.editors.textResourceEditor",ds);Hl=Bm=x([u(1,Be),u(2,O),u(3,ie),u(4,_s),u(5,te),u(6,U),u(7,Z),u(8,wc),u(9,Zr),u(10,Oe)],Hl);let uo=class extends Gr{constructor(e,t,i,o,n,s){super(e,t,o,n,s),this.callbacks=i,this._onDidChangeMetadata=this._register(new I),this.onDidChangeMetadata=this._onDidChangeMetadata.event,this._onDidOpenInPlace=this._register(new I),this.onDidOpenInPlace=this._onDidOpenInPlace.event}getTitle(){return this.input?this.input.getName():d(11480,"Binary Viewer")}async getContents(e,t){const i=await e.resolve();if(!(i instanceof sS))throw new Error("Unable to open file as binary");const o=i.getSize();return this.handleMetadataChanged(typeof o=="number"?Jf.formatSize(o):""),{icon:"$(warning)",label:d(11481,"The file is not displayed in the text editor because it is either binary or uses an unsupported text encoding."),actions:[{label:d(11482,"Open Anyway"),run:async()=>{await this.callbacks.openInternal(e,t),this._onDidOpenInPlace.fire()}}]}}handleMetadataChanged(e){this.metadata=e,this._onDidChangeMetadata.fire()}getMetadata(){return this.metadata}};uo=x([u(5,ie)],uo);var pr;let Wn=(pr=class extends Dp{constructor(e,t,i,o,n,s,r,a,l){super(e,t,i,o,n,s,r,a,l)}getMetadata(){const e=this.getPrimaryEditorPane(),t=this.getSecondaryEditorPane();if(e instanceof uo&&t instanceof uo)return d(9728,"{0}  {1}",t.getMetadata(),e.getMetadata())}},pr.ID=oD,pr);Wn=x([u(1,Be),u(2,O),u(3,te),u(4,ie),u(5,F),u(6,_s),u(7,U),u(8,Z)],Wn);var xL=".monaco-workbench .screen-reader-detected-explanation{cursor:default;padding:1em;right:6px;top:30px;width:420px}.monaco-workbench .screen-reader-detected-explanation .cancel{border:none;cursor:pointer;height:22px;padding:.5em;position:absolute;right:0;top:0;width:22px}.monaco-workbench .screen-reader-detected-explanation h2{font-size:1.8em;font-weight:400;margin:0;padding:0}.monaco-workbench .screen-reader-detected-explanation p{font-size:1.2em}.monaco-workbench .screen-reader-detected-explanation hr{border:0;height:2px}.monaco-workbench .screen-reader-detected-explanation .buttons{display:flex}.monaco-workbench .screen-reader-detected-explanation .buttons a{font-size:13px;margin-right:5px;max-width:fit-content;padding-left:12px;padding-right:12px}";we(xL,{});var Nm;class IL{constructor(e,t){this.primary=e,this.secondary=t}getEncoding(){return this.primary.getEncoding()}async setEncoding(e,t){await Nf.settled([this.primary,this.secondary].map(i=>i.setEncoding(e,t)))}}class DL{constructor(e,t){this.primary=e,this.secondary=t}setLanguageId(e,t){[this.primary,this.secondary].forEach(i=>i.setLanguageId(e,t))}}function pc(c){if(c instanceof Xi)return c;if(c instanceof ri){const t=pc(c.primary),i=pc(c.secondary);return t&&i?new IL(t,i):t}const e=c;return wD(e.setEncoding,e.getEncoding)?e:null}function zl(c){if(c instanceof Xi)return c;if(c instanceof ri){const t=zl(c.primary),i=zl(c.secondary);return t&&i?new DL(t,i):t}const e=c;return typeof e.setLanguageId=="function"?e:null}class AL{constructor(){this.indentation=!1,this.selectionStatus=!1,this.languageId=!1,this.languageStatus=!1,this.encoding=!1,this.EOL=!1,this.tabFocusMode=!1,this.columnSelectionMode=!1,this.metadata=!1}combine(e){this.indentation=this.indentation||e.indentation,this.selectionStatus=this.selectionStatus||e.selectionStatus,this.languageId=this.languageId||e.languageId,this.languageStatus=this.languageStatus||e.languageStatus,this.encoding=this.encoding||e.encoding,this.EOL=this.EOL||e.EOL,this.tabFocusMode=this.tabFocusMode||e.tabFocusMode,this.columnSelectionMode=this.columnSelectionMode||e.columnSelectionMode,this.metadata=this.metadata||e.metadata}hasChanges(){return this.indentation||this.selectionStatus||this.languageId||this.languageStatus||this.encoding||this.EOL||this.tabFocusMode||this.columnSelectionMode||this.metadata}}class TL{get selectionStatus(){return this._selectionStatus}get languageId(){return this._languageId}get encoding(){return this._encoding}get EOL(){return this._EOL}get indentation(){return this._indentation}get tabFocusMode(){return this._tabFocusMode}get columnSelectionMode(){return this._columnSelectionMode}get metadata(){return this._metadata}update(e){const t=new AL;switch(e.type){case"selectionStatus":this._selectionStatus!==e.selectionStatus&&(this._selectionStatus=e.selectionStatus,t.selectionStatus=!0);break;case"indentation":this._indentation!==e.indentation&&(this._indentation=e.indentation,t.indentation=!0);break;case"languageId":this._languageId!==e.languageId&&(this._languageId=e.languageId,t.languageId=!0);break;case"encoding":this._encoding!==e.encoding&&(this._encoding=e.encoding,t.encoding=!0);break;case"EOL":this._EOL!==e.EOL&&(this._EOL=e.EOL,t.EOL=!0);break;case"tabFocusMode":this._tabFocusMode!==e.tabFocusMode&&(this._tabFocusMode=e.tabFocusMode,t.tabFocusMode=!0);break;case"columnSelectionMode":this._columnSelectionMode!==e.columnSelectionMode&&(this._columnSelectionMode=e.columnSelectionMode,t.columnSelectionMode=!0);break;case"metadata":this._metadata!==e.metadata&&(this._metadata=e.metadata,t.metadata=!0);break}return t}}let Fm=class extends R{constructor(e){super(),this.configurationService=e,this._onDidChange=this._register(new I),this.onDidChange=this._onDidChange.event,this.registerListeners();const t=e.getValue("editor.tabFocusMode")===!0;ju.setTabFocusMode(t)}registerListeners(){this._register(ju.onDidChangeTabFocus(e=>this._onDidChange.fire(e))),this._register(this.configurationService.onDidChangeConfiguration(e=>{if(e.affectsConfiguration("editor.tabFocusMode")){const t=this.configurationService.getValue("editor.tabFocusMode")===!0;ju.setTabFocusMode(t),this._onDidChange.fire(t)}}))}};Fm=x([u(0,F)],Fm);const VL=d(9729,"Ln {0}, Col {1} ({2} selected)"),ML=d(9730,"Ln {0}, Col {1}"),LL=d(9731,"{0} selections ({1} characters selected)"),PL=d(9732,"{0} selections"),wE=d(9733,"LF"),vE=d(9734,"CRLF");let Gm=class extends R{constructor(e,t,i,o,n,s,r,a){super(),this.targetWindowId=e,this.editorService=t,this.quickInputService=i,this.languageService=o,this.textFileService=n,this.statusbarService=s,this.instantiationService=r,this.configurationService=a,this.tabFocusModeElement=this._register(new Se),this.columnSelectionModeElement=this._register(new Se),this.indentationElement=this._register(new Se),this.selectionElement=this._register(new Se),this.encodingElement=this._register(new Se),this.eolElement=this._register(new Se),this.languageElement=this._register(new Se),this.metadataElement=this._register(new Se),this.currentMarkerStatus=this._register(this.instantiationService.createInstance(Wm)),this.tabFocusMode=this._register(this.instantiationService.createInstance(Fm)),this.state=new TL,this.toRender=void 0,this.activeEditorListeners=this._register(new P),this.delayedRender=this._register(new Se),this.registerCommands(),this.registerListeners()}registerListeners(){this._register(this.editorService.onDidActiveEditorChange(()=>this.updateStatusBar())),this._register(this.textFileService.untitled.onDidChangeEncoding(e=>this.onResourceEncodingChange(e.resource))),this._register(this.textFileService.files.onDidChangeEncoding(e=>this.onResourceEncodingChange(e.resource))),this._register(N.runAndSubscribe(this.tabFocusMode.onDidChange,e=>{e!==void 0?this.onTabFocusModeChange(e):this.onTabFocusModeChange(this.configurationService.getValue("editor.tabFocusMode"))}))}registerCommands(){this._register(qe.registerCommand({id:`changeEditorIndentation${this.targetWindowId}`,handler:()=>this.showIndentationPicker()}))}async showIndentationPicker(){var o;const e=_i(this.editorService.activeTextEditorControl);if(!e)return this.quickInputService.pick([{label:d(9735,"No text editor active at this time")}]);if((o=this.editorService.activeEditor)!=null&&o.isReadonly())return this.quickInputService.pick([{label:d(9736,"The active code editor is read-only.")}]);const t=[ae(e.getAction(dD.ID)),ae(e.getAction(lD.ID)),ae(e.getAction(hD.ID)),ae(e.getAction(uD.ID)),ae(e.getAction(pD.ID)),ae(e.getAction(gD.ID)),ae(e.getAction(mD.ID))].map(n=>({id:n.id,label:n.label,detail:TC.isDefaultVariant()||n.label===n.alias?void 0:n.alias,run:()=>{e.focus(),n.run()}}));t.splice(3,0,{type:"separator",label:d(9737,"convert file")}),t.unshift({type:"separator",label:d(9738,"change view")});const i=await this.quickInputService.pick(t,{placeHolder:d(9739,"Select Action"),matchOnDetail:!0});return i==null?void 0:i.run()}updateTabFocusModeElement(e){if(e){if(!this.tabFocusModeElement.value){const t=d(9740,"Tab Moves Focus");this.tabFocusModeElement.value=this.statusbarService.addEntry({name:d(9741,"Accessibility Mode"),text:t,ariaLabel:t,tooltip:d(9742,"Disable Accessibility Mode"),command:"editor.action.toggleTabFocusMode",kind:"prominent"},"status.editor.tabFocusMode",1,100.7)}}else this.tabFocusModeElement.clear()}updateColumnSelectionModeElement(e){if(e){if(!this.columnSelectionModeElement.value){const t=d(9743,"Column Selection");this.columnSelectionModeElement.value=this.statusbarService.addEntry({name:d(9744,"Column Selection Mode"),text:t,ariaLabel:t,tooltip:d(9745,"Disable Column Selection Mode"),command:"editor.action.toggleColumnSelection",kind:"prominent"},"status.editor.columnSelectionMode",1,100.8)}}else this.columnSelectionModeElement.clear()}updateSelectionElement(e){var o,n;if(!e){this.selectionElement.clear();return}const t=(n=(o=_i(this.editorService.activeTextEditorControl))==null?void 0:o.getModel())==null?void 0:n.uri;if((t==null?void 0:t.scheme)===pe.vscodeNotebookCell){this.selectionElement.clear();return}const i={name:d(9746,"Editor Selection"),text:e,ariaLabel:e,tooltip:d(9747,"Go to Line/Column"),command:"workbench.action.gotoLine"};this.updateElement(this.selectionElement,i,"status.editor.selection",1,100.5)}updateIndentationElement(e){var o,n;if(!e){this.indentationElement.clear();return}const t=(n=(o=_i(this.editorService.activeTextEditorControl))==null?void 0:o.getModel())==null?void 0:n.uri;if((t==null?void 0:t.scheme)===pe.vscodeNotebookCell){this.indentationElement.clear();return}const i={name:d(9748,"Editor Indentation"),text:e,ariaLabel:e,tooltip:d(9749,"Select Indentation"),command:`changeEditorIndentation${this.targetWindowId}`};this.updateElement(this.indentationElement,i,"status.editor.indentation",1,100.4)}updateEncodingElement(e){if(!e){this.encodingElement.clear();return}const t={name:d(9750,"Editor Encoding"),text:e,ariaLabel:e,tooltip:d(9751,"Select Encoding"),command:"workbench.action.editor.changeEncoding"};this.updateElement(this.encodingElement,t,"status.editor.encoding",1,100.3)}updateEOLElement(e){if(!e){this.eolElement.clear();return}const t={name:d(9752,"Editor End of Line"),text:e,ariaLabel:e,tooltip:d(9753,"Select End of Line Sequence"),command:"workbench.action.editor.changeEOL"};this.updateElement(this.eolElement,t,"status.editor.eol",1,100.2)}updateLanguageIdElement(e){if(!e){this.languageElement.clear();return}const t={name:d(9754,"Editor Language"),text:e,ariaLabel:e,tooltip:d(9755,"Select Language Mode"),command:"workbench.action.editor.changeLanguageMode"};this.updateElement(this.languageElement,t,"status.editor.mode",1,100.1)}updateMetadataElement(e){if(!e){this.metadataElement.clear();return}const t={name:d(9756,"File Information"),text:e,ariaLabel:e,tooltip:d(9757,"File Information")};this.updateElement(this.metadataElement,t,"status.editor.info",1,100)}updateElement(e,t,i,o,n){e.value?e.value.update(t):e.value=this.statusbarService.addEntry(t,i,o,n)}updateState(e){const t=this.state.update(e);t.hasChanges()&&(this.toRender?this.toRender.combine(t):(this.toRender=t,this.delayedRender.value=fD(Cc(this.targetWindowId,!0).window,()=>{this.delayedRender.clear();const i=this.toRender;this.toRender=void 0,i&&this.doRenderNow()})))}doRenderNow(){this.updateTabFocusModeElement(!!this.state.tabFocusMode),this.updateColumnSelectionModeElement(!!this.state.columnSelectionMode),this.updateIndentationElement(this.state.indentation),this.updateSelectionElement(this.state.selectionStatus),this.updateEncodingElement(this.state.encoding),this.updateEOLElement(this.state.EOL?this.state.EOL===`\r
`?vE:wE:void 0),this.updateLanguageIdElement(this.state.languageId),this.updateMetadataElement(this.state.metadata)}getSelectionLabel(e){if(!(!e||!e.selections)){if(e.selections.length===1)return e.charactersSelected?ua(VL,e.selections[0].positionLineNumber,e.selections[0].positionColumn,e.charactersSelected):ua(ML,e.selections[0].positionLineNumber,e.selections[0].positionColumn);if(e.charactersSelected)return ua(LL,e.selections.length,e.charactersSelected);if(e.selections.length>0)return ua(PL,e.selections.length)}}updateStatusBar(){const e=this.editorService.activeEditor,t=this.editorService.activeEditorPane,i=t?_i(t.getControl())??void 0:void 0;if(this.onColumnSelectionModeChange(i),this.onSelectionChange(i),this.onLanguageChange(i,e),this.onEOLChange(i),this.onEncodingChange(t,i),this.onIndentationChange(i),this.onMetadataChange(t),this.currentMarkerStatus.update(i),this.activeEditorListeners.clear(),t&&this.activeEditorListeners.add(t.onDidChangeControl(()=>{this.updateStatusBar()})),i)this.activeEditorListeners.add(i.onDidChangeConfiguration(o=>{o.hasChanged(22)&&this.onColumnSelectionModeChange(i)})),this.activeEditorListeners.add(N.defer(i.onDidChangeCursorPosition)(()=>{this.onSelectionChange(i),this.currentMarkerStatus.update(i)})),this.activeEditorListeners.add(i.onDidChangeModelLanguage(()=>{this.onLanguageChange(i,e)})),this.activeEditorListeners.add(N.accumulate(i.onDidChangeModelContent)(o=>{this.onEOLChange(i),this.currentMarkerStatus.update(i);const n=i.getSelections();if(n){for(const s of o)for(const r of s.changes)if(n.some(a=>Ae.areIntersecting(a,r.range))){this.onSelectionChange(i);break}}})),this.activeEditorListeners.add(i.onDidChangeModelOptions(()=>{this.onIndentationChange(i)}));else if(t instanceof uo||t instanceof Wn){const o=[];if(t instanceof Wn){const n=t.getPrimaryEditorPane();n instanceof uo&&o.push(n);const s=t.getSecondaryEditorPane();s instanceof uo&&o.push(s)}else o.push(t);for(const n of o)this.activeEditorListeners.add(n.onDidChangeMetadata(()=>{this.onMetadataChange(t)})),this.activeEditorListeners.add(n.onDidOpenInPlace(()=>{this.updateStatusBar()}))}}onLanguageChange(e,t){const i={type:"languageId",languageId:void 0};if(e&&t&&zl(t)){const o=e.getModel();if(o){const n=o.getLanguageId();i.languageId=this.languageService.getLanguageName(n)??void 0}}this.updateState(i)}onIndentationChange(e){const t={type:"indentation",indentation:void 0};if(e){const i=e.getModel();if(i){const o=i.getOptions();t.indentation=o.insertSpaces?o.tabSize===o.indentSize?d(9758,"Spaces: {0}",o.indentSize):d(9759,"Spaces: {0} (Tab Size: {1})",o.indentSize,o.tabSize):d(9760,"Tab Size: {0}",o.tabSize)}}this.updateState(t)}onMetadataChange(e){const t={type:"metadata",metadata:void 0};(e instanceof uo||e instanceof Wn)&&(t.metadata=e.getMetadata()),this.updateState(t)}onColumnSelectionModeChange(e){const t={type:"columnSelectionMode",columnSelectionMode:!1};e!=null&&e.getOption(22)&&(t.columnSelectionMode=!0),this.updateState(t)}onSelectionChange(e){const t=Object.create(null);if(e){t.selections=e.getSelections()||[],t.charactersSelected=0;const i=e.getModel();if(i)for(const o of t.selections)typeof t.charactersSelected!="number"&&(t.charactersSelected=0),t.charactersSelected+=i.getCharacterCountInRange(o);if(t.selections.length===1){const o=e.getPosition(),n=new VC(t.selections[0].selectionStartLineNumber,t.selections[0].selectionStartColumn,t.selections[0].positionLineNumber,o?e.getStatusbarColumn(o):t.selections[0].positionColumn);t.selections[0]=n}}this.updateState({type:"selectionStatus",selectionStatus:this.getSelectionLabel(t)})}onEOLChange(e){const t={type:"EOL",EOL:void 0};if(e&&!e.getOption(94)){const i=e.getModel();i&&(t.EOL=i.getEOL())}this.updateState(t)}onEncodingChange(e,t){if(e&&!this.isActiveEditor(e))return;const i={type:"encoding",encoding:void 0};if(e&&(t!=null&&t.hasModel())){const o=e.input?pc(e.input):null;if(o){const n=o.getEncoding(),s=typeof n=="string"?so[n]:void 0;s?i.encoding=s.labelShort:i.encoding=n}}this.updateState(i)}onResourceEncodingChange(e){const t=this.editorService.activeEditorPane;if(t){const i=Ie.getCanonicalUri(t.input,{supportSideBySide:Ce.PRIMARY});if(i&&ot(i,e)){const o=_i(t.getControl())??void 0;return this.onEncodingChange(t,o)}}}onTabFocusModeChange(e){const t={type:"tabFocusMode",tabFocusMode:e};this.updateState(t)}isActiveEditor(e){const t=this.editorService.activeEditorPane;return!!t&&t===e}};Gm=x([u(1,U),u(2,Fe),u(3,Zr),u(4,As),u(5,kn),u(6,O),u(7,F)],Gm);var gr;let Ul=(gr=class extends R{constructor(e){super(),this.editorGroupService=e;for(const t of e.parts)this.createEditorStatus(t);this._register(e.onDidCreateAuxiliaryEditorPart(t=>this.createEditorStatus(t)))}createEditorStatus(e){const t=new P;N.once(e.onWillDispose)(()=>t.dispose());const i=this.editorGroupService.getScopedInstantiationService(e);t.add(i.createInstance(Gm,e.windowId))}},gr.ID="workbench.contrib.editorStatus",gr);Ul=x([u(0,Z)],Ul);let Wm=class extends R{constructor(e,t,i){super(),this.statusbarService=e,this.markerService=t,this.configurationService=i,this.editor=void 0,this.markers=[],this.currentMarker=null,this.statusBarEntryAccessor=this._register(new Se),this._register(t.onMarkerChanged(o=>this.onMarkerChanged(o))),this._register(N.filter(i.onDidChangeConfiguration,o=>o.affectsConfiguration("problems.showCurrentInStatus"))(()=>this.updateStatus()))}update(e){this.editor=e,this.updateMarkers(),this.updateStatus()}updateStatus(){const e=this.currentMarker;if(this.currentMarker=this.getMarker(),this.hasToUpdateStatus(e,this.currentMarker))if(this.currentMarker){const t=bD(this.currentMarker.message)[0],i=`${this.getType(this.currentMarker)} ${t}`;this.statusBarEntryAccessor.value||(this.statusBarEntryAccessor.value=this.statusbarService.addEntry({name:d(9761,"Current Problem"),text:"",ariaLabel:""},"statusbar.currentProblem",0)),this.statusBarEntryAccessor.value.update({name:d(9761,"Current Problem"),text:i,ariaLabel:i})}else this.statusBarEntryAccessor.clear()}hasToUpdateStatus(e,t){return!t||!e?!0:ww.makeKey(e)!==ww.makeKey(t)}getType(e){switch(e.severity){case Dn.Error:return"$(error)";case Dn.Warning:return"$(warning)";case Dn.Info:return"$(info)"}return""}getMarker(){if(!this.configurationService.getValue("problems.showCurrentInStatus")||!this.editor||!this.editor.getModel())return null;const t=this.editor.getPosition();return t&&this.markers.find(i=>Ae.containsPosition(i,t))||null}onMarkerChanged(e){if(!this.editor)return;const t=this.editor.getModel();t&&(t&&!e.some(i=>ot(t.uri,i))||this.updateMarkers())}updateMarkers(){if(!this.editor)return;const e=this.editor.getModel();e&&(e?(this.markers=this.markerService.read({resource:e.uri,severities:Dn.Error|Dn.Warning|Dn.Info}),this.markers.sort(this.compareMarker)):this.markers=[],this.updateStatus())}compareMarker(e,t){let i=gu(e.resource.toString(),t.resource.toString());return i===0&&(i=Dn.compare(e.severity,t.severity)),i===0&&(i=Ae.compareRangesUsingStarts(e,t)),i}};Wm=x([u(0,kn),u(1,nD),u(2,F)],Wm);var ls;let Hm=(ls=class extends de{constructor(e,t,i){super(Nm.ID,d(9762,"Search Marketplace Extensions for '{0}'...",e)),this.fileExtension=e,this.commandService=t,this.enabled=i.isEnabled()}async run(){await this.commandService.executeCommand("workbench.extensions.action.showExtensionsForLanguage",this.fileExtension)}},Nm=ls,ls.ID="workbench.action.showLanguageExtensions",ls);Hm=Nm=x([u(1,lt),u(2,sD)],Hm);const Ha=class Ha extends A{constructor(){super({id:Ha.ID,title:w(9763,"Change Language Mode"),f1:!0,keybinding:{weight:200,primary:Ee(2089,43)},precondition:y.not("notebookEditorFocused"),metadata:{description:d(9764,"Change the language mode of the active text editor."),args:[{name:d(9765,"The name of the language mode to change to."),constraint:e=>typeof e=="string"}]}})}async run(e,t){var Le;const i=e.get(Fe),o=e.get(U),n=e.get(Zr),s=e.get(rD),r=e.get(As),a=e.get(bn),l=e.get(O),h=e.get(F),p=e.get(Be),g=_i(o.activeTextEditorControl);if(!g){await i.pick([{label:d(9735,"No text editor active at this time")}]);return}const m=g.getModel(),f=Ie.getOriginalUri(o.activeEditor,{supportSideBySide:Ce.PRIMARY});let v,S;m&&(S=m.getLanguageId(),v=n.getLanguageName(S)??void 0);let E=!!f;(f==null?void 0:f.scheme)===pe.untitled&&!((Le=r.untitled.get(f))!=null&&Le.hasAssociatedFilePath)&&(E=!1);const V=n.getSortedRegisteredLanguageNames().map(({languageName:Q,languageId:$e})=>{const io=n.getExtensions($e).join(" ");let Ct;return v===Q?Ct=d(9766,"({0}) - Configured Language",$e):Ct=d(9767,"({0})",$e),{label:Q,meta:io,iconClasses:fw($e),description:Ct}});V.unshift({type:"separator",label:d(9768,"languages (identifier)")});let M,J,q;if(E&&f){const Q=yi(f)||mt(f);q=l.createInstance(Hm,Q),q.enabled&&V.unshift(q),J={label:d(9769,"Configure '{0}' language based settings...",v)},V.unshift(J),M={label:d(9770,"Configure File Association for '{0}'...",Q)},V.unshift(M)}const W={label:d(9771,"Auto Detect")};V.unshift(W);const G=typeof t=="string"?{label:t}:await i.pick(V,{placeHolder:d(9772,"Select Language Mode"),matchOnDescription:!0});if(!G)return;if(G===q){q.run();return}if(G===M){f&&this.configureFileAssociation(f,n,i,h);return}if(G===J){a.openUserSettings({jsonEditor:!0,revealSetting:{key:`[${S??null}]`,edit:!0}});return}const se=o.activeEditor;if(se){const Q=zl(se);if(Q){let $e,io;if(G===W){if(m){const Ct=Ie.getOriginalUri(se,{supportSideBySide:Ce.PRIMARY});if(Ct){let ze=n.guessLanguageIdByFilepathOrFirstLine(Ct,m.getLineContent(1))??void 0;(!ze||ze==="unknown")&&(io=await s.detectLanguage(Ct),ze=io),ze&&($e=n.createById(ze))}}}else{const Ct=n.getLanguageIdByLanguageName(G.label);$e=n.createById(Ct),f&&s.detectLanguage(f).then(ze=>{const DE=n.getLanguageIdByLanguageName(G.label)||"unknown";if(ze===S&&S!==DE){const AE=h.getValue("workbench.editor.preferHistoryBasedLanguageDetection")?"history":"classic";p.publicLog2(aD,{currentLanguageId:v??"unknown",nextLanguageId:G.label,lineCount:(m==null?void 0:m.getLineCount())??-1,modelPreference:AE})}})}if(typeof $e<"u"&&(Q.setLanguageId($e.languageId,Ha.ID),(f==null?void 0:f.scheme)===pe.untitled)){const Ct=h.getValue("workbench.editor.preferHistoryBasedLanguageDetection")?"history":"classic";p.publicLog2("setUntitledDocumentLanguage",{to:$e.languageId,from:S??"none",modelPreference:Ct})}}g.focus()}}configureFileAssociation(e,t,i,o){const n=yi(e),s=mt(e),r=t.guessLanguageIdByFilepathOrFirstLine(z.file(s)),l=t.getSortedRegisteredLanguageNames().map(({languageName:h,languageId:p})=>({id:p,label:h,iconClasses:fw(p),description:p===r?d(9773,"Current Association"):void 0}));setTimeout(async()=>{const h=await i.pick(l,{placeHolder:d(9774,"Select Language Mode to Associate with '{0}'",n||s)});if(h){const p=o.inspect(bw);let g;n&&s[0]!=="."?g=`*${n}`:g=s;let m=2;p.workspaceValue&&p.workspaceValue[g]&&(m=5);const f=cD(m===5?p.workspaceValue:p.userValue)||Object.create(null);f[g]=h.id,o.updateValue(bw,f,m)}},50)}};Ha.ID="workbench.action.editor.changeLanguageMode";let zm=Ha;class RL extends A{constructor(){super({id:"workbench.action.editor.changeEOL",title:w(9775,"Change End of Line Sequence"),f1:!0})}async run(e){var l,h;const t=e.get(U),i=e.get(Fe),o=_i(t.activeTextEditorControl);if(!o){await i.pick([{label:d(9735,"No text editor active at this time")}]);return}if((l=t.activeEditor)!=null&&l.isReadonly()){await i.pick([{label:d(9736,"The active code editor is read-only.")}]);return}let n=o.getModel();const s=[{label:wE,eol:0},{label:vE,eol:1}],r=(n==null?void 0:n.getEOL())===`
`?0:1,a=await i.pick(s,{placeHolder:d(9776,"Select End of Line Sequence"),activeItem:s[r]});if(a){const p=_i(t.activeTextEditorControl);p!=null&&p.hasModel()&&!((h=t.activeEditor)!=null&&h.isReadonly())&&(n=p.getModel(),n.pushStackElement(),n.pushEOL(a.eol),n.pushStackElement())}o.focus()}}class BL extends A{constructor(){super({id:"workbench.action.editor.changeEncoding",title:w(9777,"Change File Encoding"),f1:!0})}async run(e){const t=e.get(U),i=e.get(Fe),o=e.get(Oe),n=e.get(As),s=e.get(_s),r=_i(t.activeTextEditorControl);if(!r){await i.pick([{label:d(9735,"No text editor active at this time")}]);return}const a=t.activeEditorPane;if(!a){await i.pick([{label:d(9735,"No text editor active at this time")}]);return}const l=pc(a.input);if(!l){await i.pick([{label:d(9778,"No file active at this time")}]);return}const h={label:d(9779,"Save with Encoding")},p={label:d(9780,"Reopen with Encoding")};if(!TC.isDefaultVariant()){const W="Save with Encoding";W!==h.label&&(h.detail=W);const G="Reopen with Encoding";G!==p.label&&(p.detail=G)}let g;if(l instanceof Xi?g=h:a.input.isReadonly()?g=p:g=await i.pick([p,h],{placeHolder:d(9739,"Select Action"),matchOnDetail:!0}),!g)return;await Lr(50);const m=Ie.getOriginalUri(a.input,{supportSideBySide:Ce.PRIMARY});if(!m||!o.hasProvider(m)&&m.scheme!==pe.untitled)return;let f;o.hasProvider(m)&&(f=(await n.readStream(m,{autoGuessEncoding:!0,candidateGuessEncodings:s.getValue(m,"files.candidateGuessEncodings")})).encoding);const v=g===p,S=s.getValue(m,"files.encoding");let E,D;const V=Object.keys(so).sort((W,G)=>W===S?-1:G===S?1:so[W].order-so[G].order).filter(W=>W===f&&f!==S?!1:!v||!so[W].encodeOnly).map((W,G)=>(W===l.getEncoding()?E=G:so[W].alias===l.getEncoding()&&(D=G),{id:W,label:so[W].labelLong,description:W})),M=V.slice();f&&S!==f&&so[f]&&(V.unshift({type:"separator"}),V.unshift({id:f,label:so[f].labelLong,description:d(9781,"Guessed from content")}));const J=await i.pick(V,{placeHolder:v?d(9782,"Select File Encoding to Reopen File"):d(9783,"Select File Encoding to Save with"),activeItem:M[typeof E=="number"?E:typeof D=="number"?D:-1]});if(!J||!t.activeEditorPane)return;const q=pc(t.activeEditorPane.input);typeof J.id<"u"&&q&&await q.setEncoding(J.id,v?1:0),r.focus()}}let Um=class{constructor(e,t,i){this.filesConfigurationService=e,this.environmentService=t,this.pathService=i}canSerialize(e){return this.filesConfigurationService.isHotExitEnabled&&!e.isDisposed()}serialize(e){if(!this.canSerialize(e))return;const t=e;let i=t.resource;t.hasAssociatedFilePath&&(i=MC(i,this.environmentService.remoteAuthority,this.pathService.defaultUriScheme));let o;const n=t.getLanguageId();(n!==Td||t.hasLanguageSetExplicitly)&&(o=n);const s={resourceJSON:i.toJSON(),modeId:o,encoding:t.getEncoding()};return JSON.stringify(s)}deserialize(e,t){return e.invokeFunction(i=>{const o=JSON.parse(t),n=z.revive(o.resourceJSON),s=o.modeId,r=o.encoding;return i.get(Gc).createTextEditor({resource:n,languageId:s,encoding:r,forceUntitled:!0})})}};Um=x([u(0,Qr),u(1,bt),u(2,Ac)],Um);var mr;let Kl=(mr=class extends R{constructor(e,t,i,o,n){super(),this.environmentService=t,this.pathService=i,this.textEditorService=o,this.untitledTextEditorService=n,this._register(e.registerHandler(this))}handles(e){return e.resource.scheme===pe.untitled&&e.typeId===Ap}isOpen(e,t){return this.handles(e)?t instanceof Xi&&ot(e.resource,t.resource):!1}createEditor(e){let t;return this.untitledTextEditorService.isUntitledWithAssociatedResource(e.resource)?t=MC(e.resource,this.environmentService.remoteAuthority,this.pathService.defaultUriScheme):t=e.resource,this.textEditorService.createTextEditor({resource:t,forceUntitled:!0})}},mr.ID="workbench.contrib.untitledTextEditorWorkingCopyEditorHandler",mr);Kl=x([u(0,wu),u(1,bt),u(2,Ac),u(3,Gc),u(4,LC)],Kl);var zs,Wi;let ql=(Wi=class extends R{constructor(e,t,i){super(),this.editorResolverService=e,this.environmentService=i,this.configurationRegistry=$.as(ks.Configuration),(async()=>(await t.whenInstalledExtensionsRegistered(),this.updateDynamicEditorConfigurations(),this.registerListeners()))()}registerListeners(){this._register(N.debounce(this.editorResolverService.onDidChangeEditorRegistrations,(e,t)=>t)(()=>this.updateDynamicEditorConfigurations()))}updateDynamicEditorConfigurations(){const e=[...this.editorResolverService.getEditors(),...zs.AUTO_LOCK_EXTRA_EDITORS].filter(l=>!zs.AUTO_LOCK_REMOVE_EDITORS.has(l.id)),t=this.editorResolverService.getEditors().filter(l=>l.priority!==Ne.exclusive).map(l=>l.id),i=Object.create(null);for(const l of e)i[l.id]={type:"boolean",default:zs.AUTO_LOCK_DEFAULT_ENABLED.has(l.id),description:l.label};const o=Object.create(null);for(const l of e)o[l.id]=zs.AUTO_LOCK_DEFAULT_ENABLED.has(l.id);const n=this.autoLockConfigurationNode;this.autoLockConfigurationNode={...pa,properties:{"workbench.editor.autoLockGroups":{type:"object",description:d(9922,"If an editor matching one of the listed types is opened as the first in an editor group and more than one group is open, the group is automatically locked. Locked groups will only be used for opening editors when explicitly chosen by a user gesture (for example drag and drop), but not by default. Consequently, the active editor in a locked group is less likely to be replaced accidentally with a different editor."),properties:i,default:o,additionalProperties:!1}}};const s=this.defaultBinaryEditorConfigurationNode;this.defaultBinaryEditorConfigurationNode={...pa,properties:{"workbench.editor.defaultBinaryEditor":{type:"string",default:"",enum:[...t,""],description:d(9923,"The default editor for files detected as binary. If undefined, the user will be presented with a picker.")}}};const r=this.editorAssociationsConfigurationNode;this.editorAssociationsConfigurationNode={...pa,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:d(9924,'Configure [glob patterns](https://aka.ms/vscode-glob-patterns) to editors (for example `"*.hex": "hexEditor.hexedit"`). These have precedence over the default behavior.'),patternProperties:{".*":{type:"string",enum:t}}}}};const a=this.editorLargeFileConfirmationConfigurationNode;this.editorLargeFileConfirmationConfigurationNode={...pa,properties:{"workbench.editorLargeFileConfirmation":{type:"number",default:vD(this.environmentService.remoteAuthority)/Jf.MB,minimum:1,scope:4,markdownDescription:d(9925,"Controls the minimum size of a file in MB before asking for confirmation when opening in the editor. Note that this setting may not apply to all editor types and environments.")}}},this.configurationRegistry.updateConfigurations({add:[this.autoLockConfigurationNode,this.defaultBinaryEditorConfigurationNode,this.editorAssociationsConfigurationNode,this.editorLargeFileConfirmationConfigurationNode],remove:hi([n,s,r,a])})}},zs=Wi,Wi.ID="workbench.contrib.dynamicEditorConfigurations",Wi.AUTO_LOCK_DEFAULT_ENABLED=new Set(["terminalEditor","mainThreadWebview-simpleBrowser.view","mainThreadWebview-browserPreview"]),Wi.AUTO_LOCK_EXTRA_EDITORS=[{id:"workbench.input.interactive",label:d(9918,"Interactive Window"),priority:Ne.builtin},{id:"mainThreadWebview-markdown.preview",label:d(9919,"Markdown Preview"),priority:Ne.builtin},{id:"mainThreadWebview-simpleBrowser.view",label:d(9920,"Simple Browser"),priority:Ne.builtin},{id:"mainThreadWebview-browserPreview",label:d(9921,"Live Preview"),priority:Ne.builtin}],Wi.AUTO_LOCK_REMOVE_EDITORS=new Set(["vscode-interactive-input","interactive","vscode.markdown.preview.editor"]),Wi);ql=zs=x([u(0,Mo),u(1,Vt),u(2,bt)],ql);$.as(wt.EditorPane).registerEditorPane(Jt.create(Hl,Hl.ID,d(4299,"Text Editor")),[new ce(Xi),new ce(AC)]);$.as(wt.EditorPane).registerEditorPane(Jt.create(vw,vw.ID,d(4300,"Text Diff Editor")),[new ce(Is)]);$.as(wt.EditorPane).registerEditorPane(Jt.create(Wn,Wn.ID,d(4301,"Binary Diff Editor")),[new ce(Is)]);$.as(wt.EditorPane).registerEditorPane(Jt.create(Dp,Dp.ID,d(4302,"Side by Side Editor")),[new ce(ri)]);$.as(wt.EditorFactory).registerEditorSerializer(Xi.ID,Um);$.as(wt.EditorFactory).registerEditorSerializer(ri.ID,yD);$.as(wt.EditorFactory).registerEditorSerializer(Is.ID,CD);Mt(Ul.ID,Ul,2);Mt(Kl.ID,Kl,2);Mt(ql.ID,ql,2);$f(yw.ID,yw,1);const wb=$.as(SD.Quickaccess),Tu="inEditorsPicker",yE=y.and(Av,y.has(Tu));wb.registerQuickAccessProvider({ctor:Ya,prefix:Ya.PREFIX,contextKey:Tu,placeholder:d(4303,"Type the name of an editor to open it."),helpEntries:[{description:d(4304,"Show Editors in Active Group by Most Recently Used"),commandId:pl.ID}]});wb.registerQuickAccessProvider({ctor:fp,prefix:fp.PREFIX,contextKey:Tu,placeholder:d(4303,"Type the name of an editor to open it."),helpEntries:[{description:d(4305,"Show All Opened Editors By Appearance"),commandId:gl.ID}]});wb.registerQuickAccessProvider({ctor:Za,prefix:Za.PREFIX,contextKey:Tu,placeholder:d(4303,"Type the name of an editor to open it."),helpEntries:[{description:d(4306,"Show All Opened Editors By Most Recently Used"),commandId:ml.ID}]});C(zm);C(RL);C(BL);C(nc);C(sc);C(fV);C(bV);C(wV);C(vV);C(yV);C(CV);C(RV);C(BV);C(OV);C(NV);C(hl);C(ul);C(gl);C(ml);C(pl);C(Cg);C(Q1);C(J1);C(eV);C(tV);C(X1);C(wg);C(B1);C(O1);C(N1);C(vg);C(yg);C(F1);C(G1);C(W1);C(uV);C(pV);C(gV);C(mV);C(lV);C(hV);C(GV);C(WV);C(iV);C(oV);C(nV);C(sV);C(rV);C(aV);C(cV);C(dV);C(HV);C(zV);C(jV);C(YV);C(qV);C($V);C(UV);C(KV);C(ZV);C(XV);C(t0);C(i0);C(Eg);C(e0);C(JV);C(QV);C(H1);C(z1);C(U1);C(q1);C(K1);C($1);C(j1);C(Y1);C(Z1);C(o0);C(n0);C(s0);C(r0);C(SV);C(EV);C(kV);C(_V);C(xV);C(IV);C(DV);C(AV);C(TV);C(FV);C(fl);C(bl);C(wl);C(vl);C(yl);C(Cl);C(El);C(Sl);C(a0);C(c0);C(VV);C(MV);C(LV);C(PV);C(Sg);C(d0);C(l0);C(h0);C(u0);C(p0);C(g0);const cv="workbench.action.quickOpenNavigateNextInEditorPicker";ee.registerCommandAndKeybindingRule({id:cv,weight:250,handler:eu(cv,!0),when:yE,primary:2050,mac:{primary:258}});const dv="workbench.action.quickOpenNavigatePreviousInEditorPicker";ee.registerCommandAndKeybindingRule({id:dv,weight:250,handler:eu(dv,!1),when:yE,primary:3074,mac:{primary:1282}});ED();be&&(k.appendMenuItem(b.TouchBarContext,{command:{id:sc.ID,title:sc.LABEL,icon:{dark:Ia.asFileUri("vs/workbench/browser/parts/editor/media/back-tb.png")}},group:"navigation",order:0}),k.appendMenuItem(b.TouchBarContext,{command:{id:nc.ID,title:nc.LABEL,icon:{dark:Ia.asFileUri("vs/workbench/browser/parts/editor/media/forward-tb.png")}},group:"navigation",order:1}));k.appendMenuItem(b.EmptyEditorGroup,{command:{id:PC,title:d(4307,"Lock Group"),icon:T.unlock},group:"navigation",order:10,when:y.and(ea,yn.toNegated())});k.appendMenuItem(b.EmptyEditorGroup,{command:{id:du,title:d(4308,"Unlock Group"),icon:T.lock,toggled:y.true()},group:"navigation",order:10,when:yn});k.appendMenuItem(b.EmptyEditorGroup,{command:{id:RC,title:d(4309,"Close Group"),icon:T.close},group:"navigation",order:20,when:y.or(ea,Dc)});k.appendMenuItem(b.EmptyEditorGroupContext,{command:{id:Pr,title:d(4310,"Split Up")},group:"2_split",order:10});k.appendMenuItem(b.EmptyEditorGroupContext,{command:{id:ws,title:d(4311,"Split Down")},group:"2_split",order:20});k.appendMenuItem(b.EmptyEditorGroupContext,{command:{id:Rr,title:d(4312,"Split Left")},group:"2_split",order:30});k.appendMenuItem(b.EmptyEditorGroupContext,{command:{id:vs,title:d(4313,"Split Right")},group:"2_split",order:40});k.appendMenuItem(b.EmptyEditorGroupContext,{command:{id:vy,title:d(4314,"New Window")},group:"3_window",order:10});k.appendMenuItem(b.EmptyEditorGroupContext,{command:{id:BC,title:d(4315,"Lock Group"),toggled:yn},group:"4_lock",order:10,when:ea.toNegated()});k.appendMenuItem(b.EmptyEditorGroupContext,{command:{id:RC,title:d(4316,"Close")},group:"5_close",order:10,when:ti});k.appendMenuItem(b.EditorTabsBarContext,{command:{id:Pr,title:d(4310,"Split Up")},group:"2_split",order:10});k.appendMenuItem(b.EditorTabsBarContext,{command:{id:ws,title:d(4311,"Split Down")},group:"2_split",order:20});k.appendMenuItem(b.EditorTabsBarContext,{command:{id:Rr,title:d(4312,"Split Left")},group:"2_split",order:30});k.appendMenuItem(b.EditorTabsBarContext,{command:{id:vs,title:d(4313,"Split Right")},group:"2_split",order:40});k.appendMenuItem(b.EditorTabsBarContext,{command:{id:by,title:d(4317,"Move into New Window")},group:"3_window",order:10});k.appendMenuItem(b.EditorTabsBarContext,{command:{id:wy,title:d(4318,"Copy into New Window")},group:"3_window",order:20});k.appendMenuItem(b.EditorTabsBarContext,{submenu:b.EditorTabsBarShowTabsSubmenu,title:d(4319,"Tab Bar"),group:"4_config",order:10,when:Nt.negate()});k.appendMenuItem(b.EditorTabsBarShowTabsSubmenu,{command:{id:Kd.ID,title:d(4320,"Multiple Tabs"),toggled:y.equals("config.workbench.editor.showTabs","multiple")},group:"1_config",order:10});k.appendMenuItem(b.EditorTabsBarShowTabsSubmenu,{command:{id:$d.ID,title:d(4321,"Single Tab"),toggled:y.equals("config.workbench.editor.showTabs","single")},group:"1_config",order:20});k.appendMenuItem(b.EditorTabsBarShowTabsSubmenu,{command:{id:zd.ID,title:d(4322,"Hidden"),toggled:y.equals("config.workbench.editor.showTabs","none")},group:"1_config",order:30});k.appendMenuItem(b.EditorTabsBarContext,{submenu:b.EditorTabsBarShowTabsZenModeSubmenu,title:d(4319,"Tab Bar"),group:"4_config",order:10,when:Nt});k.appendMenuItem(b.EditorTabsBarShowTabsZenModeSubmenu,{command:{id:qd.ID,title:d(4320,"Multiple Tabs"),toggled:y.equals("config.zenMode.showTabs","multiple")},group:"1_config",order:10});k.appendMenuItem(b.EditorTabsBarShowTabsZenModeSubmenu,{command:{id:jd.ID,title:d(4321,"Single Tab"),toggled:y.equals("config.zenMode.showTabs","single")},group:"1_config",order:20});k.appendMenuItem(b.EditorTabsBarShowTabsZenModeSubmenu,{command:{id:Ud.ID,title:d(4322,"Hidden"),toggled:y.equals("config.zenMode.showTabs","none")},group:"1_config",order:30});k.appendMenuItem(b.EditorTabsBarContext,{submenu:b.EditorActionsPositionSubmenu,title:d(4323,"Editor Actions Position"),group:"4_config",order:20});k.appendMenuItem(b.EditorActionsPositionSubmenu,{command:{id:Zd.ID,title:d(4319,"Tab Bar"),toggled:y.equals("config.workbench.editor.editorActionsLocation","default")},group:"1_config",order:10,when:y.equals("config.workbench.editor.showTabs","none").negate()});k.appendMenuItem(b.EditorActionsPositionSubmenu,{command:{id:Yd.ID,title:d(4324,"Title Bar"),toggled:y.or(y.equals("config.workbench.editor.editorActionsLocation","titleBar"),y.and(y.equals("config.workbench.editor.showTabs","none"),y.equals("config.workbench.editor.editorActionsLocation","default")))},group:"1_config",order:20});k.appendMenuItem(b.EditorActionsPositionSubmenu,{command:{id:Xd.ID,title:d(4325,"Hidden"),toggled:y.equals("config.workbench.editor.editorActionsLocation","hidden")},group:"1_config",order:30});k.appendMenuItem(b.EditorTabsBarContext,{command:{id:Jd.ID,title:d(4326,"Configure Tabs")},group:"9_configure",order:10});k.appendMenuItem(b.EditorTitleContext,{command:{id:Cn,title:d(4316,"Close")},group:"1_close",order:10});k.appendMenuItem(b.EditorTitleContext,{command:{id:OC,title:d(4327,"Close Others"),precondition:My.notEqualsTo("1")},group:"1_close",order:20});k.appendMenuItem(b.EditorTitleContext,{command:{id:NC,title:d(4328,"Close to the Right"),precondition:y.and(ru.toNegated(),Mc.negate())},group:"1_close",order:30,when:Wc});k.appendMenuItem(b.EditorTitleContext,{command:{id:Qf,title:d(4329,"Close Saved")},group:"1_close",order:40});k.appendMenuItem(b.EditorTitleContext,{command:{id:Hc,title:d(4330,"Close All")},group:"1_close",order:50});k.appendMenuItem(b.EditorTitleContext,{command:{id:FC,title:d(4331,"Reopen Editor With...")},group:"1_open",order:10,when:Jr});k.appendMenuItem(b.EditorTitleContext,{command:{id:GC,title:d(4332,"Keep Open"),precondition:Df.toNegated()},group:"3_preview",order:10,when:y.has("config.workbench.editor.enablePreview")});k.appendMenuItem(b.EditorTitleContext,{command:{id:WC,title:d(4333,"Pin")},group:"3_preview",order:20,when:vn.toNegated()});k.appendMenuItem(b.EditorTitleContext,{command:{id:xc,title:d(4334,"Unpin")},group:"3_preview",order:20,when:vn});k.appendMenuItem(b.EditorTitleContext,{command:{id:Pr,title:d(4310,"Split Up")},group:"5_split",order:10});k.appendMenuItem(b.EditorTitleContext,{command:{id:ws,title:d(4311,"Split Down")},group:"5_split",order:20});k.appendMenuItem(b.EditorTitleContext,{command:{id:Rr,title:d(4312,"Split Left")},group:"5_split",order:30});k.appendMenuItem(b.EditorTitleContext,{command:{id:vs,title:d(4313,"Split Right")},group:"5_split",order:40});k.appendMenuItem(b.EditorTitleContext,{command:{id:HC,title:d(4335,"Split in Group"),precondition:Mc.negate()},group:"6_split_in_group",order:10,when:au});k.appendMenuItem(b.EditorTitleContext,{command:{id:zC,title:d(4336,"Join in Group"),precondition:Mc.negate()},group:"6_split_in_group",order:10,when:xs});k.appendMenuItem(b.EditorTitleContext,{command:{id:Mf,title:d(4337,"Move into New Window")},group:"7_new_window",order:10});k.appendMenuItem(b.EditorTitleContext,{command:{id:Lf,title:d(4338,"Copy into New Window")},group:"7_new_window",order:20});k.appendMenuItem(b.EditorTitleContext,{submenu:b.EditorTitleContextShare,title:d(4339,"Share"),group:"11_share",order:-1,when:Mc.negate()});k.appendMenuItem(b.EditorTitle,{command:{id:kD,title:d(4340,"Inline View"),toggled:y.equals("config.diffEditor.renderSideBySide",!1)},group:"1_diff",order:10,when:y.has("isInDiffEditor")});k.appendMenuItem(b.EditorTitle,{command:{id:_D,title:d(4341,"Show Opened Editors")},group:"3_open",order:10});k.appendMenuItem(b.EditorTitle,{command:{id:Hc,title:d(4330,"Close All")},group:"5_close",order:10});k.appendMenuItem(b.EditorTitle,{command:{id:Qf,title:d(4329,"Close Saved")},group:"5_close",order:20});k.appendMenuItem(b.EditorTitle,{command:{id:xD,title:d(4342,"Enable Preview Editors"),toggled:y.has("config.workbench.editor.enablePreview")},group:"7_settings",order:10});k.appendMenuItem(b.EditorTitle,{command:{id:Vf,title:d(4343,"Maximize Group")},group:"8_group_operations",order:5,when:y.and(zo.negate(),Dc)});k.appendMenuItem(b.EditorTitle,{command:{id:Vf,title:d(4344,"Unmaximize Group")},group:"8_group_operations",order:5,when:zo});k.appendMenuItem(b.EditorTitle,{command:{id:BC,title:d(4345,"Lock Group"),toggled:yn},group:"8_group_operations",order:10,when:ea.toNegated()});k.appendMenuItem(b.EditorTitle,{command:{id:Qd.ID,title:d(4346,"Configure Editors")},group:"9_configure",order:10});function fi(c,e,t,i,o){const n={command:{id:c.id,title:c.title,icon:c.icon,toggled:c.toggled,precondition:o},group:"navigation",when:e,order:t};i&&(n.alt={id:i.id,title:i.title,icon:i.icon}),k.appendMenuItem(b.EditorTitle,n)}const vb=1e5,ra=1e6;fi({id:Af,title:d(4347,"Split Editor Right"),icon:T.splitHorizontal},y.not("splitEditorsVertically"),vb,{id:ws,title:d(4348,"Split Editor Down"),icon:T.splitVertical});fi({id:Af,title:d(4348,"Split Editor Down"),icon:T.splitVertical},y.has("splitEditorsVertically"),vb,{id:vs,title:d(4347,"Split Editor Right"),icon:T.splitHorizontal});fi({id:ID,title:d(4349,"Toggle Layout"),icon:T.editorLayout},xs,vb-1);fi({id:Cn,title:d(4316,"Close"),icon:T.close},y.and(Wc.toNegated(),Vc.toNegated(),vn.toNegated()),ra,{id:Hc,title:d(4330,"Close All"),icon:T.closeAll});fi({id:Cn,title:d(4316,"Close"),icon:T.closeDirty},y.and(Wc.toNegated(),Vc,vn.toNegated()),ra,{id:Hc,title:d(4330,"Close All"),icon:T.closeAll});fi({id:xc,title:d(4334,"Unpin"),icon:T.pinned},y.and(Wc.toNegated(),Vc.toNegated(),vn),ra,{id:Cn,title:d(4316,"Close"),icon:T.close});fi({id:xc,title:d(4334,"Unpin"),icon:T.pinnedDirty},y.and(Wc.toNegated(),Vc,vn),ra,{id:Cn,title:d(4316,"Close"),icon:T.close});fi({id:PC,title:d(4350,"Lock Group"),icon:T.unlock},y.and(ea,yn.toNegated()),ra-1);fi({id:du,title:d(4351,"Unlock Group"),icon:T.lock,toggled:y.true()},yn,ra-1);const OL=X("diff-editor-previous-change",T.arrowUp,d(4352,"Icon for the previous change action in the diff editor."));fi({id:DD,title:d(4353,"Previous Change"),icon:OL},mn,10,void 0,Qa.hasChanges);const NL=X("diff-editor-next-change",T.arrowDown,d(4354,"Icon for the next change action in the diff editor."));fi({id:AD,title:d(4355,"Next Change"),icon:NL},mn,11,void 0,Qa.hasChanges);fi({id:TD,title:d(4356,"Swap Left and Right Side"),icon:T.arrowSwap},y.and(mn,Ly),15,void 0,void 0);const FL=X("diff-editor-toggle-whitespace",T.whitespace,d(4357,"Icon for the toggle whitespace action in the diff editor."));k.appendMenuItem(b.EditorTitle,{command:{id:VD,title:d(4358,"Show Leading/Trailing Whitespace Differences"),icon:FL,precondition:mn,toggled:y.equals("config.diffEditor.ignoreTrimWhitespace",!1)},group:"navigation",when:mn,order:20});k.appendMenuItem(b.CommandPalette,{command:{id:GC,title:w(4359,"Keep Editor"),category:_.View},when:y.has("config.workbench.editor.enablePreview")});k.appendMenuItem(b.CommandPalette,{command:{id:WC,title:w(4360,"Pin Editor"),category:_.View}});k.appendMenuItem(b.CommandPalette,{command:{id:xc,title:w(4361,"Unpin Editor"),category:_.View}});k.appendMenuItem(b.CommandPalette,{command:{id:Cn,title:w(4362,"Close Editor"),category:_.View}});k.appendMenuItem(b.CommandPalette,{command:{id:MD,title:w(4363,"Close Pinned Editor"),category:_.View}});k.appendMenuItem(b.CommandPalette,{command:{id:Hc,title:w(4364,"Close All Editors in Group"),category:_.View}});k.appendMenuItem(b.CommandPalette,{command:{id:Qf,title:w(4365,"Close Saved Editors in Group"),category:_.View}});k.appendMenuItem(b.CommandPalette,{command:{id:OC,title:w(4366,"Close Other Editors in Group"),category:_.View}});k.appendMenuItem(b.CommandPalette,{command:{id:NC,title:w(4367,"Close Editors to the Right in Group"),category:_.View},when:ru.toNegated()});k.appendMenuItem(b.CommandPalette,{command:{id:LD,title:w(4368,"Close Editor Group"),category:_.View},when:ti});k.appendMenuItem(b.CommandPalette,{command:{id:FC,title:w(4331,"Reopen Editor With..."),category:_.View},when:Jr});k.appendMenuItem(b.MenubarRecentMenu,{group:"1_editor",command:{id:hl.ID,title:d(4369,"&&Reopen Closed Editor"),precondition:y.has("canReopenClosedEditor")},order:1});k.appendMenuItem(b.MenubarRecentMenu,{group:"z_clear",command:{id:ul.ID,title:d(4370,"&&Clear Recently Opened...")},order:1});k.appendMenuItem(b.MenubarFileMenu,{title:d(4371,"Share"),submenu:b.MenubarShare,group:"45_share",order:1});k.appendMenuItem(b.MenubarViewMenu,{group:"2_appearance",title:d(4372,"Editor &&Layout"),submenu:b.MenubarLayoutMenu,order:2});k.appendMenuItem(b.MenubarLayoutMenu,{group:"1_split",command:{id:Pr,title:{...w(4373,"Split Up"),mnemonicTitle:d(4374,"Split &&Up")}},order:1});k.appendMenuItem(b.MenubarLayoutMenu,{group:"1_split",command:{id:ws,title:{...w(4375,"Split Down"),mnemonicTitle:d(4376,"Split &&Down")}},order:2});k.appendMenuItem(b.MenubarLayoutMenu,{group:"1_split",command:{id:Rr,title:{...w(4377,"Split Left"),mnemonicTitle:d(4378,"Split &&Left")}},order:3});k.appendMenuItem(b.MenubarLayoutMenu,{group:"1_split",command:{id:vs,title:{...w(4379,"Split Right"),mnemonicTitle:d(4380,"Split &&Right")}},order:4});k.appendMenuItem(b.MenubarLayoutMenu,{group:"2_split_in_group",command:{id:HC,title:{...w(4381,"Split in Group"),mnemonicTitle:d(4382,"Split in &&Group")}},when:au,order:1});k.appendMenuItem(b.MenubarLayoutMenu,{group:"2_split_in_group",command:{id:zC,title:{...w(4383,"Join in Group"),mnemonicTitle:d(4384,"Join in &&Group")}},when:xs,order:1});k.appendMenuItem(b.MenubarLayoutMenu,{group:"3_new_window",command:{id:Mf,title:{...w(4385,"Move Editor into New Window"),mnemonicTitle:d(4386,"&&Move Editor into New Window")}},order:1});k.appendMenuItem(b.MenubarLayoutMenu,{group:"3_new_window",command:{id:Lf,title:{...w(4387,"Copy Editor into New Window"),mnemonicTitle:d(4388,"&&Copy Editor into New Window")}},order:2});k.appendMenuItem(b.MenubarLayoutMenu,{group:"4_layouts",command:{id:fl.ID,title:{...w(4389,"Single"),mnemonicTitle:d(4390,"&&Single")}},order:1});k.appendMenuItem(b.MenubarLayoutMenu,{group:"4_layouts",command:{id:bl.ID,title:{...w(4391,"Two Columns"),mnemonicTitle:d(4392,"&&Two Columns")}},order:3});k.appendMenuItem(b.MenubarLayoutMenu,{group:"4_layouts",command:{id:wl.ID,title:{...w(4393,"Three Columns"),mnemonicTitle:d(4394,"T&&hree Columns")}},order:4});k.appendMenuItem(b.MenubarLayoutMenu,{group:"4_layouts",command:{id:vl.ID,title:{...w(4395,"Two Rows"),mnemonicTitle:d(4396,"T&&wo Rows")}},order:5});k.appendMenuItem(b.MenubarLayoutMenu,{group:"4_layouts",command:{id:yl.ID,title:{...w(4397,"Three Rows"),mnemonicTitle:d(4398,"Three &&Rows")}},order:6});k.appendMenuItem(b.MenubarLayoutMenu,{group:"4_layouts",command:{id:Cl.ID,title:{...w(4399,"Grid (2x2)"),mnemonicTitle:d(4400,"&&Grid (2x2)")}},order:7});k.appendMenuItem(b.MenubarLayoutMenu,{group:"4_layouts",command:{id:El.ID,title:{...w(4401,"Two Rows Right"),mnemonicTitle:d(4402,"Two R&&ows Right")}},order:8});k.appendMenuItem(b.MenubarLayoutMenu,{group:"4_layouts",command:{id:Sl.ID,title:{...w(4403,"Two Columns Bottom"),mnemonicTitle:d(4404,"Two &&Columns Bottom")}},order:9});k.appendMenuItem(b.MenubarGoMenu,{group:"1_history_nav",command:{id:"workbench.action.navigateToLastEditLocation",title:d(4405,"&&Last Edit Location"),precondition:y.has("canNavigateToLastEditLocation")},order:3});k.appendMenuItem(b.MenubarSwitchEditorMenu,{group:"1_sideBySide",command:{id:PD,title:d(4406,"&&First Side in Editor")},when:y.or(xs,mn),order:1});k.appendMenuItem(b.MenubarSwitchEditorMenu,{group:"1_sideBySide",command:{id:RD,title:d(4407,"&&Second Side in Editor")},when:y.or(xs,mn),order:2});k.appendMenuItem(b.MenubarSwitchEditorMenu,{group:"2_any",command:{id:"workbench.action.nextEditor",title:d(4408,"&&Next Editor")},order:1});k.appendMenuItem(b.MenubarSwitchEditorMenu,{group:"2_any",command:{id:"workbench.action.previousEditor",title:d(4409,"&&Previous Editor")},order:2});k.appendMenuItem(b.MenubarSwitchEditorMenu,{group:"3_any_used",command:{id:"workbench.action.openNextRecentlyUsedEditor",title:d(4410,"&&Next Used Editor")},order:1});k.appendMenuItem(b.MenubarSwitchEditorMenu,{group:"3_any_used",command:{id:"workbench.action.openPreviousRecentlyUsedEditor",title:d(4411,"&&Previous Used Editor")},order:2});k.appendMenuItem(b.MenubarSwitchEditorMenu,{group:"4_group",command:{id:"workbench.action.nextEditorInGroup",title:d(4412,"&&Next Editor in Group")},order:1});k.appendMenuItem(b.MenubarSwitchEditorMenu,{group:"4_group",command:{id:"workbench.action.previousEditorInGroup",title:d(4413,"&&Previous Editor in Group")},order:2});k.appendMenuItem(b.MenubarSwitchEditorMenu,{group:"5_group_used",command:{id:"workbench.action.openNextRecentlyUsedEditorInGroup",title:d(4414,"&&Next Used Editor in Group")},order:1});k.appendMenuItem(b.MenubarSwitchEditorMenu,{group:"5_group_used",command:{id:"workbench.action.openPreviousRecentlyUsedEditorInGroup",title:d(4415,"&&Previous Used Editor in Group")},order:2});k.appendMenuItem(b.MenubarGoMenu,{group:"2_editor_nav",title:d(4416,"Switch &&Editor"),submenu:b.MenubarSwitchEditorMenu,order:1});k.appendMenuItem(b.MenubarSwitchGroupMenu,{group:"1_focus_index",command:{id:"workbench.action.focusFirstEditorGroup",title:d(4417,"Group &&1")},order:1});k.appendMenuItem(b.MenubarSwitchGroupMenu,{group:"1_focus_index",command:{id:"workbench.action.focusSecondEditorGroup",title:d(4418,"Group &&2")},order:2});k.appendMenuItem(b.MenubarSwitchGroupMenu,{group:"1_focus_index",command:{id:"workbench.action.focusThirdEditorGroup",title:d(4419,"Group &&3"),precondition:ti},order:3});k.appendMenuItem(b.MenubarSwitchGroupMenu,{group:"1_focus_index",command:{id:"workbench.action.focusFourthEditorGroup",title:d(4420,"Group &&4"),precondition:ti},order:4});k.appendMenuItem(b.MenubarSwitchGroupMenu,{group:"1_focus_index",command:{id:"workbench.action.focusFifthEditorGroup",title:d(4421,"Group &&5"),precondition:ti},order:5});k.appendMenuItem(b.MenubarSwitchGroupMenu,{group:"2_next_prev",command:{id:"workbench.action.focusNextGroup",title:d(4422,"&&Next Group"),precondition:ti},order:1});k.appendMenuItem(b.MenubarSwitchGroupMenu,{group:"2_next_prev",command:{id:"workbench.action.focusPreviousGroup",title:d(4423,"&&Previous Group"),precondition:ti},order:2});k.appendMenuItem(b.MenubarSwitchGroupMenu,{group:"3_directional",command:{id:"workbench.action.focusLeftGroup",title:d(4424,"Group &&Left"),precondition:ti},order:1});k.appendMenuItem(b.MenubarSwitchGroupMenu,{group:"3_directional",command:{id:"workbench.action.focusRightGroup",title:d(4425,"Group &&Right"),precondition:ti},order:2});k.appendMenuItem(b.MenubarSwitchGroupMenu,{group:"3_directional",command:{id:"workbench.action.focusAboveGroup",title:d(4426,"Group &&Above"),precondition:ti},order:3});k.appendMenuItem(b.MenubarSwitchGroupMenu,{group:"3_directional",command:{id:"workbench.action.focusBelowGroup",title:d(4427,"Group &&Below"),precondition:ti},order:4});k.appendMenuItem(b.MenubarGoMenu,{group:"2_editor_nav",title:d(4428,"Switch &&Group"),submenu:b.MenubarSwitchGroupMenu,order:2});var fr;let gc=(fr=class{constructor(e){this._webviewWorkbenchService=e}canSerialize(e){return this._webviewWorkbenchService.shouldPersist(e)}serialize(e){if(!this.canSerialize(e))return;const t=this.toJson(e);try{return JSON.stringify(t)}catch{return}}deserialize(e,t){const i=this.fromJson(JSON.parse(t));return this._webviewWorkbenchService.openRevivedWebview({webviewInitInfo:{providedViewType:i.providedId,origin:i.origin,title:i.title,options:i.webviewOptions,contentOptions:i.contentOptions,extension:i.extension},viewType:i.viewType,title:i.title,iconPath:i.iconPath,state:i.state,group:i.group})}fromJson(e){return{...e,extension:CE(e.extensionId,e.extensionLocation),iconPath:GL(e.iconPath),state:WL(e.state),webviewOptions:e.options,contentOptions:SE(e.options)}}toJson(e){var t,i;return{origin:e.webview.origin,viewType:e.viewType,providedId:e.providedId,title:e.getName(),options:{...e.webview.options,...e.webview.contentOptions},extensionLocation:(t=e.extension)==null?void 0:t.location,extensionId:(i=e.extension)==null?void 0:i.id.value,state:e.webview.state,iconPath:e.iconPath?{light:e.iconPath.light,dark:e.iconPath.dark}:void 0,group:e.group}}},fr.ID=Or.typeId,fr);gc=x([u(0,eb)],gc);function CE(c,e){if(!c)return;const t=$l(e);if(t)return{id:new _C(c),location:t}}function GL(c){if(!c)return;const e=$l(c.light),t=$l(c.dark);return e&&t?{light:e,dark:t}:void 0}function $l(c){if(c)try{return typeof c=="string"?z.parse(c):z.from(c)}catch{return}}function WL(c){return typeof c=="string"?c:void 0}function SE(c){var e;return{...c,localResourceRoots:(e=c.localResourceRoots)==null?void 0:e.map(t=>$l(t))}}var br;let jl=(br=class extends gc{constructor(e,t,i){super(e),this._instantiationService=t,this._webviewService=i}serialize(e){const t=e.isDirty(),i={...this.toJson(e),editorResource:e.resource.toJSON(),dirty:t,backupId:t?e.backupId:void 0};try{return JSON.stringify(i)}catch{return}}fromJson(e){return{...super.fromJson(e),editorResource:z.from(e.editorResource),dirty:e.dirty}}deserialize(e,t){const i=this.fromJson(JSON.parse(t)),o=EE(this._webviewService,i),n=this._instantiationService.createInstance(Pt,{resource:i.editorResource,viewType:i.viewType},o,{startsDirty:i.dirty,backupId:i.backupId});return typeof i.group=="number"&&n.updateGroup(i.group),n}},br.ID=Pt.typeId,br);jl=x([u(0,eb),u(1,O),u(2,Ds)],jl);function EE(c,e){const t=c.createWebviewOverlay({providedViewType:e.viewType,origin:e.origin,title:void 0,options:{purpose:"customEditor",enableFindWidget:e.webviewOptions.enableFindWidget,retainContextWhenHidden:e.webviewOptions.retainContextWhenHidden},contentOptions:e.contentOptions,extension:e.extension});return t.state=e.state,t}var wr;let Yl=(wr=class extends R{constructor(e,t,i,o,n){super(),this._instantiationService=e,this._workingCopyBackupService=i,this._webviewService=o,this._register(t.registerHandler(this))}handles(e){return e.resource.scheme===pe.vscodeCustomEditor}isOpen(e,t){if(!this.handles(e))return!1;if(e.resource.authority==="jupyter-notebook-ipynb"&&t instanceof BD)try{const i=JSON.parse(e.resource.query),o=z.from(i);return ot(o,t.resource)}catch{return!1}if(!(t instanceof Pt)||e.resource.authority!==t.viewType.replace(/[^a-z0-9\-_]/gi,"-").toLowerCase())return!1;try{const i=JSON.parse(e.resource.query),o=z.from(i);return ot(o,t.resource)}catch{return!1}}async createEditor(e){var r,a;const t=await this._workingCopyBackupService.resolve(e);if(!(t!=null&&t.meta))throw new Error(`No backup found for custom editor: ${e.resource}`);const i=t.meta,o=CE((r=i.extension)==null?void 0:r.id,(a=i.extension)==null?void 0:a.location),n=EE(this._webviewService,{viewType:i.viewType,origin:i.webview.origin,webviewOptions:i.webview.options,contentOptions:SE(i.webview.options),state:i.webview.state,extension:o}),s=this._instantiationService.createInstance(Pt,{resource:z.revive(i.editorResource),viewType:i.viewType},n,{backupId:i.backupId});return s.updateGroup(0),s}},wr.ID="workbench.contrib.complexCustomWorkingCopyEditorHandler",wr);Yl=x([u(0,O),u(1,wu),u(2,OD),u(3,Ds),u(4,UC)],Yl);$.as(wt.EditorPane).registerEditorPane(Jt.create(ec,ec.ID,"Webview Editor"),[new ce(Pt)]);$.as(wt.EditorFactory).registerEditorSerializer(jl.ID,jl);Mt(Yl.ID,Yl,1);const Vu=y.and(y.equals("activeEditor",ec.ID),Qa.focus.toNegated()),Qs=class Qs extends A{constructor(){super({id:Qs.ID,title:Qs.LABEL,keybinding:{when:y.and(Vu,zy),primary:2084,weight:100}})}run(e){var t;(t=Mu(e))==null||t.showFind()}};Qs.ID="editor.action.webvieweditor.showFind",Qs.LABEL=d(9926,"Show find");let Km=Qs;const er=class er extends A{constructor(){super({id:er.ID,title:er.LABEL,keybinding:{when:y.and(Vu,Hy),primary:9,weight:100}})}run(e){var t;(t=Mu(e))==null||t.hideFind()}};er.ID="editor.action.webvieweditor.hideFind",er.LABEL=d(9927,"Stop find");let qm=er;const tr=class tr extends A{constructor(){super({id:tr.ID,title:tr.LABEL,keybinding:{when:y.and(Vu,qf),primary:3,weight:100}})}run(e){var t;(t=Mu(e))==null||t.runFindAction(!1)}};tr.ID="editor.action.webvieweditor.findNext",tr.LABEL=d(9928,"Find next");let $m=tr;const ir=class ir extends A{constructor(){super({id:ir.ID,title:ir.LABEL,keybinding:{when:y.and(Vu,qf),primary:1027,weight:100}})}run(e){var t;(t=Mu(e))==null||t.runFindAction(!0)}};ir.ID="editor.action.webvieweditor.findPrevious",ir.LABEL=d(9929,"Find previous");let jm=ir;const or=class or extends A{constructor(){super({id:or.ID,title:or.LABEL,category:_.Developer,menu:[{id:b.CommandPalette}]})}async run(e){const t=e.get(Ds);for(const i of t.webviews)i.reload()}};or.ID="workbench.action.webview.reloadWebviewAction",or.LABEL=w(9930,"Reload Webviews");let Ym=or;function Mu(c){const t=c.get(U).activeEditor;return t instanceof Or?t.webview:void 0}$.as(wt.EditorPane).registerEditorPane(Jt.create(ec,ec.ID,d(4429,"webview editor")),[new ce(Or)]);var vr;let Zl=(vr=class extends R{constructor(e,t){super(),this.editorGroupService=t,this._register(e.onWillOpenEditor(i=>{const o=t.getGroup(i.groupId);o&&this.onEditorOpening(i.editor,o)}))}onEditorOpening(e,t){if(!(e instanceof Or)||e.typeId!==Or.typeId||t.contains(e))return;let i;const o=this.editorGroupService.groups;for(const n of o)if(n.contains(e)){i=n;break}i&&i.closeEditor(e)}},vr.ID="workbench.contrib.webviewPanel",vr);Zl=x([u(0,U),u(1,Z)],Zl);Mt(Zl.ID,Zl,1);$.as(wt.EditorFactory).registerEditorSerializer(gc.ID,gc);C(Km);C(qm);C($m);C(jm);C(Ym);let lv=class extends R{constructor(e,t,i,o,n){super(),this.configurationService=t,this.logService=i,this.preferencesService=o,this.quickInputService=n,this._providers=new Qy,this._register(e.registerExternalOpener(this))}registerExternalOpenerProvider(e){return{dispose:this._providers.push(e)}}async getOpeners(e,t,i,o){const n=await this.getAllOpenersForUri(e);if(n.size===0)return[];if(i.preferredOpenerId){if(i.preferredOpenerId===Yu)return[];const l=n.get(i.preferredOpenerId);if(l)return[l]}const s=this.getConfiguredOpenerForUri(n,e);if(s)return s===Yu?[]:[s];const r=[];if(await Promise.all(Array.from(n.values()).map(async l=>{let h;try{h=await l.canOpen(i.sourceUri,o)}catch(p){this.logService.error(p);return}switch(h){case da.Option:case da.Default:case da.Preferred:r.push({opener:l,priority:h});break}})),r.length===0)return[];const a=r.filter(l=>l.priority===da.Preferred).at(0);return a?[a.opener]:!t&&r.every(l=>l.priority===da.Option)?[]:r.map(l=>l.opener)}async openExternal(e,t,i){const o=typeof e=="string"?z.parse(e):e,n=await this.getOpeners(o,!1,t,i);return n.length===0?!1:n.length===1?n[0].openExternalUri(o,t,i):this.showOpenerPrompt(n,o,t,i)}async getOpener(e,t,i){const o=await this.getOpeners(e,!0,t,i);if(o.length>=1)return o[0]}async getAllOpenersForUri(e){const t=new Map;return await Promise.all(ND.map(this._providers,async i=>{for await(const o of i.getOpeners(e))t.set(o.id,o)})),t}getConfiguredOpenerForUri(e,t){const i=this.configurationService.getValue(Cw)||{};for(const[o,n]of Object.entries(i))if(FD(t,o)){if(n===Yu)return"default";const s=e.get(n);if(s)return s}}async showOpenerPrompt(e,t,i,o){const n=e.map(r=>({label:r.label,opener:r}));n.push({label:vt?d(3589,"Open in new browser window"):d(3590,"Open in default browser"),opener:void 0},{type:"separator"},{label:d(3591,"Configure default opener..."),opener:"configureDefault"});const s=await this.quickInputService.pick(n,{placeHolder:d(3592,"How would you like to open: {0}",t.toString())});return s?typeof s.opener>"u"?!1:s.opener==="configureDefault"?(await this.preferencesService.openUserSettings({jsonEditor:!0,revealSetting:{key:Cw,edit:!0}}),!0):s.opener.openExternalUri(t,i,o):!0}};lv=x([u(0,It),u(1,F),u(2,Je),u(3,bn),u(4,Fe)],lv);$.as(ks.Configuration).registerConfiguration(GD);var HL='@keyframes wiggle{0%{transform:rotate(0) scale(1)}15%,45%{transform:rotate(.04turn) scale(1.1)}30%,60%{transform:rotate(-.04turn) scale(1.2)}to{transform:rotate(0) scale(1)}}.monaco-workbench .statusbar DIV#status\\.languageStatus A>SPAN.codicon.wiggle{animation-duration:.8s;animation-iteration-count:1;animation-name:wiggle}@keyframes flash{0%{background-color:initial}50%{background-color:var(--vscode-statusBarItem-prominentBackground)}to{background-color:initial}}.monaco-workbench .statusbar DIV#status\\.languageStatus.flash A{animation-duration:.8s;animation-iteration-count:1;animation-name:flash}.monaco-workbench .hover-language-status{display:flex}.monaco-workbench .hover-language-status:not(:last-child){border-bottom:1px solid var(--vscode-notifications-border)}.monaco-workbench .hover-language-status>.severity{display:none;flex:1;margin:auto;padding-right:8px}.monaco-workbench .hover-language-status>.severity.sev3{color:var(--vscode-notificationsErrorIcon-foreground)}.monaco-workbench .hover-language-status>.severity.sev2{color:var(--vscode-notificationsInfoIcon-foreground)}.monaco-workbench .hover-language-status>.severity.show{display:inherit}.monaco-workbench .hover-language-status>.element{display:flex;flex-grow:100;justify-content:space-between;vertical-align:middle}.monaco-workbench .hover-language-status>.element>.left>.detail:not(:empty):before{content:"\\2013";opacity:.6;padding:0 4px}.monaco-workbench .hover-language-status>.element>.left>.label:empty{display:none}.monaco-workbench .hover-language-status>.element .left{margin:auto 0}.monaco-workbench .hover-language-status>.element .right{display:flex;margin:auto 0}.monaco-workbench .hover-language-status>.element .right:not(:empty){padding-left:16px}.monaco-workbench .hover-language-status>.element .right .monaco-link{margin:auto 0;text-decoration:var(--text-link-decoration);white-space:nowrap}.monaco-workbench .hover-language-status>.element .right .monaco-action-bar:not(:first-child){padding-left:8px}';we(HL,{});function zL(c){const e=c;return typeof(e==null?void 0:e.id)=="string"&&typeof e.alignment=="number"}function ZB(c){const e=c;return(typeof(e==null?void 0:e.primary)=="number"||zL(e==null?void 0:e.primary))&&typeof(e==null?void 0:e.secondary)=="number"}const UL={id:"statusBar.entry.showTooltip",title:""},XB=["standard","warning","error","prominent","remote","offline"];var oi;class hv{constructor(e,t){this.combined=e,this.dedicated=t}isEqual(e){return fs(this.combined,e.combined)&&fs(this.dedicated,e.dedicated)}}let Zm=class{constructor(e,t){this._storageService=e,this._key=t}get value(){return this._storageService.getNumber(this._key,0,0)}increment(){const e=this.value+1;return this._storageService.store(this._key,e,0,1),e}};Zm=x([u(0,ie)],Zm);let Xm=class extends R{constructor(e){super(),this.editorGroupService=e;for(const t of e.parts)this.createLanguageStatus(t);this._register(e.onDidCreateAuxiliaryEditorPart(t=>this.createLanguageStatus(t)))}createLanguageStatus(e){const t=new P;N.once(e.onWillDispose)(()=>t.dispose());const i=this.editorGroupService.getScopedInstantiationService(e);t.add(i.createInstance(Jm))}};Xm=x([u(0,Z)],Xm);var an;let Jm=(an=class{constructor(e,t,i,o,n,s){this._languageStatusService=e,this._statusBarService=t,this._editorService=i,this._hoverService=o,this._openerService=n,this._storageService=s,this._disposables=new P,this._dedicated=new Set,this._dedicatedEntries=new Map,this._renderDisposables=new P,s.onDidChangeValue(0,oi._keyDedicatedItems,this._disposables)(this._handleStorageChange,this,this._disposables),this._restoreState(),this._interactionCounter=new Zm(s,"languageStatus.interactCount"),e.onDidChange(this._update,this,this._disposables),i.onDidActiveEditorChange(this._update,this,this._disposables),this._update(),t.onDidChangeEntryVisibility(r=>{!r.visible&&this._dedicated.has(r.id)&&(this._dedicated.delete(r.id),this._update(),this._storeState())},void 0,this._disposables)}dispose(){var e;this._disposables.dispose(),(e=this._combinedEntry)==null||e.dispose(),Re(this._dedicatedEntries.values()),this._renderDisposables.dispose()}_handleStorageChange(){this._restoreState(),this._update()}_restoreState(){const e=this._storageService.get(oi._keyDedicatedItems,0,"[]");try{const t=JSON.parse(e);this._dedicated=new Set(t)}catch{this._dedicated.clear()}}_storeState(){if(this._dedicated.size===0)this._storageService.remove(oi._keyDedicatedItems,0);else{const e=JSON.stringify(Array.from(this._dedicated.keys()));this._storageService.store(oi._keyDedicatedItems,e,0,0)}}_createViewModel(e){if(!(e!=null&&e.hasModel()))return new hv([],[]);const t=this._languageStatusService.getLanguageStatus(e.getModel()),i=[],o=[];for(const n of t)this._dedicated.has(n.id)&&o.push(n),i.push(n);return new hv(i,o)}_update(){var o,n;const e=_i(this._editorService.activeTextEditorControl),t=this._createViewModel(e);if((o=this._model)!=null&&o.isEqual(t))return;if(this._renderDisposables.clear(),this._model=t,e==null||e.onDidChangeModelLanguage(this._update,this,this._renderDisposables),t.combined.length===0)(n=this._combinedEntry)==null||n.dispose(),this._combinedEntry=void 0;else{const[s]=t.combined,r=s.severity>=me.Warning,a=oi._severityToComboCodicon(s.severity);let l=!1;const h=[],p=document.createElement("div");for(const E of t.combined){const D=t.dedicated.includes(E);p.appendChild(this._renderStatus(E,r,D,this._renderDisposables)),h.push(oi._accessibilityInformation(E).label),l=l||!D&&E.busy}const g={name:d(4430,"Editor Language Status"),ariaLabel:d(4431,"Editor Language Status: {0}",h.join(", next: ")),tooltip:p,command:UL,text:ap(a,l)};this._combinedEntry?this._combinedEntry.update(g):this._combinedEntry=this._statusBarService.addEntry(g,oi._id,1,{id:"status.editor.mode",alignment:0,compact:!0});const m=this._interactionCounter.value>=3,f=fe(e==null?void 0:e.getContainerDomNode()),v=f.document.querySelector(".monaco-workbench .statusbar DIV#status\\.languageStatus A>SPAN.codicon"),S=f.document.querySelector(".monaco-workbench .statusbar DIV#status\\.languageStatus");if(pn(v)&&S){const E="wiggle",D="flash";l?(v.classList.remove(E),S.classList.remove(D)):(v.classList.toggle(E,r||!m),this._renderDisposables.add(L(v,"animationend",V=>v.classList.remove(E))),S.classList.toggle(D,r),this._renderDisposables.add(L(S,"animationend",V=>S.classList.remove(D))))}if(!m){const E=f.document.querySelector(".monaco-workbench .context-view");if(pn(E)){const D=new MutationObserver(()=>{f.document.contains(p)&&(this._interactionCounter.increment(),D.disconnect())});D.observe(E,{childList:!0,subtree:!0}),this._renderDisposables.add(ne(()=>D.disconnect()))}}}const i=new Map;for(const s of t.dedicated){const r=oi._asStatusbarEntry(s);let a=this._dedicatedEntries.get(s.id);a?(a.update(r),this._dedicatedEntries.delete(s.id)):a=this._statusBarService.addEntry(r,s.id,1,{id:"status.editor.mode",alignment:1}),i.set(s.id,a)}Re(this._dedicatedEntries.values()),this._dedicatedEntries=i}_renderStatus(e,t,i,o){const n=document.createElement("div");n.classList.add("hover-language-status");const s=document.createElement("div");s.classList.add("severity",`sev${e.severity}`),s.classList.toggle("show",t);const r=oi._severityToSingleCodicon(e.severity);ve(s,...Di(r)),n.appendChild(s);const a=document.createElement("div");a.classList.add("element"),n.appendChild(a);const l=document.createElement("div");l.classList.add("left"),a.appendChild(l);const h=document.createElement("span");h.classList.add("label");const p=typeof e.label=="string"?e.label:e.label.value;ve(h,...Di(ap(p,e.busy))),l.appendChild(h);const g=document.createElement("span");g.classList.add("detail"),this._renderTextPlus(g,e.detail,o),l.appendChild(g);const m=document.createElement("div");m.classList.add("right"),a.appendChild(m);const{command:f}=e;f&&o.add(new Sw(m,{label:f.title,title:f.tooltip,href:z.from({scheme:"command",path:f.id,query:f.arguments&&JSON.stringify(f.arguments)}).toString()},{hoverDelegate:Ew},this._hoverService,this._openerService));const v=new Vo(m,{hoverDelegate:Ew}),S=i?d(4432,"Remove from Status Bar"):d(4433,"Add to Status Bar");v.setAriaLabel(S),o.add(v);let E;return i?E=new de("unpin",S,oe.asClassName(T.pinned),!0,()=>{this._dedicated.delete(e.id),this._statusBarService.updateEntryVisibility(e.id,!1),this._update(),this._storeState()}):E=new de("pin",S,oe.asClassName(T.pin),!0,()=>{this._dedicated.add(e.id),this._statusBarService.updateEntryVisibility(e.id,!0),this._update(),this._storeState()}),v.push(E,{icon:!0,label:!1}),o.add(E),n}static _severityToComboCodicon(e){switch(e){case me.Error:return"$(bracket-error)";case me.Warning:return"$(bracket-dot)";default:return"$(bracket)"}}static _severityToSingleCodicon(e){switch(e){case me.Error:return"$(error)";case me.Warning:return"$(info)";default:return"$(check)"}}_renderTextPlus(e,t,i){for(const o of Dd(t).nodes)if(typeof o=="string"){const n=Di(o);ve(e,...n)}else i.add(new Sw(e,o,void 0,this._hoverService,this._openerService))}static _accessibilityInformation(e){if(e.accessibilityInfo)return e.accessibilityInfo;const t=typeof e.label=="string"?e.label:e.label.value;return e.detail?{label:d(4434,"{0}, {1}",t,e.detail)}:{label:d(4435,"{0}",t)}}static _asStatusbarEntry(e){var o,n;let t;e.severity===me.Warning?t="warning":e.severity===me.Error&&(t="error");const i=typeof e.label=="string"?e.label:e.label.shortValue;return{name:d(4436,"{0} (Language Status)",e.name),text:ap(i,e.busy),ariaLabel:oi._accessibilityInformation(e).label,role:(o=e.accessibilityInfo)==null?void 0:o.role,tooltip:((n=e.command)==null?void 0:n.tooltip)||new _c(e.detail,{isTrusted:!0,supportThemeIcons:!0}),kind:t,command:e.command}}},oi=an,an._id="status.languageStatus",an._keyDedicatedItems="languageStatus.dedicated",an);Jm=oi=x([u(0,KC),u(1,kn),u(2,U),u(3,Xe),u(4,It),u(5,ie)],Jm);$.as(Pc.Workbench).registerWorkbenchContribution(Xm,3);C(class extends A{constructor(){super({id:"editor.inlayHints.Reset",title:w(4437,"Reset Language Status Interaction Counter"),category:_.View,f1:!0})}run(c){c.get(ie).remove("languageStatus.interactCount",0)}});function ap(c,e){return WD([c!==""&&c,e&&"$(loading~spin)"],"")}var KL='.monaco-workbench .merge-editor .code-view>.header{align-content:center;display:flex;height:30px;overflow:hidden;padding:0 10px}.monaco-workbench .merge-editor .code-view>.header>span{align-self:center;overflow:hidden;padding-right:6px;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .merge-editor .code-view>.header>span.title{flex-shrink:0}.monaco-workbench .merge-editor .code-view>.header>span.description{align-items:center;color:var(--vscode-descriptionForeground);display:flex;flex-shrink:0;font-size:12px}.monaco-workbench .merge-editor .code-view.result>.header>.description{display:inline;flex-shrink:1}.monaco-workbench .merge-editor .code-view.result>.header>.detail,.monaco-workbench .merge-editor .code-view.result>.header>.toolbar{flex-shrink:0}.monaco-workbench .merge-editor .code-view>.header>span.description .codicon{color:var(--vscode-descriptionForeground);font-size:14px}.monaco-workbench .merge-editor .code-view>.header>span.detail{color:var(--vscode-descriptionForeground);font-size:12px;margin-left:auto}.monaco-workbench .merge-editor .code-view>.header>span.detail .codicon{font-size:13px}.monaco-workbench .merge-editor .code-view.input>.header>span.detail:before{content:"";opacity:.5;padding-right:3px}.monaco-workbench .merge-editor .code-view.input>.header>span.detail{margin-left:0}.monaco-workbench .merge-editor .code-view.input>.header>span.toolbar{flex-shrink:0;margin-left:auto}.monaco-workbench .merge-editor .code-view>.container{display:flex;flex-direction:row}.monaco-workbench .merge-editor .code-view>.container>.gutter{flex-grow:0;flex-shrink:0;overflow:hidden;position:relative;width:24px}.monaco-workbench .merge-editor .merge-editor-diff{background-color:var(--vscode-mergeEditor-change-background)}.monaco-workbench .merge-editor .merge-editor-diff-word{background-color:var(--vscode-mergeEditor-change-word-background)}.monaco-workbench .merge-editor .merge-editor-block:not(.handled):not(.focused){border:1px solid var(--vscode-mergeEditor-conflict-unhandledUnfocused-border)}.monaco-workbench .merge-editor .merge-editor-block:not(.handled).focused{border:2px solid var(--vscode-mergeEditor-conflict-unhandledFocused-border)}.monaco-workbench .merge-editor .merge-editor-block.handled:not(.focused){border:1px solid var(--vscode-mergeEditor-conflict-handledUnfocused-border)}.monaco-workbench .merge-editor .merge-editor-block.handled.focused{border:1px solid var(--vscode-mergeEditor-conflict-handledFocused-border)}.merge-editor-block.use-simplified-decorations.input.i1,.monaco-workbench .merge-editor .merge-editor-simplified.input.i1{background-color:var(--vscode-mergeEditor-conflict-input1-background)}.merge-editor-block.use-simplified-decorations.input.i2,.monaco-workbench .merge-editor .merge-editor-simplified.input.i2{background-color:var(--vscode-mergeEditor-conflict-input2-background)}.gutter.monaco-editor>div{position:absolute}.merge-accept-gutter-marker{margin-left:4px;width:28px}.merge-accept-gutter-marker .background{height:100%;position:absolute;width:50%}.merge-accept-gutter-marker.multi-line.focused .background{border:2px solid var(--vscode-mergeEditor-conflict-unhandledFocused-border);border-right:0}.merge-accept-gutter-marker.multi-line .background{border:2px solid var(--vscode-mergeEditor-conflict-unhandledUnfocused-border);border-bottom-left-radius:3px;border-right:0;border-top-left-radius:3px}.merge-accept-gutter-marker.multi-line.handled.focused .background{border:2px solid var(--vscode-mergeEditor-conflict-handledFocused-border);border-right:0}.merge-accept-gutter-marker.multi-line.handled .background{border:2px solid var(--vscode-checkbox-border);border-right:0}.focused .accept-conflict-group.monaco-custom-toggle{border:1px solid var(--vscode-mergeEditor-conflict-unhandledFocused-border)}.accept-conflict-group.monaco-custom-toggle{border:1px solid var(--vscode-mergeEditor-conflict-unhandledUnfocused-border)}.handled.focused .accept-conflict-group.monaco-custom-toggle{border:1px solid var(--vscode-mergeEditor-conflict-handledFocused-border)}.handled .accept-conflict-group.monaco-custom-toggle{border:1px solid var(--vscode-checkbox-border)}.merge-accept-gutter-marker.multi-line .background{left:8px;width:10px}.merge-accept-gutter-marker .checkbox{position:absolute;width:100%}.accept-conflict-group.monaco-custom-toggle{background-color:var(--vscode-checkbox-border);background-size:16px!important;border-radius:3px;height:18px;margin-left:0;margin-right:0;opacity:1;padding:0;width:18px}.merge-accept-gutter-marker .checkbox-background{background:var(--vscode-editor-background);display:flex}.conflict-zone-root{align-content:center;align-items:center;background-color:var(--vscode-mergeEditor-change-background);border:1px solid var(--vscode-mergeEditor-conflict-unhandledUnfocused-border);display:flex;height:90%}.conflict-zone-root .dots{margin:0 10px}.conflict-zone-root pre{display:"inline";font-family:var(--monaco-monospace-font)}.conflict-zone-root .text{align-items:center;background:var(--vscode-mergeEditor-conflictingLines-background);display:flex;height:100%;margin-left:auto;overflow:hidden;padding:0 8px;white-space:nowrap}.focused.conflict-zone .conflict-zone-root{border:1px solid var(--vscode-mergeEditor-conflict-unhandledFocused-border)}.merge-editor-conflict-actions{color:var(--vscode-editorCodeLens-foreground);display:inline-block;margin:0 3px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.merge-editor-conflict-actions>a,.merge-editor-conflict-actions>span{user-select:none;-webkit-user-select:none;white-space:nowrap}.merge-editor-conflict-actions>a{text-decoration:none}.merge-editor-conflict-actions>a:hover{cursor:pointer}.merge-editor-conflict-actions>a:hover,.merge-editor-conflict-actions>a:hover .codicon{color:var(--vscode-editorLink-activeForeground)!important}.merge-editor-conflict-actions .codicon{color:currentColor!important;color:var(--vscode-editorCodeLens-foreground);vertical-align:middle}.merge-editor-conflict-actions>a:hover .codicon:before{cursor:pointer}.fixed-zone-widget{width:100%}.merge-editor-diff-empty-word.base{border-left:3px solid var(--vscode-mergeEditor-changeBase-word-background);margin-left:3px}.merge-editor-diff-empty-word.input{border-left:3px solid var(--vscode-mergeEditor-change-word-background);margin-left:3px}.merge-editor-diff-word.base{background-color:var(--vscode-mergeEditor-changeBase-word-background)}.merge-editor-diff.base{background-color:var(--vscode-mergeEditor-changeBase-background)}';we(KL,{});le("mergeEditor.change.background","#9bb95533",d(11487,"The background color for changes."));le("mergeEditor.change.word.background",{dark:"#9ccc2c33",light:"#9ccc2c66",hcDark:"#9ccc2c33",hcLight:"#9ccc2c66"},d(11488,"The background color for word changes."));le("mergeEditor.changeBase.background",{dark:"#4B1818FF",light:"#FFCCCCFF",hcDark:"#4B1818FF",hcLight:"#FFCCCCFF"},d(11489,"The background color for changes in base."));le("mergeEditor.changeBase.word.background",{dark:"#6F1313FF",light:"#FFA3A3FF",hcDark:"#6F1313FF",hcLight:"#FFA3A3FF"},d(11490,"The background color for word changes in base."));le("mergeEditor.conflict.unhandledUnfocused.border",{dark:"#ffa6007a",light:"#ffa600FF",hcDark:"#ffa6007a",hcLight:"#ffa6007a"},d(11491,"The border color of unhandled unfocused conflicts."));le("mergeEditor.conflict.unhandledFocused.border","#ffa600",d(11492,"The border color of unhandled focused conflicts."));le("mergeEditor.conflict.handledUnfocused.border","#86868649",d(11493,"The border color of handled unfocused conflicts."));le("mergeEditor.conflict.handledFocused.border","#c1c1c1cc",d(11494,"The border color of handled focused conflicts."));const Kr=le("mergeEditor.conflict.handled.minimapOverViewRuler","#adaca8ee",d(11495,"The foreground color for changes in input 1.")),qr=le("mergeEditor.conflict.unhandled.minimapOverViewRuler","#fcba03FF",d(11496,"The foreground color for changes in input 1."));le("mergeEditor.conflictingLines.background","#ffea0047",d(11497,'The background of the "Conflicting Lines" text.'));const kE=.4;le("mergeEditor.conflict.input1.background",Eo(HD,kE),d(11498,"The background color of decorations in input 1."));le("mergeEditor.conflict.input2.background",Eo(zD,kE),d(11499,"The background color of decorations in input 2."));class yb extends R{constructor(e,t,i){super(),this._editor=e,this._domNode=t,this.itemProvider=i,this.scrollTop=Ta(this,this._editor.onDidScrollChange,s=>this._editor.getScrollTop()),this.isScrollTopZero=this.scrollTop.map(s=>s===0),this.modelAttached=Ta(this,this._editor.onDidChangeModel,s=>this._editor.hasModel()),this.editorOnDidChangeViewZones=kw("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=kw("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=UD("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const o=this._domNode.appendChild(rt("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),n=new ResizeObserver(()=>{Ge(s=>{this.domNodeSizeChanged.trigger(s)})});n.observe(this._domNode),this._register(ne(()=>n.disconnect())),this._register(Zi(s=>{o.className=this.isScrollTopZero.read(s)?"":"scroll-decoration"})),this._register(Zi(s=>this.render(s)))}dispose(){super.dispose(),Ii(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const t=this.scrollTop.read(e),i=this._editor.getVisibleRanges(),o=new Set(this.views.keys());if(i.length>0){const n=i[0],s=new vu(n.startLineNumber,n.endLineNumber-n.startLineNumber).deltaEnd(1),r=this.itemProvider.getIntersectingGutterItems(s,e);for(const a of r){if(!a.range.touches(s))continue;o.delete(a.id);let l=this.views.get(a.id);if(l)l.gutterItemView.update(a);else{const m=document.createElement("div");this._domNode.appendChild(m);const f=this.itemProvider.createView(a,m);l=new qL(f,m),this.views.set(a.id,l)}const h=a.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(a.range.startLineNumber,!0)-t:this._editor.getBottomForLineNumber(a.range.startLineNumber-1,!1)-t,g=this._editor.getBottomForLineNumber(a.range.endLineNumberExclusive-1,!0)-t-h;l.domNode.style.top=`${h}px`,l.domNode.style.height=`${g}px`,l.gutterItemView.layout(h,g,0,this._domNode.clientHeight)}}for(const n of o){const s=this.views.get(n);s.gutterItemView.dispose(),s.domNode.remove(),this.views.delete(n)}}}class qL{constructor(e,t){this.gutterItemView=e,this.domNode=t}}class Cb extends R{updateOptions(e){this.editor.updateOptions(e)}constructor(e,t,i){super(),this.instantiationService=e,this.viewModel=t,this.configurationService=i,this.model=this.viewModel.map(o=>o==null?void 0:o.model),this.htmlElements=rt("div.code-view",[rt("div.header@header",[rt("span.title@title"),rt("span.description@description"),rt("span.detail@detail"),rt("span.toolbar@toolbar")]),rt("div.container",[rt("div.gutter@gutterDiv"),rt("div@editor")])]),this._onDidViewChange=new I,this.view={element:this.htmlElements.root,minimumWidth:kd.width,maximumWidth:_d.width,minimumHeight:kd.height,maximumHeight:_d.height,onDidChange:this._onDidViewChange.event,layout:(o,n,s,r)=>{qD(this.htmlElements.root,{width:o,height:n,top:s,left:r}),this.editor.layout({width:o-this.htmlElements.gutterDiv.clientWidth,height:n-this.htmlElements.header.clientHeight})}},this.checkboxesVisible=Va("mergeEditor.showCheckboxes",!1,this.configurationService),this.showDeletionMarkers=Va("mergeEditor.showDeletionMarkers",!0,this.configurationService),this.useSimplifiedDecorations=Va("mergeEditor.useSimplifiedDecorations",!1,this.configurationService),this.editor=this.instantiationService.createInstance(IC,this.htmlElements.editor,{},{contributions:this.getEditorContributions()}),this.isFocused=Ta(this,N.any(this.editor.onDidBlurEditorWidget,this.editor.onDidFocusEditorWidget),()=>this.editor.hasWidgetFocus()),this.cursorPosition=Ta(this,this.editor.onDidChangeCursorPosition,()=>this.editor.getPosition()),this.selection=Ta(this,this.editor.onDidChangeCursorSelection,()=>this.editor.getSelections()),this.cursorLineNumber=this.cursorPosition.map(o=>o==null?void 0:o.lineNumber)}getEditorContributions(){return $D.getEditorContributions().filter(e=>e.id!==qC.ID&&e.id!==jD.ID)}}function Sb(c,e){const t=ci(i=>{const o=c.viewModel.read(i);if(!o)return[];const n=o.selectionInBase.read(i);return!n||n.sourceEditor===c?[]:n.rangesInBase.map(s=>e(s,o))});return Zi(i=>{const o=t.read(i);o.length!==0&&c.editor.setSelections(o.map(n=>new VC(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn)))})}let mc=class extends R{constructor(e,t,i){super();const o=i.createInstance(KD,t,e,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:n=>n==="primary"}});this._store.add(o)}};mc=x([u(2,O)],mc);let Qm=class extends Cb{constructor(e,t,i){super(t,e,i),this.decorations=ci(this,o=>{const n=this.viewModel.read(o);if(!n)return[];const s=n.model,r=s.base,a=n.activeModifiedBaseRange.read(o),l=n.showNonConflictingChanges.read(o),h=this.showDeletionMarkers.read(o),p=[];for(const g of s.modifiedBaseRanges.read(o)){const m=g.baseRange;if(!m)continue;const f=s.isHandled(g).read(o);if(!g.isConflicting&&f&&!l)continue;const v=["merge-editor-block"];let S=[0,0,0,0];f&&v.push("handled"),g===a&&(v.push("focused"),S=[0,2,0,2]),v.push("base");const E=n.baseShowDiffAgainst.read(o);if(E)for(const D of g.getInputDiffs(E)){const V=D.inputRange.toInclusiveRange();V&&p.push({range:V,options:{className:"merge-editor-diff base",description:"Merge Editor",isWholeLine:!0}});for(const M of D.rangeMappings)(h||!M.inputRange.isEmpty())&&p.push({range:M.inputRange,options:{className:M.inputRange.isEmpty()?"merge-editor-diff-empty-word base":"merge-editor-diff-word base",description:"Merge Editor",showIfCollapsed:!0}})}p.push({range:m.toInclusiveRangeOrEmpty(),options:{showIfCollapsed:!0,blockClassName:v.join(" "),blockPadding:S,blockIsAfterEnd:m.startLineNumber>r.getLineCount(),description:"Merge Editor",minimap:{position:2,color:{id:f?Kr:qr}},overviewRuler:g.isConflicting?{position:Rc.Center,color:{id:f?Kr:qr}}:void 0}})}return p}),this._register(Sb(this,(o,n)=>o)),this._register(t.createInstance(mc,b.MergeBaseToolbar,this.htmlElements.title)),this._register(yu((o,n)=>{this.checkboxesVisible.read(o)&&n.add(new yb(this.editor,this.htmlElements.gutterDiv,{getIntersectingGutterItems:(s,r)=>[],createView:(s,r)=>{throw new Xa}}))})),this._register(Zi(o=>{const n=this.viewModel.read(o);if(!n)return;this.editor.setModel(n.model.base),Ii(this.htmlElements.title,...Di(d(11483,"Base")));const s=n.baseShowDiffAgainst.read(o);let r;if(s){const a=d(11484,"Comparing with {0}",s===1?n.model.input1.title:n.model.input2.title),l=d(11485,"Differences are highlighted with a background color.");r=rt("span",{title:l},[a]).root}Ii(this.htmlElements.description,...r?[r]:[])})),this._register(tb(this.editor,this.decorations))}};Qm=x([u(1,O),u(2,F)],Qm);class $L extends R{get model(){var e;return(e=this.viewModel.get())==null?void 0:e.model}get shouldAlignResult(){return this.layout.get().kind==="columns"}get shouldAlignBase(){return this.layout.get().kind==="mixed"&&!this.layout.get().showBaseAtTop}constructor(e,t,i,o,n,s){super(),this.viewModel=e,this.input1View=t,this.input2View=i,this.baseView=o,this.inputResultView=n,this.layout=s,this.reentrancyBarrier=new YD;const r=this.updateScrolling=()=>{var l;if(!this.model)return;if(this.input2View.editor.setScrollTop(this.input1View.editor.getScrollTop(),1),this.shouldAlignResult)this.inputResultView.editor.setScrollTop(this.input1View.editor.getScrollTop(),1);else{const h=this.model.input1ResultMapping.get();this.synchronizeScrolling(this.input1View.editor,this.inputResultView.editor,h)}const a=this.baseView.get();if(a)if(this.shouldAlignBase)(l=this.baseView.get())==null||l.editor.setScrollTop(this.input1View.editor.getScrollTop(),1);else{const h=new Xc(this.model.baseInput1Diffs.get(),-1).reverse();this.synchronizeScrolling(this.input1View.editor,a.editor,h)}};this._store.add(this.input1View.editor.onDidScrollChange(this.reentrancyBarrier.makeExclusiveOrSkip(a=>{var l;a.scrollTopChanged&&r(),a.scrollLeftChanged&&((l=this.baseView.get())==null||l.editor.setScrollLeft(a.scrollLeft,1),this.input2View.editor.setScrollLeft(a.scrollLeft,1),this.inputResultView.editor.setScrollLeft(a.scrollLeft,1))}))),this._store.add(this.input2View.editor.onDidScrollChange(this.reentrancyBarrier.makeExclusiveOrSkip(a=>{var l,h;if(this.model){if(a.scrollTopChanged){if(this.input1View.editor.setScrollTop(a.scrollTop,1),this.shouldAlignResult)this.inputResultView.editor.setScrollTop(this.input2View.editor.getScrollTop(),1);else{const g=this.model.input2ResultMapping.get();this.synchronizeScrolling(this.input2View.editor,this.inputResultView.editor,g)}const p=this.baseView.get();if(p&&this.model)if(this.shouldAlignBase)(l=this.baseView.get())==null||l.editor.setScrollTop(a.scrollTop,1);else{const g=new Xc(this.model.baseInput2Diffs.get(),-1).reverse();this.synchronizeScrolling(this.input2View.editor,p.editor,g)}}a.scrollLeftChanged&&((h=this.baseView.get())==null||h.editor.setScrollLeft(a.scrollLeft,1),this.input1View.editor.setScrollLeft(a.scrollLeft,1),this.inputResultView.editor.setScrollLeft(a.scrollLeft,1))}}))),this._store.add(this.inputResultView.editor.onDidScrollChange(this.reentrancyBarrier.makeExclusiveOrSkip(a=>{var l,h,p,g,m;if(a.scrollTopChanged){if(this.shouldAlignResult)this.input1View.editor.setScrollTop(a.scrollTop,1),this.input2View.editor.setScrollTop(a.scrollTop,1);else{const S=(l=this.model)==null?void 0:l.resultInput1Mapping.get();this.synchronizeScrolling(this.inputResultView.editor,this.input1View.editor,S);const E=(h=this.model)==null?void 0:h.resultInput2Mapping.get();this.synchronizeScrolling(this.inputResultView.editor,this.input2View.editor,E)}const f=(p=this.model)==null?void 0:p.resultBaseMapping.get(),v=this.baseView.get();v&&this.model&&this.synchronizeScrolling(this.inputResultView.editor,v.editor,f)}a.scrollLeftChanged&&((m=(g=this.baseView.get())==null?void 0:g.editor)==null||m.setScrollLeft(a.scrollLeft,1),this.input1View.editor.setScrollLeft(a.scrollLeft,1),this.input2View.editor.setScrollLeft(a.scrollLeft,1))}))),this._store.add(yu((a,l)=>{const h=this.baseView.read(a);h&&l.add(h.editor.onDidScrollChange(this.reentrancyBarrier.makeExclusiveOrSkip(p=>{var g;if(p.scrollTopChanged){if(!this.model)return;if(this.shouldAlignBase)this.input1View.editor.setScrollTop(p.scrollTop,1),this.input2View.editor.setScrollTop(p.scrollTop,1);else{const f=new Xc(this.model.baseInput1Diffs.get(),-1);this.synchronizeScrolling(h.editor,this.input1View.editor,f);const v=new Xc(this.model.baseInput2Diffs.get(),-1);this.synchronizeScrolling(h.editor,this.input2View.editor,v)}const m=(g=this.model)==null?void 0:g.baseResultMapping.get();this.synchronizeScrolling(h.editor,this.inputResultView.editor,m)}p.scrollLeftChanged&&(this.inputResultView.editor.setScrollLeft(p.scrollLeft,1),this.input1View.editor.setScrollLeft(p.scrollLeft,1),this.input2View.editor.setScrollLeft(p.scrollLeft,1))})))}))}synchronizeScrolling(e,t,i){if(!i)return;const o=e.getVisibleRanges();if(o.length===0)return;const n=o[0].startLineNumber-1,s=i.project(n),r=s.inputRange,a=s.outputRange,l=t.getTopForLineNumber(a.startLineNumber),h=t.getTopForLineNumber(a.endLineNumberExclusive),p=e.getTopForLineNumber(r.startLineNumber),g=e.getTopForLineNumber(r.endLineNumberExclusive),m=Math.min((e.getScrollTop()-p)/(g-p),1),f=l+(h-l)*m;t.setScrollTop(f,1)}}let ef=class extends R{constructor(e,t,i,o,n,s,r,a){super(),this.model=e,this.inputCodeEditorView1=t,this.inputCodeEditorView2=i,this.resultCodeEditorView=o,this.baseCodeEditorView=n,this.showNonConflictingChanges=s,this.configurationService=r,this.notificationService=a,this.manuallySetActiveModifiedBaseRange=co(this,{range:void 0,counter:0}),this.attachedHistory=this._register(new jL(this.model.resultTextModel)),this.shouldUseAppendInsteadOfAccept=Va("mergeEditor.shouldUseAppendInsteadOfAccept",!1,this.configurationService),this.counter=0,this.lastFocusedEditor=ZD(this,(l,h)=>{const g=[this.inputCodeEditorView1,this.inputCodeEditorView2,this.resultCodeEditorView,this.baseCodeEditorView.read(l)].find(m=>m&&m.isFocused.read(l));return g?{view:g,counter:this.counter++}:h||{view:void 0,counter:this.counter++}}),this.baseShowDiffAgainst=ci(this,l=>{const h=this.lastFocusedEditor.read(l);if(h.view===this.inputCodeEditorView1)return 1;if(h.view===this.inputCodeEditorView2)return 2}),this.selectionInBase=ci(this,l=>{const h=this.lastFocusedEditor.read(l).view;return h?{rangesInBase:(h.selection.read(l)||[]).map(m=>h===this.inputCodeEditorView1?this.model.translateInputRangeToBase(1,m):h===this.inputCodeEditorView2?this.model.translateInputRangeToBase(2,m):h===this.resultCodeEditorView?this.model.translateResultRangeToBase(m):(h===this.baseCodeEditorView.read(l),m)),sourceEditor:h}:void 0}),this.activeModifiedBaseRange=ci(this,l=>{const h=this.lastFocusedEditor.read(l),p=this.manuallySetActiveModifiedBaseRange.read(l);if(p.counter>h.counter)return p.range;if(!h.view)return;const g=h.view.cursorLineNumber.read(l);return g?this.model.modifiedBaseRanges.read(l).find(f=>{const v=this.getRangeOfModifiedBaseRange(h.view,f,l);return v.isEmpty?v.startLineNumber===g:v.contains(g)}):void 0}),this._register(o.editor.onDidChangeModelContent(l=>{if(this.model.isApplyingEditInResult||l.isRedoing||l.isUndoing)return;const h=[];for(const g of l.changes){const m=this.model.translateResultRangeToBase(Ae.lift(g.range)),f=this.model.findModifiedBaseRangesInRange(new vu(m.startLineNumber,m.endLineNumber-m.startLineNumber));f.length===1&&(this.model.isHandled(f[0]).get()||h.push(f[0]))}if(h.length===0)return;const p={model:this.model,redo(){Ge(g=>{for(const m of h)this.model.setHandled(m,!0,g)})},undo(){Ge(g=>{for(const m of h)this.model.setHandled(m,!1,g)})}};this.attachedHistory.pushAttachedHistoryElement(p),p.redo()}))}getRangeOfModifiedBaseRange(e,t,i){if(e===this.resultCodeEditorView)return this.model.getLineRangeInResult(t.baseRange,i);if(e===this.baseCodeEditorView.get())return t.baseRange;{const o=e===this.inputCodeEditorView1?1:2;return t.getInputRange(o)}}setActiveModifiedBaseRange(e,t){this.manuallySetActiveModifiedBaseRange.set({range:e,counter:this.counter++},t)}setState(e,t,i,o){this.manuallySetActiveModifiedBaseRange.set({range:e,counter:this.counter++},i),this.model.setState(e,t,o,i),this.lastFocusedEditor.clearCache(i)}goToConflict(e){var n;let t=this.lastFocusedEditor.get().view;t||(t=this.resultCodeEditorView);const i=(n=t.editor.getPosition())==null?void 0:n.lineNumber;if(i===void 0)return;const o=e(t,i);if(o){const s=this.getRangeOfModifiedBaseRange(t,o,void 0);t.editor.focus();let r=s.startLineNumber,a=s.endLineNumberExclusive;s.startLineNumber>t.editor.getModel().getLineCount()&&(Ge(l=>{this.setActiveModifiedBaseRange(o,l)}),r=a=t.editor.getModel().getLineCount()),t.editor.setPosition({lineNumber:r,column:t.editor.getModel().getLineFirstNonWhitespaceColumn(r)}),t.editor.revealLinesNearTop(r,a,0)}}goToNextModifiedBaseRange(e){this.goToConflict((t,i)=>this.model.modifiedBaseRanges.get().find(o=>e(o)&&this.getRangeOfModifiedBaseRange(t,o,void 0).startLineNumber>i)||this.model.modifiedBaseRanges.get().find(o=>e(o)))}goToPreviousModifiedBaseRange(e){this.goToConflict((t,i)=>_w(this.model.modifiedBaseRanges.get(),o=>e(o)&&this.getRangeOfModifiedBaseRange(t,o,void 0).endLineNumberExclusive<i)||_w(this.model.modifiedBaseRanges.get(),o=>e(o)))}toggleActiveConflict(e){const t=this.activeModifiedBaseRange.get();if(!t){this.notificationService.error(d(11486,"There is currently no conflict focused that can be toggled."));return}Ge(i=>{this.setState(t,this.model.getState(t).get().toggle(e),i,e)})}acceptAll(e){Ge(t=>{for(const i of this.model.modifiedBaseRanges.get())this.setState(i,this.model.getState(i).get().withInputValue(e,!0),t,e)})}};ef=x([u(6,F),u(7,He)],ef);class jL extends R{constructor(e){super(),this.model=e,this.attachedHistory=[],this.previousAltId=this.model.getAlternativeVersionId(),this._register(e.onDidChangeContent(t=>{const i=e.getAlternativeVersionId();if(t.isRedoing)for(const o of this.attachedHistory)this.previousAltId<o.altId&&o.altId<=i&&o.element.redo();else if(t.isUndoing)for(let o=this.attachedHistory.length-1;o>=0;o--){const n=this.attachedHistory[o];i<n.altId&&n.altId<=this.previousAltId&&n.element.undo()}else for(;this.attachedHistory.length>0&&this.attachedHistory[this.attachedHistory.length-1].altId>this.previousAltId;)this.attachedHistory.pop();this.previousAltId=i}))}pushAttachedHistoryElement(e){this.attachedHistory.push({altId:this.model.getAlternativeVersionId(),element:e})}}const Zh=class Zh extends R{constructor(e,t,i,o,n){super(),this.editor=e,this.overlayWidgetId=`fixedZoneWidget-${Zh.counter++}`,this.widgetDomNode=rt("div.fixed-zone-widget").root,this.overlayWidget={getId:()=>this.overlayWidgetId,getDomNode:()=>this.widgetDomNode,getPosition:()=>null},this.viewZoneId=t.addZone({domNode:document.createElement("div"),afterLineNumber:i,heightInPx:o,ordinal:50001,onComputedHeight:s=>{this.widgetDomNode.style.height=`${s}px`},onDomNodeTop:s=>{this.widgetDomNode.style.top=`${s}px`}}),n.push(this.viewZoneId),this._register(N.runAndSubscribe(this.editor.onDidLayoutChange,()=>{this.widgetDomNode.style.left=this.editor.getLayoutInfo().contentLeft+"px"})),this.editor.addOverlayWidget(this.overlayWidget),this._register({dispose:()=>{this.editor.removeOverlayWidget(this.overlayWidget)}})}};Zh.counter=0;let tf=Zh;class cp extends R{constructor(e){super(),this._editor=e,this._register(this._editor.onDidChangeConfiguration(t=>{(t.hasChanged(52)||t.hasChanged(19)||t.hasChanged(18))&&this._updateLensStyle()})),this._styleClassName="_conflictActionsFactory_"+lu(this._editor.getId()).toString(16),this._styleElement=Jv(XD(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,void 0,this._store),this._updateLensStyle()}_updateLensStyle(){var a,l;const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),i=this._editor.getOption(18),o=this._editor.getOption(52),n=`--codelens-font-family${this._styleClassName}`,s=`--codelens-font-features${this._styleClassName}`;let r=`
		.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(t*.5)}px; font-feature-settings: var(${s}) }
		.monaco-workbench .${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }
		`;i&&(r+=`${this._styleClassName} { font-family: var(${n}), ${hd.fontFamily}}`),this._styleElement.textContent=r,(a=this._editor.getContainerDomNode().style)==null||a.setProperty(n,i??"inherit"),(l=this._editor.getContainerDomNode().style)==null||l.setProperty(s,o.fontFeatureSettings)}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(68)/this._editor.getOption(54));let t=this._editor.getOption(19);return(!t||t<5)&&(t=this._editor.getOption(54)*.9|0),{fontSize:t,codeLensHeight:t*e|0}}createWidget(e,t,i,o){const n=this._getLayoutInfo();return new ZL(this._editor,e,t,n.codeLensHeight+2,this._styleClassName,i,o)}}class YL{constructor(e,t){this.viewModel=e,this.modifiedBaseRange=t,this.itemsInput1=this.getItemsInput(1),this.itemsInput2=this.getItemsInput(2),this.resultItems=ci(this,i=>{const o=this.viewModel,n=this.modifiedBaseRange,s=o.model.getState(n).read(i),r=o.model,a=[];if(s.kind===Ps.unrecognized)a.push({text:d(11590,"Manual Resolution"),tooltip:d(11591,"This conflict has been resolved manually.")});else if(s.kind===Ps.base)a.push({text:d(11592,"No Changes Accepted"),tooltip:d(11593,"The current resolution of this conflict equals the common ancestor of both the right and left changes.")});else{const h=[];s.includesInput1&&h.push(r.input1.title),s.includesInput2&&h.push(r.input2.title),s.kind===Ps.both&&s.firstInput===2&&h.reverse(),a.push({text:`${h.join(" + ")}`})}const l=[];return s.includesInput1&&l.push(Po(d(11594,"Remove {0}",r.input1.title),async()=>{Ge(h=>{r.setState(n,s.withInputValue(1,!1),!0,h),r.telemetry.reportRemoveInvoked(1,s.includesInput(2))})},d(11595,"Remove {0} from the result document.",r.input1.title))),s.includesInput2&&l.push(Po(d(11594,"Remove {0}",r.input2.title),async()=>{Ge(h=>{r.setState(n,s.withInputValue(2,!1),!0,h),r.telemetry.reportRemoveInvoked(2,s.includesInput(1))})},d(11595,"Remove {0} from the result document.",r.input2.title))),s.kind===Ps.both&&s.firstInput===2&&l.reverse(),a.push(...l),s.kind===Ps.unrecognized&&a.push(Po(d(11596,"Reset to base"),async()=>{Ge(h=>{r.setState(n,xw.base,!0,h),r.telemetry.reportResetToBaseInvoked()})},d(11597,"Reset this conflict to the common ancestor of both the right and left changes."))),a}),this.isEmpty=ci(this,i=>this.itemsInput1.read(i).length+this.itemsInput2.read(i).length+this.resultItems.read(i).length===0),this.inputIsEmpty=ci(this,i=>this.itemsInput1.read(i).length+this.itemsInput2.read(i).length===0)}getItemsInput(e){return ci(t=>{const i=this.viewModel,o=this.modifiedBaseRange;if(!i.model.hasBaseRange(o))return[];const n=i.model.getState(o).read(t),s=i.model.isHandled(o).read(t),r=i.model,a=[],l=e===1?i.model.input1:i.model.input2,h=i.showNonConflictingChanges.read(t);if(!o.isConflicting&&s&&!h)return[];const p=e===1?2:1;if(n.kind!==Ps.unrecognized&&!n.isInputIncluded(e)){if(!n.isInputIncluded(p)||!this.viewModel.shouldUseAppendInsteadOfAccept.read(t)){if(a.push(Po(d(11598,"Accept {0}",l.title),async()=>{Ge(g=>{r.setState(o,n.withInputValue(e,!0,!1),e,g),r.telemetry.reportAcceptInvoked(e,n.includesInput(p))})},d(11599,"Accept {0} in the result document.",l.title))),o.canBeCombined){const g=o.isOrderRelevant?d(11600,"Accept Combination ({0} First)",l.title):d(11601,"Accept Combination");a.push(Po(g,async()=>{Ge(m=>{r.setState(o,xw.base.withInputValue(e,!0).withInputValue(p,!0,!0),!0,m),r.telemetry.reportSmartCombinationInvoked(n.includesInput(p))})},d(11602,"Accept an automatic combination of both sides in the result document.")))}}else a.push(Po(d(11603,"Append {0}",l.title),async()=>{Ge(g=>{r.setState(o,n.withInputValue(e,!0,!1),e,g),r.telemetry.reportAcceptInvoked(e,n.includesInput(p))})},d(11604,"Append {0} to the result document.",l.title))),o.canBeCombined&&a.push(Po(d(11605,"Accept Combination",l.title),async()=>{Ge(g=>{r.setState(o,n.withInputValue(e,!0,!0),e,g),r.telemetry.reportSmartCombinationInvoked(n.includesInput(p))})},d(11602,"Accept an automatic combination of both sides in the result document.")));r.isInputHandled(o,e).read(t)||a.push(Po(d(11606,"Ignore"),async()=>{Ge(g=>{r.setInputHandled(o,e,!0,g)})},d(11607,"Don't take this side of the conflict.")))}return a})}}function Po(c,e,t){return{text:c,action:e,tooltip:t}}class ZL extends tf{constructor(e,t,i,o,n,s,r){super(e,t,i,o,r),this._domNode=rt("div.merge-editor-conflict-actions").root,this.widgetDomNode.appendChild(this._domNode),this._domNode.classList.add(n),this._register(Zi(a=>{const l=s.read(a);this.setState(l)}))}setState(e){const t=[];let i=!0;for(const o of e){i?i=!1:t.push(H("span",void 0,"|"));const n=Di(o.text);o.action?t.push(H("a",{title:o.tooltip,role:"button",onclick:()=>o.action()},...n)):t.push(H("span",{title:o.tooltip},...n))}Ii(this._domNode,...t)}}function XL(c){var r,a;const e=uv(c.input1Diffs.flatMap(l=>l.rangeMappings),c.baseRange.toRange(),c.input1Range.toRange()),t=uv(c.input2Diffs.flatMap(l=>l.rangeMappings),c.baseRange.toRange(),c.input2Range.toRange()),i=JL(e,t);let o=[];o.push([c.input1Range.startLineNumber-1,c.baseRange.startLineNumber-1,c.input2Range.startLineNumber-1]);function n(l){return l.every(h=>h!==void 0)}for(const l of i){const h=[(r=l.output1Pos)==null?void 0:r.lineNumber,l.inputPos.lineNumber,(a=l.output2Pos)==null?void 0:a.lineNumber],p=n(h);let g=!0;if(p){const m=!o.some(f=>n(f)&&f.some((v,S)=>v!==void 0&&v===h[S]));m&&(o=o.filter(f=>!f.some((v,S)=>v!==void 0&&v===h[S]))),g=m}else g=!o.some(f=>f.some((v,S)=>v!==void 0&&v===h[S]));g?o.push(h):l.length.isGreaterThan(new JD(1,0))&&o.push([l.output1Pos?l.output1Pos.lineNumber+1:void 0,l.inputPos.lineNumber+1,l.output2Pos?l.output2Pos.lineNumber+1:void 0])}const s=[c.input1Range.endLineNumberExclusive,c.baseRange.endLineNumberExclusive,c.input2Range.endLineNumberExclusive];return o=o.filter(l=>l.every((h,p)=>h!==s[p])),o.push(s),Tp(()=>Zu(o.map(l=>l[0]).filter(Uo),(l,h)=>l<h)&&Zu(o.map(l=>l[1]).filter(Uo),(l,h)=>l<=h)&&Zu(o.map(l=>l[2]).filter(Uo),(l,h)=>l<h)&&o.every(l=>l.filter(Uo).length>=2)),o}function uv(c,e,t){const i=[];let o=e.getStartPosition(),n=t.getStartPosition();for(const r of c){const a=new Iw(Ae.fromPositions(o,r.inputRange.getStartPosition()),Ae.fromPositions(n,r.outputRange.getStartPosition()));Tp(()=>Jc(a.inputRange).equals(Jc(a.outputRange))),a.inputRange.isEmpty()||i.push(a),o=r.inputRange.getEndPosition(),n=r.outputRange.getEndPosition()}const s=new Iw(Ae.fromPositions(o,e.getEndPosition()),Ae.fromPositions(n,t.getEndPosition()));return Tp(()=>Jc(s.inputRange).equals(Jc(s.outputRange))),s.inputRange.isEmpty()||i.push(s),i}function JL(c,e){const t=[],i=[];for(const[s,r]of[[0,c],[1,e]])for(const a of r)i.push({input:s,start:!0,inputPos:a.inputRange.getStartPosition(),outputPos:a.outputRange.getStartPosition()}),i.push({input:s,start:!1,inputPos:a.inputRange.getEndPosition(),outputPos:a.outputRange.getEndPosition()});i.sort(QD(s=>s.inputPos,eA.compare));const o=[void 0,void 0];let n;for(const s of i){if(n&&o.some(r=>!!r)){const r=tA(n,s.inputPos);r.isZero()||(t.push({inputPos:n,length:r,output1Pos:o[0],output2Pos:o[1]}),o[0]&&(o[0]=Dw(o[0],r)),o[1]&&(o[1]=Dw(o[1],r)))}o[s.input]=s.start?s.outputPos:void 0,n=s.inputPos}return t}class QL{constructor(e,t,i){this.input1Editor=e,this.input2Editor=t,this.resultEditor=i,this.conflictActionsFactoryInput1=new cp(this.input1Editor),this.conflictActionsFactoryInput2=new cp(this.input2Editor),this.conflictActionsFactoryResult=new cp(this.resultEditor)}computeViewZones(e,t,i){let o=0,n=0,s=0,r=0;const a=[],l=[],h=[],p=[],g=t.model,m=g.baseResultDiffs.read(e),f=$C(g.modifiedBaseRanges.read(e),m,(V,M)=>V.baseRange.touches(M.inputRange)?jC.neitherLessOrGreaterThan:vu.compareByStart(V.baseRange,M.inputRange)),v=i.codeLensesVisible,S=i.showNonConflictingChanges;let E,D;for(const V of f){if(v&&V.left&&(V.left.isConflicting||S||!g.isHandled(V.left).read(e))){const q=new YL(t,V.left);(i.shouldAlignResult||!q.inputIsEmpty.read(e))&&(a.push(new dp(this.conflictActionsFactoryInput1,V.left.input1Range.startLineNumber-1,q.itemsInput1)),l.push(new dp(this.conflictActionsFactoryInput2,V.left.input2Range.startLineNumber-1,q.itemsInput2)),i.shouldAlignBase&&h.push(new tP(V.left.baseRange.startLineNumber-1,16)));const W=V.left.baseRange.startLineNumber+((D==null?void 0:D.resultingDeltaFromOriginalToModified)??0)-1;p.push(new dp(this.conflictActionsFactoryResult,W,q.resultItems))}const M=V.rights.at(-1);M&&(D=M);let J;V.left?(J=XL(V.left).map(q=>({input1Line:q[0],baseLine:q[1],input2Line:q[2],resultLine:void 0})),E=V.left,J[J.length-1].resultLine=V.left.baseRange.endLineNumberExclusive+(D?D.resultingDeltaFromOriginalToModified:0)):J=[{baseLine:M.inputRange.endLineNumberExclusive,input1Line:M.inputRange.endLineNumberExclusive+(E?E.input1Range.endLineNumberExclusive-E.baseRange.endLineNumberExclusive:0),input2Line:M.inputRange.endLineNumberExclusive+(E?E.input2Range.endLineNumberExclusive-E.baseRange.endLineNumberExclusive:0),resultLine:M.outputRange.endLineNumberExclusive}];for(const{input1Line:q,baseLine:W,input2Line:G,resultLine:se}of J){if(!i.shouldAlignBase&&(q===void 0||G===void 0))continue;const Le=q!==void 0?q+o:-1,Q=G!==void 0?G+n:-1,$e=W+s,io=se!==void 0?se+r:-1,Ct=Math.max(i.shouldAlignBase?$e:0,Le,Q,i.shouldAlignResult?io:0);if(q!==void 0){const ze=Ct-Le;ze>0&&(a.push(new ad(q-1,ze)),o+=ze)}if(G!==void 0){const ze=Ct-Q;ze>0&&(l.push(new ad(G-1,ze)),n+=ze)}if(i.shouldAlignBase){const ze=Ct-$e;ze>0&&(h.push(new ad(W-1,ze)),s+=ze)}if(i.shouldAlignResult&&se!==void 0){const ze=Ct-io;ze>0&&(p.push(new ad(se-1,ze)),r+=ze)}}}return new eP(a,l,h,p)}}class eP{constructor(e,t,i,o){this.input1ViewZones=e,this.input2ViewZones=t,this.baseViewZones=i,this.resultViewZones=o}}class Eb{}class ad extends Eb{constructor(e,t){super(),this.afterLineNumber=e,this.heightInLines=t}create(e,t,i){t.push(e.addZone({afterLineNumber:this.afterLineNumber,heightInLines:this.heightInLines,domNode:H("div.diagonal-fill")}))}}class tP extends Eb{constructor(e,t){super(),this.afterLineNumber=e,this.heightPx=t}create(e,t,i){t.push(e.addZone({afterLineNumber:this.afterLineNumber,heightInPx:this.heightPx,domNode:H("div.conflict-actions-placeholder")}))}}class dp extends Eb{constructor(e,t,i){super(),this.conflictActionsFactory=e,this.lineNumber=t,this.items=i}create(e,t,i){i.add(this.conflictActionsFactory.createWidget(e,this.lineNumber,this.items,t))}}const iP=le("settings.headerForeground",{light:"#444444",dark:"#e7e7e7",hcDark:"#ffffff",hcLight:"#292929"},d(10504,"The foreground color for a section header or active title."));le("settings.settingsHeaderHoverForeground",Eo(iP,.7),d(10505,"The foreground color for a section header or hovered title."));le("settings.modifiedItemIndicator",{light:new at(new Qc(102,175,224)),dark:new at(new Qc(12,125,157)),hcDark:new at(new Qc(0,73,122)),hcLight:new at(new Qc(102,175,224))},d(10506,"The color of the modified setting indicator."));le("settings.headerBorder",Ed,d(10507,"The color of the header container border."));const oP=le("settings.sashBorder",Ed,d(10508,"The color of the Settings editor splitview sash border."));le("settings.dropdownBackground",iA,d(10509,"Settings editor dropdown background."));le("settings.dropdownForeground",oA,d(10510,"Settings editor dropdown foreground."));le("settings.dropdownBorder",nA,d(10511,"Settings editor dropdown border."));le("settings.dropdownListBorder",sA,d(10512,"Settings editor dropdown list border. This surrounds the options and separates the options from the description."));le("settings.checkboxBackground",rA,d(10513,"Settings editor checkbox background."));le("settings.checkboxForeground",aA,d(10514,"Settings editor checkbox foreground."));le("settings.checkboxBorder",cA,d(10515,"Settings editor checkbox border."));le("settings.textInputBackground",YC,d(10516,"Settings editor text input box background."));le("settings.textInputForeground",ZC,d(10517,"Settings editor text input box foreground."));le("settings.textInputBorder",XC,d(10518,"Settings editor text input box border."));le("settings.numberInputBackground",YC,d(10519,"Settings editor number input box background."));le("settings.numberInputForeground",ZC,d(10520,"Settings editor number input box foreground."));le("settings.numberInputBorder",XC,d(10521,"Settings editor number input box border."));le("settings.focusedRowBackground",{dark:Eo(Ld,.6),light:Eo(Ld,.6),hcDark:null,hcLight:null},d(10522,"The background color of a settings row when focused."));le("settings.rowHoverBackground",{dark:Eo(Ld,.3),light:Eo(Ld,.3),hcDark:null,hcLight:null},d(10523,"The background color of a settings row when hovered."));le("settings.focusedRowBorder",Nv,d(10524,"The color of the row's top and bottom border when the row is focused."));let Xl=class extends Cb{constructor(e,t,i,o,n){super(i,t,n),this.inputNumber=e,this.otherInputNumber=this.inputNumber===1?2:1,this.modifiedBaseRangeGutterItemInfos=Aw({debugName:`input${this.inputNumber}.modifiedBaseRangeGutterItemInfos`},s=>{const r=this.viewModel.read(s);if(!r)return[];const a=r.model,l=this.inputNumber,h=r.showNonConflictingChanges.read(s);return a.modifiedBaseRanges.read(s).filter(p=>p.getInputDiffs(this.inputNumber).length>0&&(h||p.isConflicting||!a.isHandled(p).read(s))).map((p,g)=>new nP(g.toString(),p,l,r))}),this.decorations=Aw({debugName:`input${this.inputNumber}.decorations`},s=>{const r=this.viewModel.read(s);if(!r)return[];const a=r.model,l=(this.inputNumber===1?a.input1:a.input2).textModel,h=r.activeModifiedBaseRange.read(s),p=new Array,g=r.showNonConflictingChanges.read(s),m=this.showDeletionMarkers.read(s),v=!(r.baseCodeEditorView.read(s)!==void 0&&r.baseShowDiffAgainst.read(s)===this.inputNumber)&&this.useSimplifiedDecorations.read(s);for(const S of a.modifiedBaseRanges.read(s)){const E=S.getInputRange(this.inputNumber);if(!E)continue;const D=["merge-editor-block"];let V=[0,0,0,0];const M=a.isInputHandled(S,this.inputNumber).read(s);M&&D.push("handled"),S===h&&(D.push("focused"),V=[0,2,0,2]),S.isConflicting&&D.push("conflicting");const J=this.inputNumber===1?"input i1":"input i2";if(D.push(J),!(!S.isConflicting&&!g&&M)&&(v&&!M&&D.push("use-simplified-decorations"),p.push({range:E.toInclusiveRangeOrEmpty(),options:{showIfCollapsed:!0,blockClassName:D.join(" "),blockPadding:V,blockIsAfterEnd:E.startLineNumber>l.getLineCount(),description:"Merge Editor",minimap:{position:2,color:{id:M?Kr:qr}},overviewRuler:S.isConflicting?{position:Rc.Center,color:{id:M?Kr:qr}}:void 0}}),!v&&(S.isConflicting||!a.isHandled(S).read(s)))){const q=S.getInputDiffs(this.inputNumber);for(const W of q){const G=W.outputRange.toInclusiveRange();if(G&&p.push({range:G,options:{className:`merge-editor-diff ${J}`,description:"Merge Editor",isWholeLine:!0}}),W.rangeMappings)for(const se of W.rangeMappings)(m||!se.outputRange.isEmpty())&&p.push({range:se.outputRange,options:{className:se.outputRange.isEmpty()?`merge-editor-diff-empty-word ${J}`:`merge-editor-diff-word ${J}`,description:"Merge Editor",showIfCollapsed:!0}})}}}return p}),this.htmlElements.root.classList.add("input"),this._register(new yb(this.editor,this.htmlElements.gutterDiv,{getIntersectingGutterItems:(s,r)=>this.checkboxesVisible.read(r)?this.modifiedBaseRangeGutterItemInfos.read(r):[],createView:(s,r)=>new sP(s,r,o)})),this._register(Sb(this,(s,r)=>r.model.translateBaseRangeToInput(this.inputNumber,s))),this._register(i.createInstance(mc,e===1?b.MergeInput1Toolbar:b.MergeInput2Toolbar,this.htmlElements.toolbar)),this._register(dA({debugName:`input${this.inputNumber}: update labels & text model`},s=>{const r=this.viewModel.read(s);if(!r)return;this.editor.setModel(this.inputNumber===1?r.model.input1.textModel:r.model.input2.textModel);const a=this.inputNumber===1?r.model.input1.title||d(11500,"Input 1"):r.model.input2.title||d(11501,"Input 2"),l=this.inputNumber===1?r.model.input1.description:r.model.input2.description,h=this.inputNumber===1?r.model.input1.detail:r.model.input2.detail;Ii(this.htmlElements.title,...Di(a)),Ii(this.htmlElements.description,...l?Di(l):[]),Ii(this.htmlElements.detail,...h?Di(h):[])})),this._register(tb(this.editor,this.decorations))}};Xl=x([u(2,O),u(3,Ve),u(4,F)],Xl);class nP{constructor(e,t,i,o){this.id=e,this.baseRange=t,this.inputNumber=i,this.viewModel=o,this.model=this.viewModel.model,this.range=this.baseRange.getInputRange(this.inputNumber),this.enabled=this.model.isUpToDate,this.toggleState=ci(this,n=>{const s=this.model.getState(this.baseRange).read(n).getInput(this.inputNumber);return s===2&&!this.baseRange.isOrderRelevant?1:s}),this.state=ci(this,n=>{const s=this.viewModel.activeModifiedBaseRange.read(n);return this.model.hasBaseRange(this.baseRange)?{handled:this.model.isHandled(this.baseRange).read(n),focused:this.baseRange===s}:{handled:!1,focused:!1}})}setState(e,t){this.viewModel.setState(this.baseRange,this.model.getState(this.baseRange).get().withInputValue(this.inputNumber,e),t,this.inputNumber)}toggleBothSides(){Ge(e=>{const t=this.model.getState(this.baseRange).get();this.model.setState(this.baseRange,t.toggle(this.inputNumber).toggle(this.inputNumber===1?2:1),!0,e)})}getContextMenuActions(){const e=this.model.getState(this.baseRange).get(),t=this.model.isHandled(this.baseRange).get(),i=s=>{Ge(r=>this.viewModel.setState(this.baseRange,s,r,this.inputNumber))};function o(s,r,a,l){const h=new de(s,r,void 0,!0,()=>{i(a)});return h.checked=l,h}const n=e.includesInput1&&e.includesInput2;return[this.baseRange.input1Diffs.length>0?o("mergeEditor.acceptInput1",d(11502,"Accept {0}",this.model.input1.title),e.toggle(1),e.includesInput1):void 0,this.baseRange.input2Diffs.length>0?o("mergeEditor.acceptInput2",d(11502,"Accept {0}",this.model.input2.title),e.toggle(2),e.includesInput2):void 0,this.baseRange.isConflicting?Xu(o("mergeEditor.acceptBoth",d(11503,"Accept Both"),e.withInputValue(1,!n).withInputValue(2,!n),n),{enabled:this.baseRange.canBeCombined}):void 0,new We,this.baseRange.isConflicting?Xu(o("mergeEditor.swap",d(11504,"Swap"),e.swap(),!1),{enabled:!e.kind&&(!n||this.baseRange.isOrderRelevant)}):void 0,Xu(new de("mergeEditor.markAsHandled",d(11505,"Mark as Handled"),void 0,!0,()=>{Ge(s=>{this.model.setHandled(this.baseRange,!t,s)})}),{checked:t})].filter(Uo)}}class sP extends R{constructor(e,t,i){super(),this.isMultiLine=co(this,!1),this.item=co(this,e);const o=new vC({isChecked:!1,title:"",icon:T.check,...Kf});o.domNode.classList.add("accept-conflict-group"),this._register(L(o.domNode,B.MOUSE_DOWN,n=>{const s=this.item.get();s&&(n.button===2?(n.stopPropagation(),n.preventDefault(),i.showContextMenu({getAnchor:()=>o.domNode,getActions:()=>s.getContextMenuActions()})):n.button===1&&(n.stopPropagation(),n.preventDefault(),s.toggleBothSides()))})),this._register(Zi(n=>{const s=this.item.read(n),r=s.toggleState.read(n),l={0:{icon:void 0,checked:!1,title:d(11506,"Accept")},3:{icon:T.circleFilled,checked:!1,title:d(11507,"Accept (result is dirty)")},1:{icon:T.check,checked:!0,title:d(11508,"Undo accept")},2:{icon:T.checkAll,checked:!0,title:d(11509,"Undo accept (currently second)")}}[r];o.setIcon(l.icon),o.checked=l.checked,o.setTitle(l.title),s.enabled.read(n)?o.enable():o.disable()})),this._register(Zi(n=>{const s=this.item.read(n).state.read(n),r=["merge-accept-gutter-marker",s.handled&&"handled",s.focused&&"focused",this.isMultiLine.read(n)?"multi-line":"single-line"];t.className=r.filter(a=>typeof a=="string").join(" ")})),this._register(o.onChange(()=>{Ge(n=>{this.item.get().setState(o.checked,n)})})),t.appendChild(rt("div.background",[lA]).root),t.appendChild(this.checkboxDiv=rt("div.checkbox",[rt("div.checkbox-background",[o.domNode])]).root)}layout(e,t,i,o){const n=this.checkboxDiv.clientHeight,s=t/2-n/2,r=n;let a=e+s;const l=[r,i+o-r-n],h=[e+r,e+t-n-r];h[0]<h[1]&&(a=Pd(a,l[0],l[1]),a=Pd(a,h[0],h[1])),this.checkboxDiv.style.top=`${a-e}px`,Ge(p=>{this.isMultiLine.set(t>30,p)})}update(e){Ge(t=>{this.item.set(e,t)})}}let of=class extends Cb{constructor(e,t,i,o){super(t,e,o),this._labelService=i,this.decorations=ci(this,s=>{const r=this.viewModel.read(s);if(!r)return[];const a=r.model,l=a.resultTextModel,h=new Array,p=$C(a.modifiedBaseRanges.read(s),a.baseResultDiffs.read(s),(f,v)=>f.baseRange.touches(v.inputRange)?jC.neitherLessOrGreaterThan:vu.compareByStart(f.baseRange,v.inputRange)),g=r.activeModifiedBaseRange.read(s),m=r.showNonConflictingChanges.read(s);for(const f of p){const v=f.left;if(v){const S=["merge-editor-block"];let E=[0,0,0,0];const D=a.isHandled(v).read(s);if(D&&S.push("handled"),v===g&&(S.push("focused"),E=[0,2,0,2]),v.isConflicting&&S.push("conflicting"),S.push("result"),!v.isConflicting&&!m&&D)continue;const V=a.getLineRangeInResult(v.baseRange,s);h.push({range:V.toInclusiveRangeOrEmpty(),options:{showIfCollapsed:!0,blockClassName:S.join(" "),blockPadding:E,blockIsAfterEnd:V.startLineNumber>l.getLineCount(),description:"Result Diff",minimap:{position:2,color:{id:D?Kr:qr}},overviewRuler:v.isConflicting?{position:Rc.Center,color:{id:D?Kr:qr}}:void 0}})}if(!v||v.isConflicting)for(const S of f.rights){const E=S.outputRange.toInclusiveRange();if(E&&h.push({range:E,options:{className:"merge-editor-diff result",description:"Merge Editor",isWholeLine:!0}}),S.rangeMappings)for(const D of S.rangeMappings)h.push({range:D.outputRange,options:{className:"merge-editor-diff-word result",description:"Merge Editor"}})}}return h}),this.editor.invokeWithinContext(s=>{const r=s.get(K),a=hA.bindTo(r);a.set(!0),this._register(ne(()=>a.reset()))}),this.htmlElements.gutterDiv.style.width="5px",this.htmlElements.root.classList.add("result"),this._register(yu((s,r)=>{this.checkboxesVisible.read(s)&&r.add(new yb(this.editor,this.htmlElements.gutterDiv,{getIntersectingGutterItems:(a,l)=>[],createView:(a,l)=>{throw new Xa}}))})),this._register(Zi(s=>{const r=this.viewModel.read(s);r&&(this.editor.setModel(r.model.resultTextModel),Ii(this.htmlElements.title,...Di(d(11510,"Result"))),Ii(this.htmlElements.description,...Di(this._labelService.getUriLabel(r.model.resultTextModel.uri,{relative:!0}))))}));const n=this._register(new Vo(this.htmlElements.detail));this._register(Zi(s=>{const r=this.viewModel.read(s);if(!r)return;const a=r.model;if(!a)return;const l=a.unhandledConflictsCount.read(s),h=l===1?d(11511,"{0} Conflict Remaining",l):d(11512,"{0} Conflicts Remaining ",l);n.clear(),n.push({class:void 0,enabled:l>0,id:"nextConflict",label:h,run(){r.model.telemetry.reportConflictCounterClicked(),r.goToNextModifiedBaseRange(p=>!a.isHandled(p).get())},tooltip:l>0?d(11513,"Go to next conflict"):d(11514,"All conflicts handled, the merge can be completed now.")})})),this._register(tb(this.editor,this.decorations)),this._register(Sb(this,(s,r)=>r.model.translateBaseRangeToResult(s))),this._register(t.createInstance(mc,b.MergeInputResultToolbar,this.htmlElements.toolbar))}};of=x([u(1,O),u(2,mi),u(3,F)],of);var nf,bd,hs;let Tt=(hs=class extends xC{get viewModel(){return this._viewModel}get inputModel(){return this._inputModel}get model(){var e;return(e=this.inputModel.get())==null?void 0:e.model}get inputsWritable(){return!!this._configurationService.getValue("mergeEditor.writableInputs")}constructor(e,t,i,o,n,s,r,a,l,h,p,g,m){super(nf.ID,e,o,t,n,r,s,l,h,p),this.contextKeyService=i,this._configurationService=a,this._codeEditorService=g,this.configurationService=m,this._sessionDisposables=new P,this._viewModel=co(this,void 0),this._grid=this._register(new Se),this.input1View=this._register(this.instantiationService.createInstance(Xl,1,this._viewModel)),this.baseView=co(this,void 0),this.baseViewOptions=co(this,void 0),this.input2View=this._register(this.instantiationService.createInstance(Xl,2,this._viewModel)),this.inputResultView=this._register(this.instantiationService.createInstance(of,this._viewModel)),this._layoutMode=this.instantiationService.createInstance(sf),this._layoutModeObs=co(this,this._layoutMode.value),this._ctxIsMergeEditor=Me.bindTo(this.contextKeyService),this._ctxUsesColumnLayout=oa.bindTo(this.contextKeyService),this._ctxShowBase=Cu.bindTo(this.contextKeyService),this._ctxShowBaseAtTop=ib.bindTo(this.contextKeyService),this._ctxResultUri=uA.bindTo(this.contextKeyService),this._ctxBaseUri=pA.bindTo(this.contextKeyService),this._ctxShowNonConflictingChanges=JC.bindTo(this.contextKeyService),this._inputModel=co(this,void 0),this.viewZoneComputer=new QL(this.input1View.editor,this.input2View.editor,this.inputResultView.editor),this.codeLensesVisible=Va("mergeEditor.showCodeLenses",!0,this.configurationService),this.scrollSynchronizer=this._register(new $L(this._viewModel,this.input1View,this.input2View,this.baseView,this.inputResultView,this._layoutModeObs)),this._onDidChangeSizeConstraints=new I,this.onDidChangeSizeConstraints=this._onDidChangeSizeConstraints.event,this.baseViewDisposables=this._register(new P),this.showNonConflictingChangesStore=this.instantiationService.createInstance(gA,"mergeEditor/showNonConflictingChanges"),this.showNonConflictingChanges=co(this,this.showNonConflictingChangesStore.get()??!1)}dispose(){this._sessionDisposables.dispose(),this._ctxIsMergeEditor.reset(),this._ctxUsesColumnLayout.reset(),this._ctxShowNonConflictingChanges.reset(),super.dispose()}get minimumWidth(){return this._layoutMode.value.kind==="mixed"?this.input1View.view.minimumWidth+this.input2View.view.minimumWidth:this.input1View.view.minimumWidth+this.input2View.view.minimumWidth+this.inputResultView.view.minimumWidth}getTitle(){return this.input?this.input.getName():d(9966,"Text Merge Editor")}createEditorControl(e,t){this.rootHtmlElement=e,e.classList.add("merge-editor"),this.applyLayout(this._layoutMode.value),this.applyOptions(t)}updateEditorControlOptions(e){this.applyOptions(e)}applyOptions(e){const t=mA(e,{minimap:{enabled:!1},glyphMargin:!1,lineNumbersMinChars:2,readOnly:!this.inputsWritable});this.input1View.updateOptions(t),this.input2View.updateOptions(t),this.baseViewOptions.set({...this.input2View.editor.getRawOptions()},void 0),this.inputResultView.updateOptions(e)}getMainControl(){return this.inputResultView.editor}layout(e){var t;(t=this._grid.value)==null||t.layout(e.width,e.height)}async setInput(e,t,i,o){if(!(e instanceof Cs))throw new Xa("ONLY MergeEditorInput is supported");await super.setInput(e,t,i,o),this._sessionDisposables.clear(),Ge(p=>{this._viewModel.set(void 0,p),this._inputModel.set(void 0,p)});const n=await e.resolve(),s=n.model,r=this.instantiationService.createInstance(ef,s,this.input1View,this.input2View,this.inputResultView,this.baseView,this.showNonConflictingChanges);s.telemetry.reportMergeEditorOpened({combinableConflictCount:s.combinableConflictCount,conflictCount:s.conflictCount,baseTop:this._layoutModeObs.get().showBaseAtTop,baseVisible:this._layoutModeObs.get().showBase,isColumnView:this._layoutModeObs.get().kind==="columns"}),Ge(p=>{this._viewModel.set(r,p),this._inputModel.set(n,p)}),this._sessionDisposables.add(r),this._ctxResultUri.set(n.resultUri.toString()),this._ctxBaseUri.set(s.base.uri.toString()),this._sessionDisposables.add(ne(()=>{this._ctxBaseUri.reset(),this._ctxResultUri.reset()})),this._sessionDisposables.add(yu((p,g)=>{const m=this.baseView.read(p);this.inputResultView.editor.changeViewZones(f=>{const v=this._layoutModeObs.read(p),S=v.kind==="columns",E=v.kind==="mixed"&&!v.showBaseAtTop;this.input1View.editor.changeViewZones(D=>{this.input2View.editor.changeViewZones(V=>{m?m.editor.changeViewZones(M=>{g.add(this.setViewZones(p,r,this.input1View.editor,D,this.input2View.editor,V,m.editor,M,E,this.inputResultView.editor,f,S))}):g.add(this.setViewZones(p,r,this.input1View.editor,D,this.input2View.editor,V,void 0,void 0,!1,this.inputResultView.editor,f,S))})})}),this.scrollSynchronizer.updateScrolling()}));const a=this.loadEditorViewState(e,i);a?this._applyViewState(a):this._sessionDisposables.add(fA(s.onInitialized,()=>{const p=s.modifiedBaseRanges.get().find(g=>g.isConflicting);p&&(this.input1View.editor.revealLineInCenter(p.input1Range.startLineNumber),Ge(g=>{r.setActiveModifiedBaseRange(p,g)}))}));const l=p=>{var f;const g=bA(p,this._codeEditorService);ed(s.input2.textModel,g,this._codeEditorService),ed(s.input1.textModel,g,this._codeEditorService),ed(s.resultTextModel,g,this._codeEditorService);const m=(f=this.baseView.get())==null?void 0:f.editor.getModel();m&&ed(m,g,this._codeEditorService)};this._sessionDisposables.add(this._codeEditorService.onDidChangeTransientModelProperty(p=>{l(p)})),l(this.inputResultView.editor.getModel());const h=this;this._sessionDisposables.add(new class{constructor(){this._disposable=new P;for(const p of this.baseInput1Input2())this._disposable.add(p.onDidChangeContent(()=>this._checkBaseInput1Input2AllEmpty()))}dispose(){this._disposable.dispose()}*baseInput1Input2(){yield s.base,yield s.input1.textModel,yield s.input2.textModel}_checkBaseInput1Input2AllEmpty(){for(const p of this.baseInput1Input2())if(p.getValueLength()>0)return;h.editorService.replaceEditors([{editor:e,replacement:{resource:e.result,options:{preserveFocus:!0}},forceReplaceDirty:!0}],h.group)}})}setViewZones(e,t,i,o,n,s,r,a,l,h,p,g){const m=[],f=[],v=[],S=[],E=this.viewZoneComputer.computeViewZones(e,t,{codeLensesVisible:this.codeLensesVisible.read(e),showNonConflictingChanges:this.showNonConflictingChanges.read(e),shouldAlignBase:l,shouldAlignResult:g}),D=new P;if(a)for(const V of E.baseViewZones)V.create(a,v,D);for(const V of E.resultViewZones)V.create(p,S,D);for(const V of E.input1ViewZones)V.create(o,m,D);for(const V of E.input2ViewZones)V.create(s,f,D);return D.add({dispose:()=>{i.changeViewZones(V=>{for(const M of m)V.removeZone(M)}),n.changeViewZones(V=>{for(const M of f)V.removeZone(M)}),r==null||r.changeViewZones(V=>{for(const M of v)V.removeZone(M)}),h.changeViewZones(V=>{for(const M of S)V.removeZone(M)})}}),D}setOptions(e){super.setOptions(e),e&&Fc(e,this.inputResultView.editor,0)}clearInput(){super.clearInput(),this._sessionDisposables.clear();for(const{editor:e}of[this.input1View,this.input2View,this.inputResultView])e.setModel(null)}focus(){super.focus(),(this.getControl()??this.inputResultView.editor).focus()}hasFocus(){for(const{editor:e}of[this.input1View,this.input2View,this.inputResultView])if(e.hasTextFocus())return!0;return super.hasFocus()}setEditorVisible(e){super.setEditorVisible(e);for(const{editor:t}of[this.input1View,this.input2View,this.inputResultView])e?t.onVisible():t.onHide();this._ctxIsMergeEditor.set(e)}getControl(){return this.inputResultView.editor}get scopedContextKeyService(){const e=this.getControl();return e==null?void 0:e.invokeWithinContext(t=>t.get(K))}toggleBase(){this.setLayout({...this._layoutMode.value,showBase:!this._layoutMode.value.showBase})}toggleShowBaseTop(){const e=this._layoutMode.value.showBase&&this._layoutMode.value.showBaseAtTop;this.setLayout({...this._layoutMode.value,showBaseAtTop:!0,showBase:!e})}toggleShowBaseCenter(){const e=this._layoutMode.value.showBase&&!this._layoutMode.value.showBaseAtTop;this.setLayout({...this._layoutMode.value,showBaseAtTop:!1,showBase:!e})}setLayoutKind(e){this.setLayout({...this._layoutMode.value,kind:e})}setLayout(e){var i;const t=this._layoutMode.value;JSON.stringify(t)!==JSON.stringify(e)&&((i=this.model)==null||i.telemetry.reportLayoutChange({baseTop:e.showBaseAtTop,baseVisible:e.showBase,isColumnView:e.kind==="columns"}),this.applyLayout(e))}applyLayout(e){Ge(t=>{if(e.showBase&&!this.baseView.get()){this.baseViewDisposables.clear();const i=this.baseViewDisposables.add(this.instantiationService.createInstance(Qm,this.viewModel));this.baseViewDisposables.add(Zi(o=>{const n=this.baseViewOptions.read(o);n&&i.updateOptions(n)})),this.baseView.set(i,t)}else!e.showBase&&this.baseView.get()&&(this.baseView.set(void 0,t),this.baseViewDisposables.clear());e.kind==="mixed"?this.setGrid([e.showBaseAtTop&&e.showBase?{size:38,data:this.baseView.get().view}:void 0,{size:38,groups:[{data:this.input1View.view},!e.showBaseAtTop&&e.showBase?{data:this.baseView.get().view}:void 0,{data:this.input2View.view}].filter(Uo)},{size:62,data:this.inputResultView.view}].filter(Uo)):e.kind==="columns"&&this.setGrid([e.showBase?{size:40,data:this.baseView.get().view}:void 0,{size:60,groups:[{data:this.input1View.view},{data:this.inputResultView.view},{data:this.input2View.view}]}].filter(Uo)),this._layoutMode.value=e,this._ctxUsesColumnLayout.set(e.kind),this._ctxShowBase.set(e.showBase),this._ctxShowBaseAtTop.set(e.showBaseAtTop),this._onDidChangeSizeConstraints.fire(),this._layoutModeObs.set(e,t)})}setGrid(e){let t=-1,i=-1;this._grid.value&&(t=this._grid.value.width,i=this._grid.value.height),this._grid.value=qo.from({orientation:0,size:100,groups:e},{styles:{separatorBorder:this.theme.getColor(oP)??at.transparent},proportionalLayout:!0}),Ii(this.rootHtmlElement,this._grid.value.element),t!==-1&&this._grid.value.layout(t,i)}_applyViewState(e){e&&(this.inputResultView.editor.restoreViewState(e),e.input1State&&this.input1View.editor.restoreViewState(e.input1State),e.input2State&&this.input2View.editor.restoreViewState(e.input2State),e.focusIndex>=0&&[this.input1View.editor,this.input2View.editor,this.inputResultView.editor][e.focusIndex].focus())}computeEditorViewState(e){var s;if(!ot((s=this.inputModel.get())==null?void 0:s.resultUri,e))return;const t=this.inputResultView.editor.saveViewState();if(!t)return;const i=this.input1View.editor.saveViewState()??void 0,o=this.input2View.editor.saveViewState()??void 0,n=[this.input1View.editor,this.input2View.editor,this.inputResultView.editor].findIndex(r=>r.hasWidgetFocus());return{...t,input1State:i,input2State:o,focusIndex:n}}tracksEditorViewState(e){return e instanceof Cs}toggleShowNonConflictingChanges(){this.showNonConflictingChanges.set(!this.showNonConflictingChanges.get(),void 0),this.showNonConflictingChangesStore.set(this.showNonConflictingChanges.get()),this._ctxShowNonConflictingChanges.set(this.showNonConflictingChanges.get())}},nf=hs,hs.ID="mergeEditor",hs);Tt=nf=x([u(1,O),u(2,K),u(3,Be),u(4,ie),u(5,te),u(6,_s),u(7,F),u(8,U),u(9,Z),u(10,Oe),u(11,ia),u(12,F)],Tt);var us;let sf=(us=class{constructor(e){this._storageService=e,this._value={kind:"mixed",showBase:!1,showBaseAtTop:!0};const t=e.get(bd._key,0,"mixed");if(t==="mixed"||t==="columns")this._value={kind:t,showBase:!1,showBaseAtTop:!0};else if(t)try{this._value=JSON.parse(t)}catch(i){gn(i)}}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._storageService.store(bd._key,JSON.stringify(this._value),0,0))}},bd=us,us._key="mergeEditor/layout",us);sf=bd=x([u(0,ie)],sf);let rf=class extends R{constructor(e,t){super(),this._editorService=e,this._store.add(t.registerCodeEditorOpenHandler(this.openCodeEditorFromMergeEditor.bind(this)))}async openCodeEditorFromMergeEditor(e,t,i){const o=this._editorService.activeEditorPane;if(!i&&e.options&&o instanceof Tt&&o.getControl()&&o.input instanceof Cs&&ot(e.resource,o.input.result)){const n=o.getControl();return Fc(e.options,n,0),n}return null}};rf=x([u(0,U),u(1,ia)],rf);var yr;let Jl=(yr=class extends R{constructor(e,t){super();const i=o=>({editor:t.createInstance(Cs,o.base.resource,{uri:o.input1.resource,title:o.input1.label??mt(o.input1.resource),description:o.input1.description??"",detail:o.input1.detail},{uri:o.input2.resource,title:o.input2.label??mt(o.input2.resource),description:o.input2.description??"",detail:o.input2.detail},o.result.resource)});this._register(e.registerEditor("*",{id:pt.id,label:pt.displayName,detail:pt.providerDisplayName,priority:Ne.builtin},{},{createMergeEditorInput:i}))}},yr.ID="workbench.contrib.mergeEditorResolver",yr);Jl=x([u(0,Mo),u(1,O)],Jl);class Pi extends A{constructor(e){super(e)}run(e){const{activeEditorPane:t}=e.get(U);if(t instanceof Tt){const i=t.viewModel.get();if(!i)return;this.runWithViewModel(i,e)}}}class rP extends A{constructor(e){super(e)}run(e,...t){const{activeEditorPane:i}=e.get(U);if(i instanceof Tt){const o=i.viewModel.get();return o?this.runWithMergeEditor({viewModel:o,inputModel:i.inputModel.get(),input:i.input,editorIdentifier:{editor:i.input,groupId:i.group.id}},e,...t):void 0}}}class aP extends A{constructor(){super({id:"_open.mergeEditor",title:w(9931,"Open Merge Editor")})}run(e,...t){const i=af.validate(t[0]),o={base:{resource:i.base},input1:{resource:i.input1.uri,label:i.input1.title,description:i.input1.description,detail:i.input1.detail},input2:{resource:i.input2.uri,label:i.input2.title,description:i.input2.description,detail:i.input2.detail},result:{resource:i.output},options:{preserveFocus:!0}};e.get(U).openEditor(o)}}var af;(function(c){function e(n){if(!n||typeof n!="object")throw new TypeError("invalid argument");const s=n,r=i(s.base),a=i(s.output),l=t(s.input1),h=t(s.input2);return{base:r,input1:l,input2:h,output:a}}c.validate=e;function t(n){if(typeof n=="string")return new Ma(z.parse(n,!0),void 0,void 0,void 0);if(!n||typeof n!="object")throw new TypeError("invalid argument");if(o(n))return new Ma(z.revive(n),void 0,void 0,void 0);const s=n,r=s.title,a=i(s.uri),l=s.detail,h=s.description;return new Ma(a,r,l,h)}function i(n){if(typeof n=="string")return z.parse(n,!0);if(n&&typeof n=="object")return z.revive(n);throw new TypeError("invalid argument")}function o(n){if(!n||typeof n!="object")return!1;const s=n;return typeof s.scheme=="string"&&typeof s.authority=="string"&&typeof s.path=="string"&&typeof s.query=="string"&&typeof s.fragment=="string"}})(af||(af={}));class cP extends A{constructor(){super({id:"merge.mixedLayout",title:w(9932,"Mixed Layout"),toggled:oa.isEqualTo("mixed"),menu:[{id:b.EditorTitle,when:Me,group:"1_merge",order:9}],precondition:Me})}run(e){const{activeEditorPane:t}=e.get(U);t instanceof Tt&&t.setLayoutKind("mixed")}}class dP extends A{constructor(){super({id:"merge.columnLayout",title:w(9933,"Column Layout"),toggled:oa.isEqualTo("columns"),menu:[{id:b.EditorTitle,when:Me,group:"1_merge",order:10}],precondition:Me})}run(e){const{activeEditorPane:t}=e.get(U);t instanceof Tt&&t.setLayoutKind("columns")}}class lP extends A{constructor(){super({id:"merge.showNonConflictingChanges",title:w(9934,"Show Non-Conflicting Changes"),toggled:JC.isEqualTo(!0),menu:[{id:b.EditorTitle,when:Me,group:"3_merge",order:9}],precondition:Me})}run(e){const{activeEditorPane:t}=e.get(U);t instanceof Tt&&t.toggleShowNonConflictingChanges()}}class hP extends A{constructor(){super({id:"merge.showBase",title:w(9935,"Show Base"),toggled:Cu.isEqualTo(!0),menu:[{id:b.EditorTitle,when:y.and(Me,oa.isEqualTo("columns")),group:"2_merge",order:9}]})}run(e){const{activeEditorPane:t}=e.get(U);t instanceof Tt&&t.toggleBase()}}class uP extends A{constructor(){super({id:"merge.showBaseTop",title:w(9936,"Show Base Top"),toggled:y.and(Cu,ib),menu:[{id:b.EditorTitle,when:y.and(Me,oa.isEqualTo("mixed")),group:"2_merge",order:10}]})}run(e){const{activeEditorPane:t}=e.get(U);t instanceof Tt&&t.toggleShowBaseTop()}}class pP extends A{constructor(){super({id:"merge.showBaseCenter",title:w(9937,"Show Base Center"),toggled:y.and(Cu,ib.negate()),menu:[{id:b.EditorTitle,when:y.and(Me,oa.isEqualTo("mixed")),group:"2_merge",order:11}]})}run(e){const{activeEditorPane:t}=e.get(U);t instanceof Tt&&t.toggleShowBaseCenter()}}const ii=w(9938,"Merge Editor");class gP extends Pi{constructor(){super({id:"merge.openResult",icon:T.goToFile,title:w(9939,"Open File"),category:ii,menu:[{id:b.EditorTitle,when:Me,group:"navigation",order:1}],precondition:Me})}runWithViewModel(e,t){t.get(U).openEditor({resource:e.model.resultTextModel.uri})}}class mP extends Pi{constructor(){super({id:"merge.goToNextUnhandledConflict",category:ii,title:w(9940,"Go to Next Unhandled Conflict"),icon:T.arrowDown,menu:[{id:b.EditorTitle,when:Me,group:"navigation",order:3}],f1:!0,precondition:Me})}runWithViewModel(e){e.model.telemetry.reportNavigationToNextConflict(),e.goToNextModifiedBaseRange(t=>!e.model.isHandled(t).get())}}class fP extends Pi{constructor(){super({id:"merge.goToPreviousUnhandledConflict",category:ii,title:w(9941,"Go to Previous Unhandled Conflict"),icon:T.arrowUp,menu:[{id:b.EditorTitle,when:Me,group:"navigation",order:2}],f1:!0,precondition:Me})}runWithViewModel(e){e.model.telemetry.reportNavigationToPreviousConflict(),e.goToPreviousModifiedBaseRange(t=>!e.model.isHandled(t).get())}}class bP extends Pi{constructor(){super({id:"merge.toggleActiveConflictInput1",category:ii,title:w(9942,"Toggle Current Conflict from Left"),f1:!0,precondition:Me})}runWithViewModel(e){e.toggleActiveConflict(1)}}class wP extends Pi{constructor(){super({id:"merge.toggleActiveConflictInput2",category:ii,title:w(9943,"Toggle Current Conflict from Right"),f1:!0,precondition:Me})}runWithViewModel(e){e.toggleActiveConflict(2)}}class vP extends Pi{constructor(){super({id:"mergeEditor.compareInput1WithBase",category:ii,title:w(9944,"Compare Input 1 With Base"),shortTitle:d(9945,"Compare With Base"),f1:!0,precondition:Me,menu:{id:b.MergeInput1Toolbar,group:"primary"},icon:T.compareChanges})}runWithViewModel(e,t){const i=t.get(U);_E(e,i,1)}}class yP extends Pi{constructor(){super({id:"mergeEditor.compareInput2WithBase",category:ii,title:w(9946,"Compare Input 2 With Base"),shortTitle:d(9945,"Compare With Base"),f1:!0,precondition:Me,menu:{id:b.MergeInput2Toolbar,group:"primary"},icon:T.compareChanges})}runWithViewModel(e,t){const i=t.get(U);_E(e,i,2)}}async function _E(c,e,t){e.openEditor(e.activeEditor,{pinned:!0});const o=c.model.base,n=t===1?c.inputCodeEditorView1.editor:c.inputCodeEditorView2.editor,s=n.getPosition().lineNumber;await e.openEditor({original:{resource:o.uri},modified:{resource:n.getModel().uri},options:{selection:{startLineNumber:s,startColumn:1},revealIfOpened:!0,revealIfVisible:!0}})}class CP extends Pi{constructor(){super({id:"merge.openBaseEditor",category:ii,title:w(9947,"Open Base File"),f1:!0,precondition:Me})}runWithViewModel(e,t){t.get(It).open(e.model.base.uri)}}class SP extends Pi{constructor(){super({id:"merge.acceptAllInput1",category:ii,title:w(9948,"Accept All Changes from Left"),f1:!0,precondition:Me,menu:{id:b.MergeInput1Toolbar,group:"primary"},icon:T.checkAll})}runWithViewModel(e){e.acceptAll(1)}}class EP extends Pi{constructor(){super({id:"merge.acceptAllInput2",category:ii,title:w(9949,"Accept All Changes from Right"),f1:!0,precondition:Me,menu:{id:b.MergeInput2Toolbar,group:"primary"},icon:T.checkAll})}runWithViewModel(e){e.acceptAll(2)}}class kP extends Pi{constructor(){super({id:"mergeEditor.resetResultToBaseAndAutoMerge",category:ii,title:w(9950,"Reset Result"),shortTitle:d(9951,"Reset"),f1:!0,precondition:Me,menu:{id:b.MergeInputResultToolbar,group:"primary"},icon:T.discard})}runWithViewModel(e,t){e.model.reset()}}class _P extends A{constructor(){super({id:"mergeEditor.resetCloseWithConflictsChoice",category:ii,title:w(9952,"Reset Choice for 'Close with Conflicts'"),f1:!0})}run(e){e.get(ie).remove(wA,0)}}class xP extends rP{constructor(){super({id:"mergeEditor.acceptMerge",category:ii,title:w(9953,"Complete Merge"),f1:!1,precondition:Me})}async runWithMergeEditor({inputModel:e,editorIdentifier:t,viewModel:i},o){const n=o.get(xt),s=o.get(U);if(i.model.unhandledConflictsCount.get()>0){const{confirmed:r}=await n.confirm({message:d(9954,"Do you want to complete the merge of {0}?",mt(e.resultUri)),detail:d(9955,"The file contains unhandled conflicts."),primaryButton:d(9956,"&&Complete with Conflicts")});if(!r)return{successful:!1}}return await e.accept(),await s.closeEditor(t),{successful:!0}}}const kb=w(9957,"Merge Editor (Dev)");class IP extends A{constructor(){super({id:"merge.dev.copyContentsJson",category:kb,title:w(9958,"Copy Merge Editor State as JSON"),icon:T.layoutCentered,f1:!0,precondition:Me})}run(e){const{activeEditorPane:t}=e.get(U),i=e.get(xp),o=e.get(He);if(!(t instanceof Tt)){o.info({name:d(9959,"Merge Editor"),message:d(9960,"No active merge editor")});return}const n=t.model;if(!n)return;const s={languageId:n.resultTextModel.getLanguageId(),base:n.base.getValue(),input1:n.input1.textModel.getValue(),input2:n.input2.textModel.getValue(),result:n.resultTextModel.getValue(),initialResult:n.getInitialResultValue()},r=JSON.stringify(s,void 0,4);i.writeText(r),o.info({name:d(9959,"Merge Editor"),message:d(9961,"Successfully copied merge editor state")})}}class DP extends A{constructor(){super({id:"merge.dev.saveContentsToFolder",category:kb,title:w(9962,"Save Merge Editor State to Folder"),icon:T.layoutCentered,f1:!0,precondition:Me})}async run(e){const{activeEditorPane:t}=e.get(U),i=e.get(He),o=e.get(cu),n=e.get(Oe),s=e.get(Zr);if(!(t instanceof Tt)){i.info({name:d(9959,"Merge Editor"),message:d(9960,"No active merge editor")});return}const r=t.model;if(!r)return;const a=await o.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,title:d(9963,"Select folder to save to")});if(!a)return;const l=a[0],h=s.getExtensions(r.resultTextModel.getLanguageId())[0]||"";async function p(g,m){await n.writeFile(z.joinPath(l,g+h),QC.fromString(m),{})}await Promise.all([p("base",r.base.getValue()),p("input1",r.input1.textModel.getValue()),p("input2",r.input2.textModel.getValue()),p("result",r.resultTextModel.getValue()),p("initialResult",r.getInitialResultValue())]),i.info({name:d(9959,"Merge Editor"),message:d(9964,"Successfully saved merge editor state to folder")})}}class AP extends A{constructor(){super({id:"merge.dev.loadContentsFromFolder",category:kb,title:w(9965,"Load Merge Editor State from Folder"),icon:T.layoutCentered,f1:!0})}async run(e,t){const i=e.get(cu),o=e.get(U),n=e.get(Oe),s=e.get(Fe);t||(t={});let r;if(t.folderUri)r=t.folderUri;else{const S=await i.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,title:d(9963,"Select folder to save to")});if(!S)return;r=S[0]}const a=await n.resolve(r);function l(S){var E;return(E=a.children.find(D=>D.name.startsWith(S)))==null?void 0:E.resource}const h=await TP(s,t.resultState),p=l("base"),g=l("input1"),m=l("input2"),f=l(h?"initialResult":"result"),v={base:{resource:p},input1:{resource:g,label:"Input 1",description:"Input 1",detail:"(from file)"},input2:{resource:m,label:"Input 2",description:"Input 2",detail:"(from file)"},result:{resource:f}};o.openEditor(v)}}async function TP(c,e){if(e)return e==="initial";const t=await c.pick([{label:"result",result:!1},{label:"initial result",result:!0}],{canPickMany:!1});return t==null?void 0:t.result}class VP{canSerialize(){return!0}serialize(e){return JSON.stringify(this.toJSON(e))}toJSON(e){return{base:e.base,input1:e.input1,input2:e.input2,result:e.result}}deserialize(e,t){try{const i=vA(t);return e.createInstance(Cs,i.base,new Ma(i.input1.uri,i.input1.title,i.input1.detail,i.input1.description),new Ma(i.input2.uri,i.input2.title,i.input2.detail,i.input2.description),i.result)}catch(i){gn(i);return}}}$.as(wt.EditorPane).registerEditorPane(Jt.create(Tt,Tt.ID,d(4438,"Merge Editor")),[new ce(Cs)]);$.as(wt.EditorFactory).registerEditorSerializer(Cs.ID,VP);$.as(ks.Configuration).registerConfiguration({properties:{"mergeEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:"advanced",markdownEnumDescriptions:[d(4439,"Uses the legacy diffing algorithm."),d(4440,"Uses the advanced diffing algorithm.")]},"mergeEditor.showDeletionMarkers":{type:"boolean",default:!0,description:"Controls if deletions in base or one of the inputs should be indicated by a vertical bar."}}});C(gP);C(cP);C(dP);C(aP);C(CP);C(lP);C(hP);C(uP);C(pP);C(mP);C(fP);C(bP);C(wP);C(vP);C(yP);C(SP);C(EP);C(kP);C(xP);C(_P);C(IP);C(DP);C(AP);$.as(Pc.Workbench).registerWorkbenchContribution(rf,3);Mt(Jl.ID,Jl,1);const MP=100;function aa(c,e){c==null||c.addImplementation(MP,"webview",t=>{var n;const o=t.get(Ds).activeWebview;if(o!=null&&o.isFocused)return e(o),!0;if((n=un())!=null&&n.classList.contains("action-menu-item")){const s=t.get(U);if(s.activeEditor instanceof Or)return e(s.activeEditor.webview),!0}return!1})}aa(Ny,c=>c.undo());aa(Fy,c=>c.redo());aa(yA,c=>c.selectAll());aa(Mp,c=>c.copy());aa(Lp,c=>c.paste());aa(Vp,c=>c.cut());const _b="preventDefaultContextMenuItems";Vp&&k.appendMenuItem(b.WebviewContext,{command:{id:Vp.id,title:d(4441,"Cut")},group:"5_cutcopypaste",order:1,when:y.not(_b)});Mp&&k.appendMenuItem(b.WebviewContext,{command:{id:Mp.id,title:d(4442,"Copy")},group:"5_cutcopypaste",order:2,when:y.not(_b)});Lp&&k.appendMenuItem(b.WebviewContext,{command:{id:Lp.id,title:d(4443,"Paste")},group:"5_cutcopypaste",order:3,when:y.not(_b)});const LP="workbench.action.openSettings",PP=d(4444,"Configure");let cf=class extends R{constructor(e,t){super();const o=[new RP,new BP].map(r=>new OP(t,r));o.forEach(r=>this._register(r));let n;const s=()=>{const r=e.activeTextEditorControl;if(r===n)return;n=r;const a=_i(r);o.forEach(l=>l.onActiveEditorChanged(a))};this._register(e.onDidActiveEditorChange(s)),s()}};cf=x([u(0,U),u(1,KC)],cf);class RP{constructor(){this.id="decoratorsLimitInfo",this.name=d(4445,"Color Decorator Status"),this.label=d(4446,"Color Decorators"),this.source=d(4447,"Color Decorators"),this.settingsId="editor.colorDecoratorsLimit"}getLimitReporter(e){var t;return(t=CA.get(e))==null?void 0:t.limitReporter}}class BP{constructor(){this.id="foldingLimitInfo",this.name=d(4448,"Folding Status"),this.label=d(4449,"Folding Ranges"),this.source=d(4450,"Folding"),this.settingsId="editor.foldingMaximumRegions"}getLimitReporter(e){var t;return(t=qC.get(e))==null?void 0:t.limitReporter}}class OP{constructor(e,t){this.languageStatusService=e,this.accessor=t}onActiveEditorChanged(e){this._indicatorChangeListener&&(this._indicatorChangeListener.dispose(),this._indicatorChangeListener=void 0);let t;return e&&(t=this.accessor.getLimitReporter(e)),this.updateStatusItem(t),t?(this._indicatorChangeListener=t.onDidChange(i=>{this.updateStatusItem(t)}),!0):!1}updateStatusItem(e){if(this._limitStatusItem&&(this._limitStatusItem.dispose(),this._limitStatusItem=void 0),e&&e.limited!==!1){const t={id:this.accessor.id,selector:"*",name:this.accessor.name,severity:me.Warning,label:this.accessor.label,detail:d(4451,"only {0} shown for performance reasons",e.limited),command:{id:LP,arguments:[this.accessor.settingsId],title:PP},accessibilityInfo:void 0,source:this.accessor.source,busy:!1};this._limitStatusItem=this.languageStatusService.addStatus(t)}}dispose(){this._limitStatusItem=void 0,this._indicatorChangeListener=void 0}}$.as(Pc.Workbench).registerWorkbenchContribution(cf,3);let df=class{constructor(e,t){this.configurationService=e,this.layoutService=t,this.disposables=new P,N.filter(e.onDidChangeConfiguration,n=>n.affectsConfiguration("workbench.sash.size"))(this.onDidChangeSize,this,this.disposables),this.onDidChangeSize(),N.filter(e.onDidChangeConfiguration,n=>n.affectsConfiguration("workbench.sash.hoverDelay"))(this.onDidChangeHoverDelay,this,this.disposables),this.onDidChangeHoverDelay()}onDidChangeSize(){const e=this.configurationService.getValue("workbench.sash.size"),t=Pd(e,4,20),i=Pd(e,1,8);this.layoutService.mainContainer.style.setProperty("--vscode-sash-size",t+"px"),this.layoutService.mainContainer.style.setProperty("--vscode-sash-hover-size",i+"px"),SA(t)}onDidChangeHoverDelay(){EA(this.configurationService.getValue("workbench.sash.hoverDelay"))}dispose(){this.disposables.dispose()}};df=x([u(0,F),u(1,Ky)],df);$.as(Pc.Workbench).registerWorkbenchContribution(df,3);$.as(ks.Configuration).registerConfiguration({...pa,properties:{"workbench.sash.size":{type:"number",default:qa?20:4,minimum:1,maximum:20,description:d(4452,"Controls the feedback area size in pixels of the dragging area in between views/editors. Set it to a larger value if you feel it's hard to resize views using the mouse.")},"workbench.sash.hoverDelay":{type:"number",default:300,minimum:0,maximum:2e3,description:d(4453,"Controls the hover feedback delay in milliseconds of the dragging area in between views/editors.")}}});new j("inSettingsEditor",!1);new j("inSettingsJSONEditor",!1);new j("inSettingsSearch",!1);new j("settingsTocRowFocus",!1);new j("settingRowFocus",!1);new j("inKeybindings",!1);new j("inKeybindingsSearch",!1);new j("keybindingFocus",!1);new j("whenFocus",!1);const wd="workbench.action.openKeyboardLayoutPicker";d(6256,"This setting controls a new feature that is still under refinement yet ready to use. Feedback is welcome.");d(6257,"This setting controls a new feature that is actively being developed and may be unstable. It is subject to change or removal.");var Cr;let Ql=(Cr=class extends R{constructor(e,t){super(),this.keyboardLayoutService=e,this.statusbarService=t,this.pickerElement=this._register(new Se);const i=d(4454,"Keyboard Layout"),o=this.keyboardLayoutService.getCurrentKeyboardLayout();if(o){const n=Rd(o),s=d(4455,"Layout: {0}",n.label);this.pickerElement.value=this.statusbarService.addEntry({name:i,text:s,ariaLabel:s,command:wd},"status.workbench.keyboardLayout",1)}this._register(this.keyboardLayoutService.onDidChangeKeyboardLayout(()=>{const n=this.keyboardLayoutService.getCurrentKeyboardLayout(),s=Rd(n);if(this.pickerElement.value){const r=d(4455,"Layout: {0}",s.label);this.pickerElement.value.update({name:i,text:r,ariaLabel:r,command:wd})}else{const r=d(4455,"Layout: {0}",s.label);this.pickerElement.value=this.statusbarService.addEntry({name:i,text:r,ariaLabel:r,command:wd},"status.workbench.keyboardLayout",1)}}))}},Cr.ID="workbench.contrib.keyboardLayoutPicker",Cr);Ql=x([u(0,eS),u(1,kn)],Ql);Mt(Ql.ID,Ql,1);const NP=[`// ${d(4456,"Defines the keyboard layout used in VS Code in the browser environment.")}`,`// ${d(4457,'Open VS Code and run "Developer: Inspect Key Mappings (JSON)" from Command Palette.')}`,"","// Once you have the keyboard layout info, please paste it below.",`
`].join(`
`);C(class extends A{constructor(){super({id:wd,title:w(4458,"Change Keyboard Layout"),f1:!0})}async run(c){const e=c.get(eS),t=c.get(Fe),i=c.get(F),o=c.get($y),n=c.get(U),s=c.get(Oe),r=e.getAllKeyboardLayouts(),a=e.getCurrentKeyboardLayout(),h=i.getValue("keyboard.layout")==="autodetect",p=r.map(v=>{const S=!h&&Tw(a,v),E=Rd(v);return{layout:v,label:[E.label,v&&v.isUserKeyboardLayout?"(User configured layout)":""].join(" "),id:v.text||v.lang||v.layout,description:E.description+(S?" (Current layout)":""),picked:!h&&Tw(a,v)}}).sort((v,S)=>v.label<S.label?-1:v.label>S.label?1:0);if(p.length>0){const v=be?"Mac":Xt?"Win":"Linux";p.unshift({type:"separator",label:d(4459,"Keyboard Layouts ({0})",v)})}const g={label:d(4460,"Configure Keyboard Layout")};p.unshift(g);const m={label:d(4461,"Auto Detect"),description:h?`Current: ${Rd(a).label}`:void 0,picked:h?!0:void 0};p.unshift(m);const f=await t.pick(p,{placeHolder:d(4462,"Select Keyboard Layout"),matchOnDescription:!0});if(f){if(f===m){i.updateValue("keyboard.layout","autodetect");return}if(f===g){const v=o.keyboardLayoutResource;return await s.stat(v).then(void 0,()=>s.createFile(v,QC.fromString(NP))).then(S=>{if(S)return n.openEditor({resource:S.resource,languageId:"jsonc",options:{pinned:!0}})},S=>{throw new Error(d(4463,"Unable to create '{0}' ({1}).",v.toString(),S))}),Promise.resolve()}i.updateValue("keyboard.layout",kA(f.layout))}}});var lf,ps;let eh=(ps=class extends uo{constructor(e,t,i,o,n){super(lf.ID,e,{openInternal:(s,r)=>this.openInternal(s,r)},t,i,n),this.editorResolverService=o}async openInternal(e,t){if(e instanceof Nr&&this.group.activeEditor){const i=this.group.activeEditor,o=i==null?void 0:i.toUntyped();if(!o)return;let n=await this.editorResolverService.resolveEditor({...o,options:{...t,override:dd.PICK}},this.group);if(n===2)n=void 0;else if(n===1)return;if(By(n))for(const s of n.editor instanceof Is?[n.editor.original,n.editor.modified]:[n.editor])s instanceof Nr&&(s.setForceOpenAsText(),s.setPreferredLanguageId(ob));await this.group.replaceEditors([{editor:i,replacement:(n==null?void 0:n.editor)??e,options:{...(n==null?void 0:n.options)??t}}])}}getTitle(){return this.input?this.input.getName():d(9967,"Binary File Viewer")}},lf=ps,ps.ID=_A,ps);eh=lf=x([u(1,Be),u(2,te),u(3,Mo),u(4,ie)],eh);class FP{canSerialize(e){return!0}serialize(e){const t=e,i=t.resource,o=t.preferredResource,n={resourceJSON:i.toJSON(),preferredResourceJSON:ot(i,o)?void 0:o,name:t.getPreferredName(),description:t.getPreferredDescription(),encoding:t.getEncoding(),modeId:t.getPreferredLanguageId()};return JSON.stringify(n)}deserialize(e,t){return e.invokeFunction(i=>{const o=JSON.parse(t),n=z.revive(o.resourceJSON),s=z.revive(o.preferredResourceJSON),r=o.name,a=o.description,l=o.encoding,h=o.modeId,p=i.get(Gc).createTextEditor({resource:n,label:r,description:a,encoding:l,languageId:h,forceFile:!0});return s&&p.setPreferredResource(s),p})}}var Sr;let th=(Sr=class extends R{constructor(e,t,i){super(),this.textEditorService=t,this.fileService=i,this._register(e.registerHandler(this))}handles(e){return e.typeId===Ap&&this.fileService.canHandleResource(e.resource)}handlesSync(e){return e.typeId===Ap&&this.fileService.hasProvider(e.resource)}isOpen(e,t){return this.handlesSync(e)?ot(e.resource,t.resource):!1}createEditor(e){return this.textEditorService.createTextEditor({resource:e.resource,forceFile:!0})}},Sr.ID="workbench.contrib.fileEditorWorkingCopyEditorHandler",Sr);th=x([u(0,wu),u(1,Gc),u(2,Oe)],th);var hf,gs;let ih=(gs=class extends bE{constructor(e,t,i,o,n,s,r,a,l,h,p,g,m,f,v,S,E,D,V){super(hf.ID,e,t,n,r,a,h,l,p,i),this.paneCompositeService=o,this.contextService=s,this.textFileService=g,this.explorerService=m,this.uriIdentityService=f,this.pathService=v,this.configurationService=S,this.preferencesService=E,this.hostService=D,this.filesConfigurationService=V,this._register(this.fileService.onDidFilesChange(M=>this.onDidFilesChange(M))),this._register(this.fileService.onDidRunOperation(M=>this.onDidRunOperation(M)))}onDidFilesChange(e){for(const t of e.rawDeleted)this.clearEditorViewState(t)}onDidRunOperation(e){e.operation===2&&e.target&&this.moveEditorViewState(e.resource,e.target.resource,this.uriIdentityService.extUri)}getTitle(){return this.input?this.input.getName():d(9968,"Text File Editor")}get input(){return this._input}async setInput(e,t,i,o){vi("code/willSetInputToTextFileEditor"),await super.setInput(e,t,i,o);try{const n=await e.resolve(t);if(o.isCancellationRequested)return;if(n instanceof sS)return this.openAsBinary(e,t);const s=n,r=ae(this.editorControl);if(r.setModel(s.textEditorModel),!DC(t==null?void 0:t.viewState)){const a=this.loadEditorViewState(e,i);a&&(t!=null&&t.selection&&(a.cursorState=[]),r.restoreViewState(a))}t&&Fc(t,r,1),r.updateOptions(this.getReadonlyConfiguration(s.isReadonly())),r.handleInitialized&&r.handleInitialized()}catch(n){await this.handleSetInputError(n,e,t)}vi("code/didSetInputToTextFileEditor")}async handleSetInputError(e,t,i){if(e.textFileOperationResult===0)return this.openAsBinary(t,i);if(e.fileOperationResult===0){const o=[];throw o.push(et({id:"workbench.files.action.openFolder",label:d(9969,"Open Folder"),run:async()=>this.hostService.openWindow([{folderUri:t.resource}],{forceNewWindow:!0})})),this.contextService.isInsideWorkspace(t.preferredResource)&&o.push(et({id:"workbench.files.action.reveal",label:d(9970,"Reveal Folder"),run:async()=>(await this.paneCompositeService.openPaneComposite(Aa,0,!0),this.explorerService.select(t.preferredResource,!0))})),Vw(d(9971,"The file is not displayed in the text editor because it is a directory."),o,{forceMessage:!0})}if(e.fileOperationResult===7){let o;throw e instanceof IA?o=d(9972,"The file is not displayed in the text editor because it is very large ({0}).",Jf.formatSize(e.size)):o=d(9973,"The file is not displayed in the text editor because it is very large."),DA(this.group,t,i,o,this.preferencesService)}throw e.fileOperationResult===1&&!this.filesConfigurationService.isReadonly(t.preferredResource)&&await this.pathService.hasValidBasename(t.preferredResource)?Vw(new Gy(d(9974,"The editor could not be opened because the file was not found."),1),[et({id:"workbench.files.action.createMissingFile",label:d(9975,"Create File"),run:async()=>(await this.textFileService.create([{resource:t.preferredResource}]),this.editorService.openEditor({resource:t.preferredResource,options:{pinned:!0}}))})],{allowDialog:!0}):e}openAsBinary(e,t){const i=this.configurationService.getValue("workbench.editor.defaultBinaryEditor"),o={...t,activation:Fo.PRESERVE};i&&i!==""&&i!==pt.id?this.doOpenAsBinaryInDifferentEditor(this.group,i,e,o):this.doOpenAsBinaryInSameEditor(this.group,i,e,o)}doOpenAsBinaryInDifferentEditor(e,t,i,o){this.editorService.replaceEditors([{editor:i,replacement:{resource:i.resource,options:{...o,override:t}}}],e)}doOpenAsBinaryInSameEditor(e,t,i,o){t===pt.id?(i.setForceOpenAsText(),i.setPreferredLanguageId(ob),o={...o,forceReload:!0}):i.setForceOpenAsBinary(),e.openEditor(i,o)}clearInput(){var e;super.clearInput(),(e=this.editorControl)==null||e.setModel(null)}createEditorControl(e,t){vi("code/willCreateTextFileEditorControl"),super.createEditorControl(e,t),vi("code/didCreateTextFileEditorControl")}tracksEditorViewState(e){return e instanceof Nr}tracksDisposedEditorViewState(){return!0}},hf=gs,gs.ID=xA,gs);ih=hf=x([u(1,Be),u(2,Oe),u(3,Gt),u(4,O),u(5,ei),u(6,ie),u(7,_s),u(8,U),u(9,te),u(10,Z),u(11,As),u(12,AA),u(13,Tc),u(14,Ac),u(15,F),u(16,bn),u(17,st),u(18,Qr)],ih);var Er;let oh=(Er=class extends R{constructor(e,t,i,o,n,s,r){super(),this.editorService=e,this.textFileService=t,this.lifecycleService=i,this.hostService=o,this.codeEditorService=n,this.filesConfigurationService=s,this.workingCopyEditorService=r,this.ensureDirtyFilesAreOpenedWorker=this._register(new Ty(a=>this.ensureDirtyTextFilesAreOpened(a),this.getDirtyTextFileTrackerDelay())),this.registerListeners()}registerListeners(){this._register(this.textFileService.files.onDidChangeDirty(e=>this.ensureDirtyFilesAreOpenedWorker.work(e.resource))),this._register(this.textFileService.files.onDidSaveError(e=>this.ensureDirtyFilesAreOpenedWorker.work(e.resource))),this._register(this.textFileService.untitled.onDidChangeDirty(e=>this.ensureDirtyFilesAreOpenedWorker.work(e.resource))),this._register(this.hostService.onDidChangeFocus(e=>e?this.reloadVisibleTextFileEditors():void 0)),this._register(this.lifecycleService.onDidShutdown(()=>this.dispose()))}getDirtyTextFileTrackerDelay(){return 800}ensureDirtyTextFilesAreOpened(e){this.doEnsureDirtyTextFilesAreOpened(jo(e.filter(t=>{if(!this.textFileService.isDirty(t))return!1;const i=this.textFileService.files.get(t);if(i!=null&&i.hasState(2)||t.scheme!==pe.untitled&&!(i!=null&&i.hasState(5))&&this.filesConfigurationService.hasShortAutoSaveDelay(t)||this.editorService.isOpened({resource:t,typeId:t.scheme===pe.untitled?Xi.ID:tS,editorId:pt.id}))return!1;const o=i??this.textFileService.untitled.get(t);return!(o&&this.workingCopyEditorService.findEditor(o))}),t=>t.toString()))}doEnsureDirtyTextFilesAreOpened(e){e.length&&this.editorService.openEditors(e.map(t=>({resource:t,options:{inactive:!0,pinned:!0,preserveFocus:!0}})))}reloadVisibleTextFileEditors(){jo(hi(this.codeEditorService.listCodeEditors().map(e=>{var o;const t=(o=e.getModel())==null?void 0:o.uri;if(!t)return;const i=this.textFileService.files.get(t);if(!(!i||i.isDirty()||!i.isResolved()))return i})),e=>e.resource.toString()).forEach(e=>this.textFileService.files.resolve(e.resource,{reload:{async:!0}}))}},Er.ID="workbench.contrib.textFileEditorTracker",Er);oh=x([u(0,U),u(1,As),u(2,wn),u(3,st),u(4,ia),u(5,Qr),u(6,wu)],oh);const GP="saveConflictResolutionContext",uf="conflictResolution",xb="learnMoreDirtyWriteError",xE=d(5504,"Use the actions in the editor tool bar to either undo your changes or overwrite the content of the file with your changes.");var kr;let nh=(kr=class extends R{constructor(e,t,i,o,n,s,r){super(),this.notificationService=e,this.textFileService=t,this.contextKeyService=i,this.editorService=o,this.instantiationService=s,this.storageService=r,this.messages=new Bt,this.conflictResolutionContext=new j(GP,!1,!0).bindTo(this.contextKeyService),this.activeConflictResolutionResource=void 0;const a=this._register(s.createInstance(iS));this._register(n.registerTextModelContentProvider(uf,a)),this.textFileService.files.saveErrorHandler=this,this.registerListeners()}registerListeners(){this._register(this.textFileService.files.onDidSave(e=>this.onFileSavedOrReverted(e.model.resource))),this._register(this.textFileService.files.onDidRevert(e=>this.onFileSavedOrReverted(e.resource))),this._register(this.editorService.onDidActiveEditorChange(()=>this.onActiveEditorChanged()))}onActiveEditorChanged(){let e=!1,t;const i=this.editorService.activeEditor;if(i instanceof Is){const o=i.original.resource;(o==null?void 0:o.scheme)===uf&&(e=!0,t=i.modified.resource)}this.conflictResolutionContext.set(e),this.activeConflictResolutionResource=t}onFileSavedOrReverted(e){const t=this.messages.get(e);t&&(t.close(),this.messages.delete(e))}onSaveError(e,t,i){var p;const o=e,n=t.resource;let s;const r=[],a=[];if(o.fileOperationResult===3)if(this.activeConflictResolutionResource&&ot(this.activeConflictResolutionResource,t.resource)){if(this.storageService.getBoolean(xb,-1))return;s=xE,r.push(this.instantiationService.createInstance(sh)),a.push(this.instantiationService.createInstance(pf))}else s=d(5505,"Failed to save '{0}': The content of the file is newer. Please compare your version with the file contents or overwrite the content of the file with your changes.",mt(n)),r.push(this.instantiationService.createInstance(gf,t)),r.push(this.instantiationService.createInstance(KP,t,i)),a.push(this.instantiationService.createInstance(ff));else{const g=o.fileOperationResult===5,m=g&&((p=o.options)==null?void 0:p.unlock),f=o.fileOperationResult===6,v=n.scheme===pe.file;v&&(f||m)?r.push(this.instantiationService.createInstance(WP,t,i,!!m)):g?r.push(this.instantiationService.createInstance(UP,t,i)):r.push(this.instantiationService.createInstance(HP,t,i)),r.push(this.instantiationService.createInstance(mf,t)),r.push(this.instantiationService.createInstance(zP,t)),g?m&&v?s=Xt?d(5506,"Failed to save '{0}': File is read-only. Select 'Overwrite as Admin' to retry as administrator.",mt(n)):d(5507,"Failed to save '{0}': File is read-only. Select 'Overwrite as Sudo' to retry as superuser.",mt(n)):s=d(5508,"Failed to save '{0}': File is read-only. Select 'Overwrite' to attempt to make it writeable.",mt(n)):v&&f?s=Xt?d(5509,"Failed to save '{0}': Insufficient permissions. Select 'Retry as Admin' to retry as administrator.",mt(n)):d(5510,"Failed to save '{0}': Insufficient permissions. Select 'Retry as Sudo' to retry as superuser.",mt(n)):s=d(5511,"Failed to save '{0}': {1}",mt(n),ja(e,!1))}const l={primary:r,secondary:a},h=this.notificationService.notify({id:`${lu(t.resource.toString())}`,severity:me.Error,message:s,actions:l});N.once(h.onDidClose)(()=>{Re(r),Re(a)}),this.messages.set(t.resource,h)}dispose(){super.dispose(),this.messages.clear()}},kr.ID="workbench.contrib.textFileSaveErrorHandler",kr);nh=x([u(0,He),u(1,As),u(2,K),u(3,U),u(4,Ts),u(5,O),u(6,ie)],nh);let sh=class extends de{constructor(e){super("workbench.files.action.resolveConflictLearnMore",d(5512,"Learn More")),this.openerService=e}async run(){await this.openerService.open(z.parse("https://go.microsoft.com/fwlink/?linkid=868264"))}};sh=x([u(0,It)],sh);let pf=class extends de{constructor(e){super("workbench.files.action.resolveConflictLearnMoreDoNotShowAgain",d(5513,"Don't Show Again")),this.storageService=e}async run(e){this.storageService.store(xb,!0,-1,0),e.dispose()}};pf=x([u(0,ie)],pf);let gf=class extends de{constructor(e,t,i,o,n){super("workbench.files.action.resolveConflict",d(5514,"Compare")),this.model=e,this.editorService=t,this.notificationService=i,this.instantiationService=o,this.productService=n}async run(){if(!this.model.isDisposed()){const e=this.model.resource,t=mt(e),i=d(5515,"{0} (in file)  {1} (in {2}) - Resolve save conflict",t,t,this.productService.nameLong);await iS.open(e,uf,i,this.editorService,{pinned:!0});const o={primary:[this.instantiationService.createInstance(sh)]},n=this.notificationService.notify({id:`${lu(e.toString())}`,severity:me.Info,message:xE,actions:o,neverShowAgain:{id:xb,isSecondary:!0}});N.once(n.onDidClose)(()=>Re(o.primary))}}};gf=x([u(1,U),u(2,He),u(3,O),u(4,ou)],gf);class WP extends de{constructor(e,t,i){super("workbench.files.action.saveModelElevated",i?Xt?d(5516,"Overwrite as Admin..."):d(5517,"Overwrite as Sudo..."):Xt?d(5518,"Retry as Admin..."):d(5519,"Retry as Sudo...")),this.model=e,this.options=t,this.triedToUnlock=i}async run(){this.model.isDisposed()||await this.model.save({...this.options,writeElevated:!0,writeUnlock:this.triedToUnlock,reason:1})}}class HP extends de{constructor(e,t){super("workbench.files.action.saveModel",d(5520,"Retry")),this.model=e,this.options=t}async run(){this.model.isDisposed()||await this.model.save({...this.options,reason:1})}}class zP extends de{constructor(e){super("workbench.files.action.revertModel",d(5521,"Revert")),this.model=e}async run(){this.model.isDisposed()||await this.model.revert()}}let mf=class extends de{constructor(e,t){super("workbench.files.action.saveModelAs",TA.value),this.model=e,this.editorService=t}async run(){if(!this.model.isDisposed()){const e=this.findEditor();e&&await this.editorService.save(e,{saveAs:!0,reason:1})}}findEditor(){let e;const t=this.editorService.findEditors(this.model.resource,{supportSideBySide:Ce.PRIMARY});for(const i of t)if(i.editor instanceof Nr){e=i;break}else e||(e=i);return e}};mf=x([u(1,U)],mf);class UP extends de{constructor(e,t){super("workbench.files.action.unlock",d(5522,"Overwrite")),this.model=e,this.options=t}async run(){this.model.isDisposed()||await this.model.save({...this.options,writeUnlock:!0,reason:1})}}class KP extends de{constructor(e,t){super("workbench.files.action.saveIgnoreModifiedSince",d(5522,"Overwrite")),this.model=e,this.options=t}async run(){this.model.isDisposed()||await this.model.save({...this.options,ignoreModifiedSince:!0,reason:1})}}let ff=class extends de{constructor(e){super("workbench.files.action.configureSaveConflict",d(5523,"Configure")),this.preferencesService=e}async run(){this.preferencesService.openSettings({query:"files.saveConflictResolution"})}};ff=x([u(0,bn)],ff);var _r;let rh=(_r=class extends R{constructor(e,t,i,o,n,s,r,a){super(),this.fileService=e,this.configurationService=t,this.contextService=i,this.notificationService=o,this.openerService=n,this.uriIdentityService=s,this.hostService=r,this.telemetryService=a,this.watchedWorkspaces=new Bt(l=>this.uriIdentityService.extUri.getComparisonKey(l)),this.registerListeners(),this.refresh()}registerListeners(){this._register(this.contextService.onDidChangeWorkspaceFolders(e=>this.onDidChangeWorkspaceFolders(e))),this._register(this.contextService.onDidChangeWorkbenchState(()=>this.onDidChangeWorkbenchState())),this._register(this.configurationService.onDidChangeConfiguration(e=>this.onDidChangeConfiguration(e))),this._register(this.fileService.onDidWatchError(e=>this.onDidWatchError(e)))}onDidChangeWorkspaceFolders(e){for(const t of e.removed)this.unwatchWorkspace(t);for(const t of e.added)this.watchWorkspace(t)}onDidChangeWorkbenchState(){this.refresh()}onDidChangeConfiguration(e){(e.affectsConfiguration("files.watcherExclude")||e.affectsConfiguration("files.watcherInclude"))&&this.refresh()}onDidWatchError(e){const t=e.toString();let i;t.indexOf("ENOSPC")>=0?(i="ENOSPC",this.notificationService.prompt(me.Warning,d(9976,"Unable to watch for file changes. Please follow the instructions link to resolve this issue."),[{label:d(9977,"Instructions"),run:()=>this.openerService.open(z.parse("https://go.microsoft.com/fwlink/?linkid=867693"))}],{sticky:!0,neverShowAgain:{id:"ignoreEnospcError",isSecondary:!0,scope:VA.WORKSPACE}})):t.indexOf("EUNKNOWN")>=0?(i="EUNKNOWN",this.notificationService.prompt(me.Warning,d(9978,"File changes watcher stopped unexpectedly. A reload of the window may enable the watcher again unless the workspace cannot be watched for file changes."),[{label:d(9979,"Reload"),run:()=>this.hostService.reload()}],{sticky:!0,priority:Os.SILENT})):t.indexOf("ETERM")>=0&&(i="ETERM"),i&&this.telemetryService.publicLog2("fileWatcherError",{reason:i})}watchWorkspace(e){var s,r;const t=[],i=this.configurationService.getValue({resource:e.uri});if((s=i.files)!=null&&s.watcherExclude)for(const a in i.files.watcherExclude)a&&i.files.watcherExclude[a]===!0&&t.push(a);const o=new Bt(a=>this.uriIdentityService.extUri.getComparisonKey(a));if(o.set(e.uri,e.uri),(r=i.files)!=null&&r.watcherInclude){for(const a of i.files.watcherInclude)if(a)if(MA(a)){const l=z.file(a).with({scheme:e.uri.scheme});this.uriIdentityService.extUri.isEqualOrParent(l,e.uri)&&o.set(l,l)}else{const l=e.toResource(a);o.set(l,l)}}const n=new P;for(const[,a]of o)n.add(this.fileService.watch(a,{recursive:!0,excludes:t}));this.watchedWorkspaces.set(e.uri,n)}unwatchWorkspace(e){this.watchedWorkspaces.has(e.uri)&&(Re(this.watchedWorkspaces.get(e.uri)),this.watchedWorkspaces.delete(e.uri))}refresh(){this.unwatchWorkspaces();for(const e of this.contextService.getWorkspace().folders)this.watchWorkspace(e)}unwatchWorkspaces(){for(const[,e]of this.watchedWorkspaces)e.dispose();this.watchedWorkspaces.clear()}dispose(){super.dispose(),this.unwatchWorkspaces()}},_r.ID="workbench.contrib.workspaceWatcher",_r);rh=x([u(0,Oe),u(1,F),u(2,ei),u(3,He),u(4,It),u(5,Tc),u(6,st),u(7,Be)],rh);var xr;let ah=(xr=class extends R{constructor(e,t,i){super(),this.activityService=e,this.workingCopyService=t,this.filesConfigurationService=i,this.badgeHandle=this._register(new Se),this.lastKnownDirtyCount=0,this.updateActivityBadge(),this.registerListeners()}registerListeners(){this._register(this.workingCopyService.onDidChangeDirty(e=>this.onWorkingCopyDidChangeDirty(e)))}onWorkingCopyDidChangeDirty(e){const t=e.isDirty();t&&!(e.capabilities&2)&&this.filesConfigurationService.hasShortAutoSaveDelay(e.resource)||(t||this.lastKnownDirtyCount>0)&&this.updateActivityBadge()}updateActivityBadge(){const e=this.lastKnownDirtyCount=this.workingCopyService.dirtyCount;e>0?this.badgeHandle.value=this.activityService.showViewContainerActivity(Aa,{badge:new yo(e,t=>t===1?d(9980,"1 unsaved file"):d(9981,"{0} unsaved files",e))}):this.badgeHandle.clear()}},xr.ID="workbench.contrib.dirtyFilesIndicator",xr);ah=x([u(0,Wt),u(1,Jy),u(2,Qr)],ah);var Ir;let ch=(Ir=class{constructor(e){e.registerFormatter({scheme:pe.file,formatting:{label:"${authority}${path}",separator:xa,tildify:!Xt,normalizeDriveLetter:Xt,authorityPrefix:xa+xa,workspaceSuffix:""}})}},Ir.ID="workbench.contrib.fileUriLabel",Ir);ch=x([u(0,mi)],ch);$.as(wt.EditorPane).registerEditorPane(Jt.create(ih,ih.ID,d(4464,"Text File Editor")),[new ce(Nr)]);$.as(wt.EditorPane).registerEditorPane(Jt.create(eh,eh.ID,d(4465,"Binary File Editor")),[new ce(Nr)]);$.as(wt.EditorFactory).registerEditorSerializer(tS,FP);Mt(th.ID,th,2);Mt(oh.ID,oh,1);Mt(nh.ID,nh,1);Mt(ch.ID,ch,1);Mt(rh.ID,rh,3);Mt(ah.ID,ah,1);LA.registerLanguage({id:ob,aliases:["Binary"],mimetypes:["text/x-code-binary"]});class Lu extends A{constructor(e,t){super(e),this.direction=t}run(e){const t=e.get(Y),i=e.get(Z),o=e.get(Gt),n=t.hasFocus("workbench.parts.editor"),s=t.hasFocus("workbench.parts.panel"),r=t.hasFocus("workbench.parts.sidebar"),a=t.hasFocus("workbench.parts.auxiliarybar");let l;if(n){if(this.navigateAcrossEditorGroup(this.toGroupDirection(this.direction),i))return;l=t.getVisibleNeighborPart("workbench.parts.editor",this.direction)}s&&(l=t.getVisibleNeighborPart("workbench.parts.panel",this.direction)),r&&(l=t.getVisibleNeighborPart("workbench.parts.sidebar",this.direction)),a&&(l=l=t.getVisibleNeighborPart("workbench.parts.auxiliarybar",this.direction)),l==="workbench.parts.editor"?this.navigateBackToEditorGroup(this.toGroupDirection(this.direction),i)||this.navigateToEditorGroup(this.direction===3?0:1,i):l==="workbench.parts.sidebar"?this.navigateToSidebar(t,o):l==="workbench.parts.panel"?this.navigateToPanel(t,o):l==="workbench.parts.auxiliarybar"&&this.navigateToAuxiliaryBar(t,o)}async navigateToPanel(e,t){if(!e.isVisible("workbench.parts.panel"))return!1;const i=t.getActivePaneComposite(1);if(!i)return!1;const o=i.getId(),n=await t.openPaneComposite(o,1,!0);return n||!1}async navigateToSidebar(e,t){if(!e.isVisible("workbench.parts.sidebar"))return!1;const i=t.getActivePaneComposite(0);if(!i)return!1;const o=i.getId();return!!await t.openPaneComposite(o,0,!0)}async navigateToAuxiliaryBar(e,t){if(!e.isVisible("workbench.parts.auxiliarybar"))return!1;const i=t.getActivePaneComposite(2);if(!i)return!1;const o=i.getId(),n=await t.openPaneComposite(o,2,!0);return n||!1}navigateAcrossEditorGroup(e,t){return this.doNavigateToEditorGroup({direction:e},t)}navigateToEditorGroup(e,t){return this.doNavigateToEditorGroup({location:e},t)}navigateBackToEditorGroup(e,t){if(!t.activeGroup)return!1;const i=this.toOppositeDirection(e);return t.findGroup({direction:i},t.activeGroup)?!1:(t.activeGroup.focus(),!0)}toGroupDirection(e){switch(e){case 1:return 1;case 2:return 2;case 3:return 3;case 0:return 0}}toOppositeDirection(e){switch(e){case 0:return 1;case 3:return 2;case 2:return 3;case 1:return 0}}doNavigateToEditorGroup(e,t){const i=t.findGroup(e,t.activeGroup);return i?(i.focus(),!0):!1}}C(class extends Lu{constructor(){super({id:"workbench.action.navigateLeft",title:w(4466,"Navigate to the View on the Left"),category:_.View,f1:!0},2)}});C(class extends Lu{constructor(){super({id:"workbench.action.navigateRight",title:w(4467,"Navigate to the View on the Right"),category:_.View,f1:!0},3)}});C(class extends Lu{constructor(){super({id:"workbench.action.navigateUp",title:w(4468,"Navigate to the View Above"),category:_.View,f1:!0},0)}});C(class extends Lu{constructor(){super({id:"workbench.action.navigateDown",title:w(4469,"Navigate to the View Below"),category:_.View,f1:!0},1)}});class IE extends A{constructor(e,t){super(e),this.focusNext=t}run(e){const t=e.get(Y),i=e.get(U);this.focusNextOrPreviousPart(t,i,this.focusNext)}findVisibleNeighbour(e,t,i){const o=Ar(),n=Yy(o);let s;if(n)switch(t){case"workbench.parts.editor":s="workbench.parts.statusbar";break;default:s="workbench.parts.editor"}else switch(t){case"workbench.parts.editor":s=i?"workbench.parts.panel":"workbench.parts.sidebar";break;case"workbench.parts.panel":s=i?"workbench.parts.auxiliarybar":"workbench.parts.editor";break;case"workbench.parts.auxiliarybar":s=i?"workbench.parts.statusbar":"workbench.parts.panel";break;case"workbench.parts.statusbar":s=i?"workbench.parts.activitybar":"workbench.parts.auxiliarybar";break;case"workbench.parts.activitybar":s=i?"workbench.parts.sidebar":"workbench.parts.statusbar";break;case"workbench.parts.sidebar":s=i?"workbench.parts.editor":"workbench.parts.activitybar";break;default:s="workbench.parts.editor"}return e.isVisible(s,o)||s==="workbench.parts.editor"?s:this.findVisibleNeighbour(e,s,i)}focusNextOrPreviousPart(e,t,i){var n;let o;(n=t.activeEditorPane)!=null&&n.hasFocus()||e.hasFocus("workbench.parts.editor")?o="workbench.parts.editor":e.hasFocus("workbench.parts.activitybar")?o="workbench.parts.activitybar":e.hasFocus("workbench.parts.statusbar")?o="workbench.parts.statusbar":e.hasFocus("workbench.parts.sidebar")?o="workbench.parts.sidebar":e.hasFocus("workbench.parts.auxiliarybar")?o="workbench.parts.auxiliarybar":e.hasFocus("workbench.parts.panel")&&(o="workbench.parts.panel"),e.focusPart(o?this.findVisibleNeighbour(e,o,i):"workbench.parts.editor",Ar())}}C(class extends IE{constructor(){super({id:"workbench.action.focusNextPart",title:w(4470,"Focus Next Part"),category:_.View,f1:!0,keybinding:{primary:64,weight:200}},!0)}});C(class extends IE{constructor(){super({id:"workbench.action.focusPreviousPart",title:w(4471,"Focus Previous Part"),category:_.View,f1:!0,keybinding:{primary:1088,weight:200}},!1)}});var qP='@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.mac .monaco-workbench-part,.mac.monaco-workbench-part{font-family:-apple-system,BlinkMacSystemFont,sans-serif}.mac:lang(zh-Hans) .monaco-workbench-part,.mac:lang(zh-Hans).monaco-workbench-part{font-family:-apple-system,BlinkMacSystemFont,PingFang SC,Hiragino Sans GB,sans-serif}.mac:lang(zh-Hant) .monaco-workbench-part,.mac:lang(zh-Hant).monaco-workbench-part{font-family:-apple-system,BlinkMacSystemFont,PingFang TC,sans-serif}.mac:lang(ja) .monaco-workbench-part,.mac:lang(ja).monaco-workbench-part{font-family:-apple-system,BlinkMacSystemFont,Hiragino Kaku Gothic Pro,sans-serif}.mac:lang(ko) .monaco-workbench-part,.mac:lang(ko).monaco-workbench-part{font-family:-apple-system,BlinkMacSystemFont,Apple SD Gothic Neo,Nanum Gothic,AppleGothic,sans-serif}.windows .monaco-workbench-part,.windows.monaco-workbench-part{font-family:Segoe WPC,Segoe UI,sans-serif}.windows:lang(zh-Hans) .monaco-workbench-part,.windows:lang(zh-Hans).monaco-workbench-part{font-family:Segoe WPC,Segoe UI,Microsoft YaHei,sans-serif}.windows:lang(zh-Hant) .monaco-workbench-part,.windows:lang(zh-Hant).monaco-workbench-part{font-family:Segoe WPC,Segoe UI,Microsoft Jhenghei,sans-serif}.windows:lang(ja) .monaco-workbench-part,.windows:lang(ja).monaco-workbench-part{font-family:Segoe WPC,Segoe UI,Yu Gothic UI,Meiryo UI,sans-serif}.windows:lang(ko) .monaco-workbench-part,.windows:lang(ko).monaco-workbench-part{font-family:Segoe WPC,Segoe UI,Malgun Gothic,Dotom,sans-serif}.linux .monaco-workbench-part,.linux.monaco-workbench-part{font-family:system-ui,Ubuntu,Droid Sans,sans-serif}.linux:lang(zh-Hans) .monaco-workbench-part,.linux:lang(zh-Hans).monaco-workbench-part{font-family:system-ui,Ubuntu,Droid Sans,Source Han Sans SC,Source Han Sans CN,Source Han Sans,sans-serif}.linux:lang(zh-Hant) .monaco-workbench-part,.linux:lang(zh-Hant).monaco-workbench-part{font-family:system-ui,Ubuntu,Droid Sans,Source Han Sans TC,Source Han Sans TW,Source Han Sans,sans-serif}.linux:lang(ja) .monaco-workbench-part,.linux:lang(ja).monaco-workbench-part{font-family:system-ui,Ubuntu,Droid Sans,Source Han Sans J,Source Han Sans JP,Source Han Sans,sans-serif}.linux:lang(ko) .monaco-workbench-part,.linux:lang(ko).monaco-workbench-part{font-family:system-ui,Ubuntu,Droid Sans,Source Han Sans K,Source Han Sans JR,Source Han Sans,UnDotum,FBaekmuk Gulim,sans-serif}.mac .monaco-workbench-part,.mac.monaco-workbench-part{--monaco-monospace-font:"SF Mono",Monaco,Menlo,Courier,monospace}.windows .monaco-workbench-part,.windows.monaco-workbench-part{--monaco-monospace-font:Consolas,"Courier New",monospace}.linux .monaco-workbench-part,.linux.monaco-workbench-part{--monaco-monospace-font:"Ubuntu Mono","Liberation Mono","DejaVu Sans Mono","Courier New",monospace}.monaco-workbench-part{color:var(--vscode-foreground);font-size:13px;line-height:1.4em}.monaco-workbench-part.web,.monaco-workbench.web .monaco-workbench-part{touch-action:none}.monaco-workbench.border:not(.fullscreen){border:1px solid var(--window-border-color);box-sizing:border-box}.monaco-workbench.border.mac{border-radius:5px}.monaco-workbench.border.mac.macos-bigsur-or-newer{border-radius:10px}.monaco-workbench-part img{border:0}.monaco-workbench-part label{cursor:pointer}.monaco-workbench-part a{text-decoration:none}.monaco-workbench-part p>a{text-decoration:var(--text-link-decoration)}.monaco-workbench.underline-links .monaco-workbench-part{--text-link-decoration:underline}.monaco-workbench.hc-black .monaco-workbench-part p>a,.monaco-workbench.hc-black.monaco-workbench-part p>a,.monaco-workbench.hc-light .monaco-workbench-part p>a,.monaco-workbench.hc-light.monaco-workbench-part p>a{text-decoration:underline!important}.monaco-workbench-part a:active{background-color:inherit;color:inherit}.monaco-workbench-part a.plain,.monaco-workbench-part a.plain.hover,.monaco-workbench-part a.plain:hover{color:inherit;text-decoration:none}.monaco-workbench-part input{color:inherit;font-family:inherit;font-size:100%}.monaco-workbench-part table{color:inherit;font-size:inherit}.monaco-workbench-part input::placeholder{color:var(--vscode-input-placeholderForeground)}.monaco-workbench-part input::-webkit-input-placeholder{color:var(--vscode-input-placeholderForeground)}.monaco-workbench-part input::-moz-placeholder{color:var(--vscode-input-placeholderForeground)}.monaco-workbench-part textarea::placeholder{color:var(--vscode-input-placeholderForeground)}.monaco-workbench-part textarea::-webkit-input-placeholder{color:var(--vscode-input-placeholderForeground)}.monaco-workbench-part textarea::-moz-placeholder{color:var(--vscode-input-placeholderForeground)}.monaco-workbench-part .pointer{cursor:pointer}.monaco-workbench.mac.monaco-font-aliasing-antialiased .monaco-workbench-part,.monaco-workbench.mac.monaco-font-aliasing-antialiased.monaco-workbench-part{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.monaco-workbench.mac.monaco-font-aliasing-none .monaco-workbench-part,.monaco-workbench.mac.monaco-font-aliasing-none.monaco-workbench-part{-webkit-font-smoothing:none;-moz-osx-font-smoothing:unset}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:192dpi){.monaco-workbench.mac.monaco-font-aliasing-auto .monaco-workbench-part,.monaco-workbench.mac.monaco-font-aliasing-auto.monaco-workbench-part{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}}.monaco-workbench-part .context-view{-webkit-app-region:no-drag}.monaco-workbench-part .codicon{color:var(--vscode-icon-foreground)}.monaco-workbench-part .codicon[class*=codicon-]{font-size:16px}.monaco-workbench-part .predefined-file-icon[class*=codicon-]:before{padding-left:3px;padding-right:3px;width:16px}.predefined-file-icon:before{font-family:codicon}.monaco-workbench:not(.file-icons-enabled) .predefined-file-icon[class*=codicon-]:before{content:unset!important}.monaco-workbench.modal-dialog-visible .monaco-progress-container.infinite .progress-bit{display:none}.monaco-workbench-part select{appearance:none;-webkit-appearance:none;-moz-appearance:none;border:1px solid;font-family:inherit}.monaco-workbench-part .select-container{position:relative}.monaco-workbench-part .select-container:after{bottom:0;content:var(--vscode-icon-chevron-down-content);font-family:var(--vscode-icon-chevron-down-font-family);font-size:16px;height:16px;line-height:16px;margin:auto;pointer-events:none;position:absolute;right:6px;top:0;width:16px}.monaco-workbench-part .synthetic-focus,.monaco-workbench-part [tabindex="-1"]:focus,.monaco-workbench-part [tabindex="0"]:focus,.monaco-workbench-part button:focus,.monaco-workbench-part input[type=button]:focus,.monaco-workbench-part input[type=checkbox]:focus,.monaco-workbench-part input[type=search]:focus,.monaco-workbench-part input[type=text]:focus,.monaco-workbench-part select:focus,.monaco-workbench-part textarea:focus{opacity:1;outline-color:var(--vscode-focusBorder);outline-offset:-1px;outline-style:solid;outline-width:1px}.monaco-workbench.hc-black .synthetic-focus input,.monaco-workbench.hc-light .synthetic-focus input{background:transparent}.monaco-workbench-part input[type=checkbox]:focus{outline-offset:2px}.monaco-workbench-part [tabindex="-1"]:active,.monaco-workbench-part [tabindex="0"]:active,.monaco-workbench-part input[type=button]:active,.monaco-workbench-part input[type=checkbox]:active,.monaco-workbench-part select:active{outline:0!important}.monaco-workbench.mac .monaco-workbench-part select:focus,.monaco-workbench.mac.monaco-workbench-part select:focus{border-color:transparent}.monaco-workbench .monaco-list:not(.element-focused):focus:before{content:"";height:100%;left:0;outline:1px solid;outline-color:var(--vscode-focusBorder);outline-offset:-1px;outline-style:solid;outline-width:1px;pointer-events:none;position:absolute;top:0;width:100%;z-index:15}.monaco-workbench .monaco-list .monaco-list-row .monaco-highlighted-label .highlight{color:var(--vscode-list-highlightForeground)}.monaco-workbench .monaco-list .monaco-list-row.focused .monaco-highlighted-label .highlight{color:var(--vscode-list-focusHighlightForeground)}.monaco-workbench-part .monaco-inputbox.error input[type=text]:focus,.monaco-workbench-part .monaco-inputbox.error.synthetic-focus,.monaco-workbench-part .monaco-inputbox.info input[type=text]:focus,.monaco-workbench-part .monaco-inputbox.info.synthetic-focus,.monaco-workbench-part .monaco-inputbox.warning input[type=text]:focus,.monaco-workbench-part .monaco-inputbox.warning.synthetic-focus,.monaco-workbench-part .monaco-list:focus,.monaco-workbench-part .synthetic-focus :focus{outline:0!important}.monaco-workbench-part a.monaco-link:hover{text-decoration:underline}.monaco-workbench-part .monaco-action-bar:not(.vertical) .action-label:not(.disabled):hover,.monaco-workbench-part .monaco-action-bar:not(.vertical) .monaco-dropdown-with-primary:not(.disabled):hover{background-color:var(--vscode-toolbar-hoverBackground)}.monaco-workbench-part .monaco-action-bar:not(.vertical) .action-item.active .action-label:not(.disabled),.monaco-workbench-part .monaco-action-bar:not(.vertical) .monaco-dropdown.active .action-label:not(.disabled){background-color:var(--vscode-toolbar-activeBackground)}.monaco-workbench-part .monaco-action-bar:not(.vertical) .action-item .action-label:hover:not(.disabled){outline:1px dashed var(--vscode-toolbar-hoverOutline);outline-offset:-1px}';we(qP,{});nu((c,e)=>{const t=Dy(c);e.addRule(`.monaco-workbench-part { background-color: ${t}; }`);const i=c.getColor(PA);if(i&&e.addRule(`.monaco-workbench-part ::selection { background-color: ${i}; }`),vt){const o=c.getColor(RA);if(o){const n="monaco-workbench-meta-theme-color";let s=ge.document.getElementById(n);s||(s=Zy(),s.name="theme-color",s.id=n),s.content=o.toString()}}Rf&&e.addRule(`
			.monaco-workbench-part.web {
				touch-action: none;
			}
			.monaco-workbench-part .monaco-editor .view-lines {
				user-select: text;
				-webkit-user-select: text;
			}
		`),qa&&BA()&&e.addRule(`.monaco-workbench-part { background-color: ${t}; }`)});var $P={"vs/workbench/contrib/debug/browser/media/continue-tb.png":new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIxSURBVHgB7dlNbtNAGMbxZyaUBSuOYHOBYlYskEhPwscFoKsqIBRHCCKyKNADQLkAR0jCiqBIhH6wAim+AWyAVKlnmDdKJUNTimT7nVm8v13SStGjfyauG0AIIYQQQgghBKPu5HGzO0kjBEahYjRUN3QbFk33MHMvkW6tP3iDQFQ6eDFW68GpF1HYzfN5p5WkGTzTYGAtbmu9Nni29/QWPGMZvBS56bu9/SevfZ5tzsELvmvXO1jZoTGms+Inka/atRduJY9SY3SMxSf2n5a1+5y1Wd7SraSVba0/jM+oHXPWZj3DIdRm/9DyXZt98Alftb0NJlT7ornEWtvrYLKZbOL61RtU+woYansfTDbUBtWectQOYvCJ/6nd0GtvUUJQg8l5tS1wGSUEN5gM7ABHmMXuvvomKnYBAaGhB18PMN4f3dfatN1b+FRNdwP/DSUEM3j7cFt9+DSKVMO8cg+bK37F7Tcvf5m8gxK8D6aqH/feq+P86N4ZVd2xRebO8x33x8o7lOT1DO982YGrGh9r23f1nq/4QFpWnV+rYizxUpiqjj+P1eznD5aqReyDqerIVdXnnNWZO6tpkn5HxdgGF6s2mKsWsQz2XbWo9sG9w96/qpJp3VWL6h1sVWTNvA/PVYvqLhy5kxmteJ6q3nVVh2DGfR2mqi+W19UhPOC8LHmrWlRpYQNNZ3H619PeqxbV8HVpN9LI29CK/iWThVCVBQ1PJ2mpm3UhhBBCCCFEOH4DIKF0k8sm4ZEAAAAASUVORK5CYII=",import.meta.url).href,"vs/workbench/contrib/debug/browser/media/pause-tb.png":new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADASURBVHgB7dmxDcIwEEbh3xGLMAIbgFiADWADKmqoEUPAJFY2YAOyBRUxR2GLjkgxzeV9VWLlFD+3lgAAAAAAmJ6gyg4x7ZW0KT8Iup5X4fZr7hiTntI2Je3ymj23l3U4qaKZKrNNLuwUl/n91asdMvc5+b7X3A6ozIZGD1XWaGII9o5g7wj2jmDvCPaOYO8I9o5g7wj2jmDvCPaO4NpGXG0k/UH1mwfbZmeVMb9acDdsrHwbv5bvAgAAAAAAo70BgzIgmYCKG/cAAAAASUVORK5CYII=",import.meta.url).href,"vs/workbench/contrib/debug/browser/media/restart-tb.png":new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASRSURBVHgB7ZlPTxtHGMafGUNsStWEQ6QcTauemha76r1GvZf0CzQ410iBcgiCNGVpipE5ADnkWuMec4hoP4BNbtzstBwqVWq2UlUhBTUoqgv2emf6jg1lcW1iZsdWkeYnGbyz9s48nnnn/TOAxWKxWCwWi8VisXQBQx9ZKS0lfCAR4bjsCzHSbOUuINwq/LKTdPbRY7QEOyXnShS4cnxdBfY7DXa59CDFI5EpJmVKBr7TYTRbkGxDiNrTuaTjogcMQIMoItOc84Xj65jEBv1LBz/TEMp5jt7GISVkNw+WSNEf+t6gXPkps+jXa3nTwjkMs1xajmd/XCqS2CKUWD2YFNIh4YVM6cENGMSoYCWWc1FszlQHpCzThG+cvOQW2VUn2x2NcP6EZnsBhtBa0u1QGxJIbDs7VaKkZPkqvM12tp57nsPu/u8pDjYJzm623FazvUCicff9+UWERGvTIvt0gjbc3Gwayzfe8lFXCJGeS97fQhcUZRHb5e04h++0ES4h2Mxscn4dITCzpJtLOH66jW0eCC/ZrVjFOBvHXHLOHXrzrUlfyJmW2wxcrjZWUgiMb1pNZH42Mf+Zrl+98+4dXB4cWRMCt1puMcnxLULQC8HugahPIyS3r99GDG/kyCRa7TaRfZa5CU3M2HAAmpW0ipyCbWGiqJWdFSbqXoGxk52fBl26O3bvQ2hgfIY5R0754OAr+roI6wyuDl+lTV58HWwjT5BQgQ006JENmyM9mkZkMEpujTzBCYxxTEADLcEx+Mo1lNEnYtGYpFj8h2AbB/8YGmgJ/oLs8ZLwxo9+dbeLVyiuVa+hDrYVbFPLGhr0NT3URUoH62WM1Pjgn8FmIby3z5tc/O9tWMGYo9a1kVz5Qgg2yYURLKpdZdSv5UIIfrzzGIdS/meT0ikOXAjBu9FdymNlKtjGNN2ikXxY5bMvKy8bO/7M9Rkzay9A5a8KIz4NuhQB8RQahJphtdRUrEvJ+3jNr6x54nBVtZlE/ZhAPRWMpaE8lcAmNAgl2PV+SUjhFSheLlCyOkXDmKa2pEN+0xR7r/5g9PzWlNClPLv/MzwIz2USY8G2Rr5KQQIMkH2WZQJMZWXxYBdkwQ40CR1pZUrfTEc4Wzv1UIYNJi/d+uiDihzXHFv25yxD1ae8V+Zabv06O3bvHWgSepeeT365TjF1MdhG15OCeU+2yxh9tPMI50HVtVZ3MoxVxVQbsSqc/AQhMBJLH5VnC/R2tOWWS10ssshAfhjD8sV7L+B0mHG1Oe292mO+qMd5RK5REtya/tFSFouzY/dDVS6NJQ/NMi0KNKqRNr2oI5T8gah9PzQ0tM+rVJCNNbv2pY+BQx816acox71Bad/nbUq9RsQ2h2KQM2Y6SJmM3KVacyMZIHtP0CDiZ5w7GRPb6A+GaYiGv3BUVw7zfBXAHNe1tVxQO3qWDy+XliapvvUVmi7lPP1IdfRCx6kPqfj30PQRas8LANnGYRibYJxNBJZtsN9/Q1F1JMMZ2/xbeN/16qy47wfidF4SF6fKM/w52ehv/ToQt1gsFovFYrFYLJau+AfCNPXR3BjmUgAAAABJRU5ErkJggg==",import.meta.url).href,"vs/workbench/contrib/debug/browser/media/run-with-debugging-tb.png":new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUfSURBVHgB7ZpNTxtHGMefmbWTktICh1x66bqXXqpit5ccKmHovSVfoGCukUqJUlEaqixKE0Qb4RQpxwL9Amn6BWJzKlKl2Ea5VJXqvfVYU1xsx96ZPI+9gxdjwtpmd1G0Pwn2bWZ3/vOft2cAICQkJCQkJCQkJCTkQrKau5tczRk6XBAYeAQJ5Rq/AxKSeGnip4zF8W9/gYDxRPBa7u40cP7riY8x2Las+spSwjAhIDh4gAA+2u2+lDDLeTSzVrg/AwHhieAz0FH69g9797aC6NtBCG4SlNv+CGYyK4RY6fJE99tt3xxeSnxnCMFj0Byxj2O7/dQPt31t0kuJJXNx/HbsFLdjfrgdSB8O0u3ABq2g3A5MsOJa/BNy+z3wye3ABU+ySXK7eElc8cXtwAUrFhILvrh9YQQTfrjtkWCeBSGug5AUHZnQI27c1nj0MfRBBDyARmBoFfQJXVOoCD1CbiPFdC4dq0LZ4BxDTQcSYBT6wJcmjfNuFvogIzNQhWoM4+oJOCcGdlgF+kxCnGodA+ySZCyLFjwZJODf+GsD/tjbnde4MLAJn3ATv/Mv9MFADtPggU0tQ7saqok1j1JO0+Dy4979NPQIubqaW41VKgcZCeJht6ZL9w9F/VPoA1c7HlSIncLO2PDQcOnW+7fko+ePoCz20yjsK1UGJIuvM/FUZ4wl1btpl+PqW++kUrEUPPjzAasflt+9FgdzkhknvvGs8DuzGPsStxCMLkLxFpg4eqewi+xAn7gSTDXOuXiKhc/yy5fn6oe1Gc5hy35cxELMOfspptcpPTSnESy+EJPRK0M7olbbxOaZFKI+hds8RZV+/fk6e1Gv6UwTm/YeWCeYTfxUFdaKkTBKMACu+jBj4mc86DQdYKHJNV09swtvOtPTKI2ip1B0UxT1ccxnUv7WdZTeN0Xn5HqjWpvHtHe69NVzcdWJK8FS8jkU3XSMCs1Uu8DA/u3oVZOaeBfMg0Ypi2mTdh9XFIVVn1MXtcNaPMIh3fWz5+SqE1eCHY4dNdMWDP6rl1Kn5eMatDxqU+xsEVpUyzPLKjn67Lm76qSnbdrmFESjcp9QX+6ck1v99/8043wePHLVSY/zMNcdFxLcY1es1DsfvFndl3UtksXTz7xy1Ykrwbi8ax6rcHh0DxUsWEIUzsorgcU1ztKd76L1MvHPxwxG8lZ2X1gfeeWqE1eCaS1LR860cWUsiXWzZMRuAMpgrkU+r1pl3X5kNH+15mPPhSpcCW4v3HtpxV3AFRi+a9q+MiAA3PZhp9JB/h41YI0NjivBOJVQXIoL7wj+kazVHyMaG4Ee4Uxe//rD5d8gQFwFDzRv0s8laGyre5aUk4Y0XpmP1secs1l13bAaZw5yXtNjtDRCg0uezhjwGTwbOy0lVcZufhcXKWyilR7yb4yOmBAwrgXTdFLjFQNP4/at0SEt+nitsMYyHU5vFbeoWsY4BQPQWndj543XyxWD4twgcTUA0Vr5wNo3GEi1zSIdeU1aLvKhIVNjGjZ1C0TlBa3I1qFdOe30gt0cjo6kb3xwA4LAlcNla3/mmFghb+JRhXcYCkb/hlrjWaNS26QjiqU1txJblCBXQI3QXK7T+yAgXDZpkbRPpBAwt5hYfog7ilM4r9K/NaipJo6R0Sw4XEUy5P4348srlK+d9uh9vuN6Tl0rfL8lBNtZStzePnaf/p+DsS9ol8OOeEyUmhdSbnSuxFZz93AzXU4sji+nICQkJCQkJCTkdecljQujDnl0mKoAAAAASUVORK5CYII=",import.meta.url).href,"vs/workbench/contrib/debug/browser/media/stepinto-tb.png":new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJRSURBVHgB7ZpNbtNAFMf/zzYCdnACcoQKLlCzYAviAvQIoFLEroUVUoXoCZpwBLYg6nKDcoLkBsmCL6luH/Ocpoqjtnbdea9S+n5SFI89mpmfx56PlwCO4ziO4ziODgRj1gtenU9/zGkfhmQwJmEUC6dMb3qCG4YLLzsuvOy48LLjwldl/Vt9JdWVzYLxuohT1jxRhd8U/CJJUWx85z6uwFbB9A/oE2NPykREoglLw5gxqBKEta7SIvsX2D1mrElJocx+TOkowi8LvhcauFM72UF6Qfa0pJD+JHUgAlGEd3KaUImcgUntwiWkz5FFKHNMhMdSByIQ7ZHefkIHXaWbZLdzOkAkog5aXaQtZadNUWDjK69whiIUXn/vZFCjulhCGFjJCmqb73OlG9CUFVSjDZeV1pYV1MMrbaUtZAWTeFKTtJWsYLJ5mBu9x4vXLGUF04jhSU/vzXpapi9LWcE8Lv224F5ZoifHWYbRh5xGcJxomD7Ssqmn26FOnqY5RbWu3MrtmmFWU1gz4xeQ0xGehoHqgZzjBD/CNPHlDjB8ZyRtUovI/glfYTO/ecZlmZZe3QU+W0irz8MNssJ9iWr8LrEKA9SFQ2yqd4HsDKIUu/KOa6MuXB7jWcusPYte1l9aElZaZ02mCxJN1IXD49w6FhWCAWMoo9/DjP22WcNo/RPKqAsfpZXwsCFbWJFgYLGuVheuwqslnp+1NTxBhuZhCryHAWb74YzwMBzKH1p49qluQujZQ8Ijq13TtW0Pw+9Gk8NbGMUKsDuO4ziO4zjXzX/ncxVIRDwWzgAAAABJRU5ErkJggg==",import.meta.url).href,"vs/workbench/contrib/debug/browser/media/stepout-tb.png":new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJSSURBVHgB7ZpRbtNAEIb/cYIAqQ/tCQg3qOACOEi8Aj1BOQIPEbw14amoIHECKBcA8cpDDTeAEyQ3oA9AK9XpdsbxSlGUNk60M62i+aRIlr3S5vPYuzvjBRzHcRzHcRwdCMa8KkKnBDpy3AZGb3MawRBT4V4RtkNAwZ1u1qeOUSI/eEK/YEQGI+bICpsc5qPe97ANI0wifInsNH840l2LSKsLN5CNmEirCi8hG1GXVhNeQTaiKq0yaF0mG4DPs23nnNvSHMiSC18l+65Lu7PtNwgvLKWTCi8rK/RzCpbSyYRXkY1YSqeLcMDXWdnzgMEi2Ugtvcs3bTBzSaS/IBHphEs8D7JUrBHZ94+pjyVgaWxk6E9LBxm1CTtIRDJhmUaI18UivYpsZFpaZIl4isrTTVFJBy2RLgn3V5WNROk24UFKWcE8PewdceymOOiS6X8wy5ZuCi687rjwuuPC604b9gRcI+bCYYwuHEcN03XsXhFAt7nP+i0OLQQ6mSQLVpj11GfZv0BOYzzldOGenAsZfvI08e0OMBwYSZv0IrL/UeW4e3MuS8778i6Xdyyk1efhBbLCFl/79K/EIxigLnzKn0avkI0QtfBR3nFt1IXLczxr2LRjEWX9pSWhcYmVssmHck3UhflxPm7aNiOuUCqjH+GAH02b8mj9G8qoC49blfBwQTNekeBw32C/h7rwh5xkH8dOVVCfjwzNwxbwBgaY5MNSr5YaMx8WmAhWv/qrwuEZ4eG+0W4e87r0a9m2VKJDPJid3cKoegIcx3Ecx3GcNeAC4UEBaURTA6MAAAAASUVORK5CYII=",import.meta.url).href,"vs/workbench/contrib/debug/browser/media/stepover-tb.png":new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMnSURBVHgB7ZldTttAFIXPOA5Sfx5YgmEDzQ6agPpcdgB0BVQ09JHQp7a0aruBClZA+9qWOKygdAONl5BKhf4AuT0DQXKCG8cTzwik+SQLezzGc3zv3Dt3Ang8Ho/H4/F4PB4TFG4IrVjQA6J029uGSlAQp4LXYokqqUEHQO8ESDjwXt6zT2NRfUE/1SQnCvNFRYewiBY4AyyLoC5ATQlmR/tUeTTbkkDQUQE+vmyoD7CIFcHrsdQDwSYuhJ6T40oRO6zww6xo8Uphh9bffW7gsnkEKBG6XcQBxxQb87IOMyIKb50J2huxLKNkSrOwtioHuUdLzuZ0TVLn0Zh+cxS+s7Ev9/4GeMbrHyiBUgRrS+jBZd2jS/d47x3DTecsxOFogGp+khoqqPH0Id166crzCo+rnBp/FBarmJ6po/TGF1mSAHsZt/RcbDEI7WICdNr5TYuf0p05qCxXPuRRS10bRempBOs5Szf+esWNadGTAK1J0s0omxR+dIqGquA9xru8keCpghbzYjwqlm1b24tqzUSsZquhcDdEHCgsYHi+l4Kx4Oa+rGDEAlrs60XVwpS0KPoW0NWidQxAiZgHLcU8O0xiIjZryagZqJSqwhanyBuUhJHgdQYqjAyS1mjAgGN+uhlODRk/XzMJT8+fSQo8YubSnLdD6YOD7bywsCrKIQnD4nPcTHCA+0P/RGXnYIt0K5zfJkvPwoJZEOioHKXbaOFvcIexWE3hPNyMuTJi7k23bS+oG1NXFw5aun7lUm/18lpJuWnD4/F4xuE8uupq6PKlevtHFwsucfY2LfQX39fXWz/9wcIlwAEXAh0WCuJKuJO3nNe4YI0rmTVuImdYvROi40J0qZt4/2Mgto3sAiFisd9m0V+HA6x/Um3dY0EX+dVQ9zZ3MGxb2bqFjy62a6MJukY/HVjZumDpTyxCsQqbtK8x1gUXcFAZHFaxH7S4H22lryFO0hJ/fvnOP3M53bosM+dhGSdpiXn2Eca7q+hcDAc4EfzqgepQkN5n1ukpLVyfd3mvwT4HcIDztfSTz1LHZTTmnNUfAx6Px+PxeDwej8dz3fgHnygaDf8DyT4AAAAASUVORK5CYII=",import.meta.url).href,"vs/workbench/contrib/debug/browser/media/stop-tb.png":new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADLSURBVHgB7dkxDoJAEEbhf4ml3gFvwpGsNFSWxEqPxEmMdzDRRHRXSGjsZIEQhvclhJaXHZodCQAAAAD+4BThXuwyeWWaUqJyk19KdbRSjDrWJe6oCQUfmlepjhItzOKC40b6122dn7ca2bM4uI9eXj0x0tYRbB3B1hFsHcHWEWwdwdYRbB3B1hFsHcHWEWzdEBfxepz2UUu5LqrwdklQb0MEp95XV41sqFEc5IRrqWZirv9waJ/O4k64Xka3+9mphOYbBAAAAABj+QJmPCRPyVBXxgAAAABJRU5ErkJggg==",import.meta.url).href};oS($P);let ya;oS({"vs/workbench/contrib/webview/browser/pre/service-worker.js":()=>rd(new URL("/assets/service-worker-BBB24s7K.js",import.meta.url).href,ya),"vs/workbench/contrib/webview/browser/pre/index.html":()=>rd(new URL("/assets/index-DdeTdO2g.html",import.meta.url).href,ya),"vs/workbench/contrib/webview/browser/pre/index-no-csp.html":()=>rd(new URL("/assets/index-no-csp-mYBqtx9H.html",import.meta.url).href,ya),"vs/workbench/contrib/webview/browser/pre/fake.html":()=>rd(new URL("/assets/fake-DXkbmQ09.html",import.meta.url).href,ya)});zA(async c=>{c.get(tt)});function pO(c){return c!=null&&(ya=c),{...EM(),[it.toString()]:new ce(Qg,[],!1),[Te.toString()]:new ce(Rg,[],!0),[Wt.toString()]:new ce(tg,[],!0),[Gt.toString()]:new ce(jg,[],!0),[ia.toString()]:new ce(UA,[],!0),[Gc.toString()]:new ce(KA,[],!1),[Mo.toString()]:new ce(Bg,[],!1),[Qi.toString()]:new ce(x1,[],!0),[Ec.toString()]:new ce(OA,[],!0),[LC.toString()]:new ce(Ng,[],!0),[tt.toString()]:new ce(_l,[],!1),[UC.toString()]:new ce(Wg,[],!0),[Ds.toString()]:new ce(qg,[],!0),[kC.toString()]:new ce(Z0,[],!0),[eb.toString()]:new ce(NA,[],!0),[Ic.toString()]:new ce($g,[],!0),[Ff.toString()]:new ce(Xg,[],!0),[FA.toString()]:new ce(aM,[],!0),[GA.toString()]:new ce(WA,[],!0),[HA.toString()]:new ce(cM,[],!0)}}export{ng as A,jw as B,Zp as C,Uw as E,JA as M,og as P,Qp as S,Hd as T,tg as a,On as b,rb as c,qo as d,cr as e,Nw as f,pO as g,Ow as h,BS as i,Ss as j,Xp as k,zL as l,UL as m,XB as n,l1 as o,ZB as p};
